{"version":3,"sources":["img sync /^/icon/-.*/.svg$","img/icon-edit.svg","img/icon-market.svg","views/gmx-test/img/ddl/ic_eth_40.svg","img sync /^/icon/-.*_sm/.svg$","views/gmx-test/img/ddl sync /^/ic_.*_40/.svg$","views/options/img/ddl/ic_eth_40.svg","img/icon-wallet.svg","img/icon-link.svg","views/gmx-test/img/DROP_DOWN.svg","views/gmx-test/img/ddl/icon_dollar.svg","views/gmx-test/img/ddl/icon_dollar_active.svg","views/gmx-test/img/ddl/icon_market.svg","views/gmx-test/img/ddl/icon_market_active.svg","views/gmx-test/img/ddl/icon_trigger.svg","views/gmx-test/img/ddl/icon_trigger_active.svg","views/gmx-test/img/ddl/icon_withdraw.svg","views/gmx-test/img/ddl/icon_withdraw_active.svg","views/gmx-test/img/ddl/long.svg","views/gmx-test/img/ddl/long_active.svg","views/gmx-test/img/ddl/short.svg","views/gmx-test/img/ddl/short_active.svg","views/gmx-test/img/gmx-logo-with-name.svg","views/gmx-test/img/position-share-bg.png","views/gmx-test/img/swap.svg","img/icon-bin.svg","img/icon-btn-up.svg","img/icon-calendar.svg","img/icon-call-active.svg","img/icon-call.svg","img/icon-down-small.svg","img/icon-put-active.svg","img/icon-put.svg","img/icon-settings.svg","views/gmx-test/img/ddl/ic_btc_40.svg","views/gmx-test/img/ddl/ic_dai_40.svg","views/gmx-test/img/ddl/ic_frax_40.svg","views/gmx-test/img/ddl/ic_link_40.svg","views/gmx-test/img/ddl/ic_uni_40.svg","views/gmx-test/img/ddl/ic_usdc_40.svg","views/gmx-test/img/ddl/ic_usdt_40.svg","views/gmx-test/img/ddl/ic_weth_40.svg","views/gmx-test/img/ic_arbitrum_24.svg","views/gmx-test/img/ic_avalanche_24.svg","views/gmx-test/img/ic_avax_24.svg","views/gmx-test/img/ic_btc.b_24.svg","views/gmx-test/img/ic_btc_24.svg","views/gmx-test/img/ic_busd_24.svg","views/gmx-test/img/ic_dai_24.svg","views/gmx-test/img/ic_eth_24.svg","views/gmx-test/img/ic_frax_24.svg","views/gmx-test/img/ic_glp_24.svg","views/gmx-test/img/ic_gmx_24.svg","views/gmx-test/img/ic_link_24.svg","views/gmx-test/img/ic_mim_24.svg","views/gmx-test/img/ic_settings_24.svg","views/gmx-test/img/ic_tether_24.svg","views/gmx-test/img/ic_uni_24.svg","views/gmx-test/img/ic_usdc.e_24.svg","views/gmx-test/img/ic_usdc_24.svg","views/gmx-test/img/ic_usdt_24.svg","views/gmx-test/img/ic_wallet_24.svg","views/gmx-test/img/ic_wavax_24.svg","views/gmx-test/img/ic_weth_24.svg","img/icon-GMX.svg","img/icon-GMX_full.svg","img/icon-GMX_sm.svg","img/icon-GNS.svg","img/icon-GNS_full.svg","img/icon-GNS_sm.svg","img/icon-Hegic_full.svg","img/icon-Hegic_sm.svg","img/icon-Lyra_full.svg","img/icon-Lyra_sm.svg","img/icon-aggregator.svg","img/icon-date.svg","img/icon-down-small-white.svg","views/options/img/ddl/ic_btc_40.svg","views/options/img/ddl/ic_dai_40.svg","views/options/img/ddl/ic_frax_40.svg","views/options/img/ddl/ic_link_40.svg","views/options/img/ddl/ic_uni_40.svg","views/options/img/ddl/ic_usdc_40.svg","views/options/img/ddl/ic_usdt_40.svg","views/options/img/ddl/ic_weth_40.svg","views/options/img/ddl sync /^/ic_.*_40/.svg$","views/gmx-test/img sync /^/.*$","views/gmx-test/img/Anyswap.png","views/gmx-test/img/Anyswap.svg","views/gmx-test/img/Artwork.svg","views/gmx-test/img/Artwork_gmx.svg","views/gmx-test/img/Banxa.png","views/gmx-test/img/Hop.png","views/gmx-test/img/Hop.svg","views/gmx-test/img/Hop_dark.png","views/gmx-test/img/Hop_dark.svg","views/gmx-test/img/Synapse.png","views/gmx-test/img/Synapse.svg","views/gmx-test/img/binance.png","views/gmx-test/img/bscscan.png","views/gmx-test/img/btn_big_arbitrum.png","views/gmx-test/img/btn_big_avalanche.png","views/gmx-test/img/btn_big_bsc.png","views/gmx-test/img/btn_big_purchasegmx.png","views/gmx-test/img/btn_big_purchasegmx.svg","views/gmx-test/img/buy_gmx.svg","views/gmx-test/img/buy_gmx_bond.svg","views/gmx-test/img/buy_transfer_eth.svg","views/gmx-test/img/coinbaseWallet.png","views/gmx-test/img/coingecko.png","views/gmx-test/img/cross.svg","views/gmx-test/img/ddl/chevron-down.svg","views/gmx-test/img/ddl/chevron-down_sm.svg","views/gmx-test/img/ddl/ic_btc_40.png","views/gmx-test/img/ddl/ic_dai_40.png","views/gmx-test/img/ddl/ic_eth_40.png","views/gmx-test/img/ddl/ic_frax_40.png","views/gmx-test/img/ddl/ic_link_40.png","views/gmx-test/img/ddl/ic_uni_40.png","views/gmx-test/img/ddl/ic_usdc_40.png","views/gmx-test/img/ddl/ic_usdt_40.png","views/gmx-test/img/ddl/ic_weth_40.png","views/gmx-test/img/ddl/icon_arrow.svg","views/gmx-test/img/ddl/icon_check.svg","views/gmx-test/img/ddl/icon_close.svg","views/gmx-test/img/ddl/icon_close_sm.svg","views/gmx-test/img/ddl/icon_close_toast.svg","views/gmx-test/img/ddl/lock.svg","views/gmx-test/img/flag_en.svg","views/gmx-test/img/flag_es.svg","views/gmx-test/img/flag_fr.svg","views/gmx-test/img/flag_ja.svg","views/gmx-test/img/flag_ko.svg","views/gmx-test/img/flag_ru.svg","views/gmx-test/img/flag_zh.svg","views/gmx-test/img/glp_icon.svg","views/gmx-test/img/gmx-logo-final-white-small.png","views/gmx-test/img/gmx-logo-final-white.png","views/gmx-test/img/gmx-logo-final.png","views/gmx-test/img/gmx-logo-glow.png","views/gmx-test/img/gmx_logo.svg","views/gmx-test/img/graphite-01.png","views/gmx-test/img/ic-communityproject.svg","views/gmx-test/img/ic_arbitrum_16.svg","views/gmx-test/img/ic_arbitrum_96.svg","views/gmx-test/img/ic_arbitrum_hover_16.svg","views/gmx-test/img/ic_arrowleft16.svg","views/gmx-test/img/ic_arrowright16.svg","views/gmx-test/img/ic_avalanche_16.svg","views/gmx-test/img/ic_avalanche_96.svg","views/gmx-test/img/ic_avax_30.svg","views/gmx-test/img/ic_avax_40.svg","views/gmx-test/img/ic_banxa.svg","views/gmx-test/img/ic_binance_logo.svg","views/gmx-test/img/ic_bsc.svg","views/gmx-test/img/ic_bsc_96.svg","views/gmx-test/img/ic_btc.b_40.svg","views/gmx-test/img/ic_btc_40.svg","views/gmx-test/img/ic_buy_glp.svg","views/gmx-test/img/ic_cash.png","views/gmx-test/img/ic_cash.svg","views/gmx-test/img/ic_checked.svg","views/gmx-test/img/ic_coingecko_16.svg","views/gmx-test/img/ic_coingecko_hover_16.svg","views/gmx-test/img/ic_convert_down.svg","views/gmx-test/img/ic_copy_16.svg","views/gmx-test/img/ic_cost.svg","views/gmx-test/img/ic_dai_40.svg","views/gmx-test/img/ic_discord.svg","views/gmx-test/img/ic_eth_40.svg","views/gmx-test/img/ic_frax_40.svg","views/gmx-test/img/ic_github.svg","views/gmx-test/img/ic_glp_40.svg","views/gmx-test/img/ic_glp_custom.svg","views/gmx-test/img/ic_gmx.svg","views/gmx-test/img/ic_gmx_30.svg","views/gmx-test/img/ic_gmx_40.svg","views/gmx-test/img/ic_gmx_64.svg","views/gmx-test/img/ic_gmx_arbitrum.svg","views/gmx-test/img/ic_gmx_avax.svg","views/gmx-test/img/ic_gmx_big.svg","views/gmx-test/img/ic_gmx_custom.svg","views/gmx-test/img/ic_gmx_footer.svg","views/gmx-test/img/ic_hop.svg","views/gmx-test/img/ic_info.svg","views/gmx-test/img/ic_language24.svg","views/gmx-test/img/ic_link_40.svg","views/gmx-test/img/ic_liquidity.svg","views/gmx-test/img/ic_medium.svg","views/gmx-test/img/ic_menu_dots.svg","views/gmx-test/img/ic_metamask_16.svg","views/gmx-test/img/ic_metamask_hover_16.svg","views/gmx-test/img/ic_mim_40.svg","views/gmx-test/img/ic_multiswap.svg","views/gmx-test/img/ic_new_link_16.svg","views/gmx-test/img/ic_olympus.svg","views/gmx-test/img/ic_olympus_arbitrum.svg","views/gmx-test/img/ic_selector_dropdowns.svg","views/gmx-test/img/ic_settings_16.svg","views/gmx-test/img/ic_sign in_16.svg","views/gmx-test/img/ic_sign_out_16.svg","views/gmx-test/img/ic_simpleswaps.svg","views/gmx-test/img/ic_stats.svg","views/gmx-test/img/ic_stats_big.svg","views/gmx-test/img/ic_synapse.svg","views/gmx-test/img/ic_telegram.svg","views/gmx-test/img/ic_tokens.svg","views/gmx-test/img/ic_totaluser.svg","views/gmx-test/img/ic_trading.svg","views/gmx-test/img/ic_transfer_avax.svg","views/gmx-test/img/ic_twitter.svg","views/gmx-test/img/ic_uni_40.svg","views/gmx-test/img/ic_usdc.e_40.svg","views/gmx-test/img/ic_usdc_40.svg","views/gmx-test/img/ic_usdt_40.svg","views/gmx-test/img/ic_wavax_40.svg","views/gmx-test/img/ic_weth_40.svg","views/gmx-test/img/lg_arbitrum.svg","views/gmx-test/img/logo_GMX.svg","views/gmx-test/img/logo_GMX_small.svg","views/gmx-test/img/long.svg","views/gmx-test/img/metamask-text.svg","views/gmx-test/img/metamask.png","views/gmx-test/img/page-not-found.svg","views/gmx-test/img/short.svg","views/gmx-test/img/trading.jpg","views/gmx-test/img/wallet-connect-text.svg","views/gmx-test/img/walletconnect-circle-blue.svg","views/gmx-test/img/wave-01.png","views/gmx-test/img/wave-02.png","views/gmx-test/img sync /^/ic_.*_24/.svg$","img/icon-BTC.svg","img/icon-ETH.svg","img/icon-GNS_v2.svg","img/icon-Hegic.svg","img/icon-Lyra.svg","img/icon-Premia.svg","img/icon-WBTC.svg","img/icon-accordion-arrow.svg","img/icon-dollar.svg","img/icon-down.svg","img/icon-hint.svg","img/icon-medium.svg","img/icon-repay.svg","img/icon-sort.svg","img/icon-usdc.svg","img/icon-user.svg","views/options/img sync /^/.*$","views/options/img/Anyswap.png","views/options/img/Anyswap.svg","views/options/img/Artwork.svg","views/options/img/Artwork_gmx.svg","views/options/img/Banxa.png","views/options/img/DROP_DOWN.svg","views/options/img/Hop.png","views/options/img/Hop.svg","views/options/img/Hop_dark.png","views/options/img/Hop_dark.svg","views/options/img/Synapse.png","views/options/img/Synapse.svg","views/options/img/binance.png","views/options/img/bscscan.png","views/options/img/btn_big_arbitrum.png","views/options/img/btn_big_avalanche.png","views/options/img/btn_big_bsc.png","views/options/img/btn_big_purchasegmx.png","views/options/img/btn_big_purchasegmx.svg","views/options/img/buy_gmx.svg","views/options/img/buy_gmx_bond.svg","views/options/img/buy_transfer_eth.svg","views/options/img/coinbaseWallet.png","views/options/img/coingecko.png","views/options/img/cross.svg","views/options/img/ddl/chevron-down.svg","views/options/img/ddl/chevron-down_sm.svg","views/options/img/ddl/ic_btc_40.png","views/options/img/ddl/ic_dai_40.png","views/options/img/ddl/ic_eth_40.png","views/options/img/ddl/ic_frax_40.png","views/options/img/ddl/ic_link_40.png","views/options/img/ddl/ic_uni_40.png","views/options/img/ddl/ic_usdc_40.png","views/options/img/ddl/ic_usdt_40.png","views/options/img/ddl/ic_weth_40.png","views/options/img/ddl/icon_arrow.svg","views/options/img/ddl/icon_check.svg","views/options/img/ddl/icon_close.svg","views/options/img/ddl/icon_close_sm.svg","views/options/img/ddl/icon_close_toast.svg","views/options/img/ddl/icon_dollar.svg","views/options/img/ddl/icon_dollar_active.svg","views/options/img/ddl/icon_market.svg","views/options/img/ddl/icon_market_active.svg","views/options/img/ddl/icon_trigger.svg","views/options/img/ddl/icon_trigger_active.svg","views/options/img/ddl/icon_withdraw.svg","views/options/img/ddl/icon_withdraw_active.svg","views/options/img/ddl/lock.svg","views/options/img/ddl/long.svg","views/options/img/ddl/long_active.svg","views/options/img/ddl/short.svg","views/options/img/ddl/short_active.svg","views/options/img/flag_en.svg","views/options/img/flag_es.svg","views/options/img/flag_fr.svg","views/options/img/flag_ja.svg","views/options/img/flag_ko.svg","views/options/img/flag_ru.svg","views/options/img/flag_zh.svg","views/options/img/glp_icon.svg","views/options/img/gmx-logo-final-white-small.png","views/options/img/gmx-logo-final-white.png","views/options/img/gmx-logo-final.png","views/options/img/gmx-logo-glow.png","views/options/img/gmx-logo-with-name.svg","views/options/img/gmx_logo.svg","views/options/img/graphite-01.png","views/options/img/ic-communityproject.svg","views/options/img/ic_arbitrum_16.svg","views/options/img/ic_arbitrum_24.svg","views/options/img/ic_arbitrum_96.svg","views/options/img/ic_arbitrum_hover_16.svg","views/options/img/ic_arrowleft16.svg","views/options/img/ic_arrowright16.svg","views/options/img/ic_avalanche_16.svg","views/options/img/ic_avalanche_24.svg","views/options/img/ic_avalanche_96.svg","views/options/img/ic_avax_24.svg","views/options/img/ic_avax_30.svg","views/options/img/ic_avax_40.svg","views/options/img/ic_banxa.svg","views/options/img/ic_binance_logo.svg","views/options/img/ic_bsc.svg","views/options/img/ic_bsc_96.svg","views/options/img/ic_btc.b_24.svg","views/options/img/ic_btc.b_40.svg","views/options/img/ic_btc_24.svg","views/options/img/ic_btc_40.svg","views/options/img/ic_busd_24.svg","views/options/img/ic_buy_glp.svg","views/options/img/ic_cash.png","views/options/img/ic_cash.svg","views/options/img/ic_checked.svg","views/options/img/ic_coingecko_16.svg","views/options/img/ic_coingecko_hover_16.svg","views/options/img/ic_convert_down.svg","views/options/img/ic_copy_16.svg","views/options/img/ic_cost.svg","views/options/img/ic_dai_24.svg","views/options/img/ic_dai_40.svg","views/options/img/ic_discord.svg","views/options/img/ic_eth_24.svg","views/options/img/ic_eth_40.svg","views/options/img/ic_frax_24.svg","views/options/img/ic_frax_40.svg","views/options/img/ic_github.svg","views/options/img/ic_glp_24.svg","views/options/img/ic_glp_40.svg","views/options/img/ic_glp_custom.svg","views/options/img/ic_gmx.svg","views/options/img/ic_gmx_24.svg","views/options/img/ic_gmx_30.svg","views/options/img/ic_gmx_40.svg","views/options/img/ic_gmx_64.svg","views/options/img/ic_gmx_arbitrum.svg","views/options/img/ic_gmx_avax.svg","views/options/img/ic_gmx_big.svg","views/options/img/ic_gmx_custom.svg","views/options/img/ic_gmx_footer.svg","views/options/img/ic_hop.svg","views/options/img/ic_info.svg","views/options/img/ic_language24.svg","views/options/img/ic_link_24.svg","views/options/img/ic_link_40.svg","views/options/img/ic_liquidity.svg","views/options/img/ic_medium.svg","views/options/img/ic_menu_dots.svg","views/options/img/ic_metamask_16.svg","views/options/img/ic_metamask_hover_16.svg","views/options/img/ic_mim_24.svg","views/options/img/ic_mim_40.svg","views/options/img/ic_multiswap.svg","views/options/img/ic_new_link_16.svg","views/options/img/ic_olympus.svg","views/options/img/ic_olympus_arbitrum.svg","views/options/img/ic_selector_dropdowns.svg","views/options/img/ic_settings_16.svg","views/options/img/ic_settings_24.svg","views/options/img/ic_sign in_16.svg","views/options/img/ic_sign_out_16.svg","views/options/img/ic_simpleswaps.svg","views/options/img/ic_stats.svg","views/options/img/ic_stats_big.svg","views/options/img/ic_synapse.svg","views/options/img/ic_telegram.svg","views/options/img/ic_tether_24.svg","views/options/img/ic_tokens.svg","views/options/img/ic_totaluser.svg","views/options/img/ic_trading.svg","views/options/img/ic_transfer_avax.svg","views/options/img/ic_twitter.svg","views/options/img/ic_uni_24.svg","views/options/img/ic_uni_40.svg","views/options/img/ic_usdc.e_24.svg","views/options/img/ic_usdc.e_40.svg","views/options/img/ic_usdc_24.svg","views/options/img/ic_usdc_40.svg","views/options/img/ic_usdt_24.svg","views/options/img/ic_usdt_40.svg","views/options/img/ic_wallet_24.svg","views/options/img/ic_wavax_24.svg","views/options/img/ic_wavax_40.svg","views/options/img/ic_weth_24.svg","views/options/img/ic_weth_40.svg","views/options/img/lg_arbitrum.svg","views/options/img/logo_GMX.svg","views/options/img/logo_GMX_small.svg","views/options/img/long.svg","views/options/img/metamask-text.svg","views/options/img/metamask.png","views/options/img/page-not-found.svg","views/options/img/position-share-bg.png","views/options/img/short.svg","views/options/img/swap.svg","views/options/img/trading.jpg","views/options/img/wallet-connect-text.svg","views/options/img/walletconnect-circle-blue.svg","views/options/img/wave-01.png","views/options/img/wave-02.png","img sync /^/icon/-.*_full/.svg$","img/BuilderCharts sync /^/.*/.svg$","img/BuilderCharts/Call.svg","img/BuilderCharts/Put.svg","img/BuilderCharts/Straddle.svg","img/BuilderCharts/Strangle.svg","components/UI/logo/Logo.jsx","components/UI/button/Button.jsx","hooks/useTogglePopup.js","components/Wallet.jsx","components/utils/wallet.js","components/Tabs.jsx","Header.jsx","Footer.jsx","views/gmx-test/config/Addresses.js","views/gmx-test/config/Tokens.js","views/gmx-test/lib/legacy.js","views/gmx-test/config/chains.js","views/gmx-test/domain/common.js","views/gmx-test/lib/contracts/fetcher.ts","views/gmx-test/lib/helperToast.ts","views/gmx-test/lib/contracts/transactionErrors.ts","views/gmx-test/lib/contracts/constants.js","views/gmx-test/domain/prices.js","views/gmx-test/domain/legacy.js","views/gmx-test/config/ui.js","views/gmx-test/components/Tooltip/Tooltip.js","components/utils/notifications.js","views/gmx-test/components/Tab/Tab.js","components/utils/sepThousands.js","components/utils/math.js","components/UI/input/NumberInput_v3.jsx","components/utils/constants.js","components/UI/loader/Spinner.jsx","components/utils/utils.js","views/gmx-test/components/Exchange/ConfirmationBox.js","components/UI/modal/Modal.jsx","components/utils/providers.js","views/options/config/Addresses.js","views/options/config/Tokens.js","views/options/lib/legacyOptions.js","components/utils/contracts.js","components/UI/Selector/Selector.jsx","views/gmx-test/components/Exchange/SwapBox.js","views/gmx-test/components/Exchange/TradingView.jsx","views/gmx-test/components/Exchange/ChartSelector.jsx","views/gmx-test/components/Exchange/ExchangeTVChart.js","views/gmx-test/components/Exchange/PositionSeller.js","views/gmx-test/components/Exchange/PositionEditor.js","views/gmx-test/components/Exchange/PositionShare.js","views/gmx-test/components/Exchange/TradeHistory.js","views/gmx-test/pages/Exchange/Exchange.js","views/gmx-test/components/EventToast/useEventToast.js","views/gmx-test/components/EventToast/EventToastContainer.js","views/gmx-test/components/Common/SEO.js","views/gmx-test/lib/i18n.js","views/gmx-test/App/App.js","views/options/components/Tab/TabOptions.js","views/options/components/Exchange/ChartTokenSelectorOptions.js","views/options/config/ui.js","views/options/components/Tooltip/Tooltip.js","views/options/components/Exchange/ExchangeTVChartOptions.js","components/Currency.jsx","views/options/components/Exchange/PositionsItemOptions.jsx","views/options/components/Exchange/ClosePositionModal.jsx","components/UI/modal/SLTPModalOptions.jsx","views/options/components/Exchange/PositionsListOptions.js","views/options/lib/contracts/fetcher.ts","hooks/useDebounce.js","views/options/components/Exchange/OptionsList.jsx","components/MarkPricePanel.jsx","views/options/pages/Exchange/ExchangeOptions.js","views/options/App/App.js","views/Terminal/Terminal.jsx","components/UI/input/InputSimple.jsx","views/Terminal/Builder/builderConstants.js","views/Terminal/Builder/BuilderForm/BuyBuildModal.jsx","views/Terminal/Builder/BuilderForm/BuilderForm.jsx","hooks/useBuilderField.js","views/Terminal/Builder/BuilderChart/BuilderChart.jsx","views/Terminal/Builder/Builder.jsx","components/AppRouter.jsx","context/context.js","components/UI/warning/Warning.jsx","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Logo","_jsx","className","children","href","Button","_ref","disabled","clickHandler","isMain","props","_objectWithoutProperties","_excluded","classes","cx","btnActive","childProps","_objectSpread","toString","useTogglePopup","_useState","useState","_useState2","_slicedToArray","isOpen","setIsOpen","closePopup","document","removeEventListener","openPopup","stopPropagation","addEventListener","Wallet","addr","address","setAddress","_useTogglePopup","openWallet","closeWallet","_jsxs","onClick","src","icon_wallet","alt","slice","xmlns","width","height","viewBox","fill","clipPath","d","concat","rel","target","icon_link","ARBITRUM","requestAccount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","setWalletAddress","accounts","wrap","_context","prev","next","window","ethereum","networkVersion","Number","alert","request","method","params","chainId","ethers","utils","hexlify","location","reload","t0","console","log","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","abrupt","sent","toLowerCase","on","t1","stop","_x","apply","arguments","connectWallet","_ref2","_callee2","_context2","_x2","Tabs","links","isBtnType","cls","link","isHidden","linkCls","isActive","isExternal","to","name","Link","Header","_window$ethereum","walletAddress","useEffect","loc","useLocation","headerLinks","activeLink","find","pathname","startsWith","Footer","rx","x","y","stroke","x1","y1","x2","y2","gradientUnits","offset","CONTRACTS","Treasury","BUSD","GMT","Vault","Router","Reader","AmmFactory","AmmFactoryV2","OrderBook","OrderBookReader","GmxMigrator","USDG","NATIVE_TOKEN","XGMT","GMT_USDG_PAIR","XGMT_USDG_PAIR","GMT_USDG_FARM","XGMT_USDG_FARM","USDG_YIELD_TRACKER","XGMT_YIELD_TRACKER","GMT_USDG_FARM_TRACKER_XGMT","GMT_USDG_FARM_TRACKER_NATIVE","XGMT_USDG_FARM_TRACKER_XGMT","XGMT_USDG_FARM_TRACKER_NATIVE","AUTO","AUTO_USDG_PAIR","AUTO_USDG_FARM","AUTO_USDG_FARM_TRACKER_XGMT","AUTO_USDG_FARM_TRACKER_NATIVE","GMT_GMX_IOU","XGMT_GMX_IOU","GMT_USDG_GMX_IOU","XGMT_USDG_GMX_IOU","VaultReader","GlpManager","RewardRouter","RewardReader","GLP","GMX","ES_GMX","BN_GMX","ES_GMX_IOU","StakedGmxTracker","BonusGmxTracker","FeeGmxTracker","StakedGlpTracker","FeeGlpTracker","StakedGmxDistributor","StakedGlpDistributor","GmxVester","GlpVester","PositionRouter","PositionManager","ReferralStorage","ReferralReader","GlpRewardRouter","OrderExecutor","UniswapGmxEthPool","Multicall","TraderJoeGmxAvaxPool","getContract","market","TOKENS","coingeckoUrl","imageUrl","constants","AddressZero","isNative","isWrapped","baseSymbol","isUsdg","isStable","isShortable","isTempHidden","ADDITIONAL_TOKENS","CHAIN_IDS","TOKENS_MAP","TOKENS_BY_SYMBOL_MAP","j","length","tokens","i","token","WRAPPED_TOKENS_MAP","NATIVE_TOKENS_MAP","_i","_CHAIN_IDS","_step","_iterator","_createForOfIteratorHelper","s","n","done","value","err","f","getTokens","getToken","getTokenBySymbol","getWhitelistedTokens","filter","MAINNET","createRandom","AVALANCHE","TESTNET","ARBITRUM_TESTNET","DEFAULT_CHAIN_ID","CHAIN_ID","SELECTED_NETWORK_LOCAL_STORAGE_KEY","CHAIN_NAMES_MAP","_IS_NETWORK_DISABLED","_defineProperty","_CHAIN_NAMES_MAP","alchemyWhitelistedDomains","ARBITRUM_RPC_PROVIDERS","AVALANCHE_RPC_PROVIDERS","SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY","CURRENT_PROVIDER_LOCALSTORAGE_KEY","LANGUAGE_LOCALSTORAGE_KEY","getChainName","USDG_ADDRESS","BASIS_POINTS_DIVISOR","MAX_PRICE_DEVIATION_BASIS_POINTS","USD_DECIMALS","DEFAULT_MAX_USDG_AMOUNT","expandDecimals","SWAP","LONG","SHORT","MARKET","STOP","_HIGH_EXECUTION_FEES_","_ICONLINKS","coingecko","arbitrum","ETH","BTC","LINK","UNI","USDC","USDT","DAI","MIM","FRAX","avalanche","AVAX","supportedChainIds","isDevelopment","push","injectedConnector","InjectedConnector","helperToast","success","content","opts","toast","dismiss","error","useLocalStorageByChainId","key","defaultValue","_useLocalStorage","useLocalStorage","_useLocalStorage2","internalValue","setInternalValue","setValue","useCallback","getServerBaseUrl","hostname","includes","fromLocalStorage","localStorage","getItem","getServerUrl","path","BSC_RPC_PROVIDERS","RPC_PROVIDERS","_RPC_PROVIDERS","FALLBACK_PROVIDERS","_FALLBACK_PROVIDERS","host","activateInjectedProvider","providerName","providers","isCoinbaseWallet","isMetaMask","provider","_ref7","_ref8","setSelectedProvider","getInjectedConnector","getProvider","library","getSigner","_","sample","StaticJsonRpcProvider","getFallbackProvider","bigNumberify","BigNumber","from","mul","pow","limitDecimals","amount","maxDecimals","amountStr","undefined","split","dotIndex","indexOf","substr","formatAmount","tokenDecimals","displayDecimals","useCommas","formatUnits","minDecimals","padEnd","padDecimals","numberWithCommas","formatAmountFree","parseFloat","parseInt","trimZeroDecimals","parts","replace","join","getExplorerUrl","getTokenInfo","infoTokens","tokenAddress","replaceNative","nativeTokenAddress","NETWORK_METADATA","_NETWORK_METADATA","addNetwork","_ref17","_callee10","metadata","_context10","catch","_x12","switchNetwork","_ref18","_callee11","active","chainIdHex","_context11","setItem","_x13","_x14","getInjectedHandler","activate","fn","_ref20","_callee13","_context13","_e$message2","UnsupportedChainIdError","errString","message","setTokenUsingIndexPrices","indexPrices","indexPrice","indexPriceBn","eq","spreadBps","maxPrice","sub","minPrice","div","add","gt","minPrimaryPrice","halfSpreadBps","toNumber","getInfoTokens","tokenBalances","whitelistedTokens","vaultTokenInfo","fundingRateInfo","vaultPropsLength","JSON","parse","stringify","balance","poolAmount","reservedAmount","availableAmount","usdgAmount","redemptionAmount","weight","bufferAmount","maxUsdgAmount","globalShortSize","maxGlobalShortSize","maxGlobalLongSize","guaranteedUsd","maxPrimaryPrice","contractMinPrice","contractMaxPrice","maxAvailableShort","hasMaxAvailableShort","availableUsd","maxAvailableLong","hasMaxAvailableLong","remainingLongSize","lt","maxLongCapacity","managedUsd","managedAmount","fundingRate","cumulativeFundingRate","CHART_PERIODS","_window$location$host","_window$location$host2","isLocal","_window$location$host3","parseEther","_constants","nativeTokenSymbol","defaultCollateralSymbol","defaultFlagOrdersEnabled","positionReaderPropsLength","v2","SWAP_ORDER_EXECUTION_GAS_FEE","INCREASE_ORDER_EXECUTION_GAS_FEE","DECREASE_ORDER_EXECUTION_GAS_FEE","wrappedTokenSymbol","chainlinkClient","createClient","uri","ApolloClient","cache","InMemoryCache","fetcher","contractInfo","additionalArgs","_len","args","Array","_key","arg0","arg1","isAddress","contractCall","getContractCall","shouldCallFallback","handleFallback","reject","fallbackProvider","info","then","result","contractName","_x3","Promise","setTimeout","_x4","_x5","_ref3","contract","Contract","abi","_toConsumableArray","NOT_ENOUGH_FUNDS","USER_DENIED","SLIPPAGE","RPC_ERROR","_TX_ERROR_PATTERNS","msg","_GAS_PRICE_ADJUSTMENT","FEED_ID_MAP","BTC_USD","ETH_USD","BNB_USD","LINK_USD","UNI_USD","SUSHI_USD","AVAX_USD","AAVE_USD","YFI_USD","SPELL_USD","timezoneOffset","Date","getTimezoneOffset","getChartPricesFromStats","_getChartPricesFromStats","_callee3","period","timeDiff","url","res","json","prices","_prices2","OBSOLETE_THRESHOLD","updatedAt","_context3","Math","floor","now","_ref6","lastEx","_res","fetch","ok","status","statusText","toISOString","t","open","close","c","high","h","low","l","time","getChainlinkChartPricesFromGraph","tokenSymbol","marketName","feedId","requests","query","gql","all","chunks","uniqTs","Set","forEach","chunk","data","rounds","item","has","unixTimestamp","sort","periodTime","candles","first","prevTsGroup","prevPrice","_prices$i2","ts","price","tsGroup","max","min","getCandlesFromPrices","useChartPrices","currentAveragePrice","swrKey","_useSWR","useSWR","_fetcher","warn","dedupingInterval","focusThrottleInterval","updatePrices","mutate","currentAveragePriceString","retPrices","useMemo","periodSeconds","priceData","getStablePriceData","_prices","currentCandleTime","last","averagePriceValue","newCandle","appendCurrentAveragePrice","newPrices","prevTime","_prices$i","fillGaps","useInfoTokens","vaultReaderAddress","vaultAddress","positionRouterAddress","whitelistedTokenAddresses","refreshInterval","indexPricesUrl","_useSWR2","refreshWhenHidden","IS_TOUCH","OPEN_DELAY","CLOSE_DELAY","Tooltip","_props$position","_props$trigger","enabled","visible","setVisible","intervalCloseRef","useRef","intervalOpenRef","position","trigger","onMouseEnter","current","clearInterval","onMouseClick","onMouseLeave","style","disableHandleStyle","handleClassName","handle","renderContent","notifySuccess","text","hash","errAlert","setIsLoading","_err$reason","reason","Tab","options","option","setOption","onChange","_props$type","type","optionLabels","icons","disabledTooltip","iconsFirst","opt","_icons2","disabledNode","label","disabledList","el","_icons","separateThousands","num","symb","_str$split","_str$split2","intPart","fractionPart","hasFraction","convertInputNum","_result$match","match","_result$split","removeNonNumeric","sepToNumber","str","formatForContract","val","fraction","NumberInput_v3","title","displayValueTitle","displayValue","hasError","maxValue","icon","iconAlt","additionalSymbol","hasFocus","setHasFocus","placeholder","onFocus","onBlur","HOMEPAGE_HREF","DDL_WALLET","DDL_WALLET_ENCODED","repeat","DATE_FORMAT_TEMPLATE","OPTIONS_DECIMALS","assetsOptions","assetsIconsDraft","asset","require","default","assetsIcons","OPTION_TYPES","Hegic","Lyra","Premia","Spinner","hasMargin","ImSpinner2","marginLeft","msToTimeLeft","ms","hours","days","fromBigNumber","number","numToBn","maxFraction","executePromise","successMsg","cb","tx","wait","getOptionProfitZone","isCall","strikePrice","premium","size","profitZone","profitZoneStr","getMarkPrice","awaitLoading","node","isLoading","Modal","resetModal","isObligatory","bodyNode","getElementsByTagName","classList","remove","closeModal","onMouseDown","onTransitionEnd","isScrollable","scrollHeight","clientHeight","alignItems","alchemyProvider","AlchemyProvider","mmProvider","Web3Provider","signer","CALL","PUT","TP","_SWAP_ICONS","callIcon","putIcon","callActiveIcon","putActiveIcon","SL","useLocalStorageSerializeKey","useChainId","useWeb3React","chainIdFromLocalStorage","removeItem","_DDL_POOL","_USDC","approveUSDC","spender","approve","MaxUint256","getIsUsdcApproved","allowance","_args","OperationalTreasury","_OperationalTreasury","OperationalTreasury_ABI","HEGOPS","_HEGOPS","HEGOPS_ABI","HEGIC_STRATEGIES","short","HegicStrategy_CALL_100_BTC_1","HegicStrategy_CALL_100_ETH_1","HegicStrategy_CALL_110_BTC_1","HegicStrategy_CALL_110_ETH_1","HegicStrategy_CALL_120_BTC_1","HegicStrategy_CALL_120_ETH_1","HegicStrategy_CALL_130_BTC_1","HegicStrategy_CALL_130_ETH_1","HegicStrategy_PUT_100_BTC_1","HegicStrategy_PUT_100_ETH_1","HegicStrategy_PUT_70_BTC_1","HegicStrategy_PUT_70_ETH_1","HegicStrategy_PUT_80_BTC_1","HegicStrategy_PUT_80_ETH_1","HegicStrategy_PUT_90_BTC_1","HegicStrategy_PUT_90_ETH_1","medShort","HegicStrategy_CALL_100_BTC_2","HegicStrategy_CALL_100_ETH_2","HegicStrategy_CALL_110_BTC_2","HegicStrategy_CALL_110_ETH_2","HegicStrategy_CALL_120_BTC_2","HegicStrategy_CALL_120_ETH_2","HegicStrategy_CALL_130_BTC_2","HegicStrategy_CALL_130_ETH_2","HegicStrategy_PUT_100_BTC_2","HegicStrategy_PUT_100_ETH_2","HegicStrategy_PUT_70_BTC_2","HegicStrategy_PUT_70_ETH_2","HegicStrategy_PUT_80_BTC_2","HegicStrategy_PUT_80_ETH_2","HegicStrategy_PUT_90_BTC_2","HegicStrategy_PUT_90_ETH_2","medLong","HegicStrategy_CALL_100_BTC_3","HegicStrategy_CALL_100_ETH_3","HegicStrategy_CALL_110_BTC_3","HegicStrategy_CALL_110_ETH_3","HegicStrategy_CALL_120_BTC_3","HegicStrategy_CALL_120_ETH_3","HegicStrategy_CALL_130_BTC_3","HegicStrategy_CALL_130_ETH_3","HegicStrategy_PUT_100_BTC_3","HegicStrategy_PUT_100_ETH_3","HegicStrategy_PUT_70_BTC_3","HegicStrategy_PUT_70_ETH_3","HegicStrategy_PUT_80_BTC_3","HegicStrategy_PUT_80_ETH_3","HegicStrategy_PUT_90_BTC_3","HegicStrategy_PUT_90_ETH_3","long","HegicStrategy_CALL_100_BTC_4","HegicStrategy_CALL_100_ETH_4","HegicStrategy_CALL_110_BTC_4","HegicStrategy_CALL_110_ETH_4","HegicStrategy_CALL_120_BTC_4","HegicStrategy_CALL_120_ETH_4","HegicStrategy_CALL_130_BTC_4","HegicStrategy_CALL_130_ETH_4","HegicStrategy_PUT_100_BTC_4","HegicStrategy_PUT_100_ETH_4","HegicStrategy_PUT_70_BTC_4","HegicStrategy_PUT_70_ETH_4","HegicStrategy_PUT_80_BTC_4","HegicStrategy_PUT_80_ETH_4","HegicStrategy_PUT_90_BTC_4","HegicStrategy_PUT_90_ETH_4","PRICE_CALCULATORS","PriceCalculator_PUT_100_BTC","PriceCalculator_PUT_100_ETH","PriceCalculator_PUT_70_BTC","PriceCalculator_PUT_70_ETH","PriceCalculator_PUT_80_BTC","PriceCalculator_PUT_80_ETH","PriceCalculator_PUT_90_BTC","PriceCalculator_PUT_90_ETH","PriceCalculator_CALL_100_BTC","PriceCalculator_CALL_100_ETH","PriceCalculator_CALL_110_BTC","PriceCalculator_CALL_110_ETH","PriceCalculator_CALL_120_BTC","PriceCalculator_CALL_120_ETH","PriceCalculator_CALL_130_BTC","PriceCalculator_CALL_130_ETH","HegicStrategy_ABI","_HegicStrategy_ABI","PriceCalculator_ABI","_PriceCalculator_ABI","HEGIC_SENTIMENT_LABELS","CHAI_CONTRACT_ETH","CHAI_CONTRACT_BTC","Chai_ABI","_Chai_ABI","DDL_TP_Hegic_addr","_DDL_TakeProfit_Hegic","DDL_TP_Hegic_ABI","DDL_TP_Lyra_ETH_addr","_DDL_TakeProfit_Lyra_ETH","DDL_TP_Lyra_BTC_addr","_DDL_TakeProfit_Lyra_BTC","DDL_TP_Lyra_ABI","getTPMethod","getTPContract","address_old","getTPApproveContract","_Lyra_OptionToken_ETH","_Lyra_OptionToken_BTC","builderOpen","_BuilderOpen","builderOpen_ABI","builderOpenContract","Selector","chosenItemIcon","items","chosenItem","defaultText","onSelect","renderOnHover","titleIcon","hideChosenItem","iconText","_props$formatFn","formatFn","_props$sortFn","sortFn","isComplex","_props$complexCols","complexCols","renderChosenItem","closeSelector","chosenItemLabel","nodes","group","headerNode","col","itemArr","isChosen","itemNode","itemName","renderComplexListFn","longImg","shortImg","swapImg","longActiveImg","shortActiveImg","tvScriptLoadingPromise","TradingViewWidget","chartToken","onLoadScriptRef","getElementById","TradingView","widget","autosize","interval","timezone","theme","locale","toolbar_bg","enable_publishing","hide_side_toolbar","container_id","allow_symbol_change","script","createElement","onload","head","appendChild","ChartSelector","setPeriod","candleStatsHtml","chartRef","chart","setChart","isTrading","simple","trading","ref","marketImg","marketActiveImg","triggerImg","triggerActiveImg","_orderOptionLabels","DEPOSIT","i18n","WITHDRAW","_EDIT_ICONS","depositImg","withdrawImg","depositActiveImg","withdrawActiveImg","PositionShare","useEventToast","EventToastContainer","scrollY","useWindowScroll","breakpoint","createBreakpoint","XL","L","S","useBreakpoint","Toaster","reverseOrder","gutter","containerClassName","containerStyle","zIndex","transition","top","right","toastOptions","duration","Infinity","SEO","customMeta","meta","description","image","_Fragment","Helmet","property","defaultLocale","dynamicActivate","_dynamicActivate","loadLocaleData","en","plurals","es","zh","ko","ru","ja","fr","WebSocketProvider","JsonRpcProvider","Perpetuals","ChartTokenSelector","selectedToken","onSelectToken","_require","_value$symbol","Menu","as","strokeWidth","strokeLinecap","strokeLinejoin","Items","index","_tokenPopupImage","tokenPopupImage","Item","marginRight","RED_COLOR","GREEN_COLOR","getChartOptions","layout","backgroundColor","textColor","fontFamily","localization","timeFormatter","businessDayOrTimestamp","formatDateFn","grid","vertLines","color","horzLines","timeScale","rightOffset","borderVisible","barSpacing","timeVisible","fixLeftEdge","priceScale","crosshair","horzLine","vertLine","mode","ExchangeTVChart","tokenSelection","setTokenSelection","currentChart","setCurrentChart","_useState3","_useState4","currentSeries","setCurrentSeries","_useLocalStorageSeria","_useLocalStorageSeria2","_useState5","_useState6","hoveredCandlestick","setHoveredCandlestick","_useState7","_useState8","setChartToken","tmp","previousMarketName","usePrevious","_useChartPrices","_useChartPrices2","updatePriceData","_useState9","_useState10","chartInited","setChartInited","scaleChart","setVisibleRange","onCrosshairMove","evt","seriesPrices","values","_loop","point","createChart","offsetWidth","offsetHeight","subscribeCrosshairMove","series","addCandlestickSeries","lineColor","topColor","bottomColor","lineWidth","priceLineColor","downColor","wickDownColor","upColor","wickUpColor","setInterval","resizeChart","resize","setData","deltaPrice","deltaPercentage","deltaPercentageStr","candlestick","positive","negative","String","toFixed","timeThreshold","average","Currency","_ref$isSmall","isSmall","_ref$currencyName","currencyName","isHlight","PositionsItem","onPositionClick","closePosition","markPrices","isLarge","pendingPositions","openSLTP","isTpSubmitting","setIsTpSubmitting","isSlSubmitting","setIsSlSubmitting","hasTP","tp","hasSL","sl","getTpTooltipText","getIsTooltipEnabled","isTP","delta","deltaStr","hasPositionProfit","pnl","_position$pnl","unrealizedPnl","unrealizedPnlPercentage","abs","isPending","strat","strategy","closeBtnDisabled","isClosingDisabled","isSLTPDisabled","closeButton","TPButton","icon_edit","SLButton","sentiment","display","muted","format","expiry","textAlign","ClosePositionModal","_pnlStr","pnlFormatted","pnlSign","pnlStr","pnlPercentage","pnlPercentageStr","setPosition","setPendingPositions","isHegic","positions","isLyra","sizeValue","setSizeValue","isSubmitting","setIsSubmitting","setTrade","trade","getTrade","getError","Boolean","getBtnText","SLTPModalOptions","SLTPCommission","priceValue","setPriceValue","amountValue","setAmountValue","isRemoving","setIsRemoving","isApproved","setIsApproved","isActionSet","titleStr","btnText","markPrice","checkIsTpApproved","executeCb","setIsSLTPSpinning","onApply","approveTp","commissionSize","t2","call","curPrice","userPrice","marginTop","hasOldTP","icon_bin","PositionsList","memo","setMarket","positionsLoading","positionsError","hasPositions","closeModalVisible","setCloseModalVisible","SLTPVisible","setSLTPVisible","setIsTP","getStatusLabel","renderPositionItem","colSpan","useDebounce","delay","timer","debouncedCb","clearTimeout","MarkPricePanel","_props$currencies","currencies","icon_market","curr","_infoTokens$addr","Exchange","_useWeb3React","account","_useLocalStorageByCha","_useLocalStorageByCha2","tokenAddresses","readerAddress","chaiAddress","latestAnswer","_useLocalStorageByCha3","_useLocalStorageByCha4","_useLocalStorageByCha5","_useLocalStorageByCha6","setSwapOption","_useLocalStorageByCha7","_useLocalStorageByCha8","setAssetOption","swap","_useState11","_useState12","_useState13","_useState14","setPositions","_useState15","_useState16","fetchHegicPositions","strategiesAddresses","chaiContractETH","chaiContractBTC","chaiMarkPrices","transferFilter","events","tokenIds","buyFilterTopics","eventsPack","eventsPackLimit","lastPackLength","_contract","buyFilter","_events","formatPosition","_formatPosition","OpTreasury","additionalData","periodDays","strategies","_strategy$split","_strategy$split2","strikeScale","isSpread","chaiMarkPrice","buyingPrice","isITM","stratContract","profit","_getOptionProfitZone","DDL_TakeProfit","tpInfo","approveContract","uniqStrategy","fetchedPosition","decode","topics","lockedLiquidity","state","strike","positivepnl","payOffAmount","tokenIdToTokenInfo","takeProfitPrice","takeType","expiration","connect","payOff","isApprovedOrOwner","findIndex","pos","obj","hexZeroPad","queryFilter","tokenId","eArr","splice","fetchLyraPositions","_callee7","lyra","posArr","_context7","_callee6","strikeId","isBuy","pricePerOption","expiryTimestamp","trades","_getOptionProfitZone2","_context6","substring","stopOrderPrice","stopOrderType","reduce","owner","_getTrade","_callee4","_context4","_close","_callee5","_context5","referrer","isDisabled","disabledReason","sendTransaction","ownerOf","_useSWR3","_fetcher2","_callee8","_context8","pendingIndex","positionsData","positionsDataError","_useSWR4","_fetcher3","_callee9","commission","_context9","SLTPCommissionError","LIST_SECTIONS","_useLocalStorageByCha9","_useLocalStorageByCha10","listSection","setListSection","LIST_SECTIONS_LABELS","Positions","positionsDataIsLoading","getListSection","section","FullApp","exchangeRef","Options","Terminal","_objectDestructuringEmpty","endsWith","Outlet","InputSimple","unit","inputRef","focus","builderStrategies","Call","stats","Outlook","Profit","Risk","structure","Put","Strangle","isDateUnified","Straddle","isStrikeUnified","strategyStatsLabels","builderProtocols","getOptionComponentLabel","stratName","BuyBuildModal","fields","maxCost","isUsdcApproved","setIsUsdcApproved","usdcBalance","premiums","setPremiums","isMinorLoading","setIsMinorLoading","field","strikesData","calcPremium","onPrimaryClick","paramsArr","protocols","promises","productKey","getParams","consolidationOfTransactions","cellPadding","border","marketIcon","struct","structLabel","icon_calendar","dateMs","Accordion","transitionTimeout","AccordionItem","header","isEnter","BuilderForm","_getError","setAsset","modalVisible","setModalVisible","setAmount","setStrategy","lyraMarket","setLyraMarket","isCostLoading","setIsCostLoading","cost","setCost","datesMs","setDatesMs","builderFields","effectFn","_getDefaultStrikes","defaultStrikes","defaultStrikesData","unifiedDate","separateDates","strikes","loader","clearData","setStrikes","setStrikesData","effFactory","_effectFn","strikesPromises","useBuilderFields","fetchHegicStrikes","fetchLyraStrikes","clearOptions","every","markets","mkt","baseToken","liveBoards","bd","defaultAmount","strategySentiment","strategyTokenSymbol","strategyIsCall","priceName","priceAddress","priceContract","periodS","strategyAddress","strategyContract","hasLiq","getAvailableContracts","calculatePremium","amountBn","encodeFromHegic","delegateYield","boardId","liveBoardsMap","strikeRounded","quoteOption","ask","ONE_BN","WeiPerEther","encodeFromLyra","positionId","iterations","optionType","setCollateralTo","minTotalCost","maxTotalCost","calcMaxCost","premiumPromises","finally","calcMaxCostDelayed","renderChartPreview","stat","statValue","neutral","_builderFields$i$date","setDateMs","date","margin","_field$strike2","setStrike","_field$market","depField","_depStrikes$market","_depStrikes$market$fi","setDepStrike","setDepMarket","chosenStrike","cur","_strikes$market","_strikes$market$find","strikeArr","transform","isBtnEnabled","BuilderChart","Builder","dates","AppRouter","setPath","nav","useNavigate","Routes","Route","element","Navigate","GlobalStatsContext","createContext","UserStatsContext","Warning","getLibrary","registerVisible","setRegisterVisible","Jelly","cssTransition","enter","exit","connectInjectedWallet","attemptActivateWallet","_useWeb3React2","HashRouter","I18nProvider","ToastContainer","limit","hideProgressBar","newestOnTop","closeOnClick","draggable","pauseOnHover","autoRefreshOnNetworkChange","App","curBalance","avail","userStats","setUserStats","totalSupplied","totalBorrowed","utilRate","availToBorrow","borrowAPY","globalStats","setGlobalStats","Web3ReactProvider","Provider","ReactDOM","createRoot","render","React","StrictMode"],"mappings":"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6hTCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,sECAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,gGCAzC,IAAIH,EAAM,CACT,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,mBAAoB,IACpB,mBAAoB,IACpB,kBAAmB,IACnB,mBAAoB,IACpB,mBAAoB,IACpB,m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AA0B,2C,+BCAzC,OAAe,szB,+BCAf,OAAe,suB,+BCAf,OAAe,8zB,+BCAf,OAAe,khB,+BCAf,OAAe,kmB,+BCAf,OAAe,skB,+BCAf,OAAe,k7B,+BCAf,OAAe,syB,+BCAf,OAAe,02B,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,03C,+BCAf,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,qD,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,q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AAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,03C,+BCAf,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gC,+BCAz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","file":"static/js/main.04335570.chunk.js","sourcesContent":["var map = {\n\t\"./icon-BTC.svg\": 655,\n\t\"./icon-ETH.svg\": 656,\n\t\"./icon-GMX.svg\": 344,\n\t\"./icon-GMX_full.svg\": 345,\n\t\"./icon-GMX_sm.svg\": 346,\n\t\"./icon-GNS.svg\": 347,\n\t\"./icon-GNS_full.svg\": 348,\n\t\"./icon-GNS_sm.svg\": 349,\n\t\"./icon-GNS_v2.svg\": 657,\n\t\"./icon-Hegic.svg\": 658,\n\t\"./icon-Hegic_full.svg\": 350,\n\t\"./icon-Hegic_sm.svg\": 351,\n\t\"./icon-Lyra.svg\": 659,\n\t\"./icon-Lyra_full.svg\": 352,\n\t\"./icon-Lyra_sm.svg\": 353,\n\t\"./icon-Premia.svg\": 660,\n\t\"./icon-WBTC.svg\": 661,\n\t\"./icon-accordion-arrow.svg\": 662,\n\t\"./icon-aggregator.svg\": 354,\n\t\"./icon-bin.svg\": 265,\n\t\"./icon-btn-up.svg\": 266,\n\t\"./icon-calendar.svg\": 267,\n\t\"./icon-call-active.svg\": 268,\n\t\"./icon-call.svg\": 269,\n\t\"./icon-date.svg\": 355,\n\t\"./icon-dollar.svg\": 663,\n\t\"./icon-down-small-white.svg\": 356,\n\t\"./icon-down-small.svg\": 270,\n\t\"./icon-down.svg\": 664,\n\t\"./icon-edit.svg\": 110,\n\t\"./icon-hint.svg\": 665,\n\t\"./icon-link.svg\": 247,\n\t\"./icon-market.svg\": 174,\n\t\"./icon-medium.svg\": 666,\n\t\"./icon-put-active.svg\": 271,\n\t\"./icon-put.svg\": 272,\n\t\"./icon-repay.svg\": 667,\n\t\"./icon-settings.svg\": 273,\n\t\"./icon-sort.svg\": 668,\n\t\"./icon-usdc.svg\": 669,\n\t\"./icon-user.svg\": 670,\n\t\"./icon-wallet.svg\": 246\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 73;","export default __webpack_public_path__ + \"static/media/icon-edit.233d1510.svg\";","export default __webpack_public_path__ + \"static/media/icon-market.9e95abb6.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.03a12ea6.svg\";","var map = {\n\t\"./icon-GMX_sm.svg\": 346,\n\t\"./icon-GNS_sm.svg\": 349,\n\t\"./icon-Hegic_sm.svg\": 351,\n\t\"./icon-Lyra_sm.svg\": 353\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 188;","var map = {\n\t\"./ic_btc_40.svg\": 309,\n\t\"./ic_dai_40.svg\": 310,\n\t\"./ic_eth_40.svg\": 185,\n\t\"./ic_frax_40.svg\": 311,\n\t\"./ic_link_40.svg\": 312,\n\t\"./ic_uni_40.svg\": 313,\n\t\"./ic_usdc_40.svg\": 314,\n\t\"./ic_usdt_40.svg\": 315,\n\t\"./ic_weth_40.svg\": 316\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 242;","export default __webpack_public_path__ + \"static/media/ic_eth_40.1b83dd3c.svg\";","export default __webpack_public_path__ + \"static/media/icon-wallet.5b677892.svg\";","export default __webpack_public_path__ + \"static/media/icon-link.436183a1.svg\";","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar.8908c0f2.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar_active.059213a3.svg\";","export default __webpack_public_path__ + \"static/media/icon_market.1494995a.svg\";","export default __webpack_public_path__ + \"static/media/icon_market_active.257003dd.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger.abfde3ea.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger_active.8868a9b4.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw.09cda1b1.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw_active.1e16a67d.svg\";","export default __webpack_public_path__ + \"static/media/long.0f8a81b9.svg\";","export default __webpack_public_path__ + \"static/media/long_active.d0e619ea.svg\";","export default __webpack_public_path__ + \"static/media/short.670d98eb.svg\";","export default __webpack_public_path__ + \"static/media/short_active.d3098d1c.svg\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.6211e9eb.svg\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/icon-bin.b250ed4d.svg\";","export default __webpack_public_path__ + \"static/media/icon-btn-up.13730dce.svg\";","export default __webpack_public_path__ + \"static/media/icon-calendar.7cd1d421.svg\";","export default __webpack_public_path__ + \"static/media/icon-call-active.867eabe7.svg\";","export default __webpack_public_path__ + \"static/media/icon-call.7aeed2e7.svg\";","export default __webpack_public_path__ + \"static/media/icon-down-small.c32a162b.svg\";","export default __webpack_public_path__ + \"static/media/icon-put-active.d85cad03.svg\";","export default __webpack_public_path__ + \"static/media/icon-put.216aa799.svg\";","export default __webpack_public_path__ + \"static/media/icon-settings.269e4d1c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.ec9214a7.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.eb3c180f.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.7e94b658.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.9db627fc.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.02be34a3.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.38f03c0f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.6edf6fb0.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.2dd52bee.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.a8f56d16.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.6f286878.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.a19a6758.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/icon-GMX.195e3c0f.svg\";","export default __webpack_public_path__ + \"static/media/icon-GMX_full.1d0dc1c6.svg\";","export default __webpack_public_path__ + \"static/media/icon-GMX_sm.195e3c0f.svg\";","export default __webpack_public_path__ + \"static/media/icon-GNS.eb30a0a6.svg\";","export default __webpack_public_path__ + \"static/media/icon-GNS_full.cdfc4573.svg\";","export default __webpack_public_path__ + \"static/media/icon-GNS_sm.eb30a0a6.svg\";","export default __webpack_public_path__ + \"static/media/icon-Hegic_full.548cf977.svg\";","export default __webpack_public_path__ + \"static/media/icon-Hegic_sm.9457ef55.svg\";","export default __webpack_public_path__ + \"static/media/icon-Lyra_full.808bb11b.svg\";","export default __webpack_public_path__ + \"static/media/icon-Lyra_sm.56a6eb58.svg\";","export default __webpack_public_path__ + \"static/media/icon-aggregator.9381ed64.svg\";","export default __webpack_public_path__ + \"static/media/icon-date.c9987a20.svg\";","export default __webpack_public_path__ + \"static/media/icon-down-small-white.56e18ad5.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1ebc220b.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.ff92bfa1.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.4728adab.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.e61956ee.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.45c0523a.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.8bf1ff5d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.d7851f5e.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.8dbce838.svg\";","var map = {\n\t\"./ic_btc_40.svg\": 357,\n\t\"./ic_dai_40.svg\": 358,\n\t\"./ic_eth_40.svg\": 243,\n\t\"./ic_frax_40.svg\": 359,\n\t\"./ic_link_40.svg\": 360,\n\t\"./ic_uni_40.svg\": 361,\n\t\"./ic_usdc_40.svg\": 362,\n\t\"./ic_usdt_40.svg\": 363,\n\t\"./ic_weth_40.svg\": 364\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 370;","var map = {\n\t\"./Anyswap.png\": 490,\n\t\"./Anyswap.svg\": 491,\n\t\"./Artwork.svg\": 492,\n\t\"./Artwork_gmx.svg\": 493,\n\t\"./Banxa.png\": 494,\n\t\"./DROP_DOWN.svg\": 249,\n\t\"./Hop.png\": 495,\n\t\"./Hop.svg\": 496,\n\t\"./Hop_dark.png\": 497,\n\t\"./Hop_dark.svg\": 498,\n\t\"./Synapse.png\": 499,\n\t\"./Synapse.svg\": 500,\n\t\"./binance.png\": 501,\n\t\"./bscscan.png\": 502,\n\t\"./btn_big_arbitrum.png\": 503,\n\t\"./btn_big_avalanche.png\": 504,\n\t\"./btn_big_bsc.png\": 505,\n\t\"./btn_big_purchasegmx.png\": 506,\n\t\"./btn_big_purchasegmx.svg\": 507,\n\t\"./buy_gmx.svg\": 508,\n\t\"./buy_gmx_bond.svg\": 509,\n\t\"./buy_transfer_eth.svg\": 510,\n\t\"./coinbaseWallet.png\": 511,\n\t\"./coingecko.png\": 512,\n\t\"./cross.svg\": 513,\n\t\"./ddl/chevron-down.svg\": 514,\n\t\"./ddl/chevron-down_sm.svg\": 515,\n\t\"./ddl/ic_btc_40.png\": 516,\n\t\"./ddl/ic_btc_40.svg\": 309,\n\t\"./ddl/ic_dai_40.png\": 517,\n\t\"./ddl/ic_dai_40.svg\": 310,\n\t\"./ddl/ic_eth_40.png\": 518,\n\t\"./ddl/ic_eth_40.svg\": 185,\n\t\"./ddl/ic_frax_40.png\": 519,\n\t\"./ddl/ic_frax_40.svg\": 311,\n\t\"./ddl/ic_link_40.png\": 520,\n\t\"./ddl/ic_link_40.svg\": 312,\n\t\"./ddl/ic_uni_40.png\": 521,\n\t\"./ddl/ic_uni_40.svg\": 313,\n\t\"./ddl/ic_usdc_40.png\": 522,\n\t\"./ddl/ic_usdc_40.svg\": 314,\n\t\"./ddl/ic_usdt_40.png\": 523,\n\t\"./ddl/ic_usdt_40.svg\": 315,\n\t\"./ddl/ic_weth_40.png\": 524,\n\t\"./ddl/ic_weth_40.svg\": 316,\n\t\"./ddl/icon_arrow.svg\": 525,\n\t\"./ddl/icon_check.svg\": 526,\n\t\"./ddl/icon_close.svg\": 527,\n\t\"./ddl/icon_close_sm.svg\": 528,\n\t\"./ddl/icon_close_toast.svg\": 529,\n\t\"./ddl/icon_dollar.svg\": 250,\n\t\"./ddl/icon_dollar_active.svg\": 251,\n\t\"./ddl/icon_market.svg\": 252,\n\t\"./ddl/icon_market_active.svg\": 253,\n\t\"./ddl/icon_trigger.svg\": 254,\n\t\"./ddl/icon_trigger_active.svg\": 255,\n\t\"./ddl/icon_withdraw.svg\": 256,\n\t\"./ddl/icon_withdraw_active.svg\": 257,\n\t\"./ddl/lock.svg\": 530,\n\t\"./ddl/long.svg\": 258,\n\t\"./ddl/long_active.svg\": 259,\n\t\"./ddl/short.svg\": 260,\n\t\"./ddl/short_active.svg\": 261,\n\t\"./flag_en.svg\": 531,\n\t\"./flag_es.svg\": 532,\n\t\"./flag_fr.svg\": 533,\n\t\"./flag_ja.svg\": 534,\n\t\"./flag_ko.svg\": 535,\n\t\"./flag_ru.svg\": 536,\n\t\"./flag_zh.svg\": 537,\n\t\"./glp_icon.svg\": 538,\n\t\"./gmx-logo-final-white-small.png\": 539,\n\t\"./gmx-logo-final-white.png\": 540,\n\t\"./gmx-logo-final.png\": 541,\n\t\"./gmx-logo-glow.png\": 542,\n\t\"./gmx-logo-with-name.svg\": 262,\n\t\"./gmx_logo.svg\": 543,\n\t\"./graphite-01.png\": 544,\n\t\"./ic-communityproject.svg\": 545,\n\t\"./ic_arbitrum_16.svg\": 546,\n\t\"./ic_arbitrum_24.svg\": 317,\n\t\"./ic_arbitrum_96.svg\": 547,\n\t\"./ic_arbitrum_hover_16.svg\": 548,\n\t\"./ic_arrowleft16.svg\": 549,\n\t\"./ic_arrowright16.svg\": 550,\n\t\"./ic_avalanche_16.svg\": 551,\n\t\"./ic_avalanche_24.svg\": 318,\n\t\"./ic_avalanche_96.svg\": 552,\n\t\"./ic_avax_24.svg\": 319,\n\t\"./ic_avax_30.svg\": 553,\n\t\"./ic_avax_40.svg\": 554,\n\t\"./ic_banxa.svg\": 555,\n\t\"./ic_binance_logo.svg\": 556,\n\t\"./ic_bsc.svg\": 557,\n\t\"./ic_bsc_96.svg\": 558,\n\t\"./ic_btc.b_24.svg\": 320,\n\t\"./ic_btc.b_40.svg\": 559,\n\t\"./ic_btc_24.svg\": 321,\n\t\"./ic_btc_40.svg\": 560,\n\t\"./ic_busd_24.svg\": 322,\n\t\"./ic_buy_glp.svg\": 561,\n\t\"./ic_cash.png\": 562,\n\t\"./ic_cash.svg\": 563,\n\t\"./ic_checked.svg\": 564,\n\t\"./ic_coingecko_16.svg\": 565,\n\t\"./ic_coingecko_hover_16.svg\": 566,\n\t\"./ic_convert_down.svg\": 567,\n\t\"./ic_copy_16.svg\": 568,\n\t\"./ic_cost.svg\": 569,\n\t\"./ic_dai_24.svg\": 323,\n\t\"./ic_dai_40.svg\": 570,\n\t\"./ic_discord.svg\": 571,\n\t\"./ic_eth_24.svg\": 324,\n\t\"./ic_eth_40.svg\": 572,\n\t\"./ic_frax_24.svg\": 325,\n\t\"./ic_frax_40.svg\": 573,\n\t\"./ic_github.svg\": 574,\n\t\"./ic_glp_24.svg\": 326,\n\t\"./ic_glp_40.svg\": 575,\n\t\"./ic_glp_custom.svg\": 576,\n\t\"./ic_gmx.svg\": 577,\n\t\"./ic_gmx_24.svg\": 327,\n\t\"./ic_gmx_30.svg\": 578,\n\t\"./ic_gmx_40.svg\": 579,\n\t\"./ic_gmx_64.svg\": 580,\n\t\"./ic_gmx_arbitrum.svg\": 581,\n\t\"./ic_gmx_avax.svg\": 582,\n\t\"./ic_gmx_big.svg\": 583,\n\t\"./ic_gmx_custom.svg\": 584,\n\t\"./ic_gmx_footer.svg\": 585,\n\t\"./ic_hop.svg\": 586,\n\t\"./ic_info.svg\": 587,\n\t\"./ic_language24.svg\": 588,\n\t\"./ic_link_24.svg\": 328,\n\t\"./ic_link_40.svg\": 589,\n\t\"./ic_liquidity.svg\": 590,\n\t\"./ic_medium.svg\": 591,\n\t\"./ic_menu_dots.svg\": 592,\n\t\"./ic_metamask_16.svg\": 593,\n\t\"./ic_metamask_hover_16.svg\": 594,\n\t\"./ic_mim_24.svg\": 329,\n\t\"./ic_mim_40.svg\": 595,\n\t\"./ic_multiswap.svg\": 596,\n\t\"./ic_new_link_16.svg\": 597,\n\t\"./ic_olympus.svg\": 598,\n\t\"./ic_olympus_arbitrum.svg\": 599,\n\t\"./ic_selector_dropdowns.svg\": 600,\n\t\"./ic_settings_16.svg\": 601,\n\t\"./ic_settings_24.svg\": 330,\n\t\"./ic_sign in_16.svg\": 602,\n\t\"./ic_sign_out_16.svg\": 603,\n\t\"./ic_simpleswaps.svg\": 604,\n\t\"./ic_stats.svg\": 605,\n\t\"./ic_stats_big.svg\": 606,\n\t\"./ic_synapse.svg\": 607,\n\t\"./ic_telegram.svg\": 608,\n\t\"./ic_tether_24.svg\": 331,\n\t\"./ic_tokens.svg\": 609,\n\t\"./ic_totaluser.svg\": 610,\n\t\"./ic_trading.svg\": 611,\n\t\"./ic_transfer_avax.svg\": 612,\n\t\"./ic_twitter.svg\": 613,\n\t\"./ic_uni_24.svg\": 332,\n\t\"./ic_uni_40.svg\": 614,\n\t\"./ic_usdc.e_24.svg\": 333,\n\t\"./ic_usdc.e_40.svg\": 615,\n\t\"./ic_usdc_24.svg\": 334,\n\t\"./ic_usdc_40.svg\": 616,\n\t\"./ic_usdt_24.svg\": 335,\n\t\"./ic_usdt_40.svg\": 617,\n\t\"./ic_wallet_24.svg\": 336,\n\t\"./ic_wavax_24.svg\": 337,\n\t\"./ic_wavax_40.svg\": 618,\n\t\"./ic_weth_24.svg\": 338,\n\t\"./ic_weth_40.svg\": 619,\n\t\"./lg_arbitrum.svg\": 620,\n\t\"./logo_GMX.svg\": 621,\n\t\"./logo_GMX_small.svg\": 622,\n\t\"./long.svg\": 623,\n\t\"./metamask-text.svg\": 624,\n\t\"./metamask.png\": 625,\n\t\"./page-not-found.svg\": 626,\n\t\"./position-share-bg.png\": 263,\n\t\"./short.svg\": 627,\n\t\"./swap.svg\": 264,\n\t\"./trading.jpg\": 628,\n\t\"./wallet-connect-text.svg\": 629,\n\t\"./walletconnect-circle-blue.svg\": 630,\n\t\"./wave-01.png\": 631,\n\t\"./wave-02.png\": 632\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 489;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.4974674c.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6R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\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.618eb538.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.67f59201.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.fd9264bc.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.4f70d802.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down.4485a8ac.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down_sm.5c6065f6.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHjSURBVHgBfVO/a1NRFP7Ova8NQYkZigSDJbqJQh4Ogk4NiqIuCiJuDZgOQhGKk1P9C1Tq4KJQR12yiRWkg4ODg3EQp7ahpTSUQtMftE2bvNN7zstLXtMfH7x3f5zznXO+c+8l9GB7IlsEYZgBn8BpBtUJqFjCZP/o4qe4L3VI7zM5apkyM3wcjyq8oJB8VqvKwkRENM10L9EMXEbfvY8w2ev6Oaif+kdk2VBDG/bSYySefEffrTe69q69iMfMUZPK6tfWWIxbeeUfTOYqzGAB2FoGDVyBHRwCNhbAqzOiNjN+P1U10pyjxFF/Sse9r0+x+/k2kDgD7+bbjr3FQdELu3oEOXsD3FiHzZd0pEQKvL7QrQ7kGzmOXqI0SpyDuW9K9PyRsIofY93gQNrIOcaJ9uIdWL8Ulvb/C1p/P2C3/Ci05UuxzKh7hKDi4gx1IrqsxpUskC5LqZQ6HxpdFd3MXLEv754mQ/Qg2gwWf2m3ldBYA5066wLMOwlTaP1+7cpptNn8Snu18+7cH2lcR7O7EKLZ5kew93Ncgx0AczX5fOmCp/Nm8BCWpkGUi7Kr5tkpHIIjunMqaBL5Jcdq4YYYToDoFD/1R+xhRNicyBQt0TAz+URIu/teJ3Ik4snkaO3Aq9oHE/y09owWmgYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGoSURBVHgBpVM7SwNBEJ7ZXHwSH6CFlQG1sPMB5hAUrQQro8ZgpWCpkNhZCLn8ApPCTrC0CDGpUvpsYoQQLSysoq2CSKIhJHfj7pm73AmagB8szDc3s/PNzB7CD5QSsps0ChDBEqdu3UmQA0Y5xli43ZvOW+PRSopxTxAJDuAPaERhly+jGJwZxkdMVhol6wmIoUJsSrEpKMblTSQ6FrZjcBFY34S96ksW1OeUzaeq5O3yZ5LsWwaFzAoiuVIA9SllHkf/OLQtxAE7BswLJAl1tViIyXMM6dz44JzcB+01qydaIQ37wTEwA+XrnboyUufxM+EJkAoR4WidPeQKxqERSqfTRv9Bia+sx1hG+Wr7VwVGgcrDkckJqef/CtQq3vEZNFQgDa8B8gFX0numD5mWYy5f+oLbeWswOl36xMVh/RPgHN0CacgP1fuINSzfvnx7KQlLBdp1ACaELaqLVUrdI2ak9v4I1bMNoEqx3j+QUmuj1ldcDvFnqkAzQFI6VzJh2wXNXiIG17F6E7VwO95OZHeLU+MvE8c4Hau583zOyXIVo73r9r/xCzLjs4Txvi/RAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHoSURBVHgBfVPPaxNBFP7eTBI31Wr8RdpDYRURxUMCIogemoJnrUdva/QoWC9etN0kXgXJP6C5eRK8efHSkygICYq0IDR4MIm1ECGaNMnOczNpNrtT6INd9s1775vv+2aHYITjNmwB+RCMZT+195arIFQVvGKlOF8P91M4ybvNFbB4gYOCveLLZ/OFSSqC4dVWwRw+lZK4cTUZBSDp5lcbUYC8+8sBkWtu9uDOUVw8m0D6pNwH4jxtLU8ZMPYNX89aWJiL6e8rlyyzDCFIsxX33e0cpmYF1G8tHQ7yE8cEMucTJobtPGnkBAvOmJWbSzOQPuuNrQE+fumh+dvTUo7MRDz3e2Qmxh6lRhomkYgT4v5T2+zrvLfL2Nzpw0oQTh+X6PwbBr0MSsVIcpu9KWp/wPj2vQ9PAecW4nptOGT8/KPAKsqUwG3hKaqZEqxDhAt2HOufu9hpe0jNSixeTqLTjSIopqoWdXettUUgO1y8d3sW1/yT+FDb1azevO/gb5dD9Ln+qpQ+o4+RCY9MFq/fdfTuSYvw6WsvMrwnoKCNHL2q6883MouPR/91blIe+F79aI4NG7GIUAcXKqV0eexDKJy1bVf4RRwQCmqlUporBzzMBn0blXR9WVm/mB3rRZ0Yb5XwyuZt/A/V0KylFRZwagAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEHSURBVHgBjVMLEYQgEGUuAQ3EJNrACNLACEYwgjYwAhGwAZqAa8DxdsAB8Rx3Zt3Zx779gYyVIr0qr9arCxZ+zx5EeNWB8E9NiCuIhnP+RHThvEhARK21W9fVCSHcMAxumiay8JdlccaYmECnM1JmBNyJtZbsPM9pJ7QDFQFUQCAqNE1DGCx8yGUs8M6tOiklBXVdl83ati3hGCHB7cd/eOy/qiqy27Zl29z3nayvnMIc5G/0juMgW9d1RvaVsyRBvsXMcUF935OPljEzMPjXmWUElFLZdq+Cq0yWdr44DRAVcLc4xNLGcaQOcAYc56G6SfsXAC5tvX5hZwL2/Lb1HTEVyV7+VT9KbxPpO/XgrgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFDSURBVHgBrZIxUoNQEIbfvkcVmxyBJmoSC3MDPIGWJmNBTgCeALhBPEGoJCVHwBNoJRgbvEGqjEXYdWHChHlA4Uz+hvfe/PuxO/uD6JH58D4cDC58Pt4jwjLbjJIuH3QXDlwA6RDRsGEMCyyCbDPOewE3T98WIq1LjugTUoACwxpUAa4fU1MpY81/tDSzz+YfCdITAE1oTnR4TqNJbJQ3KZXVLCYSCVGxbLQbThZfHgjpkqjGYpjh8DeWrQ4R/DS6vNNn/Xy9Cgo8zHR/C6AU5KJHOrQT8F+dHwBEZp+5zIj+ZugPKMifLrZmMzRauNoAxCJRSvHqhFXe2WLzau3pfLviHX8QoV9y6mIOz44Q4+P5JA6U3RGa03hVIa32v/uXPJ7tWoBa43nmggCnCeoIl+gFHLsxeQyPK2+RE5hFo7cu3x+G+J1ieOsLEAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEuSURBVHgBlVO9UgJBDP6wszut7LxWG6mtHF9AHR8A3gB9Anpt7C3Aws5CZ9TKmbOhgzlooIKDBjoWKuhCQrif5ff4ZjJ7m82X5MvuAUsgojybx2ZIYRb7HDaBD102n7YjkLh1xIDSwU6wBzGEn9SYcPfTJsgJ2bNcZsKeDjf2rIlKVd63ubehnsXwDrh4dmV69QHgOsBoCvTGwN078PDD/n4yKitkxyKOJmo3ZyIKKF4DhUtN9Pirq8KRto3VdvGPWzR2m7LmP1jKE1HhOxIoletR1c8m8NXSyu6R+v47al0DnLIvk4nECfktIjuHGiQayzXgpcJJjoHbc6B0DzR4FhcnYXQ5vC7fuiqZ9tWrrnGb+h3MVQa7X5gkCvXHkDjXGjKle6L+CnEpSeq/agZ2kCMI5PSNywAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI/SURBVHgBfVNNaFNBEJ7dF6sRUhJUqglK/KG8kEKF1tSCQiH1WEguHltvXgJG0iLtJcnFIFFsIR48xpteInpsAgpCTPRQpcHnXw1CA4KY0iCK5L11ZrfvNemhA8vb2flm9vtm9jHYY/qtatA0XTc4FzEQEKQzAbCGnzXOzaxxZ7LZi2e9Tmj+ddJi/D7sYwxE1shPZGyfOzcv1DJ2cuJKAGYvDTlJc5eHID5+FBQbliZsXwF9oX6NAgHfQSglR8BzSIPS25/4dclVXm9D5IwHY2EZI+xwqhZzCggGaXWzHyrrvyD3/Dt0/prSp7XZ/geLT75BpbEFD+bOKSkaSLZcT72ZomZFznrkLYVySwJyV0/DoFuTKzHtl2eF1U3MZBKHtwb1VHXKJbgYpSAdFl/9cHST5mjuPTLpwgVK2LEKyomGfVDf6IDg2igXgnkpQPoJbFthtSXpFq/rEDpx2DnfRgyxktIxlzMmtsghzdQwMgJ8aP2G2HIDEsXPOIXjToFBxGz/MVUfMJczy3xHTrnRhumwV92CgKWZU3Kc8fFj6O8yi474sJltuTfpcRn3Jl/gvln/2pENio+pec8+NFDWAIT8bslEvgd8GwHvgNSPAppf8pGXkrOwxE3GWWnx8QY8Qs2USNOgriu9TLEZOyILqxzISBk2teH5WpoxlqFkApPR7MmWZk6Cx+2C28/U+xBCZD7dncj2FegtAvualfyYv7hie2xvWE9Wg9YBLY2B86AWWdMS7KnW7a4Yy/1/43+jYdjzTW6D2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgBlVM9SCNBFH4zu0rk7nSvuuO8g72zuas81MafQrEVRYuUatDeYONfkU0VtVDSC0HFysJYWigR/Cn9AdFGXDCYiEViUBR15jkz68ZNiIIfPN7bN+9973vDLIEimLGg8UQrghxIFyXElDmOaBOCiTLGo3ZgyvbWE+9H9cJEUCRCCGjAGyAMw8lAxHK/NTf4OT9mCbqICH3wHihprepsIbnVrUReQfXCeL9wMUX02YBfn76W7D2/zUDyJqtizp66U4HpuP5yFnKL/H/qYLi2vSTBzME6zBxuOEI0fVa4ODFj4/8fNdhzixq//VYmMfivWfm5423ldy/PlEH+PlibznRqAvJ88iiTUlZVXgH+mnqoLPfB3MkOVJb5IHmbLVDEdK1W58gN7/Tcw70ikF7i+uFOxdLkuSRcOz92FAAYupdRypNF/po61XiUuXBW+dukLlCSuM0SCJDVGWMJTdMKSNw9ww0doghhILEEpYCI+zQtX5Z4ZfBBiGY73RvZpM4uPAwfhNjfkl5pz61s2196mkWStHqL5GUun+7B1f1N0XRuXfRNRl+IXvFjcTREkFrvDM5yZFaqbyrqUVKI77ERk2h0iKJQQ8B0RoKNwOOc43y66G98Bj1CxfZyFDl9AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgBdVJNaBNBFP5msjFRobsVsRVtGEE9RVgFT0VIQS9ejBfFk6voRRA82aBoLkLoLacetZ4EDzYo2INCAtKDl2bxKBTWRDH4uyuIxmRnnDdN0iS07zLvvZnvvfd98xjG7NtMwYNilxljrlLK0WeoTz/BsTTZKD0efsv6zk8xL2SXLyvAxTbGGAKekHOTwUIwABtgzKtKQVAcyTaacajPv8gmp2Hz1JYFLEoMA5/8fodfqg3oxMfd/3D362uc3XkUtydOGTC9kx2+rN3jrMfxEV28/PMeGcvBK7eD04UryOVyBlCr1fD25iKuhYcHE2gNPIvE6SeacYTWyT14sDKiiykiXgg8PXcPF37MmFws4XFNwgi02v5gOp8p3dhSLCEE0ldnERGlDXN1Z+WQN8HSJhMEAcrlMlzXRaVSQT6fHynS7Eawk/vIdSzdOaQCGcs2VWnEMAzhOI7x+3EURajX6+YHehZSZ59o2TyNS7uOwfd9eJ5nbse7rr9Zw2wq04uUz6VSA3Wyepz712+Z0ceNik49W99MKLZkluT7wTt1BeWeaC2ioTmROMVi0fAmqz5fQerhGi7GR3pABHs/lQ4Z8OfpeZFM8KreN7Habox0tFkK2R1TQx0RdGI5t7+1EAx2e7gAtjG9XX43lucJSDEbf/DlQMHjDHpxuJ6ZvlH/BqRPHPWoI9vzH5xq3+2NFxVlAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/icon_arrow.5a2e0b83.svg\";","export default __webpack_public_path__ + \"static/media/icon_check.11b53f10.svg\";","export default __webpack_public_path__ + \"static/media/icon_close.0c82fb42.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_sm.d5bc42f1.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_toast.0a4cfb5c.svg\";","export default __webpack_public_path__ + \"static/media/lock.d4328791.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.ad3aa4f8.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.284fc0d7.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.d7acb86a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.fdbc8bce.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.e814d54a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.c789ea20.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.814b7a34.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx_logo.9b999610.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.d195d704.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.4c6d42bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.9d2319ed.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.25e0dd13.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.79853d5a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.b4c18be7.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.ef61d0e2.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.5b289ecc.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.b4a729d3.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.fb50658c.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ce951c62.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.505b3f30.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.ba19dad8.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.33dcae6c.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.0b15337e.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.2d52c3f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.e5edd079.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.fa320a73.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.7516903b.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.2005009f.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.8b3e94cb.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.42432da7.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.ae09b310.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.6d7a1ef1.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./ic_arbitrum_24.svg\": 317,\n\t\"./ic_avalanche_24.svg\": 318,\n\t\"./ic_avax_24.svg\": 319,\n\t\"./ic_btc.b_24.svg\": 320,\n\t\"./ic_btc_24.svg\": 321,\n\t\"./ic_busd_24.svg\": 322,\n\t\"./ic_dai_24.svg\": 323,\n\t\"./ic_eth_24.svg\": 324,\n\t\"./ic_frax_24.svg\": 325,\n\t\"./ic_glp_24.svg\": 326,\n\t\"./ic_gmx_24.svg\": 327,\n\t\"./ic_link_24.svg\": 328,\n\t\"./ic_mim_24.svg\": 329,\n\t\"./ic_settings_24.svg\": 330,\n\t\"./ic_tether_24.svg\": 331,\n\t\"./ic_uni_24.svg\": 332,\n\t\"./ic_usdc.e_24.svg\": 333,\n\t\"./ic_usdc_24.svg\": 334,\n\t\"./ic_usdt_24.svg\": 335,\n\t\"./ic_wallet_24.svg\": 336,\n\t\"./ic_wavax_24.svg\": 337,\n\t\"./ic_weth_24.svg\": 338\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 649;","export default __webpack_public_path__ + \"static/media/icon-BTC.d1a85829.svg\";","export default __webpack_public_path__ + \"static/media/icon-ETH.11294773.svg\";","export default __webpack_public_path__ + \"static/media/icon-GNS_v2.43bcc479.svg\";","export default __webpack_public_path__ + \"static/media/icon-Hegic.e537c8cb.svg\";","export default __webpack_public_path__ + \"static/media/icon-Lyra.5cb62325.svg\";","export default __webpack_public_path__ + \"static/media/icon-Premia.54a2ca05.svg\";","export default __webpack_public_path__ + \"static/media/icon-WBTC.a98dae38.svg\";","export default __webpack_public_path__ + \"static/media/icon-accordion-arrow.21e328e6.svg\";","export default __webpack_public_path__ + \"static/media/icon-dollar.c1bac52e.svg\";","export default __webpack_public_path__ + \"static/media/icon-down.5f041f55.svg\";","export default __webpack_public_path__ + \"static/media/icon-hint.1458d991.svg\";","export default __webpack_public_path__ + \"static/media/icon-medium.d12f5c4e.svg\";","export default __webpack_public_path__ + \"static/media/icon-repay.78acc3e0.svg\";","export default __webpack_public_path__ + \"static/media/icon-sort.ee46ea33.svg\";","export default __webpack_public_path__ + \"static/media/icon-usdc.f5128e2a.svg\";","export default __webpack_public_path__ + \"static/media/icon-user.346ff90d.svg\";","var map = {\n\t\"./Anyswap.png\": 673,\n\t\"./Anyswap.svg\": 674,\n\t\"./Artwork.svg\": 675,\n\t\"./Artwork_gmx.svg\": 676,\n\t\"./Banxa.png\": 677,\n\t\"./DROP_DOWN.svg\": 678,\n\t\"./Hop.png\": 679,\n\t\"./Hop.svg\": 680,\n\t\"./Hop_dark.png\": 681,\n\t\"./Hop_dark.svg\": 682,\n\t\"./Synapse.png\": 683,\n\t\"./Synapse.svg\": 684,\n\t\"./binance.png\": 685,\n\t\"./bscscan.png\": 686,\n\t\"./btn_big_arbitrum.png\": 687,\n\t\"./btn_big_avalanche.png\": 688,\n\t\"./btn_big_bsc.png\": 689,\n\t\"./btn_big_purchasegmx.png\": 690,\n\t\"./btn_big_purchasegmx.svg\": 691,\n\t\"./buy_gmx.svg\": 692,\n\t\"./buy_gmx_bond.svg\": 693,\n\t\"./buy_transfer_eth.svg\": 694,\n\t\"./coinbaseWallet.png\": 695,\n\t\"./coingecko.png\": 696,\n\t\"./cross.svg\": 697,\n\t\"./ddl/chevron-down.svg\": 698,\n\t\"./ddl/chevron-down_sm.svg\": 699,\n\t\"./ddl/ic_btc_40.png\": 700,\n\t\"./ddl/ic_btc_40.svg\": 357,\n\t\"./ddl/ic_dai_40.png\": 701,\n\t\"./ddl/ic_dai_40.svg\": 358,\n\t\"./ddl/ic_eth_40.png\": 702,\n\t\"./ddl/ic_eth_40.svg\": 243,\n\t\"./ddl/ic_frax_40.png\": 703,\n\t\"./ddl/ic_frax_40.svg\": 359,\n\t\"./ddl/ic_link_40.png\": 704,\n\t\"./ddl/ic_link_40.svg\": 360,\n\t\"./ddl/ic_uni_40.png\": 705,\n\t\"./ddl/ic_uni_40.svg\": 361,\n\t\"./ddl/ic_usdc_40.png\": 706,\n\t\"./ddl/ic_usdc_40.svg\": 362,\n\t\"./ddl/ic_usdt_40.png\": 707,\n\t\"./ddl/ic_usdt_40.svg\": 363,\n\t\"./ddl/ic_weth_40.png\": 708,\n\t\"./ddl/ic_weth_40.svg\": 364,\n\t\"./ddl/icon_arrow.svg\": 709,\n\t\"./ddl/icon_check.svg\": 710,\n\t\"./ddl/icon_close.svg\": 711,\n\t\"./ddl/icon_close_sm.svg\": 712,\n\t\"./ddl/icon_close_toast.svg\": 713,\n\t\"./ddl/icon_dollar.svg\": 714,\n\t\"./ddl/icon_dollar_active.svg\": 715,\n\t\"./ddl/icon_market.svg\": 716,\n\t\"./ddl/icon_market_active.svg\": 717,\n\t\"./ddl/icon_trigger.svg\": 718,\n\t\"./ddl/icon_trigger_active.svg\": 719,\n\t\"./ddl/icon_withdraw.svg\": 720,\n\t\"./ddl/icon_withdraw_active.svg\": 721,\n\t\"./ddl/lock.svg\": 722,\n\t\"./ddl/long.svg\": 723,\n\t\"./ddl/long_active.svg\": 724,\n\t\"./ddl/short.svg\": 725,\n\t\"./ddl/short_active.svg\": 726,\n\t\"./flag_en.svg\": 727,\n\t\"./flag_es.svg\": 728,\n\t\"./flag_fr.svg\": 729,\n\t\"./flag_ja.svg\": 730,\n\t\"./flag_ko.svg\": 731,\n\t\"./flag_ru.svg\": 732,\n\t\"./flag_zh.svg\": 733,\n\t\"./glp_icon.svg\": 734,\n\t\"./gmx-logo-final-white-small.png\": 735,\n\t\"./gmx-logo-final-white.png\": 736,\n\t\"./gmx-logo-final.png\": 737,\n\t\"./gmx-logo-glow.png\": 738,\n\t\"./gmx-logo-with-name.svg\": 739,\n\t\"./gmx_logo.svg\": 740,\n\t\"./graphite-01.png\": 741,\n\t\"./ic-communityproject.svg\": 742,\n\t\"./ic_arbitrum_16.svg\": 743,\n\t\"./ic_arbitrum_24.svg\": 744,\n\t\"./ic_arbitrum_96.svg\": 745,\n\t\"./ic_arbitrum_hover_16.svg\": 746,\n\t\"./ic_arrowleft16.svg\": 747,\n\t\"./ic_arrowright16.svg\": 748,\n\t\"./ic_avalanche_16.svg\": 749,\n\t\"./ic_avalanche_24.svg\": 750,\n\t\"./ic_avalanche_96.svg\": 751,\n\t\"./ic_avax_24.svg\": 752,\n\t\"./ic_avax_30.svg\": 753,\n\t\"./ic_avax_40.svg\": 754,\n\t\"./ic_banxa.svg\": 755,\n\t\"./ic_binance_logo.svg\": 756,\n\t\"./ic_bsc.svg\": 757,\n\t\"./ic_bsc_96.svg\": 758,\n\t\"./ic_btc.b_24.svg\": 759,\n\t\"./ic_btc.b_40.svg\": 760,\n\t\"./ic_btc_24.svg\": 761,\n\t\"./ic_btc_40.svg\": 762,\n\t\"./ic_busd_24.svg\": 763,\n\t\"./ic_buy_glp.svg\": 764,\n\t\"./ic_cash.png\": 765,\n\t\"./ic_cash.svg\": 766,\n\t\"./ic_checked.svg\": 767,\n\t\"./ic_coingecko_16.svg\": 768,\n\t\"./ic_coingecko_hover_16.svg\": 769,\n\t\"./ic_convert_down.svg\": 770,\n\t\"./ic_copy_16.svg\": 771,\n\t\"./ic_cost.svg\": 772,\n\t\"./ic_dai_24.svg\": 773,\n\t\"./ic_dai_40.svg\": 774,\n\t\"./ic_discord.svg\": 775,\n\t\"./ic_eth_24.svg\": 776,\n\t\"./ic_eth_40.svg\": 777,\n\t\"./ic_frax_24.svg\": 778,\n\t\"./ic_frax_40.svg\": 779,\n\t\"./ic_github.svg\": 780,\n\t\"./ic_glp_24.svg\": 781,\n\t\"./ic_glp_40.svg\": 782,\n\t\"./ic_glp_custom.svg\": 783,\n\t\"./ic_gmx.svg\": 784,\n\t\"./ic_gmx_24.svg\": 785,\n\t\"./ic_gmx_30.svg\": 786,\n\t\"./ic_gmx_40.svg\": 787,\n\t\"./ic_gmx_64.svg\": 788,\n\t\"./ic_gmx_arbitrum.svg\": 789,\n\t\"./ic_gmx_avax.svg\": 790,\n\t\"./ic_gmx_big.svg\": 791,\n\t\"./ic_gmx_custom.svg\": 792,\n\t\"./ic_gmx_footer.svg\": 793,\n\t\"./ic_hop.svg\": 794,\n\t\"./ic_info.svg\": 795,\n\t\"./ic_language24.svg\": 796,\n\t\"./ic_link_24.svg\": 797,\n\t\"./ic_link_40.svg\": 798,\n\t\"./ic_liquidity.svg\": 799,\n\t\"./ic_medium.svg\": 800,\n\t\"./ic_menu_dots.svg\": 801,\n\t\"./ic_metamask_16.svg\": 802,\n\t\"./ic_metamask_hover_16.svg\": 803,\n\t\"./ic_mim_24.svg\": 804,\n\t\"./ic_mim_40.svg\": 805,\n\t\"./ic_multiswap.svg\": 806,\n\t\"./ic_new_link_16.svg\": 807,\n\t\"./ic_olympus.svg\": 808,\n\t\"./ic_olympus_arbitrum.svg\": 809,\n\t\"./ic_selector_dropdowns.svg\": 810,\n\t\"./ic_settings_16.svg\": 811,\n\t\"./ic_settings_24.svg\": 812,\n\t\"./ic_sign in_16.svg\": 813,\n\t\"./ic_sign_out_16.svg\": 814,\n\t\"./ic_simpleswaps.svg\": 815,\n\t\"./ic_stats.svg\": 816,\n\t\"./ic_stats_big.svg\": 817,\n\t\"./ic_synapse.svg\": 818,\n\t\"./ic_telegram.svg\": 819,\n\t\"./ic_tether_24.svg\": 820,\n\t\"./ic_tokens.svg\": 821,\n\t\"./ic_totaluser.svg\": 822,\n\t\"./ic_trading.svg\": 823,\n\t\"./ic_transfer_avax.svg\": 824,\n\t\"./ic_twitter.svg\": 825,\n\t\"./ic_uni_24.svg\": 826,\n\t\"./ic_uni_40.svg\": 827,\n\t\"./ic_usdc.e_24.svg\": 828,\n\t\"./ic_usdc.e_40.svg\": 829,\n\t\"./ic_usdc_24.svg\": 830,\n\t\"./ic_usdc_40.svg\": 831,\n\t\"./ic_usdt_24.svg\": 832,\n\t\"./ic_usdt_40.svg\": 833,\n\t\"./ic_wallet_24.svg\": 834,\n\t\"./ic_wavax_24.svg\": 835,\n\t\"./ic_wavax_40.svg\": 836,\n\t\"./ic_weth_24.svg\": 837,\n\t\"./ic_weth_40.svg\": 838,\n\t\"./lg_arbitrum.svg\": 839,\n\t\"./logo_GMX.svg\": 840,\n\t\"./logo_GMX_small.svg\": 841,\n\t\"./long.svg\": 842,\n\t\"./metamask-text.svg\": 843,\n\t\"./metamask.png\": 844,\n\t\"./page-not-found.svg\": 845,\n\t\"./position-share-bg.png\": 846,\n\t\"./short.svg\": 847,\n\t\"./swap.svg\": 848,\n\t\"./trading.jpg\": 849,\n\t\"./wallet-connect-text.svg\": 850,\n\t\"./walletconnect-circle-blue.svg\": 851,\n\t\"./wave-01.png\": 852,\n\t\"./wave-02.png\": 853\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 672;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAACalBMVEUAAAAoKDwnKTsnKTsnKTtdPWjSaM2RTpd9SIXQZM/PYtJbOmttS2mZX4m7bqLce7vbeb7ad7/ZdcK2ZKqUVZJoQm8yLURxQ3zNX9TCWc0xLEWPXIHef7fdfrrce7zZdsDZdMLXccTWcMfUbMjUa8rSaMyRT5c8ME7NXtTMXNfKWdmgS7SlZJHdfbrberzbeL/Yc8PWb8fUbMnTasvSZ8zRZc/PY9HOYdOOSpuOSZ3KWNrJVtzHU95tOoRQUWA1NkcyLkOBUXyBUX1qRm1TPF1TO15TOl5+SoKTUpa9X7vRZdDPYtHOYNTMXdXLW9jJV9rIVd3GUt/GUOK6Stk7LVGTlJ1CRFRdX2xcXmvKys+8vcJHNFeQS5vMXNbLWtnJV9vGUuDFT+LDTOTCSueaP73////x8vOGh5FQNWOrTr7IVN7GUeDFT+PDS+XCSejARuq/RO1fMn6ab3DMjYaKQqPETuPDS+bBSOjAReq/Q+29QO+NN7l4eoXW19p3eYTk5OaurrWgoanJyc67vMGFhpCabm/zpZmNZ2qIPqbBSOm/Reu+Q+68P++7PfJnMIyhoqry8vPl5edrbHivr7bX2NtBOEfypJhNQEyGOqq+Qu6pPNlVL3VMLWpaSFJyV17AhoHZlY00MUEwK0apO9q7PPRnMI1NQE3MjYdDLF64OPalNOFzV15vL5ubMNhAOEflnJJ/X2NDMVdtP3wvLELLjYaxSs7JV92XTaPmnZPmnZK/hYGMZmlmT1hZR1J/X2SZbm+mQsyORqLnnZPYlIyAX2TmnJI0K0tZM3TalY3NjYfAhYGzfnundnZnUFiYWxnSAAAABHRSTlMAM7D2JaXEwgAAA5dJREFUeAHszgMBBFEUAMCns421jf7ptsbXJBgAJBZFMSEAsiiMEUiURsCiNAZRnAu6oNrB1XqjdnC72x9UCx5P58v1dn88X2+Rz/77+6sV9PwgvEZxkmZ5UVZV3bSdWsF+GKdoThYZGhmbmJqZW1haWdvYUsUiO3vqONDB0cnZxdXN3cPTy9vH188/IDAoOARqRagdiAoLDcdtnH0EGNhhykRGUTuTRMfExsUHJCQmJadABEJTIyFUGm7j0lPBIAqLAyOpn4szMrOyc3Lz8gsKUR2YiltLKFSOhg4sKkawpUpKy8orKquqAbSVBY7kMBBFBf9c9ikqllsMlZxghc09sBzcYWZeZmY81JaTnnQ0jC9UJunFeFiw3mBuNCXQ1GJutfUBwXoHQlAHvE63K8W2QfJVrqjX7XY8QA9JQBpFlV4zbyZ1zMmCwyOjGHDz1u07d+/dPyQYMkcRcxuoMcexyOoDghwAigmJHxPZFJYtUex7MFEqQUsji0IKowag/IgoZQJSDsly/UTBB2Nj4xgwMTk1PbPfOy0SuszwmNNcVcFyCBjmoF+HHBpIfaV9C/fk2AyAdpU1XAMDZ4REAhvpYg7UczfyTxKcnZsfW1hEydLyymo5v/ZBwKwBMBOsPHD9U6kTKUBnjW6mRSAp52D5lsXOVAhqDorAFdViFPLHC66NOdYrhhubW6VgZoSU2YXItcK+IJWC2EczK5ehDwpSg4W+oLy9UjDzu0LjJMHtsbERMVyojPLOLnBwDrpHiKo9eFAwjKLQZZgDgsRkNCqCKAVja3JwvODeWMHDR6hyUDBhNvnMSwpB7XOIx0+eVgRlPgVSrDg4IFgEVcGspSXILGqt07eZUbEbcc+z7cXjBZGx3+74nEEE/Y5EkYfnL16CuH+SKE6Bmq9g/QTwkoFgKpnwqoLKrb4uWxjuaUCfKIh5sXs15nj95u279+8/vP04WxVE4AS1ZcFqJ+iIDfDpxmfUOSdGLdOAjmv9mmEpKJns+xx7A0Go1NowsxLE3OiyOlFw78vY2Ndv34t+LJ5XKDCq8lFJovoLxSQGwo+fGKC98u0ZaVHNUHkGPI3yLcQ1CIpIndyD+CZS24ujv8ZKfuMELBMuSSHKdNaz+M/I2F8Aa6Pzrh/X/20vXrMgNahJrcg7q+DiK+mzM5OkBpdEpxlnqfd/xLdmzu4sGjLdzlEHjjpw1IGDfgBz0A8BD/pB9EE/DQEAJqnikobhSecAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.3cfd1d07.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6R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\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.01459500.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.ed3174dc.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.373e200e.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.2c9772ea.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down.88670207.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down_sm.697f08ea.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHjSURBVHgBfVO/a1NRFP7Ova8NQYkZigSDJbqJQh4Ogk4NiqIuCiJuDZgOQhGKk1P9C1Tq4KJQR12yiRWkg4ODg3EQp7ahpTSUQtMftE2bvNN7zstLXtMfH7x3f5zznXO+c+8l9GB7IlsEYZgBn8BpBtUJqFjCZP/o4qe4L3VI7zM5apkyM3wcjyq8oJB8VqvKwkRENM10L9EMXEbfvY8w2ev6Oaif+kdk2VBDG/bSYySefEffrTe69q69iMfMUZPK6tfWWIxbeeUfTOYqzGAB2FoGDVyBHRwCNhbAqzOiNjN+P1U10pyjxFF/Sse9r0+x+/k2kDgD7+bbjr3FQdELu3oEOXsD3FiHzZd0pEQKvL7QrQ7kGzmOXqI0SpyDuW9K9PyRsIofY93gQNrIOcaJ9uIdWL8Ulvb/C1p/P2C3/Ci05UuxzKh7hKDi4gx1IrqsxpUskC5LqZQ6HxpdFd3MXLEv754mQ/Qg2gwWf2m3ldBYA5066wLMOwlTaP1+7cpptNn8Snu18+7cH2lcR7O7EKLZ5kew93Ncgx0AczX5fOmCp/Nm8BCWpkGUi7Kr5tkpHIIjunMqaBL5Jcdq4YYYToDoFD/1R+xhRNicyBQt0TAz+URIu/teJ3Ik4snkaO3Aq9oHE/y09owWmgYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGoSURBVHgBpVM7SwNBEJ7ZXHwSH6CFlQG1sPMB5hAUrQQro8ZgpWCpkNhZCLn8ApPCTrC0CDGpUvpsYoQQLSysoq2CSKIhJHfj7pm73AmagB8szDc3s/PNzB7CD5QSsps0ChDBEqdu3UmQA0Y5xli43ZvOW+PRSopxTxAJDuAPaERhly+jGJwZxkdMVhol6wmIoUJsSrEpKMblTSQ6FrZjcBFY34S96ksW1OeUzaeq5O3yZ5LsWwaFzAoiuVIA9SllHkf/OLQtxAE7BswLJAl1tViIyXMM6dz44JzcB+01qydaIQ37wTEwA+XrnboyUufxM+EJkAoR4WidPeQKxqERSqfTRv9Bia+sx1hG+Wr7VwVGgcrDkckJqef/CtQq3vEZNFQgDa8B8gFX0numD5mWYy5f+oLbeWswOl36xMVh/RPgHN0CacgP1fuINSzfvnx7KQlLBdp1ACaELaqLVUrdI2ak9v4I1bMNoEqx3j+QUmuj1ldcDvFnqkAzQFI6VzJh2wXNXiIG17F6E7VwO95OZHeLU+MvE8c4Hau583zOyXIVo73r9r/xCzLjs4Txvi/RAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHoSURBVHgBfVPPaxNBFP7eTBI31Wr8RdpDYRURxUMCIogemoJnrUdva/QoWC9etN0kXgXJP6C5eRK8efHSkygICYq0IDR4MIm1ECGaNMnOczNpNrtT6INd9s1775vv+2aHYITjNmwB+RCMZT+195arIFQVvGKlOF8P91M4ybvNFbB4gYOCveLLZ/OFSSqC4dVWwRw+lZK4cTUZBSDp5lcbUYC8+8sBkWtu9uDOUVw8m0D6pNwH4jxtLU8ZMPYNX89aWJiL6e8rlyyzDCFIsxX33e0cpmYF1G8tHQ7yE8cEMucTJobtPGnkBAvOmJWbSzOQPuuNrQE+fumh+dvTUo7MRDz3e2Qmxh6lRhomkYgT4v5T2+zrvLfL2Nzpw0oQTh+X6PwbBr0MSsVIcpu9KWp/wPj2vQ9PAecW4nptOGT8/KPAKsqUwG3hKaqZEqxDhAt2HOufu9hpe0jNSixeTqLTjSIopqoWdXettUUgO1y8d3sW1/yT+FDb1azevO/gb5dD9Ln+qpQ+o4+RCY9MFq/fdfTuSYvw6WsvMrwnoKCNHL2q6883MouPR/91blIe+F79aI4NG7GIUAcXKqV0eexDKJy1bVf4RRwQCmqlUporBzzMBn0blXR9WVm/mB3rRZ0Yb5XwyuZt/A/V0KylFRZwagAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEHSURBVHgBjVMLEYQgEGUuAQ3EJNrACNLACEYwgjYwAhGwAZqAa8DxdsAB8Rx3Zt3Zx779gYyVIr0qr9arCxZ+zx5EeNWB8E9NiCuIhnP+RHThvEhARK21W9fVCSHcMAxumiay8JdlccaYmECnM1JmBNyJtZbsPM9pJ7QDFQFUQCAqNE1DGCx8yGUs8M6tOiklBXVdl83ati3hGCHB7cd/eOy/qiqy27Zl29z3nayvnMIc5G/0juMgW9d1RvaVsyRBvsXMcUF935OPljEzMPjXmWUElFLZdq+Cq0yWdr44DRAVcLc4xNLGcaQOcAYc56G6SfsXAC5tvX5hZwL2/Lb1HTEVyV7+VT9KbxPpO/XgrgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFDSURBVHgBrZIxUoNQEIbfvkcVmxyBJmoSC3MDPIGWJmNBTgCeALhBPEGoJCVHwBNoJRgbvEGqjEXYdWHChHlA4Uz+hvfe/PuxO/uD6JH58D4cDC58Pt4jwjLbjJIuH3QXDlwA6RDRsGEMCyyCbDPOewE3T98WIq1LjugTUoACwxpUAa4fU1MpY81/tDSzz+YfCdITAE1oTnR4TqNJbJQ3KZXVLCYSCVGxbLQbThZfHgjpkqjGYpjh8DeWrQ4R/DS6vNNn/Xy9Cgo8zHR/C6AU5KJHOrQT8F+dHwBEZp+5zIj+ZugPKMifLrZmMzRauNoAxCJRSvHqhFXe2WLzau3pfLviHX8QoV9y6mIOz44Q4+P5JA6U3RGa03hVIa32v/uXPJ7tWoBa43nmggCnCeoIl+gFHLsxeQyPK2+RE5hFo7cu3x+G+J1ieOsLEAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEuSURBVHgBlVO9UgJBDP6wszut7LxWG6mtHF9AHR8A3gB9Anpt7C3Aws5CZ9TKmbOhgzlooIKDBjoWKuhCQrif5ff4ZjJ7m82X5MvuAUsgojybx2ZIYRb7HDaBD102n7YjkLh1xIDSwU6wBzGEn9SYcPfTJsgJ2bNcZsKeDjf2rIlKVd63ubehnsXwDrh4dmV69QHgOsBoCvTGwN078PDD/n4yKitkxyKOJmo3ZyIKKF4DhUtN9Pirq8KRto3VdvGPWzR2m7LmP1jKE1HhOxIoletR1c8m8NXSyu6R+v47al0DnLIvk4nECfktIjuHGiQayzXgpcJJjoHbc6B0DzR4FhcnYXQ5vC7fuiqZ9tWrrnGb+h3MVQa7X5gkCvXHkDjXGjKle6L+CnEpSeq/agZ2kCMI5PSNywAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI/SURBVHgBfVNNaFNBEJ7dF6sRUhJUqglK/KG8kEKF1tSCQiH1WEguHltvXgJG0iLtJcnFIFFsIR48xpteInpsAgpCTPRQpcHnXw1CA4KY0iCK5L11ZrfvNemhA8vb2flm9vtm9jHYY/qtatA0XTc4FzEQEKQzAbCGnzXOzaxxZ7LZi2e9Tmj+ddJi/D7sYwxE1shPZGyfOzcv1DJ2cuJKAGYvDTlJc5eHID5+FBQbliZsXwF9oX6NAgHfQSglR8BzSIPS25/4dclVXm9D5IwHY2EZI+xwqhZzCggGaXWzHyrrvyD3/Dt0/prSp7XZ/geLT75BpbEFD+bOKSkaSLZcT72ZomZFznrkLYVySwJyV0/DoFuTKzHtl2eF1U3MZBKHtwb1VHXKJbgYpSAdFl/9cHST5mjuPTLpwgVK2LEKyomGfVDf6IDg2igXgnkpQPoJbFthtSXpFq/rEDpx2DnfRgyxktIxlzMmtsghzdQwMgJ8aP2G2HIDEsXPOIXjToFBxGz/MVUfMJczy3xHTrnRhumwV92CgKWZU3Kc8fFj6O8yi474sJltuTfpcRn3Jl/gvln/2pENio+pec8+NFDWAIT8bslEvgd8GwHvgNSPAppf8pGXkrOwxE3GWWnx8QY8Qs2USNOgriu9TLEZOyILqxzISBk2teH5WpoxlqFkApPR7MmWZk6Cx+2C28/U+xBCZD7dncj2FegtAvualfyYv7hie2xvWE9Wg9YBLY2B86AWWdMS7KnW7a4Yy/1/43+jYdjzTW6D2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgBlVM9SCNBFH4zu0rk7nSvuuO8g72zuas81MafQrEVRYuUatDeYONfkU0VtVDSC0HFysJYWigR/Cn9AdFGXDCYiEViUBR15jkz68ZNiIIfPN7bN+9973vDLIEimLGg8UQrghxIFyXElDmOaBOCiTLGo3ZgyvbWE+9H9cJEUCRCCGjAGyAMw8lAxHK/NTf4OT9mCbqICH3wHihprepsIbnVrUReQfXCeL9wMUX02YBfn76W7D2/zUDyJqtizp66U4HpuP5yFnKL/H/qYLi2vSTBzME6zBxuOEI0fVa4ODFj4/8fNdhzixq//VYmMfivWfm5423ldy/PlEH+PlibznRqAvJ88iiTUlZVXgH+mnqoLPfB3MkOVJb5IHmbLVDEdK1W58gN7/Tcw70ikF7i+uFOxdLkuSRcOz92FAAYupdRypNF/po61XiUuXBW+dukLlCSuM0SCJDVGWMJTdMKSNw9ww0doghhILEEpYCI+zQtX5Z4ZfBBiGY73RvZpM4uPAwfhNjfkl5pz61s2196mkWStHqL5GUun+7B1f1N0XRuXfRNRl+IXvFjcTREkFrvDM5yZFaqbyrqUVKI77ERk2h0iKJQQ8B0RoKNwOOc43y66G98Bj1CxfZyFDl9AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgBdVJNaBNBFP5msjFRobsVsRVtGEE9RVgFT0VIQS9ejBfFk6voRRA82aBoLkLoLacetZ4EDzYo2INCAtKDl2bxKBTWRDH4uyuIxmRnnDdN0iS07zLvvZnvvfd98xjG7NtMwYNilxljrlLK0WeoTz/BsTTZKD0efsv6zk8xL2SXLyvAxTbGGAKekHOTwUIwABtgzKtKQVAcyTaacajPv8gmp2Hz1JYFLEoMA5/8fodfqg3oxMfd/3D362uc3XkUtydOGTC9kx2+rN3jrMfxEV28/PMeGcvBK7eD04UryOVyBlCr1fD25iKuhYcHE2gNPIvE6SeacYTWyT14sDKiiykiXgg8PXcPF37MmFws4XFNwgi02v5gOp8p3dhSLCEE0ldnERGlDXN1Z+WQN8HSJhMEAcrlMlzXRaVSQT6fHynS7Eawk/vIdSzdOaQCGcs2VWnEMAzhOI7x+3EURajX6+YHehZSZ59o2TyNS7uOwfd9eJ5nbse7rr9Zw2wq04uUz6VSA3Wyepz712+Z0ceNik49W99MKLZkluT7wTt1BeWeaC2ioTmROMVi0fAmqz5fQerhGi7GR3pABHs/lQ4Z8OfpeZFM8KreN7Habox0tFkK2R1TQx0RdGI5t7+1EAx2e7gAtjG9XX43lucJSDEbf/DlQMHjDHpxuJ6ZvlH/BqRPHPWoI9vzH5xq3+2NFxVlAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/icon_arrow.59b289c0.svg\";","export default __webpack_public_path__ + \"static/media/icon_check.a37b7ce5.svg\";","export default __webpack_public_path__ + \"static/media/icon_close.9972202b.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_sm.be2b83ff.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_toast.d527cc94.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar.f46a93fe.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar_active.3a2a7bba.svg\";","export default __webpack_public_path__ + \"static/media/icon_market.05f6ef86.svg\";","export default __webpack_public_path__ + \"static/media/icon_market_active.af684a3e.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger.c4291240.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger_active.a6e3f64a.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw.29572b6d.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw_active.7210cab7.svg\";","export default __webpack_public_path__ + \"static/media/lock.3a55a760.svg\";","export default __webpack_public_path__ + \"static/media/long.0f8a81b9.svg\";","export default __webpack_public_path__ + \"static/media/long_active.8a037ed6.svg\";","export default __webpack_public_path__ + \"static/media/short.c75b3ee9.svg\";","export default __webpack_public_path__ + \"static/media/short_active.d3098d1c.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.c92a8361.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.4ba7dfef.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.589da1a2.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.81aa61af.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.97c8fe63.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.0c71e16b.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.fd0e8daf.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.03a4464f.svg\";","export default __webpack_public_path__ + \"static/media/gmx_logo.2b33868e.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.9b5f97dd.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.b12913b6.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.21502a04.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.b425521a.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.bab8cadc.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.8eb00e6a.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.b4f2217c.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.56371371.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.fb50658c.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ceaebef6.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.f00d35e4.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.87c2cfaa.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.70b17676.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.b358dc93.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.25d2f4a7.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.1b0564f3.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.4cd51f2a.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.b100121a.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.6a27251b.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.e274ef10.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.53893264.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.4be97369.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./icon-GMX_full.svg\": 345,\n\t\"./icon-GNS_full.svg\": 348,\n\t\"./icon-Hegic_full.svg\": 350,\n\t\"./icon-Lyra_full.svg\": 352\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 900;","var map = {\n\t\"./Call.svg\": 958,\n\t\"./Put.svg\": 959,\n\t\"./Straddle.svg\": 960,\n\t\"./Strangle.svg\": 961\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 957;","export default __webpack_public_path__ + \"static/media/Call.167da481.svg\";","export default __webpack_public_path__ + \"static/media/Put.578935f1.svg\";","export default __webpack_public_path__ + \"static/media/Straddle.c7ef0e77.svg\";","export default __webpack_public_path__ + \"static/media/Strangle.083dbe68.svg\";","import React from 'react';\r\n\r\nconst Logo = () => {\r\n\treturn (\r\n\t\t<div className=\"logo-wrapper\">\r\n\t\t\t<a className='logo' href=\"/index.html\">DeDeLend</a>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Logo;","import React from 'react';\r\nimport cx from 'classnames';\r\n\r\nconst Button = ({children, className, clickHandler, disabled, isMain, ...props}) => {\r\n\tconst classes = cx('btn', className, (isMain && 'btn_main'), (props.btnActive && 'btn_hlight'));\r\n\t\r\n\tconst childProps = { ...props };\r\n\tdelete childProps.btnActive;\r\n\t\r\n\treturn (\r\n\t\t<button {...childProps} disabled={disabled} className={classes} data-text={children}>\r\n\t\t\t{\r\n\t\t\t\tisMain ? \r\n\t\t\t\t\t<span>{children.toString()}</span> :\r\n\t\t\t\t\tchildren\r\n\t\t\t}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;","import { useState } from 'react';\r\n\r\nexport const useTogglePopup = () => {\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\r\n\tfunction openPopup(e) {\r\n\t\tif (isOpen) {\r\n\t\t\tclosePopup();\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\te.stopPropagation();\r\n\t\tdocument.addEventListener('click', closePopup);\r\n\t\tsetIsOpen(true);\r\n\t}\r\n\tfunction closePopup() {\r\n\t\tdocument.removeEventListener('click', closePopup);\r\n\t\tsetIsOpen(false);\r\n\t}\r\n\r\n\treturn {\r\n\t\tisOpen,\r\n\t\topenPopup,\r\n\t\tclosePopup,\r\n\t};\r\n}","import React, { useState } from 'react';\r\nimport icon_wallet from '../img/icon-wallet.svg';\r\nimport icon_link from '../img/icon-link.svg';\r\nimport Button from './UI/button/Button';\r\nimport { useTogglePopup } from './../hooks/useTogglePopup';\r\n\r\nconst Wallet = ({ address, setAddress }) => {\r\n\tconst {\r\n\t\tisOpen,\r\n\t\topenPopup: openWallet,\r\n\t\tclosePopup: closeWallet,\r\n\t} = useTogglePopup();\r\n\r\n\tfunction cutAddress(addr) {\r\n\t\tif (!addr) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn addr.slice(0, 9) + '...' + addr.slice(-15);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className={\"wallet\" + (isOpen ? \" active\" : \"\")}>\r\n\t\t\t<button className=\"wallet__header\" onClick={openWallet}>\r\n\t\t\t\t<div className=\"wallet__address\">\r\n\t\t\t\t\t<img src={icon_wallet} alt=\"ETH\" />\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t{cutAddress(address)}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<div className=\"wallet__body\" onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t<button className=\"close-btn\" onClick={closeWallet}>\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\">\r\n\t\t\t\t\t\t<g clipPath=\"url(#clip0_1830_494)\">\r\n\t\t\t\t\t\t\t<path d=\"M10 0.875L9.125 0L5 4.125L0.875 0L0 0.875L4.125 5L0 9.125L0.875 10L5 5.875L9.125 10L10 9.125L5.875 5L10 0.875Z\" fill=\"white\"/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<clipPath id=\"clip0_1830_494\">\r\n\t\t\t\t\t\t\t\t<rect width=\"10\" height=\"10\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t<a className=\"wallet__link\" href={`https://arbiscan.io/address/${address}`} rel='noreferrer' target='_blank'>\r\n\t\t\t\t\t<img src={icon_link} alt=\"external link\" />\r\n\t\t\t\t\t<span>View on Arbiscan</span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<Button className=\"wallet__button\" btnActive={true} onClick={() => {\r\n\t\t\t\t\tsetAddress('');\r\n\t\t\t\t}}>\r\n\t\t\t\t\tDisconnect wallet\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Wallet;","import { ethers } from 'ethers';\r\n\r\nconst ARBITRUM = 42161;\r\n\r\nexport const requestAccount = async (setWalletAddress) => {\r\n\tif (window.ethereum) {\r\n\t\ttry {\r\n\t\t\tif (window.ethereum.networkVersion && Number(window.ethereum.networkVersion) !== ARBITRUM) {\r\n\t\t\t\talert('Change your network (Arbitrum) and reload the page')\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\tmethod: \"wallet_switchEthereumChain\",\r\n\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM)\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\r\n\t\t\t\t\tif (err.code === 4902) {\r\n\t\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\t\tmethod: \"wallet_addEthereumChain\",\r\n\t\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM),\r\n\t\t\t\t\t\t\t\tchainName: 'Arbitrum One',\r\n\t\t\t\t\t\t\t\tnativeCurrency: {\r\n\t\t\t\t\t\t\t\t\tsymbol: 'ETH',\r\n\t\t\t\t\t\t\t\t\tdecimals: 18\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\trpcUrls: ['https://arb1.arbitrum.io/rpc'],\r\n\t\t\t\t\t\t\t\tblockExplorerUrls: ['https://arbiscan.io/']\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst accounts = await window.ethereum.request({\r\n\t\t\t\tmethod: 'eth_requestAccounts',\r\n\t\t\t})\r\n\t\t\tsetWalletAddress(accounts[0].toLowerCase())\r\n\t\t\twindow.ethereum.on('accountsChanged', (accounts) => {\r\n\t\t\t\tsetWalletAddress(accounts[0].toLowerCase())\r\n\t\t\t})\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\t\r\n\t} else {\r\n\t\talert('Please, install MetaMask extension to use this application.');\r\n\t}\r\n}\r\n\r\nexport const connectWallet = async (setWalletAddress) => {\r\n\tawait requestAccount(setWalletAddress);\r\n}\r\n\r\n\r\nexport const cutAddress = (addr, isAdaptive = true) => {\r\n\tif (!addr) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\tif (isAdaptive && window.outerWidth <= 480) {\r\n\t\treturn addr.slice(0, 3) + '...' + addr.slice(-3);\r\n\t}\r\n\t\r\n\treturn addr.slice(0, 10) + '...' + addr.slice(-5);\r\n}","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport cx from 'classnames';\r\nimport './Tabs.scss';\r\n\r\nconst Tabs = (props) => {\r\n\tconst {\r\n\t\tclassName,\r\n\t\tlinks,\r\n\t\tisBtnType,\r\n\t} = props;\r\n\tconst cls = cx(className, 'Tabs');\r\n\t\r\n\treturn (\r\n\t\t<div className={cls}>\r\n\t\t\t{links.map((link) => {\r\n\t\t\t\tif (link.isHidden) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst linkCls = cx('Tabs__item', isBtnType && 'btn btn_tab', link.isActive && 'active');\r\n\t\t\t\tconst linkEl = link.isExternal ?\r\n\t\t\t\t\t<a className={linkCls} target=\"_blank\" rel=\"noreferrer\" href={link.to}  key={link.to}>{link.name}</a>\r\n\t\t\t\t\t: <Link to={link.to} className={linkCls} key={link.to}>{link.name}</Link>\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlinkEl\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Tabs;","import React, { useEffect } from 'react';\r\nimport Logo from './components/UI/logo/Logo'\r\nimport Button from './components/UI/button/Button';\r\nimport Wallet from './components/Wallet';\r\nimport { connectWallet } from './components/utils/wallet';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Tabs from './components/Tabs';\r\nimport './Header.scss';\r\n\r\n\r\n\r\nconst Header = (props) => {\r\n\tconst {\r\n\t\twalletAddress, \r\n\t\tsetWalletAddress,\r\n\t} = props;\r\n\r\n\tuseEffect(() => {\r\n\t\tconnectWallet(setWalletAddress);\r\n\t}, [window.ethereum?.networkVersion])\r\n\r\n\tconst loc = useLocation();\r\n\tconst headerLinks = [\r\n\t\t{\r\n\t\t\tname: \"Unified Trading Terminal\",\r\n\t\t\tto: '/terminal'\r\n\t\t},\r\n\t]\r\n\tconst activeLink = headerLinks.find(link => {\r\n\t\treturn loc.pathname.startsWith(link.to);\r\n\t})\r\n\tif (activeLink) {\r\n\t\tactiveLink.isActive = true;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className='header'>\r\n\t\t\t<div className=\"header__content _container\">\r\n\t\t\t\t<div className=\"header__nav\">\r\n\t\t\t\t\t<Logo />\r\n\t\t\t\t\t<Tabs \r\n\t\t\t\t\t\tclassName='header__links' \r\n\t\t\t\t\t\tlinks={headerLinks} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{walletAddress ?\r\n\t\t\t\t\t<Wallet address={walletAddress} \r\n\t\t\t\t\t\tsetAddress={setWalletAddress}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Button isMain={true} onClick={(e) => {\r\n\t\t\t\t\t\tconnectWallet(setWalletAddress)\r\n\t\t\t\t\t}}>Connect wallet</Button>}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport Logo from './components/UI/logo/Logo';\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<div className=\"footer__content _container\">\r\n\t\t\t\t<Logo></Logo>\r\n\t\t\t\t<div className=\"footer__smedia-items\">\r\n\t\t\t\t\t{/* <a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://mirror.xyz/0x0641bc55DDAb3b9636e82CbF87EDE3c3c533039d\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clipPath=\"url(#clip0_58_113)\">\r\n\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t\t<rect xmlns=\"http://www.w3.org/2000/svg\" x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3542)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t\t\t<path d=\"M9 14C9 10.6863 11.6863 8 15 8C18.3137 8 21 10.6863 21 14V21.3929C21 22.2805 20.2805 23 19.3929 23H10.6071C9.71954 23 9 22.2805 9 21.3929V14Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t<clipPath id=\"clip0_58_113\">\r\n\t\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a> */}\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"#\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3542)\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3542)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.77875 11.2951C9.7975 11.1209 9.72687 10.9491 9.58937 10.8322L8.18937 9.23795V9H12.5381L15.8994 15.9645L18.8544 9H23V9.23795L21.8025 10.3226C21.6994 10.397 21.6481 10.5192 21.6694 10.6403V18.6103C21.6481 18.7308 21.6994 18.853 21.8025 18.9274L22.9719 20.012V20.25H17.0894V20.012L18.3012 18.9008C18.42 18.7886 18.42 18.7556 18.42 18.5837V12.1418L15.0519 20.224H14.5969L10.675 12.1418V17.5587C10.6425 17.786 10.7225 18.0157 10.8919 18.1799L12.4675 19.9855V20.224H8V19.9855L9.57562 18.1799C9.74437 18.0151 9.81937 17.7842 9.77875 17.5587V11.2951Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3542\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t<clipPath id=\"clip0_5158_3542\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3539)\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3539)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.5 8C11.3562 8 8 11.4411 8 15.6897C8 19.0924 10.1469 21.9664 13.1281 22.9853C13.5031 23.0526 13.6437 22.8219 13.6437 22.62C13.6437 22.4374 13.6344 21.8319 13.6344 21.1878C11.75 21.5435 11.2625 20.7168 11.1125 20.2843C11.0281 20.0632 10.6625 19.3808 10.3438 19.1981C10.0812 19.0539 9.70625 18.6983 10.3344 18.6887C10.925 18.6791 11.3469 19.2462 11.4875 19.4769C12.1625 20.64 13.2406 20.3131 13.6719 20.1113C13.7375 19.6115 13.9344 19.275 14.15 19.0828C12.4812 18.8905 10.7375 18.2273 10.7375 15.286C10.7375 14.4497 11.0281 13.7577 11.5063 13.2194C11.4313 13.0271 11.1687 12.2389 11.5812 11.1816C11.5812 11.1816 12.2094 10.9798 13.6437 11.9698C14.2437 11.7968 14.8812 11.7103 15.5187 11.7103C16.1562 11.7103 16.7937 11.7968 17.3938 11.9698C18.8281 10.9701 19.4563 11.1816 19.4563 11.1816C19.8688 12.2389 19.6062 13.0271 19.5312 13.2194C20.0094 13.7577 20.3 14.4401 20.3 15.286C20.3 18.2369 18.5469 18.8905 16.8781 19.0828C17.15 19.3231 17.3844 19.7845 17.3844 20.5054C17.3844 21.5339 17.375 22.3605 17.375 22.62C17.375 22.8219 17.5156 23.0622 17.8906 22.9853C19.3795 22.4699 20.6732 21.4888 21.5898 20.1801C22.5063 18.8714 22.9996 17.3009 23 15.6897C23 11.4411 19.6438 8 15.5 8Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3539\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t<clipPath id=\"clip0_5158_3539\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://docs.dedelend.co/\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3545)\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3545)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t<path d=\"M13.7517 18.7509C13.986 18.7509 14.1969 18.9327 14.1969 19.1825C14.1969 19.4097 14.0095 19.6141 13.7517 19.6141C13.5174 19.6141 13.3065 19.4324 13.3065 19.1825C13.3065 18.9327 13.5174 18.7509 13.7517 18.7509ZM20.6409 16.116C20.4066 16.116 20.1957 15.9343 20.1957 15.6844C20.1957 15.4573 20.3831 15.2528 20.6409 15.2528C20.8752 15.2528 21.0861 15.4345 21.0861 15.6844C21.0861 15.9116 20.8752 16.116 20.6409 16.116ZM20.6409 14.3669C19.8911 14.3669 19.2818 14.9575 19.2818 15.6844C19.2818 15.8207 19.3052 15.957 19.3521 16.0933L14.8765 18.4102C14.6187 18.0468 14.1969 17.8423 13.7517 17.8423C13.2362 17.8423 12.7675 18.1376 12.5332 18.5692L8.50278 16.5249C8.08099 16.2977 7.75293 15.639 7.7998 15.003C7.82323 14.6849 7.94039 14.4351 8.10442 14.3442C8.22158 14.2761 8.33875 14.2988 8.50278 14.3669L8.52621 14.3897C9.60411 14.9348 13.0956 16.7066 13.2362 16.7747C13.4705 16.8656 13.5877 16.911 13.986 16.7293L21.2033 13.0949C21.3205 13.0495 21.4376 12.9586 21.4376 12.7996C21.4376 12.5952 21.2267 12.5043 21.2267 12.5043C20.8049 12.3226 20.1723 12.0273 19.563 11.7547C18.2508 11.1641 16.7511 10.4827 16.095 10.1419C15.5326 9.84664 15.0639 10.0965 14.9936 10.1419L14.8296 10.2101C11.8536 11.6638 7.91696 13.5492 7.68263 13.6855C7.28428 13.9126 7.02652 14.3896 7.00308 14.9802C6.95622 15.9116 7.4483 16.8883 8.15129 17.229L12.416 19.3642C12.5098 20.0003 13.0956 20.5 13.7517 20.5C14.5015 20.5 15.0874 19.9321 15.1108 19.2052L19.7973 16.752C20.0317 16.9337 20.3363 17.0246 20.6409 17.0246C21.3908 17.0246 22 16.434 22 15.7071C22 14.9575 21.3908 14.3669 20.6409 14.3669Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3545\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t<clipPath id=\"clip0_5158_3545\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://twitter.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3530)\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3530)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t<path d=\"M23 10.4234C22.4484 10.664 21.8558 10.8265 21.2328 10.8999C21.8756 10.5215 22.3565 9.92574 22.5858 9.22397C21.9819 9.57697 21.3209 9.82545 20.6317 9.95859C20.1682 9.47158 19.5543 9.14877 18.8852 9.0403C18.2162 8.93183 17.5295 9.04376 16.9317 9.35871C16.334 9.67366 15.8586 10.174 15.5794 10.7821C15.3002 11.3902 15.2328 12.0719 15.3877 12.7215C14.164 12.6611 12.9669 12.3481 11.8741 11.8029C10.7813 11.2577 9.81726 10.4924 9.04444 9.55683C8.78019 10.0054 8.62825 10.5255 8.62825 11.0794C8.62795 11.578 8.75273 12.069 8.99151 12.5088C9.23029 12.9486 9.57568 13.3236 9.99705 13.6005C9.50837 13.5852 9.03048 13.4552 8.60314 13.2215V13.2605C8.6031 13.9598 8.84892 14.6377 9.2989 15.1789C9.74888 15.7202 10.3753 16.0916 11.0719 16.2302C10.6185 16.3509 10.1433 16.3687 9.68193 16.2822C9.87847 16.8839 10.2613 17.4101 10.7768 17.7871C11.2923 18.1641 11.9148 18.373 12.5569 18.3846C11.4668 19.2268 10.1205 19.6836 8.73461 19.6816C8.48911 19.6816 8.24382 19.6675 8 19.6393C9.40677 20.5294 11.0444 21.0018 12.7168 21C18.3783 21 21.4733 16.3855 21.4733 12.3835C21.4733 12.2535 21.47 12.1221 21.4641 11.9921C22.0661 11.5637 22.5857 11.0332 22.9987 10.4254L23 10.4234Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3530\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t<clipPath id=\"clip0_5158_3530\">\r\n\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://discord.gg/5DGZ7rzSfS\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3533)\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3533)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t\t<path d=\"M20.6981 10.9123C19.7418 10.4907 18.7169 10.179 17.645 10.0018C17.6355 10 17.6256 10.0012 17.6167 10.0051C17.6079 10.009 17.6005 10.0156 17.5956 10.0238C17.4644 10.2493 17.3182 10.5432 17.2157 10.7754C16.0789 10.6094 14.9232 10.6094 13.7864 10.7754C13.6722 10.5181 13.5435 10.2671 13.4008 10.0238C13.3959 10.0155 13.3886 10.0088 13.3798 10.0047C13.371 10.0005 13.3611 9.99908 13.3514 10.0006C12.2802 10.1778 11.2552 10.4894 10.2984 10.9117C10.2901 10.9151 10.2831 10.9208 10.2784 10.9282C8.33342 13.7238 7.80031 16.4504 8.06217 19.1428C8.0629 19.1494 8.065 19.1558 8.06833 19.1616C8.07166 19.1673 8.07616 19.1724 8.08155 19.1764C9.21676 19.9845 10.4829 20.6001 11.8271 20.9974C11.8364 21.0002 11.8465 21.0002 11.8558 20.9974C11.8652 20.9946 11.8735 20.989 11.8796 20.9815C12.1688 20.6033 12.4251 20.2021 12.6458 19.782C12.6489 19.7762 12.6506 19.7699 12.651 19.7635C12.6513 19.757 12.6502 19.7505 12.6478 19.7445C12.6454 19.7385 12.6417 19.733 12.6369 19.7285C12.6321 19.724 12.6264 19.7206 12.6202 19.7184C12.2164 19.5698 11.8252 19.3904 11.4502 19.1819C11.4435 19.1782 11.4378 19.1728 11.4337 19.1664C11.4296 19.16 11.4272 19.1526 11.4267 19.145C11.4262 19.1375 11.4276 19.1299 11.4308 19.123C11.4341 19.1161 11.439 19.1101 11.4452 19.1055C11.5239 19.0487 11.6027 18.9894 11.6777 18.9302C11.6844 18.9248 11.6926 18.9214 11.7012 18.9204C11.7098 18.9193 11.7185 18.9206 11.7264 18.9241C14.1807 20.002 16.8388 20.002 19.2643 18.9241C19.2723 18.9204 19.2811 18.9189 19.2898 18.9199C19.2986 18.9208 19.3068 18.9242 19.3137 18.9295C19.3887 18.9894 19.4668 19.0487 19.5462 19.1055C19.5525 19.11 19.5575 19.1159 19.5608 19.1228C19.5642 19.1296 19.5657 19.1371 19.5653 19.1447C19.565 19.1523 19.5627 19.1596 19.5587 19.1661C19.5547 19.1726 19.5491 19.1781 19.5425 19.1819C19.1687 19.3921 18.78 19.57 18.3719 19.7178C18.3656 19.7201 18.3599 19.7236 18.3551 19.7281C18.3504 19.7327 18.3466 19.7382 18.3442 19.7442C18.3418 19.7503 18.3407 19.7568 18.3411 19.7633C18.3414 19.7698 18.3432 19.7762 18.3463 19.782C18.5712 20.2018 18.8287 20.6014 19.1119 20.9809C19.1177 20.9887 19.1259 20.9945 19.1353 20.9976C19.1447 21.0006 19.1549 21.0008 19.1644 20.998C20.5108 20.6018 21.779 19.986 22.9155 19.1764C22.921 19.1726 22.9257 19.1677 22.9291 19.162C22.9326 19.1563 22.9348 19.15 22.9355 19.1434C23.248 16.0306 22.4118 13.326 20.7174 10.9294C20.7133 10.9216 20.7064 10.9155 20.6981 10.9123ZM13.0127 17.5033C12.2739 17.5033 11.6646 16.8501 11.6646 16.049C11.6646 15.2472 12.2621 14.5946 13.0127 14.5946C13.7689 14.5946 14.3726 15.2527 14.3607 16.049C14.3607 16.8507 13.7633 17.5033 13.0127 17.5033ZM17.9969 17.5033C17.2575 17.5033 16.6488 16.8501 16.6488 16.049C16.6488 15.2472 17.2457 14.5946 17.9969 14.5946C18.7531 14.5946 19.3568 15.2527 19.345 16.049C19.345 16.8507 18.7537 17.5033 17.9969 17.5033Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3533\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t<clipPath id=\"clip0_5158_3533\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://t.me/DeDeLend\">\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clip-path=\"url(#clip0_5158_3536)\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<rect x=\"0.5\" y=\"0.5\" width=\"29\" height=\"29\" rx=\"4.5\" stroke=\"url(#paint0_linear_5158_3536)\" stroke-opacity=\"0.7\"/>\r\n\t\t\t\t\t\t\t<path d=\"M21.9875 9.0789L8.70041 13.9664C7.79362 14.3138 7.79886 14.7964 8.53404 15.0115L11.9454 16.0267L19.8382 11.2764C20.2114 11.0598 20.5524 11.1763 20.2721 11.4136L13.8774 16.9188H13.8759L13.8774 16.9195L13.642 20.2737C13.9868 20.2737 14.1389 20.1228 14.3323 19.9448L15.9892 18.4079L19.4358 20.8363C20.0713 21.1701 20.5277 20.9985 20.6858 20.2751L22.9483 10.104C23.1798 9.2183 22.5938 8.81726 21.9875 9.0789Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5158_3536\" x1=\"-6.9553e-08\" y1=\"-0.356436\" x2=\"24.8833\" y2=\"33.7347\" gradientUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t\t\t<stop stop-color=\"#384263\" stop-opacity=\"0.25\"/>\r\n\t\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#384263\" stop-opacity=\"0.15\"/>\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t<clipPath id=\"clip0_5158_3536\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t);\r\n};\r\n\r\nexport default Footer;","const CONTRACTS = {\n  56: {\n    // bsc mainnet\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  97: {\n    // bsc testnet\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  421611: {\n    // arbitrum testnet\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    GMX: \"0x0000000000000000000000000000000000000000\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\n\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\n\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\n  },\n  42161: {\n    // arbitrum mainnet\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\n    GlpManager: \"0x3963FfC9dff443c2A94f21b129D429891E32ec18\",\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\n    GlpRewardRouter: \"0xB95DB5B167D75e6d04227CfFFA61069348d271F5\",\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\n\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\n\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\n\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\n\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\n\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\n\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\n  },\n  43114: {\n    // avalanche\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\n    GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\n\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\n\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\n\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\n\n    PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\n    PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\n\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\n  },\n};\n\nexport function getContract(chainId, name, market) {\n  if (!CONTRACTS[chainId]) {\n    throw new Error(`Unknown chainId ${chainId}`);\n  }\n  if (!CONTRACTS[chainId][name]) {\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\n  }\n  return CONTRACTS[chainId][name];\n}\n\nexport const XGMT_EXCLUDED_ACCOUNTS = [\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\n];\n","import { ethers } from \"ethers\";\nimport { getContract } from \"./Addresses\";\n\nconst TOKENS = {\n  56: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 18,\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      isNative: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: getContract(56, \"NATIVE_TOKEN\"),\n      isWrapped: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(56, \"USDG\"),\n      isUsdg: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 18,\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 18,\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  97: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n      isWrapped: true,\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(97, \"USDG\"),\n      isUsdg: true,\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\n      isStable: true,\n    },\n  ],\n  421611: [\n    {\n      name: \"Bitcoin\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\n      isShortable: true,\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n    },\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\n      isStable: true,\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\n      isStable: true,\n    },\n  ],\n  42161: [\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\n    },\n    {\n      name: \"Bitcoin (WBTC)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Chainlink\",\n      symbol: \"LINK\",\n      decimals: 18,\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\n    },\n    {\n      name: \"Uniswap\",\n      symbol: \"UNI\",\n      decimals: 18,\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\n    },\n    {\n      name: \"Dai\",\n      symbol: \"DAI\",\n      decimals: 18,\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\n    },\n    {\n      name: \"Frax\",\n      symbol: \"FRAX\",\n      decimals: 18,\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\n    },\n    {\n      name: \"Magic Internet Money\",\n      symbol: \"MIM\",\n      decimals: 18,\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\n      isStable: true,\n      isTempHidden: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\n    },\n  ],\n  43114: [\n    {\n      name: \"Avalanche\",\n      symbol: \"AVAX\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Wrapped AVAX\",\n      symbol: \"WAVAX\",\n      decimals: 18,\n      address: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n      isWrapped: true,\n      baseSymbol: \"AVAX\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Ethereum (WETH.e)\",\n      symbol: \"ETH\",\n      address: \"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB\",\n      decimals: 18,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Bitcoin (WBTC.e)\",\n      symbol: \"BTC\",\n      address: \"0x50b7545627a5162F82A992c33b87aDc75187B218\",\n      decimals: 8,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Bitcoin (BTC.b)\",\n      symbol: \"BTC.b\",\n      address: \"0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n      decimals: 8,\n      isShortable: false,\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\n    },\n    {\n      name: \"USD Coin (USDC.e)\",\n      symbol: \"USDC.e\",\n      address: \"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      address: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Magic Internet Money\",\n      symbol: \"MIM\",\n      address: \"0x130966628846BFd36ff31a822705796e8cb8C18D\",\n      decimals: 18,\n      isStable: true,\n      isTempHidden: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\n    },\n  ],\n};\n\nconst ADDITIONAL_TOKENS = {\n  42161: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(42161, \"GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(42161, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(42161, \"GLP\"),\n      decimals: 18,\n    },\n  ],\n  43114: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(43114, \"GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(43114, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(42161, \"GLP\"),\n      decimals: 18,\n    },\n  ],\n};\n\nconst CHAIN_IDS = [56, 97, 42161, 421611, 43114];\n\nconst TOKENS_MAP = {};\nconst TOKENS_BY_SYMBOL_MAP = {};\n\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\n  const chainId = CHAIN_IDS[j];\n  TOKENS_MAP[chainId] = {};\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\n  let tokens = TOKENS[chainId];\n  if (ADDITIONAL_TOKENS[chainId]) {\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    TOKENS_MAP[chainId][token.address] = token;\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\n  }\n}\n\nconst WRAPPED_TOKENS_MAP = {};\nconst NATIVE_TOKENS_MAP = {};\nfor (const chainId of CHAIN_IDS) {\n  for (const token of TOKENS[chainId]) {\n    if (token.isWrapped) {\n      WRAPPED_TOKENS_MAP[chainId] = token;\n    } else if (token.isNative) {\n      NATIVE_TOKENS_MAP[chainId] = token;\n    }\n  }\n}\n\nexport function getWrappedToken(chainId) {\n  return WRAPPED_TOKENS_MAP[chainId];\n}\n\nexport function getNativeToken(chainId) {\n  return NATIVE_TOKENS_MAP[chainId];\n}\n\nexport function getTokens(chainId) {\n  return TOKENS[chainId];\n}\n\nexport function isValidToken(chainId, address) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  return address in TOKENS_MAP[chainId];\n}\n\nexport function getToken(chainId, address) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  if (!TOKENS_MAP[chainId][address]) {\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\n  }\n  return TOKENS_MAP[chainId][address];\n}\n\nexport function getTokenBySymbol(chainId, symbol) {\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\n  if (!token) {\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\n  }\n  return token;\n}\n\nexport function getWhitelistedTokens(chainId) {\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\n}\n\nexport function getVisibleTokens(chainId) {\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\n}\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\nimport {\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\n  WalletConnectConnector,\n} from \"@web3-react/walletconnect-connector\";\nimport { toast } from \"react-toastify\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport { useLocalStorage } from \"react-use\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { format as formatDateFn } from \"date-fns\";\nimport Token from \"../abis/Token.json\";\nimport _ from \"lodash\";\nimport { getContract } from \"../config/Addresses\";\nimport useSWR from \"swr\";\n\nimport OrderBookReader from \"../abis/OrderBookReader.json\";\nimport OrderBook from \"../abis/OrderBook.json\";\n\nimport { getWhitelistedTokens, isValidToken } from \"../config/Tokens\";\n\nconst { AddressZero } = ethers.constants;\n\nexport const UI_VERSION = \"1.3\";\n\n// use a random placeholder account instead of the zero address as the zero address might have tokens\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\n\nexport const MAINNET = 56;\nexport const AVALANCHE = 43114;\nexport const TESTNET = 97;\nexport const ARBITRUM_TESTNET = 421611;\nexport const ARBITRUM = 42161;\n// TODO take it from web3\nexport const DEFAULT_CHAIN_ID = ARBITRUM;\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\n\nexport const MIN_PROFIT_TIME = 0;\n\nconst SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\n\nexport const IS_NETWORK_DISABLED = {\n  [ARBITRUM]: false,\n  [AVALANCHE]: false,\n};\n\nconst CHAIN_NAMES_MAP = {\n  [MAINNET]: \"BSC\",\n  [TESTNET]: \"BSC Testnet\",\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\n  [ARBITRUM]: \"Arbitrum\",\n  [AVALANCHE]: \"Avalanche\",\n};\n\nconst alchemyWhitelistedDomains = [\"gmx.io\", \"app.gmx.io\"];\n\nexport function getDefaultArbitrumRpcUrl() {\n  return \"https://arb1.arbitrum.io/rpc\";\n}\n\nexport function getAlchemyHttpUrl() {\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getAlchemyWsUrl() {\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nconst ARBITRUM_RPC_PROVIDERS = [getDefaultArbitrumRpcUrl()];\nconst AVALANCHE_RPC_PROVIDERS = [\"https://api.avax.network/ext/bc/C/rpc\"];\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\n\nexport function getChainName(chainId) {\n  return CHAIN_NAMES_MAP[chainId];\n}\n\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\n\nexport const BASIS_POINTS_DIVISOR = 10000;\nexport const MAX_LEVERAGE = 100 * BASIS_POINTS_DIVISOR;\nexport const MAX_ALLOWED_LEVERAGE = 50 * BASIS_POINTS_DIVISOR;\n\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\nexport const SECONDS_PER_YEAR = 31536000;\nexport const USDG_DECIMALS = 18;\nexport const USD_DECIMALS = 30;\nexport const DEPOSIT_FEE = 30;\nexport const DUST_BNB = \"2000000000000000\";\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\nexport const PRECISION = expandDecimals(1, 30);\nexport const GLP_DECIMALS = 18;\nexport const GMX_DECIMALS = 18;\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\n\nexport const TAX_BASIS_POINTS = 50;\nexport const STABLE_TAX_BASIS_POINTS = 5;\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\nexport const SWAP_FEE_BASIS_POINTS = 30;\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\nexport const MARGIN_FEE_BASIS_POINTS = 10;\n\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\n\nexport const TRADES_PAGE_SIZE = 100;\n\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\nexport const FUNDING_RATE_PRECISION = 1000000;\n\nexport const SWAP = \"Swap\";\nexport const INCREASE = \"Increase\";\nexport const DECREASE = \"Decrease\";\nexport const LONG = \"Long\";\nexport const SHORT = \"Short\";\n\nexport const MARKET = \"Market\";\nexport const LIMIT = \"Limit\";\nexport const STOP = \"Stop\";\nexport const BORROW = \"Borrow\";\n\n// Market/limit orders disabling\n// export const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT];\n\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\n\n// Swap disabling\n// export const SWAP_OPTIONS = [LONG, SHORT, SWAP];\nexport const SWAP_OPTIONS = [LONG, SHORT];\n\n\n// Default Slippage\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\n// export const DEFAULT_SLIPPAGE_AMOUNT = 100;\n\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\n\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\n\nexport const TRIGGER_PREFIX_ABOVE = \">\";\nexport const TRIGGER_PREFIX_BELOW = \"<\";\n\nexport const MIN_PROFIT_BIPS = 0;\n\nexport const GLPPOOLCOLORS = {\n  ETH: \"#6062a6\",\n  BTC: \"#F7931A\",\n  \"BTC.b\": \"#F7931A\",\n  USDC: \"#2775CA\",\n  \"USDC.e\": \"#2A5ADA\",\n  USDT: \"#67B18A\",\n  MIM: \"#9695F8\",\n  FRAX: \"#000\",\n  DAI: \"#FAC044\",\n  UNI: \"#E9167C\",\n  AVAX: \"#E84142\",\n  LINK: \"#3256D6\",\n};\n\nexport const HIGH_EXECUTION_FEES_MAP = {\n  [ARBITRUM]: 3, // 3 USD\n  [AVALANCHE]: 3, // 3 USD\n};\n\nexport function getHighExecutionFee(chainId) {\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\n}\n\nexport const ICONLINKS = {\n  [ARBITRUM_TESTNET]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    },\n  },\n  [ARBITRUM]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\n    },\n    LINK: {\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\n    },\n    UNI: {\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\n    },\n    USDT: {\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\n    },\n    DAI: {\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\n    },\n    FRAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\n    },\n  },\n  [AVALANCHE]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      avalanche: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\n    },\n    GLP: {\n      avalanche: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    },\n    AVAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      avalanche: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      avalanche: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\n    },\n    \"BTC.b\": {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      avalanche: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      avalanche: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\n    },\n    \"USDC.e\": {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e\",\n      avalanche: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      avalanche: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\n    },\n  },\n};\n\nexport const platformTokens = {\n  42161: {\n    // arbitrum\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n  43114: {\n    // avalanche\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n};\n\nconst supportedChainIds = [ARBITRUM, AVALANCHE];\nif (isDevelopment()) {\n  supportedChainIds.push(ARBITRUM_TESTNET);\n}\nconst injectedConnector = new InjectedConnector({\n  supportedChainIds,\n});\n\nconst getWalletConnectConnector = () => {\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n  return new WalletConnectConnector({\n    rpc: {\n      [AVALANCHE]: AVALANCHE_RPC_PROVIDERS[0],\n      [ARBITRUM]: ARBITRUM_RPC_PROVIDERS[0],\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\n    },\n    qrcode: true,\n    chainId,\n  });\n};\n\nexport function isSupportedChain(chainId) {\n  return supportedChainIds.includes(chainId);\n}\n\nexport function deserialize(data) {\n  for (const [key, value] of Object.entries(data)) {\n    if (value._type === \"BigNumber\") {\n      data[key] = bigNumberify(value.value);\n    }\n  }\n  return data;\n}\n\nexport function isHomeSite() {\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\n}\n\nexport const helperToast = {\n  success: (content, opts) => {\n    toast.dismiss();\n    toast.success(content, opts);\n  },\n  error: (content, opts) => {\n    toast.dismiss();\n    toast.error(content, opts);\n  },\n};\n\nexport function useLocalStorageByChainId(chainId, key, defaultValue) {\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\n\n  const setValue = useCallback(\n    (value) => {\n      setInternalValue((internalValue) => {\n        if (typeof value === \"function\") {\n          value = value(internalValue[chainId] || defaultValue);\n        }\n        const newInternalValue = {\n          ...internalValue,\n          [chainId]: value,\n        };\n        return newInternalValue;\n      });\n    },\n    [chainId, setInternalValue, defaultValue]\n  );\n\n  let value;\n  if (chainId in internalValue) {\n    value = internalValue[chainId];\n  } else {\n    value = defaultValue;\n  }\n\n  return [value, setValue];\n}\n\nexport function useLocalStorageSerializeKey(key, value, opts) {\n  key = JSON.stringify(key);\n  return useLocalStorage(key, value, opts);\n}\n\nfunction getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd) {\n  // Limit/stop orders are executed with price specified by user\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\n    return triggerPriceUsd;\n  }\n\n  // Market orders are executed with current market price\n  if (!info) {\n    return;\n  }\n  if (max && !info.maxPrice) {\n    return;\n  }\n  if (!max && !info.minPrice) {\n    return;\n  }\n  return max ? info.maxPrice : info.minPrice;\n}\n\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\n  if (!size || size.eq(0)) {\n    return;\n  }\n\n  if (liquidationAmount.gt(collateral)) {\n    const liquidationDelta = liquidationAmount.sub(collateral);\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\n  }\n\n  const liquidationDelta = collateral.sub(liquidationAmount);\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\n}\n\nexport const replaceNativeTokenAddress = (path, nativeTokenAddress) => {\n  if (!path) {\n    return;\n  }\n\n  let updatedPath = [];\n  for (let i = 0; i < path.length; i++) {\n    let address = path[i];\n    if (address === AddressZero) {\n      address = nativeTokenAddress;\n    }\n    updatedPath.push(address);\n  }\n\n  return updatedPath;\n};\n\nexport function getMarginFee(sizeDelta) {\n  if (!sizeDelta) {\n    return bigNumberify(0);\n  }\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n  return sizeDelta.sub(afterFeeUsd);\n}\n\nexport function getServerBaseUrl(chainId) {\n  if (!chainId) {\n    throw new Error(\"chainId is not provided\");\n  }\n  if (document.location.hostname.includes(\"deploy-preview\")) {\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\n    if (fromLocalStorage) {\n      return fromLocalStorage;\n    }\n  }\n  if (chainId === MAINNET) {\n    return \"https://gambit-server-staging.uc.r.appspot.com\";\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return \"https://gambit-server-devnet.uc.r.appspot.com\";\n  } else if (chainId === ARBITRUM) {\n    return \"https://gmx-server-mainnet.uw.r.appspot.com\";\n  } else if (chainId === AVALANCHE) {\n    return \"https://gmx-avax-server.uc.r.appspot.com\";\n  }\n  return \"https://gmx-server-mainnet.uw.r.appspot.com\";\n}\n\nexport function getServerUrl(chainId, path) {\n  return `${getServerBaseUrl(chainId)}${path}`;\n}\n\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\n  if (!toTokenInfo || !fromTokenInfo) return false;\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\n  return false;\n}\n\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\n    return;\n  }\n  if (inverted) {\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\n  }\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\n}\n\nexport function getMostAbundantStableToken(chainId, infoTokens) {\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  let availableAmount;\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\n    if (!info.isStable || !info.availableAmount) {\n      continue;\n    }\n\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\n      availableAmount = adjustedAvailableAmount;\n      stableToken = info;\n    }\n  }\n  return stableToken;\n}\n\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\n  if (tokenB.isStable || tokenB.isUsdg) return true;\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\n  return false;\n}\n\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\n  if (!rate || !tokenA || !tokenB) return \"...\";\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\n    [tokenA, tokenB] = [tokenB, tokenA];\n    rate = PRECISION.mul(PRECISION).div(rate);\n  }\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\n  if (opts.omitSymbols) {\n    return rateValue;\n  }\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\n}\n\nconst adjustForDecimalsFactory = (n) => (number) => {\n  if (n === 0) {\n    return number;\n  }\n  if (n > 0) {\n    return number.mul(expandDecimals(1, n));\n  }\n  return number.div(expandDecimals(1, -n));\n};\n\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\n}\n\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\n  if (!token || !token.weight || !usdgSupply) {\n    return;\n  }\n\n  if (usdgSupply.eq(0)) {\n    return bigNumberify(0);\n  }\n\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\n}\n\nexport function getFeeBasisPoints(\n  token,\n  usdgDelta,\n  feeBasisPoints,\n  taxBasisPoints,\n  increment,\n  usdgSupply,\n  totalTokenWeights\n) {\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\n    return 0;\n  }\n\n  feeBasisPoints = bigNumberify(feeBasisPoints);\n  taxBasisPoints = bigNumberify(taxBasisPoints);\n\n  const initialAmount = token.usdgAmount;\n  let nextAmount = initialAmount.add(usdgDelta);\n  if (!increment) {\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\n  }\n\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\n  if (!targetAmount || targetAmount.eq(0)) {\n    return feeBasisPoints.toNumber();\n  }\n\n  const initialDiff = initialAmount.gt(targetAmount)\n    ? initialAmount.sub(targetAmount)\n    : targetAmount.sub(initialAmount);\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\n\n  if (nextDiff.lt(initialDiff)) {\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\n  }\n\n  let averageDiff = initialDiff.add(nextDiff).div(2);\n  if (averageDiff.gt(targetAmount)) {\n    averageDiff = targetAmount;\n  }\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\n  return feeBasisPoints.add(taxBps).toNumber();\n}\n\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.minPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.minPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getNextFromAmount(\n  chainId,\n  toAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: toAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: toAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: toAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\n\n  let fromAmountBasedOnRatio;\n  if (ratio && !ratio.isZero()) {\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\n  }\n\n  const fromAmount =\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\n    feeBasisPoints,\n  };\n}\n\nexport function getNextToAmount(\n  chainId,\n  fromAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: fromAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: fromAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: fromAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\n\n  let toAmountBasedOnRatio = bigNumberify(0);\n  if (ratio && !ratio.isZero()) {\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\n  }\n\n  if (toTokenAddress === USDG_ADDRESS) {\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio;\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n    return {\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n      feeBasisPoints,\n    };\n  }\n\n  if (fromTokenAddress === USDG_ADDRESS) {\n    const redemptionValue = toToken.redemptionAmount\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\n      .div(expandDecimals(1, toToken.decimals));\n\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const expectedAmount = fromAmount;\n\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\n        .div(BASIS_POINTS_DIVISOR);\n      return {\n        amount: adjustDecimals(toAmount),\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n      };\n    }\n\n    // get toAmount for USDG => stableToken\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\n    // apply USDG => stableToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\n\n    // get toAmount for stableToken => toToken\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n    // apply stableToken => toToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\n\n    return {\n      amount: adjustDecimals(toAmount),\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n    };\n  }\n\n  const toAmount =\n    ratio && !ratio.isZero()\n      ? toAmountBasedOnRatio\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n    feeBasisPoints,\n  };\n}\n\nexport function getProfitPrice(closePrice, position) {\n  let profitPrice;\n  if (position && position.averagePrice && closePrice) {\n    profitPrice = position.isLong\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\n  }\n  return profitPrice;\n}\n\nexport function calculatePositionDelta(\n  price,\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\n  sizeDelta\n) {\n  if (!sizeDelta) {\n    sizeDelta = size;\n  }\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\n  const pendingDelta = delta;\n\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\n    delta = bigNumberify(0);\n  }\n\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n\n  return {\n    delta,\n    pendingDelta,\n    pendingDeltaPercentage,\n    hasProfit,\n    deltaPercentage,\n  };\n}\n\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\n  let deltaStr;\n  let deltaPercentageStr;\n\n  if (delta.gt(0)) {\n    deltaStr = hasProfit ? \"+\" : \"-\";\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\n  } else {\n    deltaStr = \"\";\n    deltaPercentageStr = \"\";\n  }\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\n\n  return { deltaStr, deltaPercentageStr };\n}\n\nexport function getLeverage({\n  size,\n  sizeDelta,\n  increaseSize,\n  collateral,\n  collateralDelta,\n  increaseCollateral,\n  entryFundingRate,\n  cumulativeFundingRate,\n  hasProfit,\n  delta,\n  includeDelta,\n}) {\n  if (!size && !sizeDelta) {\n    return;\n  }\n  if (!collateral && !collateralDelta) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n  }\n\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = collateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(collateral)) {\n        return;\n      }\n      remainingCollateral = collateral.sub(collateralDelta);\n    }\n  }\n\n  if (delta && includeDelta) {\n    if (hasProfit) {\n      remainingCollateral = remainingCollateral.add(delta);\n    } else {\n      if (delta.gt(remainingCollateral)) {\n        return;\n      }\n\n      remainingCollateral = remainingCollateral.sub(delta);\n    }\n  }\n\n  if (remainingCollateral.eq(0)) {\n    return;\n  }\n\n  remainingCollateral = sizeDelta\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\n    : remainingCollateral;\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    remainingCollateral = remainingCollateral.sub(fundingFee);\n  }\n\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\n}\n\nexport function getLiquidationPrice(data) {\n  let {\n    isLong,\n    size,\n    collateral,\n    averagePrice,\n    entryFundingRate,\n    cumulativeFundingRate,\n    sizeDelta,\n    collateralDelta,\n    increaseCollateral,\n    increaseSize,\n    delta,\n    hasProfit,\n    includeDelta,\n  } = data;\n  if (!size || !collateral || !averagePrice) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  let remainingCollateral = collateral;\n\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n\n    if (includeDelta && !hasProfit) {\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\n    }\n  }\n\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = remainingCollateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(remainingCollateral)) {\n        return;\n      }\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\n    }\n  }\n\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    positionFee = positionFee.add(fundingFee);\n  }\n\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\n    liquidationAmount: positionFee,\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  if (!liquidationPriceForFees) {\n    return liquidationPriceForMaxLeverage;\n  }\n  if (!liquidationPriceForMaxLeverage) {\n    return liquidationPriceForFees;\n  }\n\n  if (isLong) {\n    // return the higher price\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\n      ? liquidationPriceForFees\n      : liquidationPriceForMaxLeverage;\n  }\n\n  // return the lower price\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\n    ? liquidationPriceForFees\n    : liquidationPriceForMaxLeverage;\n}\n\nexport function getUsd(amount, tokenAddress, max, infoTokens, orderOption, triggerPriceUsd) {\n  if (!amount) {\n    return;\n  }\n  if (tokenAddress === USDG_ADDRESS) {\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\n  }\n  const info = getTokenInfo(infoTokens, tokenAddress);\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\n  if (!price) {\n    return;\n  }\n\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\n}\n\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\n}\n\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\n  return ethers.utils.solidityKeccak256(\n    [\"address\", \"address\", \"address\", \"bool\"],\n    [account, collateralToken, indexToken, isLong]\n  );\n}\n\nexport function getSwapFeeBasisPoints(isStable) {\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n}\n\n// BSC TESTNET\n// const RPC_PROVIDERS = [\n//   \"https://data-seed-prebsc-1-s1.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s1.binance.org:8545\",\n//   \"https://data-seed-prebsc-1-s2.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s2.binance.org:8545\",\n//   \"https://data-seed-prebsc-1-s3.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s3.binance.org:8545\"\n// ]\n\n// BSC MAINNET\nexport const BSC_RPC_PROVIDERS = [\n  \"https://bsc-dataseed.binance.org\",\n  \"https://bsc-dataseed1.defibit.io\",\n  \"https://bsc-dataseed1.ninicoin.io\",\n  \"https://bsc-dataseed2.defibit.io\",\n  \"https://bsc-dataseed3.defibit.io\",\n  \"https://bsc-dataseed4.defibit.io\",\n  \"https://bsc-dataseed2.ninicoin.io\",\n  \"https://bsc-dataseed3.ninicoin.io\",\n  \"https://bsc-dataseed4.ninicoin.io\",\n  \"https://bsc-dataseed1.binance.org\",\n  \"https://bsc-dataseed2.binance.org\",\n  \"https://bsc-dataseed3.binance.org\",\n  \"https://bsc-dataseed4.binance.org\",\n];\n\nconst RPC_PROVIDERS = {\n  [MAINNET]: BSC_RPC_PROVIDERS,\n  [ARBITRUM]: ARBITRUM_RPC_PROVIDERS,\n  [AVALANCHE]: AVALANCHE_RPC_PROVIDERS,\n};\n\nconst FALLBACK_PROVIDERS = {\n  [ARBITRUM]: [getAlchemyHttpUrl()],\n  [AVALANCHE]: [\"https://avax-mainnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\n};\n\nexport function shortenAddress(address, length) {\n  if (!length) {\n    return \"\";\n  }\n  if (!address) {\n    return address;\n  }\n  if (address.length < 10) {\n    return address;\n  }\n  let left = Math.floor((length - 3) / 2) + 1;\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\n}\n\nexport function formatDateTime(time) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\n}\n\nexport function getTimeRemaining(time) {\n  const now = parseInt(Date.now() / 1000);\n  if (time < now) {\n    return \"0h 0m\";\n  }\n  const diff = time - now;\n  const hours = parseInt(diff / (60 * 60));\n  const minutes = parseInt((diff - hours * 60 * 60) / 60);\n  return `${hours}h ${minutes}m`;\n}\n\nexport function formatDate(time) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\n}\n\nexport function hasMetaMaskWalletExtension() {\n  return window.ethereum;\n}\n\nexport function hasCoinBaseWalletExtension() {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\n    return false;\n  }\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n}\n\nexport function activateInjectedProvider(providerName) {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\n    return undefined;\n  }\n\n  let provider;\n  if (ethereum?.providers) {\n    switch (providerName) {\n      case \"CoinBase\":\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n        break;\n      case \"MetaMask\":\n      default:\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\n        break;\n    }\n  }\n\n  if (provider) {\n    ethereum.setSelectedProvider(provider);\n  }\n}\n\nexport function getInjectedConnector() {\n  return injectedConnector;\n}\n\nexport function useChainId() {\n  let { chainId } = useWeb3React();\n\n  if (!chainId) {\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n    if (chainIdFromLocalStorage) {\n      chainId = parseInt(chainIdFromLocalStorage);\n      if (!chainId) {\n        // localstorage value is invalid\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n      }\n    }\n  }\n\n  if (!chainId || !supportedChainIds.includes(chainId)) {\n    chainId = DEFAULT_CHAIN_ID;\n  }\n  return { chainId };\n}\n\nexport function useENS(address) {\n  const [ensName, setENSName] = useState();\n\n  useEffect(() => {\n    async function resolveENS() {\n      if (address) {\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\n        const name = await provider.lookupAddress(address.toLowerCase());\n        if (name) setENSName(name);\n      }\n    }\n    resolveENS();\n  }, [address]);\n\n  return { ensName };\n}\n\nexport function clearWalletConnectData() {\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n}\n\nexport function clearWalletLinkData() {\n  Object.entries(localStorage)\n    .map((x) => x[0])\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\n    .map((x) => localStorage.removeItem(x));\n}\n\nexport function useEagerConnect(setActivatingConnector) {\n  const { activate, active } = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    (async function () {\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\n        // only works with WalletConnect\n        clearWalletConnectData();\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n        clearWalletLinkData();\n        return;\n      }\n\n      let shouldTryWalletConnect = false;\n      try {\n        // naive validation to not trigger Wallet Connect if data is corrupted\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n        if (rawData) {\n          const data = JSON.parse(rawData);\n          if (data && data.connected) {\n            shouldTryWalletConnect = true;\n          }\n        }\n      } catch (ex) {\n        if (ex instanceof SyntaxError) {\n          // rawData is not a valid json\n          clearWalletConnectData();\n        }\n      }\n\n      if (shouldTryWalletConnect) {\n        try {\n          const connector = getWalletConnectConnector();\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n          // in case Wallet Connect is activated no need to check injected wallet\n          return;\n        } catch (ex) {\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\n          clearWalletConnectData();\n        }\n      }\n\n      try {\n        const connector = getInjectedConnector();\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\n        if (currentProviderName !== false) {\n          activateInjectedProvider(currentProviderName);\n        }\n        const authorized = await connector.isAuthorized();\n        if (authorized) {\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n        }\n      } catch (ex) {}\n\n      setTried(true);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n\n  return tried;\n}\n\nexport function useInactiveListener(suppress = false) {\n  const injected = getInjectedConnector();\n  const { active, error, activate } = useWeb3React();\n\n  useEffect(() => {\n    const { ethereum } = window;\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        activate(injected);\n      };\n      const handleChainChanged = (chainId) => {\n        activate(injected);\n      };\n      const handleAccountsChanged = (accounts) => {\n        if (accounts.length > 0) {\n          activate(injected);\n        }\n      };\n      const handleNetworkChanged = (networkId) => {\n        activate(injected);\n      };\n\n      ethereum.on(\"connect\", handleConnect);\n      ethereum.on(\"chainChanged\", handleChainChanged);\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener(\"connect\", handleConnect);\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\n        }\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [active, error, suppress, activate]);\n}\n\nexport function getProvider(library, chainId) {\n  let provider;\n  if (library) {\n    return library.getSigner();\n  }\n  provider = _.sample(RPC_PROVIDERS[chainId]);\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\n}\n\nexport function getFallbackProvider(chainId) {\n  if (!FALLBACK_PROVIDERS[chainId]) {\n    return;\n  }\n\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\n}\n\nexport function bigNumberify(n) {\n  try {\n    return ethers.BigNumber.from(n);\n  } catch (e) {\n    console.error(\"bigNumberify error\", e);\n    return undefined;\n  }\n}\n\nexport function expandDecimals(n, decimals) {\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\n}\n\nexport const trimZeroDecimals = (amount) => {\n  if (parseFloat(amount) === parseInt(amount)) {\n    return parseInt(amount).toString();\n  }\n  return amount;\n};\n\nexport const limitDecimals = (amount, maxDecimals) => {\n  let amountStr = amount.toString();\n  \n  if (maxDecimals === undefined) {\n    return amountStr;\n  }\n  if (maxDecimals === 0) {\n    return amountStr.split(\".\")[0];\n  }\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    let decimals = amountStr.length - dotIndex - 1;\n    if (decimals > maxDecimals) {\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\n    }\n  }\n  return amountStr;\n};\n\nexport const padDecimals = (amount, minDecimals) => {\n  let amountStr = amount.toString();\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    const decimals = amountStr.length - dotIndex - 1;\n    if (decimals < minDecimals) {\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\n    }\n  } else {\n    amountStr = amountStr + \".0000\";\n  }\n  return amountStr;\n};\n\nexport const formatKeyAmount = (map, key, tokenDecimals, displayDecimals, useCommas) => {\n  if (!map || !map[key]) {\n    return \"...\";\n  }\n\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatArrayAmount = (arr, index, tokenDecimals, displayDecimals, useCommas) => {\n  if (!arr || !arr[index]) {\n    return \"...\";\n  }\n\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\n};\n\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\n  if (!ordersData || ordersData.length === 0) {\n    return [];\n  }\n  const [uintProps, addressProps] = ordersData;\n  const count = uintProps.length / uintPropsLength;\n\n  const orders = [];\n  for (let i = 0; i < count; i++) {\n    const sliced = addressProps\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\n\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\n      continue;\n    }\n\n    const order = extractor(sliced);\n    order.index = indexes[i];\n    order.account = account;\n    orders.push(order);\n  }\n\n  return orders;\n}\n\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[4].toString() === \"1\";\n    return {\n      collateralToken: sliced[0],\n      indexToken: sliced[1],\n      collateralDelta: sliced[2],\n      sizeDelta: sliced[3],\n      isLong,\n      triggerPrice: sliced[5],\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\n      type: DECREASE,\n    };\n  };\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\n  });\n}\n\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[5].toString() === \"1\";\n    return {\n      purchaseToken: sliced[0],\n      collateralToken: sliced[1],\n      indexToken: sliced[2],\n      purchaseTokenAmount: sliced[3],\n      sizeDelta: sliced[4],\n      isLong,\n      triggerPrice: sliced[6],\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\n      type: INCREASE,\n    };\n  };\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return (\n      isValidToken(chainId, order.purchaseToken) &&\n      isValidToken(chainId, order.collateralToken) &&\n      isValidToken(chainId, order.indexToken)\n    );\n  });\n}\n\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\n  if (!swapOrdersData || !swapOrdersData.length) {\n    return [];\n  }\n\n  const extractor = (sliced) => {\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\n    const shouldUnwrap = sliced[7].toString() === \"1\";\n\n    return {\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\n      amountIn: sliced[3],\n      minOut: sliced[4],\n      triggerRatio: sliced[5],\n      triggerAboveThreshold,\n      type: SWAP,\n      shouldUnwrap,\n    };\n  };\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return order.path.every((token) => isValidToken(chainId, token));\n  });\n}\n\nexport function getOrderKey(order) {\n  return `${order.type}-${order.account}-${order.index}`;\n}\n\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\n  const { library, account: connectedAccount } = useWeb3React();\n  const active = true; // this is used in Actions.js so set active to always be true\n  const account = overrideAccount || connectedAccount;\n\n  const { chainId } = useChainId();\n  const shouldRequest = active && account && flagOrdersEnabled;\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\n  const {\n    data: orders = [],\n    mutate: updateOrders,\n    error: ordersError,\n  } = useSWR(key, {\n    dedupingInterval: 5000,\n    fetcher: async (active, chainId, orderBookAddress, account) => {\n      const provider = getProvider(library, chainId);\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\n\n      const fetchIndexesFromServer = () => {\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\n        return fetch(ordersIndexesUrl)\n          .then(async (res) => {\n            const json = await res.json();\n            const ret = {};\n            for (const key of Object.keys(json)) {\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\n            }\n\n            return ret;\n          })\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\n      };\n\n      const fetchLastIndex = async (type) => {\n        const method = type.toLowerCase() + \"OrdersIndex\";\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\n      };\n\n      const fetchLastIndexes = async () => {\n        const [swap, increase, decrease] = await Promise.all([\n          fetchLastIndex(\"swap\"),\n          fetchLastIndex(\"increase\"),\n          fetchLastIndex(\"decrease\"),\n        ]);\n\n        return { swap, increase, decrease };\n      };\n\n      const getRange = (to, from) => {\n        const LIMIT = 10;\n        const _indexes = [];\n        from = from || Math.max(to - LIMIT, 0);\n        for (let i = to - 1; i >= from; i--) {\n          _indexes.push(i);\n        }\n        return _indexes;\n      };\n\n      const getIndexes = (knownIndexes, lastIndex) => {\n        if (knownIndexes.length === 0) {\n          return getRange(lastIndex);\n        }\n        return [\n          ...knownIndexes,\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\n        ];\n      };\n\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\n        const indexes = getIndexes(knownIndexes, lastIndex);\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\n        const orders = parseFunc(chainId, ordersData, account, indexes);\n\n        return orders;\n      };\n\n      try {\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\n        ]);\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\n      } catch (ex) {\n        console.error(ex);\n      }\n    },\n  });\n\n  return [orders, updateOrders, ordersError];\n}\n\nexport const formatAmount = (amount, tokenDecimals, displayDecimals, useCommas, defaultValue) => {\n  if (amount === null) {\n    return;\n  }\n  \n  if (!defaultValue) {\n    defaultValue = \"...\";\n  }\n  if (amount === undefined || amount.toString().length === 0) {\n    return defaultValue;\n  }\n  if (displayDecimals === undefined) {\n    displayDecimals = 4;\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  if (displayDecimals !== 0) {\n    amountStr = padDecimals(amountStr, displayDecimals);\n  }\n  if (useCommas) {\n    return numberWithCommas(amountStr);\n  }\n  return amountStr;\n};\n\nexport const formatAmountFree = (amount, tokenDecimals, displayDecimals) => {\n  if (!amount) {\n    return \"...\";\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  return trimZeroDecimals(amountStr);\n};\n\nexport const parseValue = (value, tokenDecimals) => {\n  const pValue = parseFloat(value);\n  if (isNaN(pValue)) {\n    return undefined;\n  }\n  value = limitDecimals(value, tokenDecimals);\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\n  return bigNumberify(amount);\n};\n\nexport function numberWithCommas(x) {\n  if (!x) {\n    return \"...\";\n  }\n  var parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\nexport function getExplorerUrl(chainId) {\n  if (chainId === 3) {\n    return \"https://ropsten.etherscan.io/\";\n  } else if (chainId === 42) {\n    return \"https://kovan.etherscan.io/\";\n  } else if (chainId === MAINNET) {\n    return \"https://bscscan.com/\";\n  } else if (chainId === TESTNET) {\n    return \"https://testnet.bscscan.com/\";\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return \"https://testnet.arbiscan.io/\";\n  } else if (chainId === ARBITRUM) {\n    return \"https://arbiscan.io/\";\n  } else if (chainId === AVALANCHE) {\n    return \"https://snowtrace.io/\";\n  }\n  return \"https://etherscan.io/\";\n}\n\nexport function getAccountUrl(chainId, account) {\n  if (!account) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"address/\" + account;\n}\n\nexport function getTokenUrl(chainId, address) {\n  if (!address) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"token/\" + address;\n}\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function approveTokens({\n  setIsApproving,\n  library,\n  tokenAddress,\n  spender,\n  chainId,\n  onApproveSubmitted,\n  getTokenInfo,\n  infoTokens,\n  pendingTxns,\n  setPendingTxns,\n  includeMessage,\n}) {\n  setIsApproving(true);\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\n  contract\n    .approve(spender, ethers.constants.MaxUint256)\n    .then(async (res) => {\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n      helperToast.success(\n        <div>\n          Approval submitted!{\" \"}\n          <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n            View status.\n          </a>\n          <br />\n        </div>\n      );\n      if (onApproveSubmitted) {\n        onApproveSubmitted();\n      }\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\n        const token = getTokenInfo(infoTokens, tokenAddress);\n        const pendingTxn = {\n          hash: res.hash,\n          message: includeMessage ? `${token.symbol} Approved!` : false,\n        };\n        setPendingTxns([...pendingTxns, pendingTxn]);\n      }\n    })\n    .catch((e) => {\n      console.error(e);\n      let failMsg;\n      if (\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\n          e.data?.message\n        )\n      ) {\n        failMsg = (\n          <div>\n            There is not enough ETH in your account on Arbitrum to send this transaction.\n            <br />\n            <br />\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\n              Bridge ETH to Arbitrum\n            </a>\n          </div>\n        );\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\n        failMsg = \"Approval was cancelled\";\n      } else {\n        failMsg = \"Approval failed\";\n      }\n      helperToast.error(failMsg);\n    })\n    .finally(() => {\n      setIsApproving(false);\n    });\n}\n\nexport const shouldRaiseGasError = (token, amount) => {\n  if (!amount) {\n    return false;\n  }\n  if (token.address !== AddressZero) {\n    return false;\n  }\n  if (!token.balance) {\n    return false;\n  }\n  if (amount.gte(token.balance)) {\n    return true;\n  }\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\n    return true;\n  }\n  return false;\n};\n\nexport const getTokenInfo = (infoTokens, tokenAddress, replaceNative, nativeTokenAddress) => {\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\n    return infoTokens[AddressZero];\n  }\n  return infoTokens[tokenAddress];\n};\n\nconst NETWORK_METADATA = {\n  [MAINNET]: {\n    chainId: \"0x\" + MAINNET.toString(16),\n    chainName: \"BSC\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: BSC_RPC_PROVIDERS,\n    blockExplorerUrls: [\"https://bscscan.com\"],\n  },\n  [TESTNET]: {\n    chainId: \"0x\" + TESTNET.toString(16),\n    chainName: \"BSC Testnet\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n  },\n  [ARBITRUM_TESTNET]: {\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\n    chainName: \"Arbitrum Testnet\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\n  },\n  [ARBITRUM]: {\n    chainId: \"0x\" + ARBITRUM.toString(16),\n    chainName: \"Arbitrum\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: ARBITRUM_RPC_PROVIDERS,\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\n  },\n  [AVALANCHE]: {\n    chainId: \"0x\" + AVALANCHE.toString(16),\n    chainName: \"Avalanche\",\n    nativeCurrency: {\n      name: \"AVAX\",\n      symbol: \"AVAX\",\n      decimals: 18,\n    },\n    rpcUrls: AVALANCHE_RPC_PROVIDERS,\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE)],\n  },\n};\n\nexport const addBscNetwork = async () => {\n  return addNetwork(NETWORK_METADATA[MAINNET]);\n};\n\nexport const addNetwork = async (metadata) => {\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\n};\n\nexport const switchNetwork = async (chainId, active) => {\n  if (!active) {\n    // chainId in localStorage allows to switch network even if wallet is not connected\n    // or there is no wallet at all\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\n    document.location.reload();\n    return;\n  }\n\n  try {\n    const chainIdHex = \"0x\" + chainId.toString(16);\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: chainIdHex }],\n    });\n    helperToast.success(\"Connected to \" + getChainName(chainId));\n    return getChainName(chainId);\n  } catch (ex) {\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\n    // This error code indicates that the chain has not been added to MetaMask.\n    // 4001 error means user has denied the request\n    // If the error code is not 4001, then we need to add the network\n    if (ex.code !== 4001) {\n      return await addNetwork(NETWORK_METADATA[chainId]);\n    }\n\n    console.error(\"error\", ex);\n  }\n};\n\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\n  const fn = async () => {\n    const walletConnect = getWalletConnectConnector();\n    setActivatingConnector(walletConnect);\n    activate(walletConnect, (ex) => {\n      if (ex instanceof UnsupportedChainIdError) {\n        helperToast.error(\"Unsupported chain. Switch to Arbitrum network on your wallet and try again\");\n        console.warn(ex);\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\n        helperToast.error(ex.message);\n        console.warn(ex);\n      }\n      clearWalletConnectData();\n      deactivate();\n    });\n  };\n  return fn;\n};\n\nexport const getInjectedHandler = (activate) => {\n  const fn = async () => {\n    activate(getInjectedConnector(), (e) => {\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n\n      if (e instanceof UnsupportedChainIdError) {\n        helperToast.error(\n          <div>\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\n            <br />\n            <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\n              Switch to {getChainName(chainId)}\n            </div>\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\n              Add {getChainName(chainId)}\n            </div>\n          </div>\n        );\n        return;\n      }\n      const errString = e.message ?? e.toString();\n      helperToast.error(errString);\n    });\n  };\n  return fn;\n};\n\nexport function isMobileDevice(navigator) {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\nexport function setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress) {\n  if (!indexPrices) {\n    // console.log('return');\n    return;\n  }\n\n  // console.log('-------------------WENT THROUGH')\n\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\n\n  const indexPrice = indexPrices[tokenAddress];\n  if (!indexPrice) {\n    return;\n  }\n\n  const indexPriceBn = bigNumberify(indexPrice);\n  if (indexPriceBn.eq(0)) {\n    return;\n  }\n\n  const spread = token.maxPrice.sub(token.minPrice);\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice.add(token.minPrice).div(2));\n\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\n    if (indexPriceBn.gt(token.minPrimaryPrice)) {\n      token.maxPrice = indexPriceBn;\n    } else {\n      token.minPrice = indexPriceBn;\n    }\n    return;\n  }\n\n  const halfSpreadBps = spreadBps.div(2).toNumber();\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n}\n\nexport function getInfoTokens(\n  tokens,\n  tokenBalances,\n  whitelistedTokens,\n  vaultTokenInfo,\n  fundingRateInfo,\n  vaultPropsLength,\n  indexPrices,\n  nativeTokenAddress\n) {\n  if (!vaultPropsLength) {\n    vaultPropsLength = 15;\n  }\n  const fundingRatePropsLength = 2;\n  const infoTokens = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(tokens[i]));\n    if (tokenBalances) {\n      token.balance = tokenBalances[i];\n    }\n    if (token.address === USDG_ADDRESS) {\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\n    }\n    infoTokens[token.address] = token;\n  }\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i]));\n    if (vaultTokenInfo) {\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\n\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\n      token.contractMinPrice = token.minPrice;\n      token.contractMaxPrice = token.maxPrice;\n\n      token.maxAvailableShort = bigNumberify(0);\n      token.hasMaxAvailableShort = false;\n      if (token.maxGlobalShortSize.gt(0)) {\n        token.hasMaxAvailableShort = true;\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\n        }\n      }\n\n      if (token.maxUsdgAmount.eq(0)) {\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n      }\n\n      token.availableUsd = token.isStable\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\n\n      token.maxAvailableLong = bigNumberify(0);\n      token.hasMaxAvailableLong = false;\n      if (token.maxGlobalLongSize.gt(0)) {\n        token.hasMaxAvailableLong = true;\n\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\n        }\n      } else {\n        token.maxAvailableLong = token.availableUsd;\n      }\n\n      token.maxLongCapacity =\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\n          ? token.maxGlobalLongSize\n          : token.availableUsd.add(token.guaranteedUsd);\n\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\n    }\n\n    if (fundingRateInfo) {\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\n    }\n\n    if (infoTokens[token.address]) {\n      token.balance = infoTokens[token.address].balance;\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  return infoTokens;\n}\n\nexport const CHART_PERIODS = {\n  \"5m\": 60 * 5,\n  \"15m\": 60 * 15,\n  \"1h\": 60 * 60,\n  \"4h\": 60 * 60 * 4,\n  \"1d\": 60 * 60 * 24,\n};\n\nexport function getTotalVolumeSum(volumes) {\n  if (!volumes || volumes.length === 0) {\n    return;\n  }\n\n  let volume = bigNumberify(0);\n  for (let i = 0; i < volumes.length; i++) {\n    volume = volume.add(volumes[i].data.volume);\n  }\n\n  return volume;\n}\n\nexport function getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return { balanceData, supplyData };\n}\n\nexport function getDepositBalanceData(depositBalances) {\n  if (!depositBalances || depositBalances.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"gmxInStakedGmx\",\n    \"esGmxInStakedGmx\",\n    \"stakedGmxInBonusGmx\",\n    \"bonusGmxInFeeGmx\",\n    \"bnGmxInFeeGmx\",\n    \"glpInStakedGlp\",\n  ];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = depositBalances[i];\n  }\n\n  return data;\n}\n\nexport function getVestingData(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 7;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n  }\n\n  return data;\n}\n\nexport function getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nexport function getProcessedData(\n  balanceData,\n  supplyData,\n  depositBalanceData,\n  stakingData,\n  vestingData,\n  aum,\n  nativeTokenPrice,\n  stakedGmxSupply,\n  gmxPrice,\n  gmxSupply\n) {\n  if (\n    !balanceData ||\n    !supplyData ||\n    !depositBalanceData ||\n    !stakingData ||\n    !vestingData ||\n    !aum ||\n    !nativeTokenPrice ||\n    !stakedGmxSupply ||\n    !gmxPrice ||\n    !gmxSupply\n  ) {\n    return {};\n  }\n\n  const data = {};\n\n  data.gmxBalance = balanceData.gmx;\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.gmxSupply = bigNumberify(gmxSupply);\n\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedGmxSupply = stakedGmxSupply;\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxBalance = balanceData.esGmx;\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\n\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.boostBasisPoints = bigNumberify(0);\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\n  }\n\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForEsGmx =\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\n      : bigNumberify(0);\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForNativeToken =\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\n      : bigNumberify(0);\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\n\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\n\n  data.glpSupply = supplyData.glp;\n  data.glpPrice =\n    data.glpSupply && data.glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\n      : bigNumberify(0);\n\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\n\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForEsGmx =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForNativeToken =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\n\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\n\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\n  data.glpVesterRewards = vestingData.glpVester.claimable;\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\n\n  return data;\n}\n\nexport async function addTokenToMetamask(token) {\n  try {\n    const wasAdded = await window.ethereum.request({\n      method: \"wallet_watchAsset\",\n      params: {\n        type: \"ERC20\",\n        options: {\n          address: token.address,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          image: token.imageUrl,\n        },\n      },\n    });\n    if (wasAdded) {\n      // https://github.com/MetaMask/metamask-extension/issues/11377\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nexport function sleep(ms) {\n  return new Promise((resolve) => resolve(), ms);\n}\n\nexport function getPageTitle(data) {\n  return `${data} | DeDeLend`;\n}\n\nexport function isHashZero(value) {\n  return value === ethers.constants.HashZero;\n}\nexport function isAddressZero(value) {\n  return value === ethers.constants.AddressZero;\n}\n\nexport function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nexport function isDevelopment() {\n  return !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\");\n}\n\nexport function isLocal() {\n  return window.location.host?.includes(\"localhost\");\n}\n\nexport function getHomeUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3010\";\n  }\n\n  return \"https://gmx.io\";\n}\n\nexport function getAppBaseUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#\";\n  }\n\n  return \"https://app.gmx.io/#\";\n}\n\nexport function getRootShareApiUrl() {\n  if (isLocal()) {\n    return \"https://gmxs.vercel.app\";\n  }\n\n  return \"https://share.gmx.io\";\n}\n\nexport function getTradePageUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#/trade\";\n  }\n\n  return \"https://app.gmx.io/#/trade\";\n}\n\nexport function importImage(name) {\n  let tokenImage = null;\n  try {\n    tokenImage = require(\"../img/\" + name);\n  } catch (error) {\n    console.error(error);\n  }\n  return tokenImage && tokenImage.default;\n}\n\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\n  if (text.length > 0) {\n    finalURL += encodeURIComponent(text.replace(/[\\r\\n]+/g, \" \"))\n      .replace(/\\*%7C/g, \"*|URL:\")\n      .replace(/%7C\\*/g, \"|*\");\n\n    if (hashtag.length > 0) {\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\n    }\n    if (url.length > 0) {\n      finalURL += \"&url=\" + encodeURIComponent(url);\n    }\n  }\n  return finalURL;\n}\n\nexport function isValidTimestamp(timestamp) {\n  return new Date(timestamp).getTime() > 0;\n}\n\nexport function getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n  const position = positionsMap[key];\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport function getOrderError(account, order, positionsMap, position) {\n  if (order.type !== DECREASE) {\n    return;\n  }\n\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\n\n  if (!positionForOrder) {\n    return \"No open position, order cannot be executed unless a position is opened\";\n  }\n  if (positionForOrder.size.lt(order.sizeDelta)) {\n    return \"Order size is bigger than position, will only be executable if position increases\";\n  }\n\n  if (positionForOrder.size.gt(order.sizeDelta)) {\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\n      return \"Order cannot be executed as it would reduce the position's leverage below 1\";\n    }\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\n      return \"Order cannot be executed as the remaining position would be smaller than $5.00\";\n    }\n  }\n}\n\nexport function arrayURLFetcher(...urlArr) {\n  const fetcher = (url) => fetch(url).then((res) => res.json());\n  return Promise.all(urlArr.map(fetcher));\n}\n\nexport function shouldShowRedirectModal(timestamp) {\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\n  const expiryTime = timestamp + thirtyDays;\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\n}\n","import { ethers } from \"ethers\";\n\nimport { MAINNET, TESTNET, ARBITRUM_TESTNET, ARBITRUM, AVALANCHE } from \"../lib/legacy\";\n\nconst { parseEther } = ethers.utils;\n\nconst constants = {\n  [MAINNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [TESTNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [ARBITRUM_TESTNET]: {\n    nativeTokenSymbol: \"ETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n\n  [ARBITRUM]: {\n    nativeTokenSymbol: \"ETH\",\n    wrappedTokenSymbol: \"WETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n\n  [AVALANCHE]: {\n    nativeTokenSymbol: \"AVAX\",\n    wrappedTokenSymbol: \"WAVAX\",\n    defaultCollateralSymbol: \"MIM\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n};\n\nexport const getConstant = (chainId, key) => {\n  if (!constants[chainId]) {\n    throw new Error(`Unsupported chainId ${chainId}`);\n  }\n  if (!(key in constants[chainId])) {\n    throw new Error(`Key ${key} does not exist for chainId ${chainId}`);\n  }\n  return constants[chainId][key];\n};\n","import { ApolloClient, InMemoryCache } from \"@apollo/client\";\n\nexport const chainlinkClient = createClient(\"https://api.thegraph.com/subgraphs/name/deividask/chainlink\");\nexport const arbitrumGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats\");\nexport const avalancheGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats\");\nexport const nissohGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault\");\nexport const arbitrumReferralsGraphClient = createClient(\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals\"\n);\nexport const avalancheReferralsGraphClient = createClient(\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals\"\n);\n\nfunction createClient(uri) {\n  return new ApolloClient({\n    uri,\n    cache: new InMemoryCache(),\n  });\n}\n\nexport function get1InchSwapUrl(chainId, from, to) {\n  const rootUrl = `https://app.1inch.io/#/${chainId}/unified/swap`;\n  if (!from && !to) return rootUrl;\n  return `${rootUrl}/${from}/${to}`;\n}\n","// prettier-ignore\nimport {ethers} from \"ethers\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { getFallbackProvider, getProvider } from \"../legacy\";\n\nexport const fetcher =\n  (library: Web3Provider, contractInfo: any, additionalArgs: any[]) =>\n  (...args: any) => {\n    // eslint-disable-next-line\n    const [id, chainId, arg0, arg1, ...params] = args;\n    const provider = getProvider(library, chainId);\n\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\n\n    const contractCall = getContractCall({\n      provider,\n      contractInfo,\n      arg0,\n      arg1,\n      method,\n      params,\n      additionalArgs,\n    });\n\n    let shouldCallFallback = true;\n\n    const handleFallback = async (resolve, reject, error) => {\n      if (!shouldCallFallback) {\n        return;\n      }\n      // prevent fallback from being called twice\n      shouldCallFallback = false;\n\n      const fallbackProvider = getFallbackProvider(chainId);\n      if (!fallbackProvider) {\n        reject(error);\n        return;\n      }\n\n      console.info(\"using fallbackProvider for\", method);\n      const fallbackContractCall = getContractCall({\n        provider: fallbackProvider,\n        contractInfo,\n        arg0,\n        arg1,\n        method,\n        params,\n        additionalArgs,\n      });\n\n      fallbackContractCall\n        .then((result) => resolve(result))\n        .catch((e) => {\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\n          reject(e);\n        });\n    };\n\n    return new Promise(async (resolve, reject) => {\n      contractCall\n        .then((result) => {\n          shouldCallFallback = false;\n          resolve(result);\n        })\n        .catch((e) => {\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\n          handleFallback(resolve, reject, e);\n        });\n\n      setTimeout(() => {\n        handleFallback(resolve, reject, \"contractCall timeout\");\n      }, 2000);\n    });\n  };\n\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\n  if (ethers.utils.isAddress(arg0)) {\n    const address = arg0;\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\n\n    if (additionalArgs) {\n      return contract[method](...params.concat(additionalArgs));\n    }\n    return contract[method](...params);\n  }\n\n  if (!provider) {\n    return;\n  }\n\n  return provider[method](arg1, ...params);\n}\n","import { toast, ToastContent, ToastOptions } from \"react-toastify\";\n\nexport const helperToast = {\n  success: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.success(content, opts);\n  },\n  error: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.error(content, opts);\n  },\n};\n","export const NOT_ENOUGH_FUNDS = \"NOT_ENOUGH_FUNDS\";\nexport const USER_DENIED = \"USER_DENIED\";\nexport const SLIPPAGE = \"SLIPPAGE\";\nexport const RPC_ERROR = \"RPC_ERROR\";\n\ntype ErrorPattern = { msg?: string; code?: number };\n\nconst TX_ERROR_PATTERNS: { [key: string]: ErrorPattern[] } = {\n  [NOT_ENOUGH_FUNDS]: [\n    { msg: \"not enough funds for gas\" },\n    { msg: \"failed to execute call with revert code InsufficientGasFunds\" },\n  ],\n  [USER_DENIED]: [{ msg: \"User denied transaction signature\" }],\n  [SLIPPAGE]: [{ msg: \"Router: mark price lower than limit\" }, { msg: \"Router: mark price higher than limit\" }],\n  [RPC_ERROR]: [\n    // @see https://eips.ethereum.org/EIPS/eip-1474#error-codes\n    { code: -32005 },\n    { msg: \"Non-200 status code\" },\n    { msg: \"Request limit exceeded\" },\n    { msg: \"Internal JSON-RPC error\" },\n    { msg: \"Response has no error or result\" },\n    { msg: \"couldn't connect to the network\" },\n  ],\n};\n\ntype TxError = {\n  message?: string;\n  code?: number;\n  data?: any;\n};\n\nexport function extractError(ex: TxError) {\n  if (!ex) {\n    return [];\n  }\n\n  const message = ex.data?.message || ex.message;\n  const code = ex.code;\n\n  if (!message && !code) {\n    return [];\n  }\n\n  for (const [type, patterns] of Object.entries(TX_ERROR_PATTERNS)) {\n    for (const pattern of patterns) {\n      const matchCode = pattern.code && code === pattern.code;\n      const matchMessage = pattern.msg && message && message.includes(pattern.msg);\n\n      if (matchCode || matchMessage) {\n        return [message, type, ex.data];\n      }\n    }\n  }\n\n  return [message, null, ex.data];\n}\n","import { ARBITRUM, AVALANCHE } from \"../legacy\";\n\nexport const GAS_PRICE_ADJUSTMENT_MAP = {\n  [ARBITRUM]: \"0\",\n  [AVALANCHE]: \"3000000000\", // 3 gwei\n};\n\nexport const MAX_GAS_PRICE_MAP = {\n  [AVALANCHE]: \"200000000000\", // 200 gwei\n};","import { useMemo } from \"react\";\nimport { gql } from \"@apollo/client\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { USD_DECIMALS, CHART_PERIODS, formatAmount, sleep } from \"../lib/legacy\";\nimport { chainlinkClient } from \"./common\";\n\nconst BigNumber = ethers.BigNumber;\n\n// Ethereum network, Chainlink Aggregator contracts\nconst FEED_ID_MAP = {\n  BTC_USD: \"0xae74faa92cb67a95ebcab07358bc222e33a34da7\",\n  ETH_USD: \"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6\",\n  BNB_USD: \"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d\",\n  LINK_USD: \"0xdfd03bfc3465107ce570a0397b247f546a42d0fa\",\n  UNI_USD: \"0x68577f915131087199fe48913d8b416b3984fd38\",\n  SUSHI_USD: \"0x7213536a36094cd8a768a5e45203ec286cba2d74\",\n  AVAX_USD: \"0x0fc3657899693648bba4dbd2d8b33b82e875105d\",\n  AAVE_USD: \"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0\",\n  YFI_USD: \"0x8a4d74003870064d41d4f84940550911fbfccf04\",\n  SPELL_USD: \"0x8640b23468815902e011948f3ab173e1e83f9879\",\n};\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nfunction fillGaps(prices, periodSeconds) {\n  if (prices.length < 2) {\n    return prices;\n  }\n\n  const newPrices = [prices[0]];\n  let prevTime = prices[0].time;\n  for (let i = 1; i < prices.length; i++) {\n    const { time, open } = prices[i];\n    if (prevTime) {\n      let j = (time - prevTime) / periodSeconds - 1;\n      while (j > 0) {\n        newPrices.push({\n          time: time - j * periodSeconds,\n          open,\n          close: open,\n          high: open * 1.0003,\n          low: open * 0.9996,\n        });\n        j--;\n      }\n    }\n\n    prevTime = time;\n    newPrices.push(prices[i]);\n  }\n\n  return newPrices;\n}\n\nasync function getChartPricesFromStats(chainId, symbol, period) {\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(symbol)) {\n    symbol = symbol.substr(1);\n  } else if (symbol === \"BTC.b\") {\n    symbol = \"BTC\";\n  }\n  const hostname = \"https://stats.gmx.io/\";\n  // const hostname = 'http://localhost:3113/'\n  const timeDiff = CHART_PERIODS[period] * 3000;\n  const from = Math.floor(Date.now() / 1000 - timeDiff);\n  const url = `${hostname}api/candles/${symbol}?preferableChainId=${chainId}&period=${period}&from=${from}&preferableSource=fast`;\n  const TIMEOUT = 5000;\n  const res = await new Promise(async (resolve, reject) => {\n    let done = false;\n    setTimeout(() => {\n      done = true;\n      reject(new Error(`request timeout ${url}`));\n    }, TIMEOUT);\n\n    let lastEx;\n    for (let i = 0; i < 3; i++) {\n      if (done) return;\n      try {\n        const res = await fetch(url);\n        resolve(res);\n        return;\n      } catch (ex) {\n        await sleep(300);\n        lastEx = ex;\n      }\n    }\n    reject(lastEx);\n  });\n  if (!res.ok) {\n    throw new Error(`request failed ${res.status} ${res.statusText}`);\n  }\n  const json = await res.json();\n  let prices = json?.prices;\n  if (!prices || prices.length < 10) {\n    throw new Error(`not enough prices data: ${prices?.length}`);\n  }\n\n  const OBSOLETE_THRESHOLD = Date.now() / 1000 - 60 * 30; // 30 min ago\n  const updatedAt = json?.updatedAt || 0;\n  if (updatedAt < OBSOLETE_THRESHOLD) {\n    throw new Error(\n      \"chart data is obsolete, last price record at \" +\n        new Date(updatedAt * 1000).toISOString() +\n        \" now: \" +\n        new Date().toISOString()\n    );\n  }\n\n  prices = prices.map(({ t, o: open, c: close, h: high, l: low }) => ({\n    time: t + timezoneOffset,\n    open,\n    close,\n    high,\n    low,\n  }));\n  return prices;\n}\n\nfunction getCandlesFromPrices(prices, period) {\n  const periodTime = CHART_PERIODS[period];\n\n  if (prices.length < 2) {\n    return [];\n  }\n\n  const candles = [];\n  const first = prices[0];\n  let prevTsGroup = Math.floor(first[0] / periodTime) * periodTime;\n  let prevPrice = first[1];\n  let o = prevPrice;\n  let h = prevPrice;\n  let l = prevPrice;\n  let c = prevPrice;\n  for (let i = 1; i < prices.length; i++) {\n    const [ts, price] = prices[i];\n    const tsGroup = Math.floor(ts / periodTime) * periodTime;\n    if (prevTsGroup !== tsGroup) {\n      candles.push({ t: prevTsGroup + timezoneOffset, o, h, l, c });\n      o = c;\n      h = Math.max(o, c);\n      l = Math.min(o, c);\n    }\n    c = price;\n    h = Math.max(h, price);\n    l = Math.min(l, price);\n    prevTsGroup = tsGroup;\n  }\n\n  return candles.map(({ t: time, o: open, c: close, h: high, l: low }) => ({\n    time,\n    open,\n    close,\n    high,\n    low,\n  }));\n}\n\nfunction getChainlinkChartPricesFromGraph(tokenSymbol, period) {\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(tokenSymbol)) {\n    tokenSymbol = tokenSymbol.substr(1);\n  }\n  const marketName = tokenSymbol + \"_USD\";\n  const feedId = FEED_ID_MAP[marketName];\n  if (!feedId) {\n    throw new Error(`undefined marketName ${marketName}`);\n  }\n\n  const PER_CHUNK = 1000;\n  const CHUNKS_TOTAL = 6;\n  const requests = [];\n  for (let i = 0; i < CHUNKS_TOTAL; i++) {\n    const query = gql(`{\n      rounds(\n        first: ${PER_CHUNK},\n        skip: ${i * PER_CHUNK},\n        orderBy: unixTimestamp,\n        orderDirection: desc,\n        where: {feed: \"${feedId}\"}\n      ) {\n        unixTimestamp,\n        value\n      }\n    }`);\n    requests.push(chainlinkClient.query({ query }));\n  }\n\n  return Promise.all(requests)\n    .then((chunks) => {\n      let prices = [];\n      const uniqTs = new Set();\n      chunks.forEach((chunk) => {\n        chunk.data.rounds.forEach((item) => {\n          if (uniqTs.has(item.unixTimestamp)) {\n            return;\n          }\n\n          uniqTs.add(item.unixTimestamp);\n          prices.push([item.unixTimestamp, Number(item.value) / 1e8]);\n        });\n      });\n\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\n      prices = getCandlesFromPrices(prices, period);\n      return prices;\n    })\n    .catch((err) => {\n      console.error(err);\n    });\n}\n\nexport function useChartPrices(chainId, symbol, isStable, period, currentAveragePrice) {\n  const swrKey = !isStable && symbol ? [\"getChartCandles\", chainId, symbol, period] : null;\n  let { data: prices, mutate: updatePrices } = useSWR(swrKey, {\n    fetcher: async (...args) => {\n      try {\n        return await getChartPricesFromStats(chainId, symbol, period);\n      } catch (ex) {\n        console.warn(ex);\n        console.warn(\"Switching to graph chainlink data\");\n        try {\n          return await getChainlinkChartPricesFromGraph(symbol, period);\n        } catch (ex2) {\n          console.warn(\"getChainlinkChartPricesFromGraph failed\");\n          console.warn(ex2);\n          return [];\n        }\n      }\n    },\n    dedupingInterval: 60000,\n    focusThrottleInterval: 60000 * 10,\n  });\n\n  const currentAveragePriceString = currentAveragePrice && currentAveragePrice.toString();\n  const retPrices = useMemo(() => {\n    if (isStable) {\n      return getStablePriceData(period);\n    }\n\n    if (!prices) {\n      return [];\n    }\n\n    let _prices = [...prices];\n    if (currentAveragePriceString && prices.length) {\n      _prices = appendCurrentAveragePrice(_prices, BigNumber.from(currentAveragePriceString), period);\n    }\n\n    return fillGaps(_prices, CHART_PERIODS[period]);\n  }, [prices, isStable, currentAveragePriceString, period]);\n\n  return [retPrices, updatePrices];\n}\n\nfunction appendCurrentAveragePrice(prices, currentAveragePrice, period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const currentCandleTime = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\n  const last = prices[prices.length - 1];\n  const averagePriceValue = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n  if (currentCandleTime === last.time) {\n    last.close = averagePriceValue;\n    last.high = Math.max(last.high, averagePriceValue);\n    last.low = Math.max(last.low, averagePriceValue);\n    return prices;\n  } else {\n    const newCandle = {\n      time: currentCandleTime,\n      open: last.close,\n      close: averagePriceValue,\n      high: averagePriceValue,\n      low: averagePriceValue,\n    };\n    return [...prices, newCandle];\n  }\n}\n\nfunction getStablePriceData(period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const now = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds;\n  let priceData = [];\n  for (let i = 100; i > 0; i--) {\n    priceData.push({\n      time: now - i * periodSeconds,\n      open: 1,\n      close: 1,\n      high: 1,\n      low: 1,\n    });\n  }\n  return priceData;\n}\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Token as UniToken } from \"@uniswap/sdk-core\";\nimport { Pool } from \"@uniswap/v3-sdk\";\nimport useSWR from \"swr\";\n\nimport OrderBook from \"../abis/OrderBook.json\";\nimport PositionManager from \"../abis/PositionManager.json\";\nimport Vault from \"../abis/Vault.json\";\nimport Router from \"../abis/Router.json\";\nimport UniPool from \"../abis/UniPool.json\";\nimport UniswapV2 from \"../abis/UniswapV2.json\";\nimport Token from \"../abis/Token.json\";\nimport VaultReader from \"../abis/VaultReader.json\";\nimport PositionRouter from \"../abis/PositionRouter.json\";\n\nimport { getContract } from \"../config/Addresses\";\nimport { getConstant } from \"../config/chains\";\nimport {\n  ARBITRUM,\n  ARBITRUM_TESTNET,\n  AVALANCHE,\n  bigNumberify,\n  DECREASE,\n  expandDecimals,\n  getHighExecutionFee,\n  getInfoTokens,\n  getOrderKey,\n  getProvider,\n  getServerBaseUrl,\n  getServerUrl,\n  getUsd,\n  INCREASE,\n  parseValue,\n  replaceNativeTokenAddress,\n  SWAP,\n  UI_VERSION,\n  USD_DECIMALS,\n} from \"../lib/legacy\";\nimport { getTokenBySymbol, getTokens, getWhitelistedTokens } from \"../config/Tokens\";\n\nimport { arbitrumGraphClient, avalancheGraphClient, nissohGraphClient } from \"./common\";\nimport { groupBy } from \"lodash\";\nimport { fetcher } from \"../lib/contracts/fetcher\";\nimport { callContract } from \"../lib/contracts/callContract\";\n\nexport * from \"./prices\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getGmxGraphClient(chainId) {\n  if (chainId === ARBITRUM) {\n    return arbitrumGraphClient;\n  } else if (chainId === AVALANCHE) {\n    return avalancheGraphClient;\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return null;\n  }\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n\nexport function useAllOrdersStats(chainId) {\n  const query = gql(`{\n    orderStat(id: \"total\") {\n      openSwap\n      openIncrease\n      openDecrease\n      executedSwap\n      executedIncrease\n      executedDecrease\n      cancelledSwap\n      cancelledIncrease\n      cancelledDecrease\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(chainId);\n    if (graphClient) {\n      graphClient.query({ query }).then(setRes).catch(console.warn);\n    }\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.orderStat : null;\n}\n\nexport function useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo, vaultPropsLength) {\n  const tokens = getTokens(chainId);\n  const vaultReaderAddress = getContract(chainId, \"VaultReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  \n  const { data: vaultTokenInfo } = useSWR(\n    [`useInfoTokens:${active}`, chainId, vaultReaderAddress, \"getVaultTokenInfoV4\"],\n    {\n      fetcher: fetcher(library, VaultReader, [\n        vaultAddress,\n        positionRouterAddress,\n        nativeTokenAddress,\n        expandDecimals(1, 18),\n        whitelistedTokenAddresses,\n      ]),\n      refreshInterval: 5000\n    }\n  );\n\n  const indexPricesUrl = getServerUrl(chainId, \"/prices\");\n  const { data: indexPrices } = useSWR([indexPricesUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n    refreshInterval: 1000,\n    refreshWhenHidden: true,\n  });\n\n  return {\n    infoTokens: getInfoTokens(\n      tokens,\n      tokenBalances,\n      whitelistedTokens,\n      vaultTokenInfo,\n      fundingRateInfo,\n      vaultPropsLength,\n      indexPrices,\n      nativeTokenAddress\n    ),\n  };\n}\n\nexport function useUserStat(chainId) {\n  const query = gql(`{\n    userStat(id: \"total\") {\n      id\n      uniqueCount\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId).query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.userStat : null;\n}\n\nexport function useLiquidationsData(chainId, account) {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    if (account) {\n      const query = gql(`{\n         liquidatedPositions(\n           where: {account: \"${account.toLowerCase()}\"}\n           first: 100\n           orderBy: timestamp\n           orderDirection: desc\n         ) {\n           key\n           timestamp\n           borrowFee\n           loss\n           collateral\n           size\n           markPrice\n           type\n         }\n      }`);\n      const graphClient = getGmxGraphClient(chainId);\n      if (!graphClient) {\n        return;\n      }\n\n      graphClient\n        .query({ query })\n        .then((res) => {\n          const _data = res.data.liquidatedPositions.map((item) => {\n            return {\n              ...item,\n              size: bigNumberify(item.size),\n              collateral: bigNumberify(item.collateral),\n              markPrice: bigNumberify(item.markPrice),\n            };\n          });\n          setData(_data);\n        })\n        .catch(console.warn);\n    }\n  }, [setData, chainId, account]);\n\n  return data;\n}\n\nexport function useAllPositions(chainId, library) {\n  const count = 1000;\n  const query = gql(`{\n    aggregatedTradeOpens(\n      first: ${count}\n    ) {\n      account\n      initialPosition{\n        indexToken\n        collateralToken\n        isLong\n        sizeDelta\n      }\n      increaseList {\n        sizeDelta\n      }\n      decreaseList {\n        sizeDelta\n      }\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    nissohGraphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const key = res ? `allPositions${count}__` : false;\n  const { data: positions = [] } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const ret = await Promise.all(\n      res.data.aggregatedTradeOpens.map(async (dataItem) => {\n        try {\n          const { indexToken, collateralToken, isLong } = dataItem.initialPosition;\n          const positionData = await contract.getPosition(dataItem.account, collateralToken, indexToken, isLong);\n          const position = {\n            size: bigNumberify(positionData[0]),\n            collateral: bigNumberify(positionData[1]),\n            entryFundingRate: bigNumberify(positionData[3]),\n            account: dataItem.account,\n          };\n          position.fundingFee = await contract.getFundingFee(collateralToken, position.size, position.entryFundingRate);\n          position.marginFee = position.size.div(1000);\n          position.fee = position.fundingFee.add(position.marginFee);\n\n          const THRESHOLD = 5000;\n          const collateralDiffPercent = position.fee.mul(10000).div(position.collateral);\n          position.danger = collateralDiffPercent.gt(THRESHOLD);\n\n          return position;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n\n    return ret.filter(Boolean);\n  });\n\n  return positions;\n}\n\nexport function useAllOrders(chainId, library) {\n  const query = gql(`{\n    orders(\n      first: 1000,\n      orderBy: createdTimestamp,\n      orderDirection: desc,\n      where: {status: \"open\"}\n    ) {\n      type\n      account\n      index\n      status\n      createdTimestamp\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId).query({ query }).then(setRes);\n  }, [setRes, query, chainId]);\n\n  const key = res ? res.data.orders.map((order) => `${order.type}-${order.account}-${order.index}`) : null;\n  const { data: orders = [] } = useSWR(key, () => {\n    const provider = getProvider(library, chainId);\n    const orderBookAddress = getContract(chainId, \"OrderBook\");\n    const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n    return Promise.all(\n      res.data.orders.map(async (order) => {\n        try {\n          const type = order.type.charAt(0).toUpperCase() + order.type.substring(1);\n          const method = `get${type}Order`;\n          const orderFromChain = await contract[method](order.account, order.index);\n          const ret = {};\n          for (const [key, val] of Object.entries(orderFromChain)) {\n            ret[key] = val;\n          }\n          if (order.type === \"swap\") {\n            ret.path = [ret.path0, ret.path1, ret.path2].filter((address) => address !== AddressZero);\n          }\n          ret.type = type;\n          ret.index = order.index;\n          ret.account = order.account;\n          ret.createdTimestamp = order.createdTimestamp;\n          return ret;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n  });\n\n  return orders.filter(Boolean);\n}\n\nexport function usePositionsForOrders(chainId, library, orders) {\n  const key = orders ? orders.map((order) => getOrderKey(order) + \"____\") : null;\n  const { data: positions = {} } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const data = await Promise.all(\n      orders.map(async (order) => {\n        try {\n          const position = await contract.getPosition(\n            order.account,\n            order.collateralToken,\n            order.indexToken,\n            order.isLong\n          );\n          if (position[0].eq(0)) {\n            return [null, order];\n          }\n          return [position, order];\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n    return data.reduce((memo, [position, order]) => {\n      memo[getOrderKey(order)] = position;\n      return memo;\n    }, {});\n  });\n\n  return positions;\n}\n\nfunction invariant(condition, errorMsg) {\n  if (!condition) {\n    throw new Error(errorMsg);\n  }\n}\n\nexport function useTrades(chainId, account, forSingleAccount, afterId) {\n  let url =\n    account && account.length > 0\n      ? `${getServerBaseUrl(chainId)}/actions?account=${account}`\n      : !forSingleAccount && `${getServerBaseUrl(chainId)}/actions`;\n\n  if (afterId && afterId.length > 0) {\n    const urlItem = new URL(url);\n    urlItem.searchParams.append(\"after\", afterId);\n    url = urlItem.toString();\n  }\n\n  const { data: trades, mutate: updateTrades } = useSWR(url && url, {\n    dedupingInterval: 10000,\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  if (trades) {\n    trades.sort((item0, item1) => {\n      const data0 = item0.data;\n      const data1 = item1.data;\n      const time0 = parseInt(data0.timestamp);\n      const time1 = parseInt(data1.timestamp);\n      if (time1 > time0) {\n        return 1;\n      }\n      if (time1 < time0) {\n        return -1;\n      }\n\n      const block0 = parseInt(data0.blockNumber);\n      const block1 = parseInt(data1.blockNumber);\n\n      if (isNaN(block0) && isNaN(block1)) {\n        return 0;\n      }\n\n      if (isNaN(block0)) {\n        return 1;\n      }\n\n      if (isNaN(block1)) {\n        return -1;\n      }\n\n      if (block1 > block0) {\n        return 1;\n      }\n\n      if (block1 < block0) {\n        return -1;\n      }\n\n      return 0;\n    });\n  }\n\n  return { trades, updateTrades };\n}\n\nexport function useMinExecutionFee(library, active, chainId, infoTokens) {\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n    fetcher: fetcher(library, PositionRouter),\n  });\n\n  const { data: gasPrice } = useSWR([\"gasPrice\", chainId], {\n    fetcher: () => {\n      return new Promise(async (resolve, reject) => {\n        const provider = getProvider(library, chainId);\n        if (!provider) {\n          resolve(undefined);\n          return;\n        }\n\n        try {\n          const gasPrice = await provider.getGasPrice();\n          resolve(gasPrice);\n        } catch (e) {\n          console.error(e);\n        }\n      });\n    },\n  });\n\n  let multiplier;\n\n  // if gas prices on Arbitrum are high, the main transaction costs would come from the L2 gas usage\n  // for executing positions this is around 65,000 gas\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\n  // case yet\n  if (chainId === ARBITRUM || chainId === ARBITRUM_TESTNET) {\n    multiplier = 65000;\n  }\n\n  // multiplier for Avalanche is just the average gas usage\n  if (chainId === AVALANCHE) {\n    multiplier = 700000;\n  }\n\n  let finalExecutionFee = minExecutionFee;\n\n  if (gasPrice && minExecutionFee) {\n    const estimatedExecutionFee = gasPrice.mul(multiplier);\n    if (estimatedExecutionFee.gt(minExecutionFee)) {\n      finalExecutionFee = estimatedExecutionFee;\n    }\n  }\n\n  const finalExecutionFeeUSD = getUsd(finalExecutionFee, nativeTokenAddress, false, infoTokens);\n  const isFeeHigh = finalExecutionFeeUSD?.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\n  const errorMessage =\n    isFeeHigh &&\n    `The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`;\n\n  return {\n    minExecutionFee: finalExecutionFee,\n    minExecutionFeeUSD: finalExecutionFeeUSD,\n    minExecutionFeeErrorMessage: errorMessage,\n  };\n}\n\nexport function useStakedGmxSupply(library, active) {\n  const gmxAddressArb = getContract(ARBITRUM, \"GMX\");\n  const stakedGmxTrackerAddressArb = getContract(ARBITRUM, \"StakedGmxTracker\");\n\n  const { data: arbData, mutate: arbMutate } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, ARBITRUM, gmxAddressArb, \"balanceOf\", stakedGmxTrackerAddressArb],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  const gmxAddressAvax = getContract(AVALANCHE, \"GMX\");\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\n\n  const { data: avaxData, mutate: avaxMutate } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, AVALANCHE, gmxAddressAvax, \"balanceOf\", stakedGmxTrackerAddressAvax],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n\n  let data;\n  if (arbData && avaxData) {\n    data = arbData.add(avaxData);\n  }\n\n  const mutate = () => {\n    arbMutate();\n    avaxMutate();\n  };\n\n  return { data, mutate };\n}\n\nexport function useHasOutdatedUi() {\n  const url = getServerUrl(ARBITRUM, \"/ui_version\");\n  const { data, mutate } = useSWR([url], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  let hasOutdatedUi = false;\n\n  if (data && parseFloat(data) > parseFloat(UI_VERSION)) {\n    // hasOutdatedUi = true;\n    hasOutdatedUi = false;\n  }\n\n  return { data: hasOutdatedUi, mutate };\n}\n\nexport function useGmxPrice(chainId, libraries, active) {\n  const arbitrumLibrary = libraries && libraries.arbitrum ? libraries.arbitrum : undefined;\n  const { data: gmxPriceFromArbitrum, mutate: mutateFromArbitrum } = useGmxPriceFromArbitrum(arbitrumLibrary, active);\n  const { data: gmxPriceFromAvalanche, mutate: mutateFromAvalanche } = useGmxPriceFromAvalanche();\n\n  const gmxPrice = chainId === ARBITRUM ? gmxPriceFromArbitrum : gmxPriceFromAvalanche;\n  const mutate = useCallback(() => {\n    mutateFromAvalanche();\n    mutateFromArbitrum();\n  }, [mutateFromAvalanche, mutateFromArbitrum]);\n\n  return {\n    gmxPrice,\n    gmxPriceFromArbitrum,\n    gmxPriceFromAvalanche,\n    mutate,\n  };\n}\n\n// use only the supply endpoint on arbitrum, it includes the supply on avalanche\nexport function useTotalGmxSupply() {\n  const gmxSupplyUrlArbitrum = getServerUrl(ARBITRUM, \"/gmx_supply\");\n\n  const { data: gmxSupply, mutate: updateGmxSupply } = useSWR([gmxSupplyUrlArbitrum], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  return {\n    total: gmxSupply ? bigNumberify(gmxSupply) : undefined,\n    mutate: updateGmxSupply,\n  };\n}\n\nexport function useTotalGmxStaked() {\n  const stakedGmxTrackerAddressArbitrum = getContract(ARBITRUM, \"StakedGmxTracker\");\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\n  let totalStakedGmx = useRef(bigNumberify(0));\n  const { data: stakedGmxSupplyArbitrum, mutate: updateStakedGmxSupplyArbitrum } = useSWR(\n    [\n      `StakeV2:stakedGmxSupply:${ARBITRUM}`,\n      ARBITRUM,\n      getContract(ARBITRUM, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressArbitrum,\n    ],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n  const { data: stakedGmxSupplyAvax, mutate: updateStakedGmxSupplyAvax } = useSWR(\n    [\n      `StakeV2:stakedGmxSupply:${AVALANCHE}`,\n      AVALANCHE,\n      getContract(AVALANCHE, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressAvax,\n    ],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n\n  const mutate = useCallback(() => {\n    updateStakedGmxSupplyArbitrum();\n    updateStakedGmxSupplyAvax();\n  }, [updateStakedGmxSupplyArbitrum, updateStakedGmxSupplyAvax]);\n\n  if (stakedGmxSupplyArbitrum && stakedGmxSupplyAvax) {\n    let total = bigNumberify(stakedGmxSupplyArbitrum).add(stakedGmxSupplyAvax);\n    totalStakedGmx.current = total;\n  }\n\n  return {\n    avax: stakedGmxSupplyAvax,\n    arbitrum: stakedGmxSupplyArbitrum,\n    total: totalStakedGmx.current,\n    mutate,\n  };\n}\n\nexport function useTotalGmxInLiquidity() {\n  let poolAddressArbitrum = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  let poolAddressAvax = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\n  let totalGMX = useRef(bigNumberify(0));\n\n  const { data: gmxInLiquidityOnArbitrum, mutate: mutateGMXInLiquidityOnArbitrum } = useSWR(\n    [`StakeV2:gmxInLiquidity:${ARBITRUM}`, ARBITRUM, getContract(ARBITRUM, \"GMX\"), \"balanceOf\", poolAddressArbitrum],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n  const { data: gmxInLiquidityOnAvax, mutate: mutateGMXInLiquidityOnAvax } = useSWR(\n    [`StakeV2:gmxInLiquidity:${AVALANCHE}`, AVALANCHE, getContract(AVALANCHE, \"GMX\"), \"balanceOf\", poolAddressAvax],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n  const mutate = useCallback(() => {\n    mutateGMXInLiquidityOnArbitrum();\n    mutateGMXInLiquidityOnAvax();\n  }, [mutateGMXInLiquidityOnArbitrum, mutateGMXInLiquidityOnAvax]);\n\n  if (gmxInLiquidityOnAvax && gmxInLiquidityOnArbitrum) {\n    let total = bigNumberify(gmxInLiquidityOnArbitrum).add(gmxInLiquidityOnAvax);\n    totalGMX.current = total;\n  }\n  return {\n    avax: gmxInLiquidityOnAvax,\n    arbitrum: gmxInLiquidityOnArbitrum,\n    total: totalGMX.current,\n    mutate,\n  };\n}\n\nfunction useGmxPriceFromAvalanche() {\n  const poolAddress = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\n\n  const { data, mutate: updateReserves } = useSWR([\"TraderJoeGmxAvaxReserves\", AVALANCHE, poolAddress, \"getReserves\"], {\n    fetcher: fetcher(undefined, UniswapV2),\n  });\n  const { _reserve0: gmxReserve, _reserve1: avaxReserve } = data || {};\n\n  const vaultAddress = getContract(AVALANCHE, \"Vault\");\n  const avaxAddress = getTokenBySymbol(AVALANCHE, \"WAVAX\").address;\n  const { data: avaxPrice, mutate: updateAvaxPrice } = useSWR(\n    [`StakeV2:avaxPrice`, AVALANCHE, vaultAddress, \"getMinPrice\", avaxAddress],\n    {\n      fetcher: fetcher(undefined, Vault),\n    }\n  );\n\n  const PRECISION = bigNumberify(10).pow(18);\n  let gmxPrice;\n  if (avaxReserve && gmxReserve && avaxPrice) {\n    gmxPrice = avaxReserve.mul(PRECISION).div(gmxReserve).mul(avaxPrice).div(PRECISION);\n  }\n\n  const mutate = useCallback(() => {\n    updateReserves(undefined, true);\n    updateAvaxPrice(undefined, true);\n  }, [updateReserves, updateAvaxPrice]);\n\n  return { data: gmxPrice, mutate };\n}\n\nfunction useGmxPriceFromArbitrum(library, active) {\n  const poolAddress = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  const { data: uniPoolSlot0, mutate: updateUniPoolSlot0 } = useSWR(\n    [`StakeV2:uniPoolSlot0:${active}`, ARBITRUM, poolAddress, \"slot0\"],\n    {\n      fetcher: fetcher(library, UniPool),\n    }\n  );\n\n  const vaultAddress = getContract(ARBITRUM, \"Vault\");\n  const ethAddress = getTokenBySymbol(ARBITRUM, \"WETH\").address;\n  const { data: ethPrice, mutate: updateEthPrice } = useSWR(\n    [`StakeV2:ethPrice:${active}`, ARBITRUM, vaultAddress, \"getMinPrice\", ethAddress],\n    {\n      fetcher: fetcher(library, Vault),\n    }\n  );\n\n  const gmxPrice = useMemo(() => {\n    if (uniPoolSlot0 && ethPrice) {\n      const tokenA = new UniToken(ARBITRUM, ethAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const gmxAddress = getContract(ARBITRUM, \"GMX\");\n      const tokenB = new UniToken(ARBITRUM, gmxAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const pool = new Pool(\n        tokenA, // tokenA\n        tokenB, // tokenB\n        10000, // fee\n        uniPoolSlot0.sqrtPriceX96, // sqrtRatioX96\n        1, // liquidity\n        uniPoolSlot0.tick, // tickCurrent\n        []\n      );\n\n      const poolTokenPrice = pool.priceOf(tokenB).toSignificant(6);\n      const poolTokenPriceAmount = parseValue(poolTokenPrice, 18);\n      return poolTokenPriceAmount.mul(ethPrice).div(expandDecimals(1, 18));\n    }\n  }, [ethPrice, uniPoolSlot0, ethAddress]);\n\n  const mutate = useCallback(() => {\n    updateUniPoolSlot0(undefined, true);\n    updateEthPrice(undefined, true);\n  }, [updateEthPrice, updateUniPoolSlot0]);\n\n  return { data: gmxPrice, mutate };\n}\n\nexport async function approvePlugin(\n  chainId,\n  pluginAddress,\n  { library, pendingTxns, setPendingTxns, sentMsg, failMsg }\n) {\n  const routerAddress = getContract(chainId, \"Router\");\n  const contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n  return callContract(chainId, contract, \"approvePlugin\", [pluginAddress], {\n    sentMsg,\n    failMsg,\n    pendingTxns,\n    setPendingTxns,\n  });\n}\n\nexport async function createSwapOrder(\n  chainId,\n  library,\n  path,\n  amountIn,\n  minOut,\n  triggerRatio,\n  nativeTokenAddress,\n  opts = {}\n) {\n  const executionFee = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const triggerAboveThreshold = false;\n  let shouldWrap = false;\n  let shouldUnwrap = false;\n  opts.value = executionFee;\n\n  if (path[0] === AddressZero) {\n    shouldWrap = true;\n    opts.value = opts.value.add(amountIn);\n  }\n  if (path[path.length - 1] === AddressZero) {\n    shouldUnwrap = true;\n  }\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n\n  const params = [path, amountIn, minOut, triggerRatio, triggerAboveThreshold, executionFee, shouldWrap, shouldUnwrap];\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createSwapOrder\", params, opts);\n}\n\nexport async function createIncreaseOrder(\n  chainId,\n  library,\n  nativeTokenAddress,\n  path,\n  amountIn,\n  indexTokenAddress,\n  minOut,\n  sizeDelta,\n  collateralTokenAddress,\n  isLong,\n  triggerPrice,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const fromETH = path[0] === AddressZero;\n\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n  const shouldWrap = fromETH;\n  const triggerAboveThreshold = !isLong;\n  const executionFee = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    path,\n    amountIn,\n    indexTokenAddress,\n    minOut,\n    sizeDelta,\n    collateralTokenAddress,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n    executionFee,\n    shouldWrap,\n  ];\n\n  if (!opts.value) {\n    opts.value = fromETH ? amountIn.add(executionFee) : executionFee;\n  }\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createIncreaseOrder\", params, opts);\n}\n\nexport async function createDecreaseOrder(\n  chainId,\n  library,\n  indexTokenAddress,\n  sizeDelta,\n  collateralTokenAddress,\n  collateralDelta,\n  isLong,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const executionFee = getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    indexTokenAddress,\n    sizeDelta,\n    collateralTokenAddress,\n    collateralDelta,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n  ];\n  opts.value = executionFee;\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createDecreaseOrder\", params, opts);\n}\n\nexport async function cancelSwapOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelDecreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelIncreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function handleCancelOrder(chainId, library, order, opts) {\n  let func;\n  if (order.type === SWAP) {\n    func = cancelSwapOrder;\n  } else if (order.type === INCREASE) {\n    func = cancelIncreaseOrder;\n  } else if (order.type === DECREASE) {\n    func = cancelDecreaseOrder;\n  }\n\n  return func(chainId, library, order.index, {\n    successMsg: \"Order cancelled.\",\n    failMsg: \"Cancel failed.\",\n    sentMsg: \"Cancel submitted.\",\n    pendingTxns: opts.pendingTxns,\n    setPendingTxns: opts.setPendingTxns,\n  });\n}\n\nexport async function cancelMultipleOrders(chainId, library, allIndexes = [], opts) {\n  const ordersWithTypes = groupBy(allIndexes, (v) => v.split(\"-\")[0]);\n  function getIndexes(key) {\n    if (!ordersWithTypes[key]) return;\n    return ordersWithTypes[key].map((d) => d.split(\"-\")[1]);\n  }\n  // params order => swap, increase, decrease\n  const params = [\"Swap\", \"Increase\", \"Decrease\"].map((key) => getIndexes(key) || []);\n  const method = \"cancelMultiple\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateDecreaseOrder(\n  chainId,\n  library,\n  index,\n  collateralDelta,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, collateralDelta, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateIncreaseOrder(\n  chainId,\n  library,\n  index,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateSwapOrder(chainId, library, index, minOut, triggerRatio, triggerAboveThreshold, opts) {\n  const params = [index, minOut, triggerRatio, triggerAboveThreshold];\n  const method = \"updateSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function _executeOrder(chainId, library, method, account, index, feeReceiver, opts) {\n  const params = [account, index, feeReceiver];\n  const positionManagerAddress = getContract(chainId, \"PositionManager\");\n  const contract = new ethers.Contract(positionManagerAddress, PositionManager.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function executeSwapOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeSwapOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeIncreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeIncreaseOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeDecreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeDecreaseOrder\", account, index, feeReceiver, opts);\n}","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\n\nexport const IS_TOUCH = \"ontouchstart\" in window;\n","import cx from \"classnames\";\nimport { useCallback, useState, useRef } from \"react\";\nimport { IS_TOUCH } from \"../../config/ui\";\n\nconst OPEN_DELAY = 0;\nconst CLOSE_DELAY = 100;\n\nexport default function Tooltip(props) {\n  const { enabled } = props;\n  const [visible, setVisible] = useState(false);\n  const intervalCloseRef = useRef(null);\n  const intervalOpenRef = useRef(null);\n\n  const position = props.position ?? \"left-bottom\";\n  const trigger = props.trigger ?? \"hover\";\n\n  const onMouseEnter = useCallback(() => {\n    if (trigger !== \"hover\" || IS_TOUCH) return;\n\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (!intervalOpenRef.current) {\n      intervalOpenRef.current = setTimeout(() => {\n        if (enabled) {\n          setVisible(true)\n        }\n        intervalOpenRef.current = null;\n      }, OPEN_DELAY);\n    }\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger, enabled]);\n\n  const onMouseClick = useCallback(() => {\n    if (trigger !== \"click\" && !IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n\n    if (enabled) {\n      setVisible(true)\n    }\n  }, [setVisible, intervalCloseRef, trigger]);\n\n  const onMouseLeave = useCallback(() => {\n    intervalCloseRef.current = setTimeout(() => {\n      setVisible(false);\n      intervalCloseRef.current = null;\n    }, CLOSE_DELAY);\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n  }, [setVisible, intervalCloseRef]);\n\n  const className = cx(\"Tooltip\", props.className);\n\n  return (\n    <span className={className} style={props.style} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick} id={props.id}>\n      <span\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\n      >\n        {props.handle}\n      </span>\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\n    </span>\n  );\n}\n","import { getExplorerUrl, helperToast } from './../../views/gmx-test/lib/legacy';\r\n\r\n\r\nexport const notifySuccess = (text, hash) => {\r\n\tconst url = getExplorerUrl(42161) + \"tx/\" + hash;\r\n\t\r\n\thelperToast.success(\r\n\t\t<div>\r\n\t\t\t{text}\r\n\t\t\t<br />\r\n\t\t\t{hash &&\r\n\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\tView on Arbiscan\r\n\t\t\t\t</a>}\r\n\t\t\t<br />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport const errAlert = (err, setIsLoading) => {\r\n\tlet msg = err.reason ?? err.message;\r\n\tif (err.message === 'Internal JSON-RPC error.') {\r\n\t\tmsg = err.data.message;\r\n\t}\r\n\t\r\n\tconsole.log(err);\r\n\t// alert(`Error code: ${err.code}\\nError message: ${msg}\\n\\nCheck the console for details.`)\r\n\thelperToast.error(\r\n\t\t<div>\r\n\t\t\tError: {err.code}\r\n\t\t\t<br />\r\n\t\t\t{msg}\r\n\t\t\t<br /><br />\r\n\t\t\tCheck the console for details.\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (setIsLoading) {\r\n\t\tsetIsLoading(false);\r\n\t}\r\n}","import React, { useState, useEffect } from \"react\";\n\nimport cx from \"classnames\";\n\nimport \"./Tab.css\";\n\nexport default function Tab(props) {\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons, disabled, disabledTooltip, iconsFirst } = props;\n  \n  const onClick = (opt) => {\n    if (disabled) {\n      return;\n    }\n    \n    if (setOption) {\n      setOption(opt);\n    }\n    if (onChange) {\n      onChange(opt);\n    }\n  };\n\n  return (\n    <div className={cx(\"Tab\", type, className, disabled && 'disabled', iconsFirst && \"icons-first\")}>\n      {options.map((opt) => {\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\n        let disabledNode;\n        \n        if (props.disabledList) {\n          props.disabledList.forEach(el => {\n            if (el.label === label && el.disabled) {\n              disabledNode = (\n                <div className={cx(\"Tab-option\", \"tab-tooltip-container\")} onClick={() => {return}} key={opt}>\n                  {disabledTooltip}\n                  {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\n                  {label}\n                </div>\n              );\n            }\n          })\n        }\n\n        if (disabledNode) {\n          return disabledNode;\n        }\n        \n        return (\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\n            {label}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","export const separateThousands = (num, symb = \",\") => {\r\n\tif (typeof num === 'undefined' || num === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tconst str = num.toString();\r\n\tlet [intPart, fractionPart] = str.split('.');\r\n\tconst hasFraction = fractionPart !== undefined;\r\n\r\n\tintPart = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, (hasFraction && symb !== '') ? ',' : symb)\r\n\t\r\n\tif (hasFraction) {\r\n\t\treturn intPart + '.' + fractionPart\r\n\t} else {\r\n\t\treturn intPart;\r\n\t}\r\n}\r\n\r\n\r\nconst removeNonNumeric = (num) => {\r\n\tlet result = num.toString().replace(/^\\./g, '').replace(/[^0-9.]/g, '').replace(/^0\\d/, '');\r\n\r\n\tif (result.match(/\\./g)?.length > 1) {\r\n\t\tresult = result.replace(/\\.$/, '')\r\n\t}\r\n\r\n\tlet [, fractionPart] = result.split('.')\r\n\r\n\tif (fractionPart?.length > 6) {\r\n\t\tresult = result.substr(0, result.length - 1)\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\nexport const convertInputNum = (num, symb) => {\r\n\treturn separateThousands(removeNonNumeric(num), symb);\r\n}\r\n\r\nexport const nonFractionConvert = (num) => {\r\n\tconst val = (num).replace(/[^0-9]/g, '').replace(/^0\\d/, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n\treturn val;\r\n}\r\n\r\n\r\nexport const sepToNumber = (str, symb = ' ') => {\r\n\tif (typeof str !== 'string') {\r\n\t\treturn str;\r\n\t}\r\n\r\n\tif (symb === ' ' && str.split(symb).length === 1) {\r\n\t\tsymb = ',';\r\n\t}\r\n\t\r\n\treturn Number(str.split(symb).join(''));\r\n}","import { sepToNumber } from \"./sepThousands\";\r\n\r\nexport const floor = (num, fraction = 2, method = \"floor\") => {\r\n\tif (typeof num !== 'number') {\r\n\t\treturn '...'\r\n\t}\r\n\t\r\n\treturn Math[method](num * 10**fraction) / 10**fraction;\r\n}\r\n\r\n\r\nexport const formatForContract = (val, fraction = 6) => {\r\n\treturn Math.floor(sepToNumber(val) * 10**fraction);\r\n}","import React, { useState } from 'react';\r\nimport cx from 'classnames';\r\nimport { convertInputNum } from '../../utils/sepThousands';\r\nimport \"./NumberInput.scss\";\r\n\r\nconst NumberInput_v3 = (props) => {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tdisplayValueTitle,\r\n\t\tdisplayValue,\r\n\t\tvalue,\r\n\t\tsetValue,\r\n\t\thasError,\r\n\t\tmaxValue,\r\n\t\tonChange,\r\n\t\ticon,\r\n\t\ticonAlt,\r\n\t\tdisabled,\r\n\t\tadditionalSymbol\r\n\t} = props;\r\n\r\n\tconst [hasFocus, setHasFocus] = useState(false);\r\n\r\n\tconst cls = cx(props.className, \"NumberInput\", hasFocus && 'hlight', hasError && 'error', disabled && 'disabled');\r\n\t\r\n\treturn (\r\n\t\t<div className={\"Exchange-swap-section\" + (cls && ` ${cls}`)}>\r\n\t\t\t<div className=\"Exchange-swap-section-top\">\r\n\t\t\t\t<div className=\"Exchange-swap-usd\">\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t\t{displayValue && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"align-right clickable\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetValue(displayValue);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span className='NumberInput__displayValueTitle'>{displayValueTitle}:</span> {displayValue}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{icon && (\r\n\t\t\t\t\t<div className='align-right'>\r\n\t\t\t\t\t\t<img src={icon} alt={iconAlt ?? \"icon\"} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t\t\tclassName=\"Exchange-swap-input\"\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetValue(convertInputNum(e.target.value));\r\n\r\n\t\t\t\t\t\t\tif (onChange) {\r\n\t\t\t\t\t\t\t\tonChange(e.target.value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\tsetHasFocus(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\tsetHasFocus(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='align-right NumberInput__additionalContainer'>\r\n\t\t\t\t\t{maxValue &&\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"input-max-btn\"\r\n\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetValue(maxValue)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMax\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{additionalSymbol &&\r\n\t\t\t\t\t\t<div className='NumberInput__additionalSymbol'>\r\n\t\t\t\t\t\t\t{additionalSymbol}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NumberInput_v3;","// Common\r\nexport const HOMEPAGE_HREF = \"/terminal/builder\";\r\nexport const DEFAULT_PAGE_TITLE = \"DeDeLend: Leading DeFi Platform for Streamlined Options & Perpetuals Trading and Effortless Asset Management\";\r\nexport const DDL_WALLET = \"0x683Ad8b899Cd14d8e077c9A623E8B3fEd65a8c09\";\r\nexport const DDL_WALLET_ENCODED = '0'.repeat(64 - DDL_WALLET.length + 2) + DDL_WALLET.split('0x')[1];\r\n\r\nexport const MAX_FRACTION_LENGTH = 6;\r\nexport const DATE_FORMAT_TEMPLATE = \"dd/MM/yy, hh:mm a\";\r\n\r\nexport const BORDER_COEF = 0.01;\r\nexport const APY = '10.00%';\r\nexport const ALL_MARKETS = [\r\n  \"GMX\",\r\n  \"GNS\",\r\n  \"Hegic\",\r\n  \"Lyra\",\r\n]\r\n\r\n// Perpetuals constants\r\nexport const marketsList = [\r\n  {\r\n    name: 'GMX',\r\n  },\r\n  {\r\n    name: 'GNS',\r\n  },\r\n];\r\n\r\nexport const GNS_FEES_MULTIPLIER = 0.0008;\r\n\r\n\r\n// Options constants\r\nexport const OPTIONS_DECIMALS = 18;\r\nexport const OPTION_LIST_FRONTIER = 10;\r\nexport const marketsOptions = ['Hegic', 'Lyra', 'Premia'];\r\nexport const assetsOptions = ['ETH', 'BTC'];\r\nconst assetsIconsDraft = {};\r\nassetsOptions.forEach(asset => {\r\n  try {\r\n    const icon = require(`../../img/icon-${asset}.svg`).default;\r\n    assetsIconsDraft[asset] = icon;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n});\r\nexport const assetsIcons = {...assetsIconsDraft};\r\n\r\nexport const PremiaStrikeRangeMultiplier = {\r\n  Call: [0.8, 2],\r\n  Put: [0.5, 1.2],\r\n}\r\n\r\nexport const tokenDecimals = {\r\n  ETH: 18,\r\n  BTC: 8\r\n}\r\n\r\nexport const OPTION_TYPES = {\r\n  Hegic: \"American\",\r\n  Lyra: \"European\",\r\n  Premia: \"American\",\r\n}\r\n","import React from 'react';\r\nimport { ImSpinner2 } from 'react-icons/im';\r\n\r\nconst Spinner = (props) => {\r\n\tconst {\r\n\t\tstyle,\r\n\t\thasMargin,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<ImSpinner2 style={{marginLeft: hasMargin ? 7 : 0, ...style}} className=\"spin position-loading-icon\" />\r\n\t);\r\n};\r\n\r\nexport default Spinner;","import { formatUnits } from \"ethers/lib/utils\";\r\nimport { ARBITRUM, expandDecimals, formatAmount } from \"../../views/gmx-test/lib/legacy\";\r\nimport { errAlert, notifySuccess } from \"./notifications\";\r\nimport { MAX_FRACTION_LENGTH, OPTIONS_DECIMALS } from \"./constants\";\r\nimport { getTokenInfo } from './../../views/gmx-test/lib/legacy';\r\nimport { getTokenBySymbol, getTokens } from \"../../views/gmx-test/config/Tokens\";\r\nimport { BigNumber } from \"ethers\";\r\nimport Spinner from \"../UI/loader/Spinner\";\r\n\r\n\r\nexport const getSlTpFromPercentage = (isLong, isTP, percentage, openPriceNum, leverage, fees) => {\r\n\tif (!percentage) {\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tif ((isTP && isLong) || (!isTP && !isLong)) {\r\n\t\treturn (\r\n\t\t\t(\r\n\t\t\t\topenPriceNum + (0.01 * openPriceNum * (percentage / leverage))\r\n\t\t\t) * 10**10\r\n\t\t).toFixed(0);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t(\r\n\t\t\t\topenPriceNum - (0.01 * openPriceNum * (percentage / leverage))\r\n\t\t\t) * 10**10\r\n\t\t).toFixed(0);\r\n\t}\r\n}\r\n\r\nexport const daysToMs = (days) => {\r\n\treturn days * 24 * 60**2 * 1000;\r\n}\r\n\r\nexport const msToTimeLeft = (ms) => {\r\n\tconst s = ms / 1000;\r\n\tconst m = s / 60;\r\n\tconst h = m / 60;\r\n\tconst hours = Math.floor(h % 24);\r\n\tconst days = Math.floor(h / 24);\r\n\t\r\n\treturn `${days}d ${hours}h`;\r\n}\r\n\r\nexport function fromBigNumber(number, decimals = OPTIONS_DECIMALS) {\r\n\tif (!number) {\r\n\t\treturn;\r\n\t}\r\n  return parseFloat(formatUnits(number.toString(), decimals));\r\n}\r\n\r\nexport const numToBn = (num, decimals = OPTIONS_DECIMALS, maxFraction = MAX_FRACTION_LENGTH) => {\r\n\treturn BigNumber.from(num * 10**maxFraction).mul(10**(decimals - maxFraction));\r\n}\r\n\r\nexport const executePromise = (fn, args = [], successMsg, setIsLoading, cb) => {\r\n\tif (setIsLoading) {\r\n\t\tsetIsLoading(true);\r\n\t}\r\n\t\r\n\tfn(...args)\r\n\t\t.then(tx => {\r\n\t\t\tconsole.log(\"Submitting:\", tx);\r\n\t\t\ttx.wait().then((res) => {\r\n\t\t\t\tnotifySuccess(successMsg, tx.hash);\r\n\t\t\t\tif (setIsLoading) {\r\n\t\t\t\t\tsetIsLoading(false);\r\n\t\t\t\t}\r\n\t\t\t\tif (cb) {\r\n\t\t\t\t\tcb(res);\r\n\t\t\t\t}\r\n\t\t\t}, (e) => {\r\n\t\t\t\terrAlert(e, setIsLoading);\r\n\t\t\t})\r\n\t\t}, (e) => {\r\n\t\t\terrAlert(e, setIsLoading);\r\n\t\t});\r\n}\r\n\r\nexport const getOptionProfitZone = (isCall, strikePrice, premium, size) => {\r\n\tconst profitZoneCalcMethod = isCall ? \"add\" : \"sub\";\r\n\tconst profitZone = strikePrice[profitZoneCalcMethod](expandDecimals(premium.div(size), OPTIONS_DECIMALS));\r\n\treturn {\r\n\t\tprofitZone,\r\n\t\tprofitZoneStr: `${isCall ? \">\" : \"<\"}$${formatAmount(profitZone, OPTIONS_DECIMALS, 2, true)}`\r\n\t};\r\n}\r\n\r\nexport const getMarkPrice = (infoTokens, token) => {\r\n\treturn getTokenInfo(infoTokens, getTokenBySymbol(ARBITRUM, token).address).maxPrice;\r\n}\r\n\r\nexport const findLatestOrEarliest = (arr, datePropName, isLatest = true) => {\r\n\tconst res = arr.reduce((prev, cur) => {\r\n\t\tconst prevDateMs = (new Date(prev[datePropName])).getTime();\r\n\t\tconst curDateMs = (new Date(cur[datePropName])).getTime();\r\n\t\tif (isLatest) {\r\n\t\t\tif (curDateMs > prevDateMs) {\r\n\t\t\t\treturn cur;\r\n\t\t\t}\r\n\t\t\treturn prev;\r\n\t\t} else {\r\n\t\t\tif (curDateMs < prevDateMs) {\r\n\t\t\t\treturn cur;\r\n\t\t\t}\r\n\t\t\treturn prev;\r\n\t\t}\r\n\t}, arr[0]);\r\n\r\n\treturn res;\r\n}\r\n\r\nexport const awaitLoading = (node, isLoading, loader = <Spinner />) => {\r\n\treturn isLoading ? loader : node;\r\n}","import React, { useCallback, useState, useMemo, useEffect } from \"react\";\nimport \"./ConfirmationBox.css\";\nimport {\n  USD_DECIMALS,\n  PRECISION,\n  BASIS_POINTS_DIVISOR,\n  LIMIT,\n  MIN_PROFIT_TIME,\n  INCREASE,\n  expandDecimals,\n  getExchangeRate,\n  getProfitPrice,\n  getTimeRemaining,\n  formatAmount,\n  formatAmountFree,\n  getExchangeRateDisplay,\n  formatDateTime,\n  calculatePositionDelta,\n  DECREASE,\n  TRIGGER_PREFIX_ABOVE,\n  TRIGGER_PREFIX_BELOW,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport { getContract } from \"../../config/Addresses\";\n\nimport { BsArrowRight } from \"react-icons/bs\";\nimport Modal from \"../Modal/Modal\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport { cancelDecreaseOrder, handleCancelOrder } from \"../../domain/legacy\";\nimport { getNativeToken, getToken, getWrappedToken } from \"../../config/Tokens\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport SlippageInput from './../SlippageInput/SlippageInput';\nimport { formatForContract } from \"../../../../components/utils/math\";\nimport NumberInput_v3 from './../../../../components/UI/input/NumberInput_v3';\nimport { getSlTpFromPercentage } from './../../../../components/utils/utils';\n\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\n\nfunction getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress) {\n  if (fromTokenInfo && fromTokenInfo.maxPrice && toTokenInfo && toTokenInfo.minPrice) {\n    const fromDiff = fromTokenInfo.maxPrice.sub(fromTokenInfo.minPrice).div(2);\n    const fromSpread = fromDiff.mul(PRECISION).div(fromTokenInfo.maxPrice.add(fromTokenInfo.minPrice).div(2));\n    const toDiff = toTokenInfo.maxPrice.sub(toTokenInfo.minPrice).div(2);\n    const toSpread = toDiff.mul(PRECISION).div(toTokenInfo.maxPrice.add(toTokenInfo.minPrice).div(2));\n\n    let value = fromSpread.add(toSpread);\n\n    const fromTokenAddress = fromTokenInfo.isNative ? nativeTokenAddress : fromTokenInfo.address;\n    const toTokenAddress = toTokenInfo.isNative ? nativeTokenAddress : toTokenInfo.address;\n\n    if (isLong && fromTokenAddress === toTokenAddress) {\n      value = fromSpread;\n    }\n\n    return {\n      value,\n      isHigh: value.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }\n}\n\nexport default function ConfirmationBox(props) {\n  const {\n    fromToken,\n    fromTokenInfo,\n    toToken,\n    toTokenInfo,\n    isSwap,\n    isLong,\n    isMarketOrder,\n    orderOption,\n    isShort,\n    toAmount,\n    fromAmount,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    onConfirmationClick,\n    setIsConfirming,\n    shortCollateralAddress,\n    hasExistingPosition,\n    leverage,\n    existingPosition,\n    existingLiquidationPrice,\n    displayLiquidationPrice,\n    shortCollateralToken,\n    isPendingConfirmation,\n    triggerPriceUsd,\n    triggerRatio,\n    fees,\n    feesUsd,\n    isSubmitting,\n    fromUsdMin,\n    toUsdMax,\n    nextAveragePrice,\n    collateralTokenAddress,\n    feeBps,\n    chainId,\n    orders,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    savedSlippageAmount,\n    userSlippage,\n    setUserSlippage,\n    allowedSlippage,\n    market,\n    TPValue,\n    setTPValue,\n    SLValue,\n    setSLValue,\n    TPHasError,\n    setTPHasError,\n    SLHasError,\n    setSLHasError,\n    liquidity,\n  } = props;\n\n  useEffect(() => {\n    setTPValue('');\n    setSLValue('');\n  }, []);\n\n  \n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  \n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\n\n  const onCancelOrderClick = useCallback(\n    (order) => {\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  let minOut;\n  let fromTokenUsd;\n  let toTokenUsd;\n\n  let collateralAfterFees = fromUsdMin;\n  if (feesUsd) {\n    collateralAfterFees = fromUsdMin.sub(feesUsd);\n  }\n\n  if (isSwap) {\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    fromTokenUsd = fromTokenInfo ? formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true) : 0;\n    toTokenUsd = toTokenInfo ? formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true) : 0;\n  }\n\n  const getTitle = () => {\n    if (!isMarketOrder) {\n      return \"Confirm Limit Order\";\n    }\n    if (isSwap) {\n      return \"Confirm Swap\";\n    }\n    return isLong ? \"Confirm Long\" : \"Confirm Short\";\n  };\n  const title = getTitle();\n\n  const existingOrder = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    for (const order of orders) {\n      if (order.type !== INCREASE) continue;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      if (order.isLong === isLong && sameToken) {\n        return order;\n      }\n    }\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== INCREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingTriggerOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== DECREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\n    if (isSwap) return [];\n    return existingTriggerOrders.filter((order) => {\n      if (order.triggerAboveThreshold) {\n        return existingPosition?.markPrice.gte(order.triggerPrice);\n      } else {\n        return existingPosition?.markPrice.lte(order.triggerPrice);\n      }\n    });\n  }, [existingPosition, existingTriggerOrders, isSwap]);\n\n  const takeProfit = Number(formatForContract(TPValue, 10).toFixed(0));\n  const stopLoss = Number(formatForContract(SLValue, 10).toFixed(0));\n  const price = Number(formatAmount(isMarketOrder ? toTokenInfo.maxPrice : triggerPriceUsd, 20, 0, 0));\n  const getError = () => {\n    if (market === 'GNS') {\n      if (stopLoss) {\n        if ((isLong && stopLoss >= price) || (!isLong && stopLoss <= price)) {\n          setSLHasError(true);\n          return `${isLong ? 'Long' : 'Short'} SL can't be ${isLong ? 'greater' : 'less'} than entry price.`;\n        } else {\n          setSLHasError(false);\n        }\n      } else {\n        setSLHasError(false);\n      }\n      if (takeProfit) {\n        if ((isLong && takeProfit <= price) || (!isLong && takeProfit >= price)) {\n          setTPHasError(true);\n          return `${isLong ? 'Long' : 'Short'} TP can't be ${isLong ? 'less' : 'greater'} than entry price.`;\n        } else {\n          setTPHasError(false);\n        }\n  \n        const borderTakeProfit = Number(getSlTpFromPercentage(isLong, true, 900, price / 10**10, leverage / 10**4));\n        if (isLong ? takeProfit > borderTakeProfit : takeProfit < borderTakeProfit) {\n          setTPHasError(true);\n          return `${isLong ? 'Max' : 'Min'} Take Profit price: ${formatAmount(borderTakeProfit, 10, 2, true)}`;\n        } else {\n          setTPHasError(false);\n        }\n      } else {\n        setTPHasError(false);\n        return `Take Profit is required`;\n      }\n    }\n    \n    if (!isSwap && hasExistingPosition && !isMarketOrder) {\n      const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\n      if (hasProfit && delta.eq(0)) {\n        return \"Invalid price, see warning\";\n      }\n    }\n    if (isMarketOrder && hasPendingProfit && !isProfitWarningAccepted) {\n      return \"Forfeit profit not checked\";\n    }\n    return false;\n  };\n\n  const getPrimaryText = () => {\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return `Accept confirmation of trigger orders`;\n    }\n\n\n    if (!isPendingConfirmation) {\n      const error = getError();\n      if (error) {\n        return error;\n      }\n\n      if (isSwap) {\n        return title;\n      }\n      const action = isMarketOrder ? (isLong ? \"Long\" : \"Short\") : \"Create Order\";\n\n      if (\n        isMarketOrder &&\n        MIN_PROFIT_TIME > 0 &&\n        hasExistingPosition &&\n        existingPosition.delta.eq(0) &&\n        existingPosition.pendingDelta.gt(0)\n      ) {\n        return isLong ? `Forfeit profit and ${action}` : `Forfeit profit and Short`;\n      }\n\n      return isMarketOrder && MIN_PROFIT_TIME > 0 ? `Accept minimum and ${action}` : action;\n    }\n\n    if (!isMarketOrder) {\n      return \"Creating Order...\";\n    }\n    if (isSwap) {\n      return \"Swapping...\";\n    }\n    if (isLong) {\n      return \"Longing...\";\n    }\n    return \"Shorting...\";\n  };\n\n  const isPrimaryEnabled = () => {\n    if (getError()) {\n      return false;\n    }\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return false;\n    }\n    return !isPendingConfirmation && !isSubmitting;\n  };\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const spread = getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress);\n  // it's meaningless for limit/stop orders to show spread based on current prices\n  const showSpread = isMarketOrder && !!spread;\n\n  const renderSpreadWarning = useCallback(() => {\n    if (!isMarketOrder) {\n      return null;\n    }\n\n    if (spread && spread.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          The spread is {`>`} 1%, please ensure the trade details are acceptable before comfirming\n        </div>\n      );\n    }\n  }, [isMarketOrder, spread]);\n\n  const renderFeeWarning = useCallback(() => {\n    if (orderOption === LIMIT || !feeBps || feeBps <= 60) {\n      return null;\n    }\n\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          Fees are high to swap from {fromToken.symbol} to {toToken.symbol}.\n        </div>\n      );\n    }\n\n    if (!collateralTokenAddress) {\n      return null;\n    }\n\n    const collateralToken = getToken(chainId, collateralTokenAddress);\n    return (\n      <div className=\"Confirmation-box-warning\">\n        Fees are high to swap from {fromToken.symbol} to {collateralToken.symbol}. <br />\n        {collateralToken.symbol} is needed for collateral.\n      </div>\n    );\n  }, [feeBps, isSwap, collateralTokenAddress, chainId, fromToken.symbol, toToken.symbol, orderOption]);\n\n  const hasPendingProfit =\n    MIN_PROFIT_TIME > 0 && existingPosition && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0);\n\n  const renderMinProfitWarning = useCallback(() => {\n    if (MIN_PROFIT_TIME === 0) {\n      return null;\n    }\n    if (!isSwap) {\n      if (hasExistingPosition) {\n        const minProfitExpiration = existingPosition.lastIncreasedTime + MIN_PROFIT_TIME;\n        if (isMarketOrder && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0)) {\n          const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\n          return (\n            <div className=\"Confirmation-box-warning\">\n              Increasing this position at the current price will forfeit a&nbsp;\n              <a\n                href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                pending profit\n              </a>{\" \"}\n              of {existingPosition.deltaStr}.<br />\n              <br />\n              Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\n              This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\n              {formatDateTime(minProfitExpiration)}.\n            </div>\n          );\n        }\n        if (!isMarketOrder) {\n          const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\n          if (hasProfit && delta.eq(0)) {\n            const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\n            return (\n              <div className=\"Confirmation-box-warning\">\n                This order will forfeit a&nbsp;\n                <a\n                  href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  profit\n                </a>{\" \"}\n                of {existingPosition.deltaStr}.<br />\n                Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\n                This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\n                {formatDateTime(minProfitExpiration)}.\n              </div>\n            );\n          }\n        }\n      }\n\n      return (\n        <div className=\"Confirmation-box-warning\">\n          A minimum price change of&nbsp;\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\n            1.5%\n          </a>{\" \"}\n          is required for a position to be in profit. This only applies for the first {MIN_PROFIT_TIME / 60 / 60} hours\n          after increasing a position.\n        </div>\n      );\n    }\n  }, [isSwap, hasExistingPosition, existingPosition, isMarketOrder, triggerPriceUsd]);\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (isSwap || !existingOrder) {\n      return;\n    }\n    const indexToken = getToken(chainId, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    if (existingOrders?.length > 1) {\n      return (\n        <div>\n          <div className=\"Confirmation-box-info\">\n            <span>\n              You have multiple existing Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {indexToken.symbol} limit\n              orders{\" \"}\n            </span>\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\n              ({isLimitOrdersVisible ? \"hide\" : \"view\"})\n            </span>\n          </div>\n          {isLimitOrdersVisible && (\n            <ul className=\"order-list\">\n              {existingOrders.map((order) => {\n                const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n                const id = `${account}-${index}`;\n                const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n                const indexToken = getToken(chainId, order.indexToken);\n\n                return (\n                  <li key={id} className=\"font-sm\">\n                    <p>\n                      {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}{\" \"}\n                      &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                    </p>\n                    <button onClick={() => onCancelOrderClick(order)}>Cancel</button>\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div className=\"Confirmation-box-info\">\n        You have an active Limit Order to Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken}{\" \"}\n        {indexToken.symbol} (${formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at price $\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n      </div>\n    );\n  }, [existingOrder, isSwap, chainId, existingOrders, isLong, isLimitOrdersVisible, onCancelOrderClick]);\n\n  const renderExistingTriggerErrors = useCallback(() => {\n    if (isSwap || decreaseOrdersThatWillBeExecuted?.length < 1) {\n      return;\n    }\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\n    const orderText = existingTriggerOrderLength > 1 ? \"orders\" : \"order\";\n    return (\n      <>\n        <div className=\"Confirmation-box-warning\">\n          You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger {orderText}{\" \"}\n          that might execute immediately after you open this position. Please cancel the {orderText} or accept the\n          confirmation to continue.\n        </div>\n        <ul className=\"order-list\">\n          {decreaseOrdersThatWillBeExecuted.map((order) => {\n            const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n            const id = `${account}-${index}`;\n            const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n            const indexToken = getToken(chainId, order.indexToken);\n            return (\n              <li key={id} className=\"font-sm\">\n                <p>\n                  {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}\n                  &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                </p>\n                <button\n                  onClick={() =>\n                    cancelDecreaseOrder(chainId, library, index, {\n                      successMsg: \"Order cancelled\",\n                      failMsg: \"Cancel failed\",\n                      sentMsg: \"Cancel submitted\",\n                      pendingTxns,\n                      setPendingTxns,\n                    })\n                  }\n                >\n                  Cancel\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </>\n    );\n  }, [decreaseOrdersThatWillBeExecuted, isSwap, chainId, library, pendingTxns, setPendingTxns, isLong]);\n\n  const renderExistingTriggerWarning = useCallback(() => {\n    if (\n      isSwap ||\n      existingTriggerOrders.length < 1 ||\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\n      renderExistingOrderWarning()\n    ) {\n      return;\n    }\n    const existingTriggerOrderLength = existingTriggerOrders.length;\n    return (\n      <div className=\"Confirmation-box-info\">\n        You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger{\" \"}\n        {existingTriggerOrderLength > 1 ? \"orders\" : \"order\"} that could impact this position.\n      </div>\n    );\n  }, [existingTriggerOrders, isSwap, decreaseOrdersThatWillBeExecuted, renderExistingOrderWarning]);\n\n  // TODO handle unaprproved order plugin (very unlikely case)\n  const renderMain = useCallback(() => {\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-main\">\n          <div className=\"Confirmation-box-main-label\">\n            <div className=\"label-title\">Pay</div>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n            {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n          </div>\n          <div className=\"Confirmation-box-main-icon\"></div>\n          <div className=\"Confirmation-box-main-label\">\n            <div className=\"label-title\">Recieve</div>&nbsp;{formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n            {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Confirmation-box-main\">\n        <div className=\"Confirmation-box-main-label\">\n          <div className=\"label-title\">Pay</div>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n          {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n        </div>\n        <div className=\"Confirmation-box-main-icon\"></div>\n        <div className=\"Confirmation-box-main-label\">\n          <div className=\"label-title\">{isLong ? \"Long\" : \"Short\"}</div>&nbsp;\n          {formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n          {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n        </div>\n      </div>\n    );\n  }, [isSwap, fromAmount, fromToken, toToken, fromUsdMin, toUsdMax, isLong, toAmount]);\n\n  const SWAP_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const INCREASE_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n  const executionFee = isSwap ? SWAP_ORDER_EXECUTION_GAS_FEE : INCREASE_ORDER_EXECUTION_GAS_FEE;\n  const renderExecutionFee = useCallback(() => {\n    if (isMarketOrder) {\n      return null;\n    }\n    return (\n      <ExchangeInfoRow label=\"Execution Fee\">\n        {formatAmount(executionFee, 18, 4)} {getNativeToken(chainId).symbol}\n      </ExchangeInfoRow>\n    );\n  }, [isMarketOrder, executionFee, chainId]);\n\n  const renderAvailableLiquidity = useCallback(() => {\n    let availableLiquidity;\n\n    if (market === 'GNS') {\n      availableLiquidity = liquidity[market]?.formattedValue;\n      return (\n        <ExchangeInfoRow label=\"Available Liquidity\">\n          ${availableLiquidity}\n        </ExchangeInfoRow>\n      );\n    }\n    \n    const riskThresholdBps = 5000;\n    let isLiquidityRisk;\n    const token = isSwap || isLong ? toTokenInfo : shortCollateralToken;\n\n    if (!token || !token.poolAmount || !token.availableAmount) {\n      return null;\n    }\n\n    if (isSwap) {\n      const poolWithoutBuffer = token.poolAmount.sub(token.bufferAmount);\n      availableLiquidity = token.availableAmount.gt(poolWithoutBuffer) ? poolWithoutBuffer : token.availableAmount;\n      isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n    } else {\n      if (isShort) {\n        availableLiquidity = token.availableAmount;\n\n        let adjustedMaxGlobalShortSize;\n\n        if (toTokenInfo.maxAvailableShort && toTokenInfo.maxAvailableShort.gt(0)) {\n          adjustedMaxGlobalShortSize = toTokenInfo.maxAvailableShort\n            .mul(expandDecimals(1, token.decimals))\n            .div(expandDecimals(1, USD_DECIMALS));\n        }\n\n        if (adjustedMaxGlobalShortSize && adjustedMaxGlobalShortSize.lt(token.availableAmount)) {\n          availableLiquidity = adjustedMaxGlobalShortSize;\n        }\n\n        const sizeTokens = toUsdMax.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(sizeTokens);\n      } else {\n        availableLiquidity = token.availableAmount;\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n      }\n    }\n\n    if (!availableLiquidity) {\n      return null;\n    }\n\n    return (\n      <ExchangeInfoRow label=\"Available Liquidity\">\n        <Tooltip\n          position=\"right-bottom\"\n          handleClassName={isLiquidityRisk ? \"negative\" : null}\n          handle={\n            <>\n              {formatAmount(availableLiquidity, token.decimals, token.isStable ? 0 : 2, true)} {token.symbol}\n            </>\n          }\n          renderContent={() =>\n            isLiquidityRisk\n              ? \"There may not be sufficient liquidity to execute your order when the price conditions are met\"\n              : \"The order will only execute if the price conditions are met and there is sufficient liquidity\"\n          }\n        />\n      </ExchangeInfoRow>\n    );\n  }, [toTokenInfo, shortCollateralToken, isShort, isLong, isSwap, toAmount, toUsdMax]);\n\n  const renderMarginSection = useCallback(() => {\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderFeeWarning()}\n          {renderMinProfitWarning()}\n          {renderExistingOrderWarning()}\n          {renderExistingTriggerErrors()}\n          {renderExistingTriggerWarning()}\n          {minExecutionFeeErrorMessage && <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>}\n          {hasPendingProfit && isMarketOrder && (\n            <div className=\"PositionEditor-accept-profit-warning\">\n              <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                <span className=\"muted\">Forfeit profit</span>\n              </Checkbox>\n            </div>\n          )}\n          {orderOption === LIMIT && renderAvailableLiquidity()}\n\n          {market === 'GNS' && <div className=\"row-divider\" />}\n          \n          {market === 'GMX' && isShort && (\n            <ExchangeInfoRow label=\"Collateral In\" isTop={true}>{getToken(chainId, shortCollateralAddress).symbol}</ExchangeInfoRow>\n          )}\n          {market === 'GMX' && isLong && <ExchangeInfoRow label=\"Collateral In\" isTop={true} value={toTokenInfo.symbol} />}\n          {\n            market === 'GMX' &&\n            <ExchangeInfoRow label=\"Leverage\">\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                <div className=\"inline-block muted\">\n                  {formatAmount(existingPosition.leverage, 4, 2)}x\n                  <BsArrowRight className=\"transition-arrow\" />\n                </div>\n              )}\n              {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n              {!toAmount && leverage && leverage.gt(0) && `-`}\n              {leverage && leverage.eq(0) && `-`}\n            </ExchangeInfoRow>\n          }\n          {\n            market === 'GMX' &&\n            <ExchangeInfoRow label=\"Liq. Price\">\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                <div className=\"inline-block muted\">\n                  ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                  <BsArrowRight className=\"transition-arrow\" />\n                </div>\n              )}\n              {toAmount && displayLiquidationPrice && `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n              {!toAmount && displayLiquidationPrice && `-`}\n              {!displayLiquidationPrice && `-`}\n            </ExchangeInfoRow>\n          }\n          \n          <ExchangeInfoRow label=\"Fees\">${formatAmount(feesUsd, USD_DECIMALS, 2, true)}</ExchangeInfoRow>\n          <ExchangeInfoRow label=\"Collateral\">\n            <Tooltip\n              handle={`$${formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}`}\n              position=\"right-bottom\"\n              renderContent={() => {\n                return (\n                  <>\n                    Your position's collateral after deducting fees.\n                    <br />\n                    <br />\n                    <StatsTooltipRow label=\"Pay Amount\" value={formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} />\n                    <StatsTooltipRow label=\"Fees\" value={formatAmount(feesUsd, USD_DECIMALS, 2, true)} />\n                    <div className=\"Tooltip-divider\" />\n                    <StatsTooltipRow\n                      label=\"Collateral\"\n                      value={formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}\n                    />\n                  </>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n          {/* {\n            market === 'GMX' &&\n            showSpread && (\n              <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh} isTop={true}>\n                {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\n              </ExchangeInfoRow>\n            )\n          } */}\n          {\n            market === 'GNS' &&\n            <>\n              <NumberInput_v3\n                value={TPValue}\n                setValue={setTPValue}\n                title={\"Take Profit\"}\n                hasError={TPHasError}\n              />\n              <NumberInput_v3 \n                value={SLValue}\n                setValue={setSLValue}\n                title={\"Stop Loss\"}\n                hasError={SLHasError}\n              />\n            </>\n          }\n          {market === 'GNS' && <div className=\"row-divider\" />}\n          {isMarketOrder && (\n            <ExchangeInfoRow label=\"Entry Price\">\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                <div className=\"inline-block muted\">\n                  ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                  <BsArrowRight className=\"transition-arrow\" />\n                </div>\n              )}\n              {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n              {!nextAveragePrice && `-`}\n            </ExchangeInfoRow>\n          )}\n          {!isMarketOrder && (\n            <ExchangeInfoRow label=\"Limit Price\">\n              ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}\n            </ExchangeInfoRow>\n          )}\n          {\n            market === 'GMX' &&\n            <ExchangeInfoRow label=\"Borrow Fee\">\n              {isLong && toTokenInfo && formatAmount(toTokenInfo.fundingRate, 4, 4)}\n              {isShort && shortCollateralToken && formatAmount(shortCollateralToken.fundingRate, 4, 4)}\n              {((isLong && toTokenInfo && toTokenInfo.fundingRate) ||\n                (isShort && shortCollateralToken && shortCollateralToken.fundingRate)) &&\n                \"% / 1h\"}\n            </ExchangeInfoRow>\n          }\n          \n          {isMarketOrder && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <ExchangeInfoRow label=\"Execution Fee\">\n                <Tooltip\n                  handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\n                  position=\"right-top\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label=\"Network fee\"\n                          value={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol} ($${formatAmount(\n                            minExecutionFeeUSD,\n                            USD_DECIMALS,\n                            2\n                          )})`}\n                        />\n                        <br />\n                        This is the network cost required to execute the postion.{\" \"}\n                        <a\n                          href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          More Info\n                        </a>\n                      </>\n                    );\n                  }}\n                />\n              </ExchangeInfoRow>\n            </div>\n          )}\n          {decreaseOrdersThatWillBeExecuted.length > 0 && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\n                <span className=\"muted font-sm\">I am aware of the trigger orders</span>\n              </Checkbox>\n            </div>\n          )}\n          {renderExecutionFee()}\n          <SlippageInput\n            value={userSlippage}\n            setValue={setUserSlippage}\n            />\n          <ExchangeInfoRow label=\"Allowed Slippage\" className=\"Slippage-row\">\n            <Tooltip\n              handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n              position=\"right-top\"\n              renderContent={() => {\n                return (\n                  <>\n                    You can change this in the settings menu on the top right of the page.\n                    <br />\n                    <br />\n                    Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are\n                    volatile.\n                  </>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n        </div>\n      </>\n    );\n  }, [\n    renderMain,\n    renderMinProfitWarning,\n    shortCollateralAddress,\n    isShort,\n    isLong,\n    toTokenInfo,\n    nextAveragePrice,\n    toAmount,\n    hasExistingPosition,\n    existingPosition,\n    isMarketOrder,\n    triggerPriceUsd,\n    showSpread,\n    spread,\n    displayLiquidationPrice,\n    existingLiquidationPrice,\n    feesUsd,\n    leverage,\n    renderExecutionFee,\n    shortCollateralToken,\n    chainId,\n    renderFeeWarning,\n    hasPendingProfit,\n    isProfitWarningAccepted,\n    renderAvailableLiquidity,\n    orderOption,\n    fromUsdMin,\n    collateralAfterFees,\n    renderExistingOrderWarning,\n    renderExistingTriggerWarning,\n    renderExistingTriggerErrors,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    allowedSlippage,\n    isTriggerWarningAccepted,\n    decreaseOrdersThatWillBeExecuted,\n    minExecutionFee,\n    nativeTokenSymbol,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  ]);\n\n  const renderSwapSection = useCallback(() => {\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderFeeWarning()}\n          {renderSpreadWarning()}\n          {orderOption === LIMIT && renderAvailableLiquidity()}\n          <ExchangeInfoRow label=\"Min. Receive\">\n            {formatAmount(minOut, toTokenInfo.decimals, 4, true)} {toTokenInfo.symbol}\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label=\"Price\">\n            {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromTokenInfo, toTokenInfo)}\n          </ExchangeInfoRow>\n          {!isMarketOrder && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">Limit Price</div>\n              <div className=\"align-right\">{getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}</div>\n            </div>\n          )}\n          {showSpread && (\n            <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh}>\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">Fees</div>\n            <div className=\"align-right\">\n              {formatAmount(feeBps, 2, 2, true)}% ({formatAmount(fees, fromTokenInfo.decimals, 4, true)}{\" \"}\n              {fromTokenInfo.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n            </div>\n          </div>\n          {renderExecutionFee()}\n          {fromTokenUsd && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">{fromTokenInfo.symbol} Price</div>\n              <div className=\"align-right\">{fromTokenUsd} USD</div>\n            </div>\n          )}\n          {toTokenUsd && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">{toTokenInfo.symbol} Price</div>\n              <div className=\"align-right\">{toTokenUsd} USD</div>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }, [\n    renderMain,\n    renderSpreadWarning,\n    fromTokenInfo,\n    toTokenInfo,\n    orderOption,\n    showSpread,\n    spread,\n    feesUsd,\n    feeBps,\n    renderExecutionFee,\n    fromTokenUsd,\n    toTokenUsd,\n    triggerRatio,\n    fees,\n    isMarketOrder,\n    minOut,\n    renderFeeWarning,\n    renderAvailableLiquidity,\n  ]);\n\n  return (\n    <div className=\"Confirmation-box\">\n      <Modal isVisible={true} setIsVisible={() => setIsConfirming(false)} label={title} allowContentTouchMove isNifty={true}>\n        {isSwap && renderSwapSection()}\n        {!isSwap && renderMarginSection()}\n        <div className=\"Confirmation-box-row\">\n          <button\n            onClick={onConfirmationClick}\n            className=\"App-cta Confirmation-box-button hlight\"\n            disabled={!isPrimaryEnabled()}\n          >\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\r\nimport cx from 'classnames';\r\n\r\nconst Modal = (props) => {\r\n\tconst {\r\n\t\tchildren, \r\n\t\tclassName, \r\n\t\tvisible, \r\n\t\tsetVisible, \r\n\t\tresetModal, \r\n\t\tisObligatory\r\n\t} = props;\r\n\t\r\n\tconst classes = cx('modal', className, visible && 'active');\r\n\r\n\tconst bodyNode = document.getElementsByTagName('body')[0];\r\n\tconst reset = () => {\r\n\t\tif (resetModal) {\r\n\t\t\tresetModal();\r\n\t\t}\r\n\t\tbodyNode.classList.remove('_scroll-lock');\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (visible) {\r\n\t\t\tbodyNode.classList.add('_scroll-lock');\r\n\t\t} else {\r\n\t\t\treset();\r\n\t\t}\r\n\t}, [visible]);\r\n\r\n\tconst closeModal = () => {\r\n\t\tif (isObligatory) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetVisible(false);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classes}\r\n\t\t\tonMouseDown={closeModal}\r\n\t\t\tonTransitionEnd={(e) => {\r\n\t\t\t\tif (visible) {\r\n\t\t\t\t\tconst isScrollable = e.target.scrollHeight > e.target.clientHeight;\r\n\t\t\t\t\tif (isScrollable) {\r\n\t\t\t\t\t\te.target.style.alignItems = \"flex-start\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.target.style.alignItems = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"modal__content-wrapper\"\r\n\t\t\t\tonTransitionEnd={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal__content\" onMouseDown={e => e.stopPropagation()}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{!isObligatory && \r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"close-btn\" \r\n\t\t\t\t\tonClick={closeModal} \r\n\t\t\t\t\tonTransitionEnd={(e) => e.stopPropagation()}\r\n\t\t\t\t/>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Modal;","import { ethers } from 'ethers';\r\n\r\nexport const alchemyProvider = new ethers.providers.AlchemyProvider(\"arbitrum\", 'tz_aYA5g8dBegbWo1l6TQEY7cKhGZCh1');\r\n\r\nexport const mmProvider = window.ethereum ? new ethers.providers.Web3Provider(window.ethereum) : undefined;\r\n\r\nexport const signer = mmProvider?.getSigner();","const CONTRACTS = {\r\n  56: {\r\n    // bsc mainnet\r\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\r\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\r\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\r\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\r\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\r\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\r\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\r\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\r\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\r\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\r\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\r\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\r\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\r\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\r\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\r\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\r\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\r\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\r\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\r\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\r\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\r\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  97: {\r\n    // bsc testnet\r\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\r\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\r\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\r\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\r\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\r\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\r\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\r\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\r\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\r\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\r\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\r\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\r\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\r\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  421611: {\r\n    // arbitrum testnet\r\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\r\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\r\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\r\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\r\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\r\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\r\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\r\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    GMX: \"0x0000000000000000000000000000000000000000\",\r\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\r\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\r\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\r\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\r\n\r\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\r\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\r\n\r\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\r\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\r\n  },\r\n  42161: {\r\n    // arbitrum mainnet\r\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\r\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\r\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\r\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\r\n    GlpManager: \"0x3963FfC9dff443c2A94f21b129D429891E32ec18\",\r\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\r\n    GlpRewardRouter: \"0xB95DB5B167D75e6d04227CfFFA61069348d271F5\",\r\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\r\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\r\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\r\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\r\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\r\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\r\n\r\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\r\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\r\n\r\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\r\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\r\n\r\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\r\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\r\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\r\n\r\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\r\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\r\n\r\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\r\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\r\n\r\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\r\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\r\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\r\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\r\n    GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\r\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\r\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\r\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\r\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\r\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\r\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\r\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\r\n\r\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\r\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n\r\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\r\n\r\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\r\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\r\n\r\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\r\n\r\n    PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\r\n    PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\r\n\r\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\r\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\r\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\r\n  },\r\n};\r\n\r\nexport function getContract(chainId, name, market) {\r\n  if (!CONTRACTS[chainId]) {\r\n    throw new Error(`Unknown chainId ${chainId}`);\r\n  }\r\n  if (!CONTRACTS[chainId][name]) {\r\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\r\n  }\r\n  return CONTRACTS[chainId][name];\r\n}\r\n\r\nexport const XGMT_EXCLUDED_ACCOUNTS = [\r\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\r\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\r\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\r\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\r\n];\r\n","import { ethers } from \"ethers\";\r\nimport { getContract } from \"./Addresses\";\r\n\r\nconst TOKENS = {\r\n  56: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 18,\r\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: getContract(56, \"NATIVE_TOKEN\"),\r\n      isWrapped: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(56, \"USDG\"),\r\n      isUsdg: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 18,\r\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 18,\r\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\r\n    },\r\n  ],\r\n  97: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n      isWrapped: true,\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(97, \"USDG\"),\r\n      isUsdg: true,\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  421611: [\r\n    {\r\n      name: \"Bitcoin\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\r\n      isShortable: true,\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n    },\r\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\r\n      isStable: true,\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  42161: [\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Chainlink\",\r\n      symbol: \"LINK\",\r\n      decimals: 18,\r\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\r\n    },\r\n    {\r\n      name: \"Uniswap\",\r\n      symbol: \"UNI\",\r\n      decimals: 18,\r\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\r\n    },\r\n    {\r\n      name: \"Dai\",\r\n      symbol: \"DAI\",\r\n      decimals: 18,\r\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\r\n    },\r\n    {\r\n      name: \"Frax\",\r\n      symbol: \"FRAX\",\r\n      decimals: 18,\r\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      decimals: 18,\r\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"Avalanche\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Wrapped AVAX\",\r\n      symbol: \"WAVAX\",\r\n      decimals: 18,\r\n      address: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n      isWrapped: true,\r\n      baseSymbol: \"AVAX\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Ethereum (WETH.e)\",\r\n      symbol: \"ETH\",\r\n      address: \"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB\",\r\n      decimals: 18,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC.e)\",\r\n      symbol: \"BTC\",\r\n      address: \"0x50b7545627a5162F82A992c33b87aDc75187B218\",\r\n      decimals: 8,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (BTC.b)\",\r\n      symbol: \"BTC.b\",\r\n      address: \"0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n      decimals: 8,\r\n      isShortable: false,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\r\n    },\r\n    {\r\n      name: \"USD Coin (USDC.e)\",\r\n      symbol: \"USDC.e\",\r\n      address: \"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      address: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      address: \"0x130966628846BFd36ff31a822705796e8cb8C18D\",\r\n      decimals: 18,\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n};\r\n\r\nconst ADDITIONAL_TOKENS = {\r\n  42161: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(42161, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(42161, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(43114, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(43114, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n};\r\n\r\nconst CHAIN_IDS = [56, 97, 42161, 421611, 43114];\r\n\r\nconst TOKENS_MAP = {};\r\nconst TOKENS_BY_SYMBOL_MAP = {};\r\n\r\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\r\n  const chainId = CHAIN_IDS[j];\r\n  TOKENS_MAP[chainId] = {};\r\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\r\n  let tokens = TOKENS[chainId];\r\n  if (ADDITIONAL_TOKENS[chainId]) {\r\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\r\n  }\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = tokens[i];\r\n    TOKENS_MAP[chainId][token.address] = token;\r\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\r\n  }\r\n}\r\n\r\nconst WRAPPED_TOKENS_MAP = {};\r\nconst NATIVE_TOKENS_MAP = {};\r\nfor (const chainId of CHAIN_IDS) {\r\n  for (const token of TOKENS[chainId]) {\r\n    if (token.isWrapped) {\r\n      WRAPPED_TOKENS_MAP[chainId] = token;\r\n    } else if (token.isNative) {\r\n      NATIVE_TOKENS_MAP[chainId] = token;\r\n    }\r\n  }\r\n}\r\n\r\nexport function getWrappedToken(chainId) {\r\n  return WRAPPED_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getNativeToken(chainId) {\r\n  return NATIVE_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getTokens(chainId) {\r\n  return TOKENS[chainId];\r\n}\r\n\r\nexport function isValidToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  return address in TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  if (!TOKENS_MAP[chainId][address]) {\r\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\r\n  }\r\n  return TOKENS_MAP[chainId][address];\r\n}\r\n\r\nexport function getTokenBySymbol(chainId, symbol) {\r\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\r\n  if (!token) {\r\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\r\n  }\r\n  return token;\r\n}\r\n\r\nexport function getWhitelistedTokens(chainId) {\r\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\r\n}\r\n\r\nexport function getVisibleTokens(chainId) {\r\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\r\nimport {\r\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\r\n  WalletConnectConnector,\r\n} from \"@web3-react/walletconnect-connector\";\r\nimport { toast } from \"react-toastify\";\r\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\r\nimport { useLocalStorage } from \"react-use\";\r\nimport { ethers } from \"ethers\";\r\nimport { format as formatDateFn } from \"date-fns\";\r\nimport Token from \"../abis/Token.json\";\r\nimport _ from \"lodash\";\r\nimport { getContract } from \"../config/Addresses\";\r\nimport useSWR from \"swr\";\r\n\r\nimport OrderBookReader from \"../abis/OrderBookReader.json\";\r\nimport OrderBook from \"../abis/OrderBook.json\";\r\n\r\nimport { getWhitelistedTokens, isValidToken } from \"../config/Tokens\";\r\n\r\nimport callIcon from \"../../../img/icon-call.svg\";\r\nimport putIcon from \"../../../img/icon-put.svg\";\r\nimport putActiveIcon from \"../../../img/icon-put-active.svg\";\r\nimport callActiveIcon from \"../../../img/icon-call-active.svg\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport const UI_VERSION = \"1.3\";\r\n\r\n// use a random placeholder account instead of the zero address as the zero address might have tokens\r\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\r\n\r\nexport const MAINNET = 56;\r\nexport const AVALANCHE = 43114;\r\nexport const TESTNET = 97;\r\nexport const ARBITRUM_TESTNET = 421611;\r\nexport const ARBITRUM = 42161;\r\n// TODO take it from web3\r\nexport const DEFAULT_CHAIN_ID = ARBITRUM;\r\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\r\n\r\nexport const MIN_PROFIT_TIME = 0;\r\n\r\nconst SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\r\n\r\nexport const IS_NETWORK_DISABLED = {\r\n  [ARBITRUM]: false,\r\n  [AVALANCHE]: false,\r\n};\r\n\r\nconst CHAIN_NAMES_MAP = {\r\n  [MAINNET]: \"BSC\",\r\n  [TESTNET]: \"BSC Testnet\",\r\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\r\n  [ARBITRUM]: \"Arbitrum\",\r\n  [AVALANCHE]: \"Avalanche\",\r\n};\r\n\r\nconst alchemyWhitelistedDomains = [\"gmx.io\", \"app.gmx.io\"];\r\n\r\nexport function getDefaultArbitrumRpcUrl() {\r\n  return \"https://arb1.arbitrum.io/rpc\";\r\n}\r\n\r\nexport function getAlchemyHttpUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nexport function getAlchemyWsUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nconst ARBITRUM_RPC_PROVIDERS = [getDefaultArbitrumRpcUrl()];\r\nconst AVALANCHE_RPC_PROVIDERS = [\"https://api.avax.network/ext/bc/C/rpc\"];\r\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\r\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\r\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\r\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\r\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\r\n\r\nexport function getChainName(chainId) {\r\n  return CHAIN_NAMES_MAP[chainId];\r\n}\r\n\r\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\r\n\r\nexport const BASIS_POINTS_DIVISOR = 10000;\r\nexport const MAX_LEVERAGE = 100 * BASIS_POINTS_DIVISOR;\r\nexport const MAX_ALLOWED_LEVERAGE = 50 * BASIS_POINTS_DIVISOR;\r\n\r\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\r\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\r\nexport const SECONDS_PER_YEAR = 31536000;\r\nexport const USDG_DECIMALS = 18;\r\nexport const USD_DECIMALS = 30;\r\nexport const DEPOSIT_FEE = 30;\r\nexport const DUST_BNB = \"2000000000000000\";\r\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\r\nexport const PRECISION = expandDecimals(1, 30);\r\nexport const GLP_DECIMALS = 18;\r\nexport const GMX_DECIMALS = 18;\r\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\r\n\r\nexport const TAX_BASIS_POINTS = 50;\r\nexport const STABLE_TAX_BASIS_POINTS = 5;\r\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\r\nexport const SWAP_FEE_BASIS_POINTS = 30;\r\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\r\nexport const MARGIN_FEE_BASIS_POINTS = 10;\r\n\r\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\r\n\r\nexport const TRADES_PAGE_SIZE = 100;\r\n\r\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\r\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\r\nexport const FUNDING_RATE_PRECISION = 1000000;\r\n\r\nexport const SWAP = \"Swap\";\r\nexport const INCREASE = \"Increase\";\r\nexport const DECREASE = \"Decrease\";\r\nexport const LONG = \"Long\";\r\nexport const SHORT = \"Short\";\r\n\r\nexport const MARKET = \"Market\";\r\nexport const LIMIT = \"Limit\";\r\nexport const STOP = \"Stop\";\r\nexport const BORROW = \"Borrow\";\r\n\r\n// Market/limit orders disabling\r\n// export const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\r\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\n\r\n// Options\r\nexport const CALL = \"Call\";\r\nexport const PUT = \"Put\";\r\nexport const SWAP_OPTIONS = [CALL, PUT];\r\nexport const SWAP_ICONS = {\r\n  [CALL]: callIcon,\r\n  [PUT]: putIcon,\r\n  Call_active: callActiveIcon,\r\n  Put_active: putActiveIcon,\r\n};\r\n\r\nexport const TP = \"Take Profit\";\r\nexport const SL = \"Stop Loss\";\r\n\r\n\r\n\r\n// Default Slippage\r\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\r\n// export const DEFAULT_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\r\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\r\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\r\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\r\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\r\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\r\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\r\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\r\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\r\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\r\n\r\nexport const TRIGGER_PREFIX_ABOVE = \">\";\r\nexport const TRIGGER_PREFIX_BELOW = \"<\";\r\n\r\nexport const MIN_PROFIT_BIPS = 0;\r\n\r\nexport const GLPPOOLCOLORS = {\r\n  ETH: \"#6062a6\",\r\n  BTC: \"#F7931A\",\r\n  \"BTC.b\": \"#F7931A\",\r\n  USDC: \"#2775CA\",\r\n  \"USDC.e\": \"#2A5ADA\",\r\n  USDT: \"#67B18A\",\r\n  MIM: \"#9695F8\",\r\n  FRAX: \"#000\",\r\n  DAI: \"#FAC044\",\r\n  UNI: \"#E9167C\",\r\n  AVAX: \"#E84142\",\r\n  LINK: \"#3256D6\",\r\n};\r\n\r\nexport const HIGH_EXECUTION_FEES_MAP = {\r\n  [ARBITRUM]: 3, // 3 USD\r\n  [AVALANCHE]: 3, // 3 USD\r\n};\r\n\r\nexport function getHighExecutionFee(chainId) {\r\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\r\n}\r\n\r\nexport const ICONLINKS = {\r\n  [ARBITRUM_TESTNET]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    },\r\n  },\r\n  [ARBITRUM]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\r\n    },\r\n    LINK: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\r\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\r\n    },\r\n    UNI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\r\n    },\r\n    USDT: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\r\n    },\r\n    DAI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\r\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\r\n    },\r\n    FRAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\r\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\r\n    },\r\n  },\r\n  [AVALANCHE]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      avalanche: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\r\n    },\r\n    GLP: {\r\n      avalanche: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    },\r\n    AVAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\r\n      avalanche: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\r\n    },\r\n    \"BTC.b\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      avalanche: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\r\n    },\r\n    \"USDC.e\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e\",\r\n      avalanche: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      avalanche: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const platformTokens = {\r\n  42161: {\r\n    // arbitrum\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n};\r\n\r\nconst supportedChainIds = [ARBITRUM, AVALANCHE];\r\nif (isDevelopment()) {\r\n  supportedChainIds.push(ARBITRUM_TESTNET);\r\n}\r\nconst injectedConnector = new InjectedConnector({\r\n  supportedChainIds,\r\n});\r\n\r\nconst getWalletConnectConnector = () => {\r\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n  return new WalletConnectConnector({\r\n    rpc: {\r\n      [AVALANCHE]: AVALANCHE_RPC_PROVIDERS[0],\r\n      [ARBITRUM]: ARBITRUM_RPC_PROVIDERS[0],\r\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\r\n    },\r\n    qrcode: true,\r\n    chainId,\r\n  });\r\n};\r\n\r\nexport function isSupportedChain(chainId) {\r\n  return supportedChainIds.includes(chainId);\r\n}\r\n\r\nexport function deserialize(data) {\r\n  for (const [key, value] of Object.entries(data)) {\r\n    if (value._type === \"BigNumber\") {\r\n      data[key] = bigNumberify(value.value);\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nexport function isHomeSite() {\r\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\r\n}\r\n\r\nexport const helperToast = {\r\n  success: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.success(content, opts);\r\n  },\r\n  error: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.error(content, opts);\r\n  },\r\n};\r\n\r\nexport function useLocalStorageByChainId(chainId, key, defaultValue) {\r\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\r\n\r\n  const setValue = useCallback(\r\n    (value) => {\r\n      setInternalValue((internalValue) => {\r\n        if (typeof value === \"function\") {\r\n          value = value(internalValue[chainId] || defaultValue);\r\n        }\r\n        const newInternalValue = {\r\n          ...internalValue,\r\n          [chainId]: value,\r\n        };\r\n        return newInternalValue;\r\n      });\r\n    },\r\n    [chainId, setInternalValue, defaultValue]\r\n  );\r\n\r\n  let value;\r\n  if (chainId in internalValue) {\r\n    value = internalValue[chainId];\r\n  } else {\r\n    value = defaultValue;\r\n  }\r\n\r\n  return [value, setValue];\r\n}\r\n\r\nexport function useLocalStorageSerializeKey(key, value, opts) {\r\n  key = JSON.stringify(key);\r\n  return useLocalStorage(key, value, opts);\r\n}\r\n\r\nfunction getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd) {\r\n  // Limit/stop orders are executed with price specified by user\r\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\r\n    return triggerPriceUsd;\r\n  }\r\n\r\n  // Market orders are executed with current market price\r\n  if (!info) {\r\n    return;\r\n  }\r\n  if (max && !info.maxPrice) {\r\n    return;\r\n  }\r\n  if (!max && !info.minPrice) {\r\n    return;\r\n  }\r\n  return max ? info.maxPrice : info.minPrice;\r\n}\r\n\r\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\r\n  if (!size || size.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  if (liquidationAmount.gt(collateral)) {\r\n    const liquidationDelta = liquidationAmount.sub(collateral);\r\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\r\n  }\r\n\r\n  const liquidationDelta = collateral.sub(liquidationAmount);\r\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n\r\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\r\n}\r\n\r\nexport const replaceNativeTokenAddress = (path, nativeTokenAddress) => {\r\n  if (!path) {\r\n    return;\r\n  }\r\n\r\n  let updatedPath = [];\r\n  for (let i = 0; i < path.length; i++) {\r\n    let address = path[i];\r\n    if (address === AddressZero) {\r\n      address = nativeTokenAddress;\r\n    }\r\n    updatedPath.push(address);\r\n  }\r\n\r\n  return updatedPath;\r\n};\r\n\r\nexport function getMarginFee(sizeDelta) {\r\n  if (!sizeDelta) {\r\n    return bigNumberify(0);\r\n  }\r\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n  return sizeDelta.sub(afterFeeUsd);\r\n}\r\n\r\nexport function getServerBaseUrl(chainId) {\r\n  if (!chainId) {\r\n    throw new Error(\"chainId is not provided\");\r\n  }\r\n  if (document.location.hostname.includes(\"deploy-preview\")) {\r\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\r\n    if (fromLocalStorage) {\r\n      return fromLocalStorage;\r\n    }\r\n  }\r\n  if (chainId === MAINNET) {\r\n    return \"https://gambit-server-staging.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://gambit-server-devnet.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://gmx-avax-server.uc.r.appspot.com\";\r\n  }\r\n  return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n}\r\n\r\nexport function getServerUrl(chainId, path) {\r\n  return `${getServerBaseUrl(chainId)}${path}`;\r\n}\r\n\r\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\r\n  if (!toTokenInfo || !fromTokenInfo) return false;\r\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\r\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\r\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\r\n    return;\r\n  }\r\n  if (inverted) {\r\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\r\n  }\r\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\r\n}\r\n\r\nexport function getMostAbundantStableToken(chainId, infoTokens) {\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  let availableAmount;\r\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\r\n    if (!info.isStable || !info.availableAmount) {\r\n      continue;\r\n    }\r\n\r\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\r\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\r\n      availableAmount = adjustedAvailableAmount;\r\n      stableToken = info;\r\n    }\r\n  }\r\n  return stableToken;\r\n}\r\n\r\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\r\n  if (tokenB.isStable || tokenB.isUsdg) return true;\r\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\r\n  if (!rate || !tokenA || !tokenB) return \"...\";\r\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\r\n    [tokenA, tokenB] = [tokenB, tokenA];\r\n    rate = PRECISION.mul(PRECISION).div(rate);\r\n  }\r\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\r\n  if (opts.omitSymbols) {\r\n    return rateValue;\r\n  }\r\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\r\n}\r\n\r\nconst adjustForDecimalsFactory = (n) => (number) => {\r\n  if (n === 0) {\r\n    return number;\r\n  }\r\n  if (n > 0) {\r\n    return number.mul(expandDecimals(1, n));\r\n  }\r\n  return number.div(expandDecimals(1, -n));\r\n};\r\n\r\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\r\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\r\n}\r\n\r\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\r\n  if (!token || !token.weight || !usdgSupply) {\r\n    return;\r\n  }\r\n\r\n  if (usdgSupply.eq(0)) {\r\n    return bigNumberify(0);\r\n  }\r\n\r\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\r\n}\r\n\r\nexport function getFeeBasisPoints(\r\n  token,\r\n  usdgDelta,\r\n  feeBasisPoints,\r\n  taxBasisPoints,\r\n  increment,\r\n  usdgSupply,\r\n  totalTokenWeights\r\n) {\r\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\r\n    return 0;\r\n  }\r\n\r\n  feeBasisPoints = bigNumberify(feeBasisPoints);\r\n  taxBasisPoints = bigNumberify(taxBasisPoints);\r\n\r\n  const initialAmount = token.usdgAmount;\r\n  let nextAmount = initialAmount.add(usdgDelta);\r\n  if (!increment) {\r\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\r\n  }\r\n\r\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\r\n  if (!targetAmount || targetAmount.eq(0)) {\r\n    return feeBasisPoints.toNumber();\r\n  }\r\n\r\n  const initialDiff = initialAmount.gt(targetAmount)\r\n    ? initialAmount.sub(targetAmount)\r\n    : targetAmount.sub(initialAmount);\r\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\r\n\r\n  if (nextDiff.lt(initialDiff)) {\r\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\r\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\r\n  }\r\n\r\n  let averageDiff = initialDiff.add(nextDiff).div(2);\r\n  if (averageDiff.gt(targetAmount)) {\r\n    averageDiff = targetAmount;\r\n  }\r\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\r\n  return feeBasisPoints.add(taxBps).toNumber();\r\n}\r\n\r\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getNextFromAmount(\r\n  chainId,\r\n  toAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n\r\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\r\n\r\n  let fromAmountBasedOnRatio;\r\n  if (ratio && !ratio.isZero()) {\r\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\r\n  }\r\n\r\n  const fromAmount =\r\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getNextToAmount(\r\n  chainId,\r\n  fromAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\r\n\r\n  let toAmountBasedOnRatio = bigNumberify(0);\r\n  if (ratio && !ratio.isZero()) {\r\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\r\n  }\r\n\r\n  if (toTokenAddress === USDG_ADDRESS) {\r\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio;\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n    return {\r\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n      feeBasisPoints,\r\n    };\r\n  }\r\n\r\n  if (fromTokenAddress === USDG_ADDRESS) {\r\n    const redemptionValue = toToken.redemptionAmount\r\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\r\n      .div(expandDecimals(1, toToken.decimals));\r\n\r\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const expectedAmount = fromAmount;\r\n\r\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\r\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\r\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio\r\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\r\n        .div(BASIS_POINTS_DIVISOR);\r\n      return {\r\n        amount: adjustDecimals(toAmount),\r\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n      };\r\n    }\r\n\r\n    // get toAmount for USDG => stableToken\r\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\r\n    // apply USDG => stableToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\r\n\r\n    // get toAmount for stableToken => toToken\r\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n    // apply stableToken => toToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\r\n\r\n    return {\r\n      amount: adjustDecimals(toAmount),\r\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n    };\r\n  }\r\n\r\n  const toAmount =\r\n    ratio && !ratio.isZero()\r\n      ? toAmountBasedOnRatio\r\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getProfitPrice(closePrice, position) {\r\n  let profitPrice;\r\n  if (position && position.averagePrice && closePrice) {\r\n    profitPrice = position.isLong\r\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\r\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\r\n  }\r\n  return profitPrice;\r\n}\r\n\r\nexport function calculatePositionDelta(\r\n  price,\r\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\r\n  sizeDelta\r\n) {\r\n  if (!sizeDelta) {\r\n    sizeDelta = size;\r\n  }\r\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\r\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\r\n  const pendingDelta = delta;\r\n\r\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\r\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\r\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\r\n    delta = bigNumberify(0);\r\n  }\r\n\r\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n\r\n  return {\r\n    delta,\r\n    pendingDelta,\r\n    pendingDeltaPercentage,\r\n    hasProfit,\r\n    deltaPercentage,\r\n  };\r\n}\r\n\r\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\r\n  let deltaStr;\r\n  let deltaPercentageStr;\r\n\r\n  if (delta.gt(0)) {\r\n    deltaStr = hasProfit ? \"+\" : \"-\";\r\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\r\n  } else {\r\n    deltaStr = \"\";\r\n    deltaPercentageStr = \"\";\r\n  }\r\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\r\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\r\n\r\n  return { deltaStr, deltaPercentageStr };\r\n}\r\n\r\nexport function getLeverage({\r\n  size,\r\n  sizeDelta,\r\n  increaseSize,\r\n  collateral,\r\n  collateralDelta,\r\n  increaseCollateral,\r\n  entryFundingRate,\r\n  cumulativeFundingRate,\r\n  hasProfit,\r\n  delta,\r\n  includeDelta,\r\n}) {\r\n  if (!size && !sizeDelta) {\r\n    return;\r\n  }\r\n  if (!collateral && !collateralDelta) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n  }\r\n\r\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = collateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(collateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = collateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  if (delta && includeDelta) {\r\n    if (hasProfit) {\r\n      remainingCollateral = remainingCollateral.add(delta);\r\n    } else {\r\n      if (delta.gt(remainingCollateral)) {\r\n        return;\r\n      }\r\n\r\n      remainingCollateral = remainingCollateral.sub(delta);\r\n    }\r\n  }\r\n\r\n  if (remainingCollateral.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  remainingCollateral = sizeDelta\r\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\r\n    : remainingCollateral;\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    remainingCollateral = remainingCollateral.sub(fundingFee);\r\n  }\r\n\r\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\r\n}\r\n\r\nexport function getLiquidationPrice(data) {\r\n  let {\r\n    isLong,\r\n    size,\r\n    collateral,\r\n    averagePrice,\r\n    entryFundingRate,\r\n    cumulativeFundingRate,\r\n    sizeDelta,\r\n    collateralDelta,\r\n    increaseCollateral,\r\n    increaseSize,\r\n    delta,\r\n    hasProfit,\r\n    includeDelta,\r\n  } = data;\r\n  if (!size || !collateral || !averagePrice) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  let remainingCollateral = collateral;\r\n\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n\r\n    if (includeDelta && !hasProfit) {\r\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\r\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\r\n    }\r\n  }\r\n\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = remainingCollateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(remainingCollateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    positionFee = positionFee.add(fundingFee);\r\n  }\r\n\r\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\r\n    liquidationAmount: positionFee,\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\r\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  if (!liquidationPriceForFees) {\r\n    return liquidationPriceForMaxLeverage;\r\n  }\r\n  if (!liquidationPriceForMaxLeverage) {\r\n    return liquidationPriceForFees;\r\n  }\r\n\r\n  if (isLong) {\r\n    // return the higher price\r\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\r\n      ? liquidationPriceForFees\r\n      : liquidationPriceForMaxLeverage;\r\n  }\r\n\r\n  // return the lower price\r\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\r\n    ? liquidationPriceForFees\r\n    : liquidationPriceForMaxLeverage;\r\n}\r\n\r\nexport function getUsd(amount, tokenAddress, max, infoTokens, orderOption, triggerPriceUsd) {\r\n  if (!amount) {\r\n    return;\r\n  }\r\n  if (tokenAddress === USDG_ADDRESS) {\r\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\r\n  }\r\n  const info = getTokenInfo(infoTokens, tokenAddress);\r\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\r\n  if (!price) {\r\n    return;\r\n  }\r\n\r\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\r\n}\r\n\r\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\r\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\r\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\r\n}\r\n\r\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\r\n  return ethers.utils.solidityKeccak256(\r\n    [\"address\", \"address\", \"address\", \"bool\"],\r\n    [account, collateralToken, indexToken, isLong]\r\n  );\r\n}\r\n\r\nexport function getSwapFeeBasisPoints(isStable) {\r\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n}\r\n\r\n// BSC TESTNET\r\n// const RPC_PROVIDERS = [\r\n//   \"https://data-seed-prebsc-1-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s3.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s3.binance.org:8545\"\r\n// ]\r\n\r\n// BSC MAINNET\r\nexport const BSC_RPC_PROVIDERS = [\r\n  \"https://bsc-dataseed.binance.org\",\r\n  \"https://bsc-dataseed1.defibit.io\",\r\n  \"https://bsc-dataseed1.ninicoin.io\",\r\n  \"https://bsc-dataseed2.defibit.io\",\r\n  \"https://bsc-dataseed3.defibit.io\",\r\n  \"https://bsc-dataseed4.defibit.io\",\r\n  \"https://bsc-dataseed2.ninicoin.io\",\r\n  \"https://bsc-dataseed3.ninicoin.io\",\r\n  \"https://bsc-dataseed4.ninicoin.io\",\r\n  \"https://bsc-dataseed1.binance.org\",\r\n  \"https://bsc-dataseed2.binance.org\",\r\n  \"https://bsc-dataseed3.binance.org\",\r\n  \"https://bsc-dataseed4.binance.org\",\r\n];\r\n\r\nconst RPC_PROVIDERS = {\r\n  [MAINNET]: BSC_RPC_PROVIDERS,\r\n  [ARBITRUM]: ARBITRUM_RPC_PROVIDERS,\r\n  [AVALANCHE]: AVALANCHE_RPC_PROVIDERS,\r\n};\r\n\r\nconst FALLBACK_PROVIDERS = {\r\n  [ARBITRUM]: [getAlchemyHttpUrl()],\r\n  [AVALANCHE]: [\"https://avax-mainnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\r\n};\r\n\r\nexport function shortenAddress(address, length) {\r\n  if (!length) {\r\n    return \"\";\r\n  }\r\n  if (!address) {\r\n    return address;\r\n  }\r\n  if (address.length < 10) {\r\n    return address;\r\n  }\r\n  let left = Math.floor((length - 3) / 2) + 1;\r\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\r\n}\r\n\r\nexport function formatDateTime(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\r\n}\r\n\r\nexport function getTimeRemaining(time) {\r\n  const now = parseInt(Date.now() / 1000);\r\n  if (time < now) {\r\n    return \"0h 0m\";\r\n  }\r\n  const diff = time - now;\r\n  const hours = parseInt(diff / (60 * 60));\r\n  const minutes = parseInt((diff - hours * 60 * 60) / 60);\r\n  return `${hours}h ${minutes}m`;\r\n}\r\n\r\nexport function formatDate(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\r\n}\r\n\r\nexport function hasMetaMaskWalletExtension() {\r\n  return window.ethereum;\r\n}\r\n\r\nexport function hasCoinBaseWalletExtension() {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\r\n    return false;\r\n  }\r\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n}\r\n\r\nexport function activateInjectedProvider(providerName) {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\r\n    return undefined;\r\n  }\r\n\r\n  let provider;\r\n  if (ethereum?.providers) {\r\n    switch (providerName) {\r\n      case \"CoinBase\":\r\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n        break;\r\n      case \"MetaMask\":\r\n      default:\r\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (provider) {\r\n    ethereum.setSelectedProvider(provider);\r\n  }\r\n}\r\n\r\nexport function getInjectedConnector() {\r\n  return injectedConnector;\r\n}\r\n\r\nexport function useChainId() {\r\n  let { chainId } = useWeb3React();\r\n\r\n  if (!chainId) {\r\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n    if (chainIdFromLocalStorage) {\r\n      chainId = parseInt(chainIdFromLocalStorage);\r\n      if (!chainId) {\r\n        // localstorage value is invalid\r\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!chainId || !supportedChainIds.includes(chainId)) {\r\n    chainId = DEFAULT_CHAIN_ID;\r\n  }\r\n  return { chainId };\r\n}\r\n\r\nexport function useENS(address) {\r\n  const [ensName, setENSName] = useState();\r\n\r\n  useEffect(() => {\r\n    async function resolveENS() {\r\n      if (address) {\r\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\r\n        const name = await provider.lookupAddress(address.toLowerCase());\r\n        if (name) setENSName(name);\r\n      }\r\n    }\r\n    resolveENS();\r\n  }, [address]);\r\n\r\n  return { ensName };\r\n}\r\n\r\nexport function clearWalletConnectData() {\r\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n}\r\n\r\nexport function clearWalletLinkData() {\r\n  Object.entries(localStorage)\r\n    .map((x) => x[0])\r\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\r\n    .map((x) => localStorage.removeItem(x));\r\n}\r\n\r\nexport function useEagerConnect(setActivatingConnector) {\r\n  const { activate, active } = useWeb3React();\r\n  const [tried, setTried] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\r\n        // only works with WalletConnect\r\n        clearWalletConnectData();\r\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\r\n        clearWalletLinkData();\r\n        return;\r\n      }\r\n\r\n      let shouldTryWalletConnect = false;\r\n      try {\r\n        // naive validation to not trigger Wallet Connect if data is corrupted\r\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n        if (rawData) {\r\n          const data = JSON.parse(rawData);\r\n          if (data && data.connected) {\r\n            shouldTryWalletConnect = true;\r\n          }\r\n        }\r\n      } catch (ex) {\r\n        if (ex instanceof SyntaxError) {\r\n          // rawData is not a valid json\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      if (shouldTryWalletConnect) {\r\n        try {\r\n          const connector = getWalletConnectConnector();\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n          // in case Wallet Connect is activated no need to check injected wallet\r\n          return;\r\n        } catch (ex) {\r\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      try {\r\n        const connector = getInjectedConnector();\r\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\r\n        if (currentProviderName !== false) {\r\n          activateInjectedProvider(currentProviderName);\r\n        }\r\n        const authorized = await connector.isAuthorized();\r\n        if (authorized) {\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n        }\r\n      } catch (ex) {}\r\n\r\n      setTried(true);\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (!tried && active) {\r\n      setTried(true);\r\n    }\r\n  }, [tried, active]);\r\n\r\n  return tried;\r\n}\r\n\r\nexport function useInactiveListener(suppress = false) {\r\n  const injected = getInjectedConnector();\r\n  const { active, error, activate } = useWeb3React();\r\n\r\n  useEffect(() => {\r\n    const { ethereum } = window;\r\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\r\n      const handleConnect = () => {\r\n        activate(injected);\r\n      };\r\n      const handleChainChanged = (chainId) => {\r\n        activate(injected);\r\n      };\r\n      const handleAccountsChanged = (accounts) => {\r\n        if (accounts.length > 0) {\r\n          activate(injected);\r\n        }\r\n      };\r\n      const handleNetworkChanged = (networkId) => {\r\n        activate(injected);\r\n      };\r\n\r\n      ethereum.on(\"connect\", handleConnect);\r\n      ethereum.on(\"chainChanged\", handleChainChanged);\r\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\r\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\r\n\r\n      return () => {\r\n        if (ethereum.removeListener) {\r\n          ethereum.removeListener(\"connect\", handleConnect);\r\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\r\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\r\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\r\n        }\r\n      };\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [active, error, suppress, activate]);\r\n}\r\n\r\nexport function getProvider(library, chainId) {\r\n  let provider;\r\n  if (library) {\r\n    return library.getSigner();\r\n  }\r\n  provider = _.sample(RPC_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function getFallbackProvider(chainId) {\r\n  if (!FALLBACK_PROVIDERS[chainId]) {\r\n    return;\r\n  }\r\n\r\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function bigNumberify(n) {\r\n  try {\r\n    return ethers.BigNumber.from(n);\r\n  } catch (e) {\r\n    console.error(\"bigNumberify error\", e);\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function expandDecimals(n, decimals) {\r\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\r\n}\r\n\r\nexport const trimZeroDecimals = (amount) => {\r\n  if (parseFloat(amount) === parseInt(amount)) {\r\n    return parseInt(amount).toString();\r\n  }\r\n  return amount;\r\n};\r\n\r\nexport const limitDecimals = (amount, maxDecimals) => {\r\n  let amountStr = amount.toString();\r\n  \r\n  if (maxDecimals === undefined) {\r\n    return amountStr;\r\n  }\r\n  if (maxDecimals === 0) {\r\n    return amountStr.split(\".\")[0];\r\n  }\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    let decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals > maxDecimals) {\r\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\r\n    }\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const padDecimals = (amount, minDecimals) => {\r\n  let amountStr = amount.toString();\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    const decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals < minDecimals) {\r\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\r\n    }\r\n  } else {\r\n    amountStr = amountStr + \".0000\";\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatKeyAmount = (map, key, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!map || !map[key]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nexport const formatArrayAmount = (arr, index, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!arr || !arr[index]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\r\n  if (!ordersData || ordersData.length === 0) {\r\n    return [];\r\n  }\r\n  const [uintProps, addressProps] = ordersData;\r\n  const count = uintProps.length / uintPropsLength;\r\n\r\n  const orders = [];\r\n  for (let i = 0; i < count; i++) {\r\n    const sliced = addressProps\r\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\r\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\r\n\r\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\r\n      continue;\r\n    }\r\n\r\n    const order = extractor(sliced);\r\n    order.index = indexes[i];\r\n    order.account = account;\r\n    orders.push(order);\r\n  }\r\n\r\n  return orders;\r\n}\r\n\r\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[4].toString() === \"1\";\r\n    return {\r\n      collateralToken: sliced[0],\r\n      indexToken: sliced[1],\r\n      collateralDelta: sliced[2],\r\n      sizeDelta: sliced[3],\r\n      isLong,\r\n      triggerPrice: sliced[5],\r\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\r\n      type: DECREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\r\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\r\n  });\r\n}\r\n\r\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[5].toString() === \"1\";\r\n    return {\r\n      purchaseToken: sliced[0],\r\n      collateralToken: sliced[1],\r\n      indexToken: sliced[2],\r\n      purchaseTokenAmount: sliced[3],\r\n      sizeDelta: sliced[4],\r\n      isLong,\r\n      triggerPrice: sliced[6],\r\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\r\n      type: INCREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return (\r\n      isValidToken(chainId, order.purchaseToken) &&\r\n      isValidToken(chainId, order.collateralToken) &&\r\n      isValidToken(chainId, order.indexToken)\r\n    );\r\n  });\r\n}\r\n\r\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\r\n  if (!swapOrdersData || !swapOrdersData.length) {\r\n    return [];\r\n  }\r\n\r\n  const extractor = (sliced) => {\r\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\r\n    const shouldUnwrap = sliced[7].toString() === \"1\";\r\n\r\n    return {\r\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\r\n      amountIn: sliced[3],\r\n      minOut: sliced[4],\r\n      triggerRatio: sliced[5],\r\n      triggerAboveThreshold,\r\n      type: SWAP,\r\n      shouldUnwrap,\r\n    };\r\n  };\r\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return order.path.every((token) => isValidToken(chainId, token));\r\n  });\r\n}\r\n\r\nexport function getOrderKey(order) {\r\n  return `${order.type}-${order.account}-${order.index}`;\r\n}\r\n\r\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\r\n  const { library, account: connectedAccount } = useWeb3React();\r\n  const active = true; // this is used in Actions.js so set active to always be true\r\n  const account = overrideAccount || connectedAccount;\r\n\r\n  const { chainId } = useChainId();\r\n  const shouldRequest = active && account && flagOrdersEnabled;\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\r\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\r\n  const {\r\n    data: orders = [],\r\n    mutate: updateOrders,\r\n    error: ordersError,\r\n  } = useSWR(key, {\r\n    dedupingInterval: 5000,\r\n    fetcher: async (active, chainId, orderBookAddress, account) => {\r\n      const provider = getProvider(library, chainId);\r\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\r\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\r\n\r\n      const fetchIndexesFromServer = () => {\r\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\r\n        return fetch(ordersIndexesUrl)\r\n          .then(async (res) => {\r\n            const json = await res.json();\r\n            const ret = {};\r\n            for (const key of Object.keys(json)) {\r\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\r\n            }\r\n\r\n            return ret;\r\n          })\r\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\r\n      };\r\n\r\n      const fetchLastIndex = async (type) => {\r\n        const method = type.toLowerCase() + \"OrdersIndex\";\r\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\r\n      };\r\n\r\n      const fetchLastIndexes = async () => {\r\n        const [swap, increase, decrease] = await Promise.all([\r\n          fetchLastIndex(\"swap\"),\r\n          fetchLastIndex(\"increase\"),\r\n          fetchLastIndex(\"decrease\"),\r\n        ]);\r\n\r\n        return { swap, increase, decrease };\r\n      };\r\n\r\n      const getRange = (to, from) => {\r\n        const LIMIT = 10;\r\n        const _indexes = [];\r\n        from = from || Math.max(to - LIMIT, 0);\r\n        for (let i = to - 1; i >= from; i--) {\r\n          _indexes.push(i);\r\n        }\r\n        return _indexes;\r\n      };\r\n\r\n      const getIndexes = (knownIndexes, lastIndex) => {\r\n        if (knownIndexes.length === 0) {\r\n          return getRange(lastIndex);\r\n        }\r\n        return [\r\n          ...knownIndexes,\r\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\r\n        ];\r\n      };\r\n\r\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\r\n        const indexes = getIndexes(knownIndexes, lastIndex);\r\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\r\n        const orders = parseFunc(chainId, ordersData, account, indexes);\r\n\r\n        return orders;\r\n      };\r\n\r\n      try {\r\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\r\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\r\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\r\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\r\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\r\n        ]);\r\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\r\n      } catch (ex) {\r\n        console.error(ex);\r\n      }\r\n    },\r\n  });\r\n\r\n  return [orders, updateOrders, ordersError];\r\n}\r\n\r\nexport const formatAmount = (amount, tokenDecimals, displayDecimals, useCommas, defaultValue) => {\r\n  if (amount === null) {\r\n    return;\r\n  }\r\n  \r\n  if (!defaultValue) {\r\n    defaultValue = \"...\";\r\n  }\r\n  if (amount === undefined || amount.toString().length === 0) {\r\n    return defaultValue;\r\n  }\r\n  if (displayDecimals === undefined) {\r\n    displayDecimals = 4;\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  if (displayDecimals !== 0) {\r\n    amountStr = padDecimals(amountStr, displayDecimals);\r\n  }\r\n  if (useCommas) {\r\n    return numberWithCommas(amountStr);\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatAmountFree = (amount, tokenDecimals, displayDecimals) => {\r\n  if (!amount) {\r\n    return \"...\";\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  return trimZeroDecimals(amountStr);\r\n};\r\n\r\nexport const parseValue = (value, tokenDecimals) => {\r\n  const pValue = parseFloat(value);\r\n  if (isNaN(pValue)) {\r\n    return undefined;\r\n  }\r\n  value = limitDecimals(value, tokenDecimals);\r\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\r\n  return bigNumberify(amount);\r\n};\r\n\r\nexport function numberWithCommas(x) {\r\n  if (!x) {\r\n    return \"...\";\r\n  }\r\n  var parts = x.toString().split(\".\");\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  return parts.join(\".\");\r\n}\r\n\r\nexport function getExplorerUrl(chainId) {\r\n  if (chainId === 3) {\r\n    return \"https://ropsten.etherscan.io/\";\r\n  } else if (chainId === 42) {\r\n    return \"https://kovan.etherscan.io/\";\r\n  } else if (chainId === MAINNET) {\r\n    return \"https://bscscan.com/\";\r\n  } else if (chainId === TESTNET) {\r\n    return \"https://testnet.bscscan.com/\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://testnet.arbiscan.io/\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://arbiscan.io/\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://snowtrace.io/\";\r\n  }\r\n  return \"https://etherscan.io/\";\r\n}\r\n\r\nexport function getAccountUrl(chainId, account) {\r\n  if (!account) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"address/\" + account;\r\n}\r\n\r\nexport function getTokenUrl(chainId, address) {\r\n  if (!address) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"token/\" + address;\r\n}\r\n\r\nexport function usePrevious(value) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\nexport function approveTokens({\r\n  setIsApproving,\r\n  library,\r\n  tokenAddress,\r\n  spender,\r\n  chainId,\r\n  onApproveSubmitted,\r\n  getTokenInfo,\r\n  infoTokens,\r\n  pendingTxns,\r\n  setPendingTxns,\r\n  includeMessage,\r\n}) {\r\n  setIsApproving(true);\r\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\r\n  contract\r\n    .approve(spender, ethers.constants.MaxUint256)\r\n    .then(async (res) => {\r\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\r\n      helperToast.success(\r\n        <div>\r\n          Approval submitted!{\" \"}\r\n          <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            View status.\r\n          </a>\r\n          <br />\r\n        </div>\r\n      );\r\n      if (onApproveSubmitted) {\r\n        onApproveSubmitted();\r\n      }\r\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\r\n        const token = getTokenInfo(infoTokens, tokenAddress);\r\n        const pendingTxn = {\r\n          hash: res.hash,\r\n          message: includeMessage ? `${token.symbol} Approved!` : false,\r\n        };\r\n        setPendingTxns([...pendingTxns, pendingTxn]);\r\n      }\r\n    })\r\n    .catch((e) => {\r\n      console.error(e);\r\n      let failMsg;\r\n      if (\r\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\r\n          e.data?.message\r\n        )\r\n      ) {\r\n        failMsg = (\r\n          <div>\r\n            There is not enough ETH in your account on Arbitrum to send this transaction.\r\n            <br />\r\n            <br />\r\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Bridge ETH to Arbitrum\r\n            </a>\r\n          </div>\r\n        );\r\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\r\n        failMsg = \"Approval was cancelled\";\r\n      } else {\r\n        failMsg = \"Approval failed\";\r\n      }\r\n      helperToast.error(failMsg);\r\n    })\r\n    .finally(() => {\r\n      setIsApproving(false);\r\n    });\r\n}\r\n\r\nexport const shouldRaiseGasError = (token, amount) => {\r\n  if (!amount) {\r\n    return false;\r\n  }\r\n  if (token.address !== AddressZero) {\r\n    return false;\r\n  }\r\n  if (!token.balance) {\r\n    return false;\r\n  }\r\n  if (amount.gte(token.balance)) {\r\n    return true;\r\n  }\r\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getTokenInfo = (infoTokens, tokenAddress, replaceNative, nativeTokenAddress) => {\r\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\r\n    return infoTokens[AddressZero];\r\n  }\r\n  return infoTokens[tokenAddress];\r\n};\r\n\r\nconst NETWORK_METADATA = {\r\n  [MAINNET]: {\r\n    chainId: \"0x\" + MAINNET.toString(16),\r\n    chainName: \"BSC\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: BSC_RPC_PROVIDERS,\r\n    blockExplorerUrls: [\"https://bscscan.com\"],\r\n  },\r\n  [TESTNET]: {\r\n    chainId: \"0x\" + TESTNET.toString(16),\r\n    chainName: \"BSC Testnet\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\r\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n  },\r\n  [ARBITRUM_TESTNET]: {\r\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\r\n    chainName: \"Arbitrum Testnet\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\r\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\r\n  },\r\n  [ARBITRUM]: {\r\n    chainId: \"0x\" + ARBITRUM.toString(16),\r\n    chainName: \"Arbitrum\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: ARBITRUM_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\r\n  },\r\n  [AVALANCHE]: {\r\n    chainId: \"0x\" + AVALANCHE.toString(16),\r\n    chainName: \"Avalanche\",\r\n    nativeCurrency: {\r\n      name: \"AVAX\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: AVALANCHE_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE)],\r\n  },\r\n};\r\n\r\nexport const addBscNetwork = async () => {\r\n  return addNetwork(NETWORK_METADATA[MAINNET]);\r\n};\r\n\r\nexport const addNetwork = async (metadata) => {\r\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\r\n};\r\n\r\nexport const switchNetwork = async (chainId, active) => {\r\n  if (!active) {\r\n    // chainId in localStorage allows to switch network even if wallet is not connected\r\n    // or there is no wallet at all\r\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\r\n    document.location.reload();\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const chainIdHex = \"0x\" + chainId.toString(16);\r\n    await window.ethereum.request({\r\n      method: \"wallet_switchEthereumChain\",\r\n      params: [{ chainId: chainIdHex }],\r\n    });\r\n    helperToast.success(\"Connected to \" + getChainName(chainId));\r\n    return getChainName(chainId);\r\n  } catch (ex) {\r\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\r\n    // This error code indicates that the chain has not been added to MetaMask.\r\n    // 4001 error means user has denied the request\r\n    // If the error code is not 4001, then we need to add the network\r\n    if (ex.code !== 4001) {\r\n      return await addNetwork(NETWORK_METADATA[chainId]);\r\n    }\r\n\r\n    console.error(\"error\", ex);\r\n  }\r\n};\r\n\r\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\r\n  const fn = async () => {\r\n    const walletConnect = getWalletConnectConnector();\r\n    setActivatingConnector(walletConnect);\r\n    activate(walletConnect, (ex) => {\r\n      if (ex instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\"Unsupported chain. Switch to Arbitrum network on your wallet and try again\");\r\n        console.warn(ex);\r\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\r\n        helperToast.error(ex.message);\r\n        console.warn(ex);\r\n      }\r\n      clearWalletConnectData();\r\n      deactivate();\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport const getInjectedHandler = (activate) => {\r\n  const fn = async () => {\r\n    activate(getInjectedConnector(), (e) => {\r\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n\r\n      if (e instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\r\n          <div>\r\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\r\n            <br />\r\n            <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\r\n              Switch to {getChainName(chainId)}\r\n            </div>\r\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\r\n              Add {getChainName(chainId)}\r\n            </div>\r\n          </div>\r\n        );\r\n        return;\r\n      }\r\n      const errString = e.message ?? e.toString();\r\n      helperToast.error(errString);\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport function isMobileDevice(navigator) {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress) {\r\n  if (!indexPrices) {\r\n    // console.log('return');\r\n    return;\r\n  }\r\n\r\n  // console.log('-------------------WENT THROUGH')\r\n\r\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\r\n\r\n  const indexPrice = indexPrices[tokenAddress];\r\n  if (!indexPrice) {\r\n    return;\r\n  }\r\n\r\n  const indexPriceBn = bigNumberify(indexPrice);\r\n  if (indexPriceBn.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  const spread = token.maxPrice.sub(token.minPrice);\r\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice.add(token.minPrice).div(2));\r\n\r\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\r\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\r\n    if (indexPriceBn.gt(token.minPrimaryPrice)) {\r\n      token.maxPrice = indexPriceBn;\r\n    } else {\r\n      token.minPrice = indexPriceBn;\r\n    }\r\n    return;\r\n  }\r\n\r\n  const halfSpreadBps = spreadBps.div(2).toNumber();\r\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n}\r\n\r\nexport function getInfoTokens(\r\n  tokens,\r\n  tokenBalances,\r\n  whitelistedTokens,\r\n  vaultTokenInfo,\r\n  fundingRateInfo,\r\n  vaultPropsLength,\r\n  indexPrices,\r\n  nativeTokenAddress\r\n) {\r\n  if (!vaultPropsLength) {\r\n    vaultPropsLength = 15;\r\n  }\r\n  const fundingRatePropsLength = 2;\r\n  const infoTokens = {};\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(tokens[i]));\r\n    if (tokenBalances) {\r\n      token.balance = tokenBalances[i];\r\n    }\r\n    if (token.address === USDG_ADDRESS) {\r\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\r\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\r\n    }\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i]));\r\n    if (vaultTokenInfo) {\r\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\r\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\r\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\r\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\r\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\r\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\r\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\r\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\r\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\r\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\r\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\r\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\r\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\r\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\r\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\r\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\r\n\r\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\r\n      token.contractMinPrice = token.minPrice;\r\n      token.contractMaxPrice = token.maxPrice;\r\n\r\n      token.maxAvailableShort = bigNumberify(0);\r\n      token.hasMaxAvailableShort = false;\r\n      if (token.maxGlobalShortSize.gt(0)) {\r\n        token.hasMaxAvailableShort = true;\r\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\r\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\r\n        }\r\n      }\r\n\r\n      if (token.maxUsdgAmount.eq(0)) {\r\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\r\n      }\r\n\r\n      token.availableUsd = token.isStable\r\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\r\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\r\n\r\n      token.maxAvailableLong = bigNumberify(0);\r\n      token.hasMaxAvailableLong = false;\r\n      if (token.maxGlobalLongSize.gt(0)) {\r\n        token.hasMaxAvailableLong = true;\r\n\r\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\r\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\r\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\r\n        }\r\n      } else {\r\n        token.maxAvailableLong = token.availableUsd;\r\n      }\r\n\r\n      token.maxLongCapacity =\r\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\r\n          ? token.maxGlobalLongSize\r\n          : token.availableUsd.add(token.guaranteedUsd);\r\n\r\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\r\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\r\n\r\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\r\n    }\r\n\r\n    if (fundingRateInfo) {\r\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\r\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\r\n    }\r\n\r\n    if (infoTokens[token.address]) {\r\n      token.balance = infoTokens[token.address].balance;\r\n    }\r\n\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  return infoTokens;\r\n}\r\n\r\nexport const CHART_PERIODS = {\r\n  \"5m\": 60 * 5,\r\n  \"15m\": 60 * 15,\r\n  \"1h\": 60 * 60,\r\n  \"4h\": 60 * 60 * 4,\r\n  \"1d\": 60 * 60 * 24,\r\n};\r\n\r\nexport function getTotalVolumeSum(volumes) {\r\n  if (!volumes || volumes.length === 0) {\r\n    return;\r\n  }\r\n\r\n  let volume = bigNumberify(0);\r\n  for (let i = 0; i < volumes.length; i++) {\r\n    volume = volume.add(volumes[i].data.volume);\r\n  }\r\n\r\n  return volume;\r\n}\r\n\r\nexport function getBalanceAndSupplyData(balances) {\r\n  if (!balances || balances.length === 0) {\r\n    return {};\r\n  }\r\n\r\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\r\n  const balanceData = {};\r\n  const supplyData = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    balanceData[key] = balances[i * propsLength];\r\n    supplyData[key] = balances[i * propsLength + 1];\r\n  }\r\n\r\n  return { balanceData, supplyData };\r\n}\r\n\r\nexport function getDepositBalanceData(depositBalances) {\r\n  if (!depositBalances || depositBalances.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\r\n    \"gmxInStakedGmx\",\r\n    \"esGmxInStakedGmx\",\r\n    \"stakedGmxInBonusGmx\",\r\n    \"bonusGmxInFeeGmx\",\r\n    \"bnGmxInFeeGmx\",\r\n    \"glpInStakedGlp\",\r\n  ];\r\n  const data = {};\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = depositBalances[i];\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getVestingData(vestingInfo) {\r\n  if (!vestingInfo || vestingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"gmxVester\", \"glpVester\"];\r\n  const data = {};\r\n  const propsLength = 7;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      pairAmount: vestingInfo[i * propsLength],\r\n      vestedAmount: vestingInfo[i * propsLength + 1],\r\n      escrowedBalance: vestingInfo[i * propsLength + 2],\r\n      claimedAmounts: vestingInfo[i * propsLength + 3],\r\n      claimable: vestingInfo[i * propsLength + 4],\r\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\r\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\r\n    };\r\n\r\n    data[key + \"PairAmount\"] = data[key].pairAmount;\r\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\r\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\r\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\r\n    data[key + \"Claimable\"] = data[key].claimable;\r\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\r\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getStakingData(stakingInfo) {\r\n  if (!stakingInfo || stakingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\r\n  const data = {};\r\n  const propsLength = 5;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      claimable: stakingInfo[i * propsLength],\r\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\r\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\r\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\r\n      totalSupply: stakingInfo[i * propsLength + 4],\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getProcessedData(\r\n  balanceData,\r\n  supplyData,\r\n  depositBalanceData,\r\n  stakingData,\r\n  vestingData,\r\n  aum,\r\n  nativeTokenPrice,\r\n  stakedGmxSupply,\r\n  gmxPrice,\r\n  gmxSupply\r\n) {\r\n  if (\r\n    !balanceData ||\r\n    !supplyData ||\r\n    !depositBalanceData ||\r\n    !stakingData ||\r\n    !vestingData ||\r\n    !aum ||\r\n    !nativeTokenPrice ||\r\n    !stakedGmxSupply ||\r\n    !gmxPrice ||\r\n    !gmxSupply\r\n  ) {\r\n    return {};\r\n  }\r\n\r\n  const data = {};\r\n\r\n  data.gmxBalance = balanceData.gmx;\r\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.gmxSupply = bigNumberify(gmxSupply);\r\n\r\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedGmxSupply = stakedGmxSupply;\r\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\r\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxBalance = balanceData.esGmx;\r\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\r\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\r\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\r\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\r\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\r\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\r\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\r\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\r\n\r\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\r\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.boostBasisPoints = bigNumberify(0);\r\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\r\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\r\n  }\r\n\r\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForEsGmx =\r\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\r\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForNativeToken =\r\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\r\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\r\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\r\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\r\n\r\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\r\n\r\n  data.glpSupply = supplyData.glp;\r\n  data.glpPrice =\r\n    data.glpSupply && data.glpSupply.gt(0)\r\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\r\n      : bigNumberify(0);\r\n\r\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\r\n\r\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\r\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\r\n\r\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\r\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\r\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForEsGmx =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForNativeToken =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\r\n\r\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\r\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\r\n\r\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\r\n  data.glpVesterRewards = vestingData.glpVester.claimable;\r\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\r\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\r\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\r\n\r\n  return data;\r\n}\r\n\r\nexport async function addTokenToMetamask(token) {\r\n  try {\r\n    const wasAdded = await window.ethereum.request({\r\n      method: \"wallet_watchAsset\",\r\n      params: {\r\n        type: \"ERC20\",\r\n        options: {\r\n          address: token.address,\r\n          symbol: token.symbol,\r\n          decimals: token.decimals,\r\n          image: token.imageUrl,\r\n        },\r\n      },\r\n    });\r\n    if (wasAdded) {\r\n      // https://github.com/MetaMask/metamask-extension/issues/11377\r\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport function sleep(ms) {\r\n  return new Promise((resolve) => resolve(), ms);\r\n}\r\n\r\nexport function getPageTitle(data) {\r\n  return `${data} | DeDeLend`;\r\n}\r\n\r\nexport function isHashZero(value) {\r\n  return value === ethers.constants.HashZero;\r\n}\r\nexport function isAddressZero(value) {\r\n  return value === ethers.constants.AddressZero;\r\n}\r\n\r\nexport function useDebounce(value, delay) {\r\n  // State and setters for debounced value\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(\r\n    () => {\r\n      // Update debounced value after delay\r\n      const handler = setTimeout(() => {\r\n        setDebouncedValue(value);\r\n      }, delay);\r\n      // Cancel the timeout if value changes (also on delay change or unmount)\r\n      // This is how we prevent debounced value from updating if value is changed ...\r\n      // .. within the delay period. Timeout gets cleared and restarted.\r\n      return () => {\r\n        clearTimeout(handler);\r\n      };\r\n    },\r\n    [value, delay] // Only re-call effect if value or delay changes\r\n  );\r\n  return debouncedValue;\r\n}\r\n\r\nexport function isDevelopment() {\r\n  return !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\");\r\n}\r\n\r\nexport function isLocal() {\r\n  return window.location.host?.includes(\"localhost\");\r\n}\r\n\r\nexport function getHomeUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3010\";\r\n  }\r\n\r\n  return \"https://gmx.io\";\r\n}\r\n\r\nexport function getAppBaseUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#\";\r\n}\r\n\r\nexport function getRootShareApiUrl() {\r\n  if (isLocal()) {\r\n    return \"https://gmxs.vercel.app\";\r\n  }\r\n\r\n  return \"https://share.gmx.io\";\r\n}\r\n\r\nexport function getTradePageUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#/trade\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#/trade\";\r\n}\r\n\r\nexport function importImage(name) {\r\n  let tokenImage = null;\r\n  try {\r\n    tokenImage = require(\"../img/\" + name);\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n  return tokenImage && tokenImage.default;\r\n}\r\n\r\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\r\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\r\n  if (text.length > 0) {\r\n    finalURL += encodeURIComponent(text.replace(/[\\r\\n]+/g, \" \"))\r\n      .replace(/\\*%7C/g, \"*|URL:\")\r\n      .replace(/%7C\\*/g, \"|*\");\r\n\r\n    if (hashtag.length > 0) {\r\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\r\n    }\r\n    if (url.length > 0) {\r\n      finalURL += \"&url=\" + encodeURIComponent(url);\r\n    }\r\n  }\r\n  return finalURL;\r\n}\r\n\r\nexport function isValidTimestamp(timestamp) {\r\n  return new Date(timestamp).getTime() > 0;\r\n}\r\n\r\nexport function getPositionForOrder(account, order, positionsMap) {\r\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\r\n  const position = positionsMap[key];\r\n  return position && position.size && position.size.gt(0) ? position : null;\r\n}\r\n\r\nexport function getOrderError(account, order, positionsMap, position) {\r\n  if (order.type !== DECREASE) {\r\n    return;\r\n  }\r\n\r\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\r\n\r\n  if (!positionForOrder) {\r\n    return \"No open position, order cannot be executed unless a position is opened\";\r\n  }\r\n  if (positionForOrder.size.lt(order.sizeDelta)) {\r\n    return \"Order size is bigger than position, will only be executable if position increases\";\r\n  }\r\n\r\n  if (positionForOrder.size.gt(order.sizeDelta)) {\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\r\n      return \"Order cannot be executed as it would reduce the position's leverage below 1\";\r\n    }\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\r\n      return \"Order cannot be executed as the remaining position would be smaller than $5.00\";\r\n    }\r\n  }\r\n}\r\n\r\nexport function arrayURLFetcher(...urlArr) {\r\n  const fetcher = (url) => fetch(url).then((res) => res.json());\r\n  return Promise.all(urlArr.map(fetcher));\r\n}\r\n\r\nexport function shouldShowRedirectModal(timestamp) {\r\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\r\n  const expiryTime = timestamp + thirtyDays;\r\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\r\n}\r\n","import { ethers } from 'ethers';\r\nimport _DDL_POOL from '../../deployments/arbitrum_ddl/DDL_POOL.json'\r\nimport _USDC from \"../../deployments/arbitrum_ddl/USDC.json\";\r\nimport { signer } from './providers.js';\r\nimport { executePromise } from './utils';\r\nimport _OperationalTreasury from '../../deployments/options/OperationalTreasury.json';\r\nimport _HegicStrategy_ABI from '../../deployments/options/HegicStrategy_ABI.json';\r\nimport _PriceCalculator_ABI from '../../deployments/options/PriceCalculator_ABI.json';\r\nimport _HEGOPS from '../../deployments/options/HEGOPS.json';\r\nimport _DDL_TakeProfit_Hegic from '../../deployments/options/DDL_TakeProfit_Hegic.json';\r\nimport _DDL_TakeProfit_Lyra_ETH from '../../deployments/options/DDL_TakeProfit_Lyra_ETH.json';\r\nimport _DDL_TakeProfit_Lyra_BTC from '../../deployments/options/DDL_TakeProfit_Lyra_BTC.json';\r\nimport _Lyra_OptionToken_ETH from '../../deployments/options/Lyra_OptionToken_ETH.json';\r\nimport _Lyra_OptionToken_BTC from '../../deployments/options/Lyra_OptionToken_BTC.json';\r\nimport _BuilderOpen from '../../deployments/builder/optionBuilderOpen.json';\r\nimport { CALL, PUT } from '../../views/options/lib/legacyOptions';\r\nimport _Chai_ABI from '../../deployments/options/Chai_ABI.json';\r\n\r\n// Options Contracts\r\nexport const DDL_POOL = new ethers.Contract(_DDL_POOL.address, _DDL_POOL.abi, signer);\r\n\r\nexport const USDC = new ethers.Contract(_USDC.address, _USDC.abi, signer);\r\nexport const approveUSDC = (spender, setIsLoading, cb) => {\r\n  executePromise(USDC.approve, [spender, ethers.constants.MaxUint256], \"USDC approved!\", setIsLoading, cb);\r\n}\r\nexport const getIsUsdcApproved = async (walletAddress, spender, amount = 1e15) => {\r\n  const allowance = await USDC.allowance(walletAddress, spender);\r\n  return allowance.gt(amount);\r\n}\r\n\r\n\r\n// Hegic\r\nexport const OperationalTreasury = _OperationalTreasury.address;\r\nexport const OperationalTreasury_ABI = _OperationalTreasury.abi;\r\n\r\nexport const HEGOPS = _HEGOPS.address;\r\nexport const HEGOPS_ABI = _HEGOPS.abi;\r\n\r\nexport const HEGIC_STRATEGIES = {\r\n\tshort: {\r\n\t\tHegicStrategy_CALL_100_BTC_1: '0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539',\r\n    HegicStrategy_CALL_100_ETH_1: '0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60',\r\n    HegicStrategy_CALL_110_BTC_1: '0x377191F680b52ce3d0060388fEF01be7ef68e3d5',\r\n    HegicStrategy_CALL_110_ETH_1: '0xF48f571DdD77dba9Ae10fefF6df04484685091D9',\r\n    HegicStrategy_CALL_120_BTC_1: '0x8Fb8529695237D4004cffb21499e7E49E982786a',\r\n    HegicStrategy_CALL_120_ETH_1: '0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE',\r\n    HegicStrategy_CALL_130_BTC_1: '0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB',\r\n    HegicStrategy_CALL_130_ETH_1: '0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C',\r\n\t\tHegicStrategy_PUT_100_BTC_1: '0xA8DF600289bEc25602741756f55f27ffFDAB69a6',\r\n    HegicStrategy_PUT_100_ETH_1: '0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa',\r\n    HegicStrategy_PUT_70_BTC_1: '0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0',\r\n    HegicStrategy_PUT_70_ETH_1: '0x35EF16F3c329a54050Ca120145340dfC2b4F9541',\r\n    HegicStrategy_PUT_80_BTC_1: '0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1',\r\n    HegicStrategy_PUT_80_ETH_1: '0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465',\r\n    HegicStrategy_PUT_90_BTC_1: '0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c',\r\n    HegicStrategy_PUT_90_ETH_1: '0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881',\r\n    \"HegicStrategy_CALL-SPREAD_10_BTC_1\": '0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A',\r\n    \"HegicStrategy_CALL-SPREAD_10_ETH_1\": '0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE',\r\n    \"HegicStrategy_CALL-SPREAD_20_BTC_1\": '0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107',\r\n    \"HegicStrategy_CALL-SPREAD_20_ETH_1\": '0x4490ad3c0c1A61061E88a3eaD661bFe16225A370',\r\n    \"HegicStrategy_CALL-SPREAD_30_BTC_1\": '0xc822F483dAE467721123eA60D3D233e7ac68802f',\r\n    \"HegicStrategy_CALL-SPREAD_30_ETH_1\": '0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1',\r\n    \"HegicStrategy_PUT-SPREAD_10_BTC_1\": '0x45b9D63F1998ca31151981792849a64342C88631',\r\n    \"HegicStrategy_PUT-SPREAD_10_ETH_1\": '0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4',\r\n    \"HegicStrategy_PUT-SPREAD_20_BTC_1\": '0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D',\r\n    \"HegicStrategy_PUT-SPREAD_20_ETH_1\": '0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6',\r\n    \"HegicStrategy_PUT-SPREAD_30_BTC_1\": '0x71D89f44C71252f319Cd9652f7886c3834685A58',\r\n    \"HegicStrategy_PUT-SPREAD_30_ETH_1\": '0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752',\r\n\r\n\t},\r\n\tmedShort: {\r\n\t\tHegicStrategy_CALL_100_BTC_2: '0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3',\r\n    HegicStrategy_CALL_100_ETH_2: '0x6418C3514923a6464A26A2ffA5f17bF1efC96a21',\r\n    HegicStrategy_CALL_110_BTC_2: '0xaFA483B18FE66251C8306C7018028f674F653012',\r\n    HegicStrategy_CALL_110_ETH_2: '0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E',\r\n    HegicStrategy_CALL_120_BTC_2: '0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45',\r\n    HegicStrategy_CALL_120_ETH_2: '0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2',\r\n    HegicStrategy_CALL_130_BTC_2: '0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc',\r\n    HegicStrategy_CALL_130_ETH_2: '0xc00103524932d86770d4F671107b0E170BD0fe6c',\r\n\t\tHegicStrategy_PUT_100_BTC_2: '0xE0f083fd87ebAEBFCfa8236098048105d32639E4',\r\n    HegicStrategy_PUT_100_ETH_2: '0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e',\r\n    HegicStrategy_PUT_70_BTC_2: '0x52442a8C632D4c998A8BDBf44A70481AA5599b0e',\r\n    HegicStrategy_PUT_70_ETH_2: '0x48EcF46Aa51992a064aB172439ABFE182F39b478',\r\n    HegicStrategy_PUT_80_BTC_2: '0xb02343D33d2447870E38b3452Ef59d0De7b3289d',\r\n    HegicStrategy_PUT_80_ETH_2: '0xb58ccd922B57422d0497904B7D9fccB922b8aaDf',\r\n    HegicStrategy_PUT_90_BTC_2: '0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227',\r\n    HegicStrategy_PUT_90_ETH_2: '0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752',\r\n    \"HegicStrategy_CALL-SPREAD_10_BTC_2\": '0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f',\r\n    \"HegicStrategy_CALL-SPREAD_10_ETH_2\": '0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6',\r\n    \"HegicStrategy_CALL-SPREAD_20_BTC_2\": '0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7',\r\n    \"HegicStrategy_CALL-SPREAD_20_ETH_2\": '0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E',\r\n    \"HegicStrategy_CALL-SPREAD_30_BTC_2\": '0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0',\r\n    \"HegicStrategy_CALL-SPREAD_30_ETH_2\": '0x24db3145F45aAF2c54f586C66b801c42c8658671',\r\n    \"HegicStrategy_PUT-SPREAD_10_BTC_2\": '0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693',\r\n    \"HegicStrategy_PUT-SPREAD_10_ETH_2\": '0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08',\r\n    \"HegicStrategy_PUT-SPREAD_20_BTC_2\": '0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8',\r\n    \"HegicStrategy_PUT-SPREAD_20_ETH_2\": '0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD',\r\n    \"HegicStrategy_PUT-SPREAD_30_BTC_2\": '0x01381e0EDdB57678257179d2cB472C3e8e54202c',\r\n    \"HegicStrategy_PUT-SPREAD_30_ETH_2\": '0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45',\r\n\t},\r\n\tmedLong: {\r\n\t\tHegicStrategy_CALL_100_BTC_3: '0x21a4b4441AA957735902507A72A58A3a1Caaa0dC',\r\n    HegicStrategy_CALL_100_ETH_3: '0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C',\r\n    HegicStrategy_CALL_110_BTC_3: '0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15',\r\n    HegicStrategy_CALL_110_ETH_3: '0x05458B7d9531EaD242290De60bEaa3cC10C87560',\r\n    HegicStrategy_CALL_120_BTC_3: '0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374',\r\n    HegicStrategy_CALL_120_ETH_3: '0x79F87E88088293FE34dEf4eBe71fBFa5367220B4',\r\n    HegicStrategy_CALL_130_BTC_3: '0x27806482457FC98F9C2e724b5E604C66BB5ba121',\r\n    HegicStrategy_CALL_130_ETH_3: '0xae2F4e15564995af79b7dd2378B2680f7Facc342',\r\n    HegicStrategy_PUT_100_BTC_3: '0x035b965c5B7bC20E00358ACF1794d2248eA1932A',\r\n    HegicStrategy_PUT_100_ETH_3: '0xf711D0BC60F37cA28845BA623ccd9C635E5073A1',\r\n    HegicStrategy_PUT_70_BTC_3: '0x55c4532e1790592120b7b27436842caD203E7CD3',\r\n    HegicStrategy_PUT_70_ETH_3: '0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C',\r\n    HegicStrategy_PUT_80_BTC_3: '0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af',\r\n    HegicStrategy_PUT_80_ETH_3: '0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421',\r\n    HegicStrategy_PUT_90_BTC_3: '0xE56BEAfAe4731A21eF83fe81F63b95055e81E374',\r\n    HegicStrategy_PUT_90_ETH_3: '0x33a4B4403B8C6349371CbDf539138D78ec0Aab66',\r\n    \"HegicStrategy_CALL-SPREAD_10_BTC_3\": '0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585',\r\n    \"HegicStrategy_CALL-SPREAD_10_ETH_3\": '0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de',\r\n    \"HegicStrategy_CALL-SPREAD_20_BTC_3\": '0x324be893029D982c187F0333E7aa1d44365d2676',\r\n    \"HegicStrategy_CALL-SPREAD_20_ETH_3\": '0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1',\r\n    \"HegicStrategy_CALL-SPREAD_30_BTC_3\": '0x530289340C6d2Ef02140054Ae7F91C293fd586CF',\r\n    \"HegicStrategy_CALL-SPREAD_30_ETH_3\": '0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2',\r\n    \"HegicStrategy_PUT-SPREAD_10_BTC_3\": '0x7267091cFc9825a4A1dF36C26d412FeFD788d935',\r\n    \"HegicStrategy_PUT-SPREAD_10_ETH_3\": '0x2B93645f310E016c1a6d1738DCec0f18621F71d0',\r\n    \"HegicStrategy_PUT-SPREAD_20_BTC_3\": '0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3',\r\n    \"HegicStrategy_PUT-SPREAD_20_ETH_3\": '0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b',\r\n    \"HegicStrategy_PUT-SPREAD_30_BTC_3\": '0xBa883223A1757eEB781d02C383926c308d4843f4',\r\n    \"HegicStrategy_PUT-SPREAD_30_ETH_3\": '0xf87C8C7587055FA62082E8ed447fe68D98805fF2',\r\n\t},\r\n\tlong: {\r\n\t\tHegicStrategy_CALL_100_BTC_4: '0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e',\r\n    HegicStrategy_CALL_100_ETH_4: '0x2727B807D22fCAeB7F900F49894054Ed92b9125B',\r\n    HegicStrategy_CALL_110_BTC_4: '0x14d25367102A931E2E2F587F4ED94087dc585fd0',\r\n    HegicStrategy_CALL_110_ETH_4: '0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231',\r\n    HegicStrategy_CALL_120_BTC_4: '0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73',\r\n    HegicStrategy_CALL_120_ETH_4: '0xB7b36483B256290435a060805bdF15B3f2b122eb',\r\n    HegicStrategy_CALL_130_BTC_4: '0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91',\r\n    HegicStrategy_CALL_130_ETH_4: '0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4',\r\n    HegicStrategy_PUT_100_BTC_4: '0xEd46f602212d1CbaCd699C876b4A49761421bf97',\r\n    HegicStrategy_PUT_100_ETH_4: '0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992',\r\n    HegicStrategy_PUT_70_BTC_4: '0xa26541ccE18CcC6E21360562d34044ceb3B5A40e',\r\n    HegicStrategy_PUT_70_ETH_4: '0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C',\r\n    HegicStrategy_PUT_80_BTC_4: '0xFD203c73851986ad7e7B99457AeafF3d98e76228',\r\n    HegicStrategy_PUT_80_ETH_4: '0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc',\r\n    HegicStrategy_PUT_90_BTC_4: '0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1',\r\n    HegicStrategy_PUT_90_ETH_4: '0x3031EA515c2274024D93A8D3BfA91ce920E1192E',\r\n    \"HegicStrategy_CALL-SPREAD_10_BTC_4\": '0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6',\r\n    \"HegicStrategy_CALL-SPREAD_10_ETH_4\": '0xCe5e136688A1553C67b3B39Ff5366595dD0F771E',\r\n    \"HegicStrategy_CALL-SPREAD_20_BTC_4\": '0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3',\r\n    \"HegicStrategy_CALL-SPREAD_20_ETH_4\": '0xe3F646CB987a9d16eb71B8d0883744e55c95862a',\r\n    \"HegicStrategy_CALL-SPREAD_30_BTC_4\": '0x223b806Bab0CA844a91b247fE0Ba179E11EAA728',\r\n    \"HegicStrategy_CALL-SPREAD_30_ETH_4\": '0x199DB958f00F150438E5b9276ff30617D3f83ebF',\r\n    \"HegicStrategy_PUT-SPREAD_10_BTC_4\": '0x66F54921b32cCA36767D2C272Dda64D5152B92C4',\r\n    \"HegicStrategy_PUT-SPREAD_10_ETH_4\": '0xfcd40dDe82b699D455B3D073196d580227C2Fba6',\r\n    \"HegicStrategy_PUT-SPREAD_20_BTC_4\": '0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1',\r\n    \"HegicStrategy_PUT-SPREAD_20_ETH_4\": '0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB',\r\n    \"HegicStrategy_PUT-SPREAD_30_BTC_4\": '0x6D79b82701e4017887d499Ba131FD336ceA6A4CC',\r\n    \"HegicStrategy_PUT-SPREAD_30_ETH_4\": '0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA',\r\n\t}\r\n}\r\nexport const PRICE_CALCULATORS = {\r\n  PriceCalculator_PUT_100_BTC: '0x4567600c2c813322F0CBb358a8d083296A7eEA37',\r\n  PriceCalculator_PUT_100_ETH: '0xB72FC913e45522cD721252476fEfB7F50a65E23A',\r\n  PriceCalculator_PUT_70_BTC: '0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898',\r\n  PriceCalculator_PUT_70_ETH: '0xf3625e26cb920f762dEC8DB4fE4845E9384313C0',\r\n  PriceCalculator_PUT_80_BTC: '0x9C3BBe90191F8311939A34737c02A6B49e27caA5',\r\n  PriceCalculator_PUT_80_ETH: '0x58051Cb78094551afC202C50085B13bF00BF624E',\r\n  PriceCalculator_PUT_90_BTC: '0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3',\r\n  PriceCalculator_PUT_90_ETH: '0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4',\r\n  PriceCalculator_CALL_100_BTC: '0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F',\r\n  PriceCalculator_CALL_100_ETH: '0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1',\r\n  PriceCalculator_CALL_110_BTC: '0x04BFC83f6277cf50dFB032EFd348316aACbD7863',\r\n  PriceCalculator_CALL_110_ETH: '0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485',\r\n  PriceCalculator_CALL_120_BTC: '0x965Ded687bc0Da3388c6925e0Eb330bD44629B77',\r\n  PriceCalculator_CALL_120_ETH: '0x321F8A71e8268f50eBd2f748D524E7750AD70798',\r\n  PriceCalculator_CALL_130_BTC: '0x4b350b7457b54C5A76828f81472f2719D801D0D5',\r\n  PriceCalculator_CALL_130_ETH: '0xffdc9da896d3301DE596b16a389138B70b1CBAdb',\r\n  \"PriceCalculator_CALL-SPREAD_10_BTC\": '0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2',\r\n  \"PriceCalculator_CALL-SPREAD_10_ETH\": '0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f',\r\n  \"PriceCalculator_CALL-SPREAD_20_BTC\": '0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9',\r\n  \"PriceCalculator_CALL-SPREAD_20_ETH\": '0x8C335E897B04B2Ca569Ec733f6242cDe33917094',\r\n  \"PriceCalculator_CALL-SPREAD_30_BTC\": '0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5',\r\n  \"PriceCalculator_CALL-SPREAD_30_ETH\": '0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2',\r\n  \"PriceCalculator_PUT-SPREAD_10_BTC\": '0xa4A32102a2c1d3Bf01A73B66571B440795835ff5',\r\n  \"PriceCalculator_PUT-SPREAD_10_ETH\": '0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B',\r\n  \"PriceCalculator_PUT-SPREAD_20_BTC\": '0x0cC3559beCa7bB605348B1a7B4D90963672C880a',\r\n  \"PriceCalculator_PUT-SPREAD_20_ETH\": '0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534',\r\n  \"PriceCalculator_PUT-SPREAD_30_BTC\": '0x4CE72803543da3f563Ef76592945C57FBE7fce38',\r\n  \"PriceCalculator_PUT-SPREAD_30_ETH\": '0xDB044975100aE87d0eEDd804D9E6083a8406fdAe',\r\n}\r\nexport const HegicStrategy_ABI = _HegicStrategy_ABI;\r\nexport const PriceCalculator_ABI = _PriceCalculator_ABI;\r\n\r\nexport const HEGIC_BUY_URLS = {\r\n  PUT_100_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-100&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_100_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-100&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_70_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-70&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_70_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-70&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_80_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-80&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_80_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-80&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_90_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-90&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_90_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-90&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n\r\n  CALL_100_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-100&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_100_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-100&&strategyName=bull-call&asset=ETH\",\r\n  CALL_110_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-110&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_110_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-110&&strategyName=bull-call&asset=ETH\",\r\n  CALL_120_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-120&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_120_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-120&&strategyName=bull-call&asset=ETH\",\r\n  CALL_130_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-130&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_130_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-130&&strategyName=bull-call&asset=ETH\",\r\n}\r\n\r\nexport const HEGIC_SENTIMENT_LABELS = {\r\n  \"CALL\": CALL,\r\n  \"PUT\": PUT,\r\n  \"CALL-SPREAD\": \"Bull Call Spread\",\r\n  \"PUT-SPREAD\": \"Bear Put Spread\"\r\n}\r\n\r\n// Chai\r\nexport const CHAI_CONTRACT_ETH = '0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612';\r\nexport const CHAI_CONTRACT_BTC = '0x6ce185860a4963106506C203335A2910413708e9';\r\nexport const Chai_ABI = _Chai_ABI;\r\n\r\n\r\n// Lyra\r\nexport const LyraQuoter = '0x23236b4c7772636b5224df56Be8168A2f42df31C';\r\n\r\n// Premia\r\nexport const PremiaPools = {\r\n  ETH: \"0xE5DbC4EDf467B609A063c7ea7fAb976C6b9BAa1a\",\r\n  BTC: \"0xb5fE3bc2eF4c34cC233922dfF2Fcb1B1BF89A38E\"\r\n}\r\n\r\n// DDL Options\r\n// Hegic\r\nexport const DDL_TP_Hegic_addr = _DDL_TakeProfit_Hegic.address;\r\nexport const DDL_TP_Hegic_ABI = _DDL_TakeProfit_Hegic.abi;\r\n// Lyra\r\nexport const DDL_TP_Lyra_ETH_addr = _DDL_TakeProfit_Lyra_ETH.address;\r\nexport const DDL_TP_Lyra_BTC_addr = _DDL_TakeProfit_Lyra_BTC.address;\r\nexport const DDL_TP_Lyra_ABI = _DDL_TakeProfit_Lyra_ETH.abi;\r\n\r\nexport const getTPMethod = (name, market) => {\r\n  switch(market) {\r\n    case \"Hegic\":\r\n      return `${name}TakeProfit`;\r\n    case \"Lyra\":\r\n      return `${name}StopOrder`;\r\n  }\r\n}\r\nexport const getTPContract = (market, token, signer) => {\r\n  switch(market) {\r\n    case \"Hegic\":\r\n      return new ethers.Contract(DDL_TP_Hegic_addr, DDL_TP_Hegic_ABI, signer);\r\n    case \"Lyra\":\r\n      if (token === \"ETH\") {\r\n        return new ethers.Contract(DDL_TP_Lyra_ETH_addr, DDL_TP_Lyra_ABI, signer);\r\n      }\r\n      if (token === \"BTC\") {\r\n        return new ethers.Contract(DDL_TP_Lyra_BTC_addr, DDL_TP_Lyra_ABI, signer);\r\n      }\r\n      break;\r\n    case \"Lyra_old\":\r\n      return new ethers.Contract(_DDL_TakeProfit_Lyra_ETH.address_old, DDL_TP_Lyra_ABI, signer);\r\n  }\r\n}\r\nexport const getTPApproveContract = (market, token, signer) => {\r\n  switch(market) {\r\n    case \"Hegic\":\r\n      return new ethers.Contract(HEGOPS, HEGOPS_ABI, signer);\r\n    case \"Lyra\":\r\n      if (token === \"ETH\") {\r\n        return new ethers.Contract(_Lyra_OptionToken_ETH.address, _Lyra_OptionToken_ETH.abi, signer);\r\n      }\r\n      if (token === \"BTC\") {\r\n        return new ethers.Contract(_Lyra_OptionToken_BTC.address, _Lyra_OptionToken_BTC.abi, signer);\r\n      }\r\n  }\r\n}\r\n\r\n\r\n// Options Builder\r\nexport const builderOpen = _BuilderOpen.address;\r\nexport const builderOpen_ABI = _BuilderOpen.abi;\r\nexport const builderOpenContract = new ethers.Contract(builderOpen, builderOpen_ABI, signer);","import React, { useState } from 'react';\r\nimport './Selector.scss';\r\nimport cx from 'classnames';\r\n\r\nconst Selector = (props) => {\r\n\tconst {\r\n\t\tclassName,\r\n\t\titems,\r\n\t\tchosenItem,\r\n\t\tdisabled,\r\n\t\tdefaultText,\r\n\t\tonSelect,\r\n\t\tonChange,\r\n\t\trenderOnHover,\r\n\t\ttitleIcon,\r\n\t\ticonText,\r\n\t\thideChosenItem,\r\n\t\tformatFn = (item) => item,\r\n\t\tsortFn = (items) => items,\r\n\t\tisComplex,\r\n\t\tcomplexCols = [],\r\n\t\trenderChosenItem,\r\n\t} = props;\r\n\t\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst cls = cx(\"Selector\", className, isOpen && 'open', disabled && 'disabled', isComplex && 'complex');\r\n\r\n\tconst openSelector = (e) => {\r\n\t\tif (disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isOpen) {\r\n\t\t\tcloseSelector();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\tdocument.addEventListener('click', closeSelector);\r\n\t\tsetIsOpen(true);\r\n\t}\r\n\tconst closeSelector = () => {\r\n\t\tdocument.removeEventListener('click', closeSelector);\r\n\t\tsetIsOpen(false);\r\n\t}\r\n\r\n\tlet chosenItemIcon;\r\n\ttry {\r\n\t\tchosenItemIcon = require(`../../../img/icon-${chosenItem}.svg`).default;\r\n\t} catch(e) {}\r\n\tconst chosenItemLabel = chosenItem && formatFn(chosenItem, true);\r\n\r\n\r\n\tconst renderComplexListFn = () => {\r\n\t\tif (!items) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst nodes = [];\r\n\t\tObject.keys(items).forEach(group => {\r\n\t\t\tconst headerNode = (\r\n\t\t\t\t<div className=\"Selector__item-header\" onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t{[group, ...complexCols].map(col => {\r\n\t\t\t\t\t\tlet icon;\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\ticon = require(`../../../img/icon-${col}.svg`).default;\r\n\t\t\t\t\t\t} catch(e) {}\r\n\r\n\t\t\t\t\t\tif (icon) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<img src={icon} alt={`${group} icon`} key={col} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn col;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t\tif (items[group].length) {\r\n\t\t\t\tnodes.push(headerNode);\r\n\t\t\t}\r\n\t\t\tsortFn(items[group]).forEach(itemArr => {\r\n\t\t\t\tlet isChosen = false;\r\n\t\t\t\tif (itemArr[0] === chosenItem) {\r\n\t\t\t\t\tif (hideChosenItem) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisChosen = true;\r\n\t\t\t\t}\r\n\t\t\t\tconst itemNode = (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tkey={itemArr[0]}\r\n\t\t\t\t\t\tclassName={cx(\"Selector__item\", \"icon-container\", isChosen && \"chosen\")}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (isChosen) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonSelect(itemArr[0], group);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{chosenItemIcon && (\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\titemArr[0] &&\r\n\t\t\t\t\t\t\t\t\t\trequire(`../../../img/icon-${itemArr[0]}.svg`).default\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talt={`${itemArr[0]} icon`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{itemArr.map((item, i) => {\r\n\t\t\t\t\t\t\tconst itemName = i === 0 ? formatFn(item) : item.toString();\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<span key={item}>{itemName}</span>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{renderOnHover && (\r\n\t\t\t\t\t\t\t<div className=\"Selector__hover-tip\">\r\n\t\t\t\t\t\t\t\t{renderOnHover(itemArr[0])}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t);\r\n\t\t\t\tnodes.push(itemNode);\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn nodes.map(node => node);\r\n\t}\r\n\treturn (\r\n\t\t<div className={cls}>\r\n\t\t\t<button\r\n\t\t\t\tclassName={cx(\"Selector__chosen-item\", !chosenItem && \"default-text\")}\r\n\t\t\t\tonClick={openSelector}\r\n\t\t\t>\r\n\t\t\t\t{titleIcon && (\r\n\t\t\t\t\t<div className=\"Selector__icon\">\r\n\t\t\t\t\t\t{titleIcon}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"Selector__chosen-item-info icon-container\">\r\n\t\t\t\t\t{chosenItemIcon && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={chosenItemIcon}\r\n\t\t\t\t\t\t\talt={`${chosenItem} icon`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isComplex && (chosenItem ? renderChosenItem() : defaultText)}\r\n\t\t\t\t\t{!isComplex && (chosenItemLabel ?? defaultText)}\r\n\t\t\t\t\t<img className=\"icon-down\" src={\r\n\t\t\t\t\t\trequire(`../../../img/icon-down-small-white.svg`).default\r\n\t\t\t\t\t} alt=\"chevron down\" />\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<div className=\"Selector__items\">\r\n\t\t\t\t{isComplex\r\n\t\t\t\t\t? renderComplexListFn()\r\n\t\t\t\t\t: sortFn(items).map(item => {\r\n\t\t\t\t\t\t\tlet isChosen = false;\r\n\t\t\t\t\t\t\tif (item === chosenItem) {\r\n\t\t\t\t\t\t\t\tif (hideChosenItem) {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tisChosen = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst itemName = formatFn(item);\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Selector__item\", \"icon-container\", isChosen && \"chosen\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (isChosen) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonSelect(item);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{chosenItemIcon && (\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\t\titem &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequire(`../../../img/icon-${item}.svg`).default\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\talt={`${item} icon`}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{itemName}\r\n\t\t\t\t\t\t\t\t\t{renderOnHover && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Selector__hover-tip\">\r\n\t\t\t\t\t\t\t\t\t\t\t{renderOnHover(item)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Selector;","import React, { useEffect, useMemo, useState } from \"react\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { t, Trans } from \"@lingui/macro\";\nimport Slider, { SliderTooltip } from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\nimport \"./SwapBox.scss\";\n\nimport cx from \"classnames\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { IoMdSwap } from \"react-icons/io\";\nimport { BsArrowRight } from \"react-icons/bs\";\nimport { BigNumber } from \"ethers\";\nimport { notifySuccess, errAlert } from '../../../../components/utils/notifications';\n\nimport {\n  adjustForDecimals,\n  approveTokens,\n  ARBITRUM,\n  AVALANCHE,\n  BASIS_POINTS_DIVISOR,\n  bigNumberify,\n  calculatePositionDelta,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  DUST_BNB,\n  expandDecimals,\n  formatAmount,\n  formatAmountFree,\n  getChainName,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getLeverage,\n  getLiquidationPrice,\n  getMostAbundantStableToken,\n  getNextFromAmount,\n  getNextToAmount,\n  getPositionKey,\n  getTokenInfo,\n  getUsd,\n  helperToast,\n  IS_NETWORK_DISABLED,\n  isSupportedChain,\n  isTriggerRatioInverted,\n  LEVERAGE_ORDER_OPTIONS,\n  LIMIT,\n  LONG,\n  MARGIN_FEE_BASIS_POINTS,\n  MARKET,\n  parseValue,\n  PRECISION,\n  replaceNativeTokenAddress,\n  SHORT,\n  shouldRaiseGasError,\n  STOP,\n  SWAP,\n  SWAP_OPTIONS,\n  SWAP_ORDER_OPTIONS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n  USDG_DECIMALS,\n  useLocalStorageByChainId,\n  useLocalStorageSerializeKey,\n  usePrevious,\n  MAX_ALLOWED_LEVERAGE,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport * as Api from \"../../domain/legacy\";\nimport { getContract } from \"../../config/Addresses\";\n\nimport Tab from \"../Tab/Tab\";\nimport TokenSelector from \"./TokenSelector\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport ConfirmationBox from \"./ConfirmationBox\";\n\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\nimport PositionRouter from \"../../abis/PositionRouter.json\";\nimport Router from \"../../abis/Router.json\";\nimport Token from \"../../abis/Token.json\";\nimport WETH from \"../../abis/WETH.json\";\n\nimport longImg from \"../../img/ddl/long.svg\";\nimport shortImg from \"../../img/ddl/short.svg\";\nimport swapImg from \"../../img/swap.svg\";\nimport longActiveImg from \"../../img/ddl/long_active.svg\";\nimport shortActiveImg from \"../../img/ddl/short_active.svg\";\n\nimport { useUserReferralCode } from \"../../domain/referrals\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { fetcher } from \"../../lib/contracts/fetcher\";\nimport { callContract } from \"../../lib/contracts/callContract\";\nimport icon_settings from '../../../../img/icon-settings.svg';\nimport ChooseMarketModal from './../../../../components/UI/modal/ChooseMarketModal';\nimport { separateThousands } from './../../../../components/utils/sepThousands';\nimport { floor, formatForContract } from './../../../../components/utils/math';\nimport GNS_Storage from '../../abis/GNS/GNS_Storage.json';\nimport GNS_Trading from '../../abis/GNS/GNS_Trading.json';\nimport { GNS_PAIRS, WEI_DECIMALS } from './../../lib/GNS_legacy';\nimport { DEFAULT_SLIPPAGE_AMOUNT } from './../../lib/legacy';\nimport SLTPModal from './../../../../components/UI/modal/SLTPModal';\nimport { signer } from './../../../../components/utils/providers';\nimport { USDC } from '../../../../components/utils/contracts';\nimport { marketsList } from \"../../../../components/utils/constants\";\nimport Selector from './../../../../components/UI/Selector/Selector';\n\nconst SWAP_ICONS = {\n  [LONG]: longImg,\n  [SHORT]: shortImg,\n  [SWAP]: swapImg,\n  Long_active: longActiveImg,\n  Short_active: shortActiveImg,\n};\nconst { AddressZero } = ethers.constants;\n\nconst leverageSliderHandle = (props) => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={`${value}`}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\nfunction getNextAveragePrice({ size, sizeDelta, hasProfit, delta, nextPrice, isLong }) {\n  if (!size || !sizeDelta || !delta || !nextPrice) {\n    return;\n  }\n  const nextSize = size.add(sizeDelta);\n  let divisor;\n  if (isLong) {\n    divisor = hasProfit ? nextSize.add(delta) : nextSize.sub(delta);\n  } else {\n    divisor = hasProfit ? nextSize.sub(delta) : nextSize.add(delta);\n  }\n  if (!divisor || divisor.eq(0)) {\n    return;\n  }\n  const nextAveragePrice = nextPrice.mul(nextSize).div(divisor);\n  return nextAveragePrice;\n}\n\nexport default function SwapBox(props) {\n  const {\n    positions,\n    pendingPositions,\n    setPendingPositions,\n    infoTokens,\n    active,\n    library,\n    account,\n    fromTokenAddress,\n    setFromTokenAddress,\n    toTokenAddress,\n    setToTokenAddress,\n    swapOption,\n    setSwapOption,\n    positionsMap,\n    pendingTxns,\n    setPendingTxns,\n    tokenSelection,\n    setTokenSelection,\n    setIsConfirming,\n    isConfirming,\n    isPendingConfirmation,\n    setIsPendingConfirmation,\n    flagOrdersEnabled,\n    chainId,\n    nativeTokenAddress,\n    savedSlippageAmount,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    savedIsPnlInLeverage,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPluginApproval,\n    approveOrderBook,\n    approvePositionRouter,\n    setIsWaitingForPluginApproval,\n    isWaitingForPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isPluginApproving,\n    isPositionRouterApproving,\n    savedShouldDisableValidationForTesting,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    pendingPositionsGNS,\n    setPendingPositionsGNS,\n  } = props;\n\n  \n\n  const [fromValue, setFromValue] = useState(\"\");\n  const [toValue, setToValue] = useState(\"\");\n  const [anchorOnFromAmount, setAnchorOnFromAmount] = useState(true);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [modalError, setModalError] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  const { attachedOnChain, userReferralCode } = useUserReferralCode(library, chainId, account);\n\n  const [userSlippage, setUserSlippage] = useState(DEFAULT_SLIPPAGE_AMOUNT / 100);\n  const allowedSlippage = userSlippage ? userSlippage * 100 : DEFAULT_SLIPPAGE_AMOUNT;\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  // TODO hack with useLocalStorageSerializeKey\n  const [shortCollateralAddress, setShortCollateralAddress] = useLocalStorageByChainId(\n    chainId,\n    \"Short-Collateral-Address\",\n    getTokenBySymbol(chainId, defaultCollateralSymbol).address\n  );\n  \n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n\n  const getLeaderboardLink = () => {\n    if (chainId === ARBITRUM) {\n      return \"https://www.gmx.house/arbitrum/leaderboard\";\n    }\n    if (chainId === AVALANCHE) {\n      return \"https://www.gmx.house/avalanche/leaderboard\";\n    }\n    return \"https://www.gmx.house\";\n  };\n\n  function getTokenLabel() {\n    switch (true) {\n      case isLong:\n        return t`Long`;\n      case isShort:\n        return t`Short`;\n      case isSwap:\n        return t`Receive`;\n      default:\n        return \"\";\n    }\n  }\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-option\"],\n    \"2\"\n  );\n  const [isLeverageSliderEnabled, setIsLeverageSliderEnabled] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-slider-enabled\"],\n    true\n  );\n\n\n  const hasLeverageOption = isLeverageSliderEnabled && !isNaN(parseFloat(leverageOption));\n\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n\n  // Market/Limit orders disabling\n  let [orderOption, setOrderOption] = useLocalStorageSerializeKey([chainId, \"Order-option\"], MARKET);\n  \n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const isMarketOrder = orderOption === MARKET;\n\n  \n  const orderOptions = isSwap ? SWAP_ORDER_OPTIONS : LEVERAGE_ORDER_OPTIONS;\n  const orderOptionLabels = { [STOP]: \"Trigger\" };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = isMarketOrder ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  let positionKey;\n  if (isLong) {\n    positionKey = getPositionKey(account, toTokenAddress, toTokenAddress, true, nativeTokenAddress);\n  }\n  if (isShort) {\n    positionKey = getPositionKey(account, shortCollateralAddress, toTokenAddress, false, nativeTokenAddress);\n  }\n\n  const existingPosition = positionKey ? positionsMap[positionKey] : undefined;\n  const hasExistingPosition = existingPosition && existingPosition.size && existingPosition.size.gt(0);\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  \n  // Tokens control\n  const tokens = getTokens(chainId);\n  const fromTokens = tokens;\n\n  const stableTokens = tokens.filter((token) => token.isStable);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  let toTokens = tokens;\n  if (isLong) {\n    toTokens = indexTokens;\n  }\n  if (isShort) {\n    toTokens = shortableTokens;\n  }\n\n  const needOrderBookApproval = !isMarketOrder && !orderBookApproved;\n  const prevNeedOrderBookApproval = usePrevious(needOrderBookApproval);\n\n  const needPositionRouterApproval = (isLong || isShort) && isMarketOrder && !positionRouterApproved;\n  const prevNeedPositionRouterApproval = usePrevious(needPositionRouterApproval);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  useEffect(() => {\n    if (!needPositionRouterApproval && prevNeedPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      setIsWaitingForPositionRouterApproval(false);\n      helperToast.success(<div>Leverage enabled!</div>);\n    }\n  }, [\n    needPositionRouterApproval,\n    prevNeedPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isWaitingForPositionRouterApproval,\n  ]);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const tokenAllowanceAddress = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n  const { data: tokenAllowanceGNS } = useSWR(\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, GNS_Storage.address],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  \n  const { data: hasOutdatedUi } = Api.useHasOutdatedUi();\n  \n  const fromToken = getToken(chainId, fromTokenAddress);\n  const toToken = getToken(chainId, toTokenAddress);\n  const shortCollateralToken = getTokenInfo(infoTokens, shortCollateralAddress);\n\n  const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  const renderAvailableLongLiquidity = () => {\n    if (!isLong) {\n      return null;\n    }\n\n    return (\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label\">\n          <Trans>Available Liquidity</Trans>\n        </div>\n        <div className=\"align-right\">\n          <Tooltip\n            handle={`$${formatAmount(toTokenInfo.maxAvailableLong, USD_DECIMALS, 2, true)}`}\n            position=\"right-bottom\"\n            renderContent={() => {\n              return (\n                <>\n                  <StatsTooltipRow\n                    label={`Max ${toTokenInfo.symbol} long capacity`}\n                    value={formatAmount(toTokenInfo.maxLongCapacity, USD_DECIMALS, 0, true)}\n                  />\n                  <StatsTooltipRow\n                    label={`Current ${toTokenInfo.symbol} long`}\n                    value={formatAmount(toTokenInfo.guaranteedUsd, USD_DECIMALS, 0, true)}\n                  />\n                </>\n              );\n            }}\n          ></Tooltip>\n        </div>\n      </div>\n    );\n  };\n\n  const { data: liquidityData, error: liquidityDataError } = useSWR(\n    active && [active, chainId, GNS_Storage.address, toTokenInfo, \"getLiquidityGNS\", account],\n    async () => {\n      const liqs = {};\n      const curPairSymbol = toTokenInfo.symbol;\n      \n      const GNS_contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, signer);\n      const GNS_PairIndex = GNS_PAIRS[toToken.symbol];\n      const GNS_Info = {\n        openInterest: await GNS_contract.openInterestDai(GNS_PairIndex, 0),\n        maxOpenInterest: await GNS_contract.openInterestDai(GNS_PairIndex, 2),\n      }\n      \n      marketsList.forEach(async (market) => {\n        let liq;\n        let symbol = curPairSymbol;\n\n        switch(market.name) {\n          case 'GMX':\n            if (isLong) {\n              liq = toTokenInfo.maxAvailableLong / 10**USD_DECIMALS;\n            } else {\n              liq = toTokenInfo.maxAvailableShort / 10**USD_DECIMALS;\n            }\n\n            symbol = '';\n            break;\n          case 'GNS':\n            liq = Number(\n              (GNS_Info.maxOpenInterest?.sub(GNS_Info.openInterest) + '0'.repeat(12)) / 10**USD_DECIMALS\n            );\n            \n            break;\n          default:\n            return;\n        }\n\n        liqs[market.name] = {\n          value: liq,\n          formattedValue: separateThousands(floor(liq)),\n          symbol,\n        }\n      })\n      \n      return liqs;\n    }\n  );\n  const [liquidity, setLiquidity] = useState(null);\n  useEffect(() => {\n    if (!liquidityData) {\n      return;\n    }\n    \n    setLiquidity(liquidityData);\n  }, [liquidityData]);\n\n  const [markets, setMarkets] = useLocalStorageSerializeKey([chainId, \"Terminal-Markets\"], marketsList.slice());\n  \n  \n  // Modal functionality\n  const [modal, setModal] = useState('');\n  const [modalVisible, setModalVisible] = useState(false);\n\n  const openModal = (name) => {\n    setModal(name);\n    setModalVisible(true);\n  }\n  \n  const renderModal = (position) => {\n    switch(modal) {\n      case 'Choose-Market':\n        return (\n          <ChooseMarketModal\n            visible={modalVisible}\n            setVisible={setModalVisible}\n            marketsList={marketsList}\n            markets={markets}\n            setMarkets={setMarkets}\n            liqs={liquidity}\n          />\n        )\n          \n      default:\n        return (\n          <></>\n        );\n    }\n  }\n\n  // Choosing Liquidity Source\n  const [suitableMarket, setSuitableMarket] = useState(null);\n  useEffect(() => {\n    if (!markets.length) {\n      setSuitableMarket(null);\n      return;\n    }\n    setSuitableMarket(markets.reduce((result, market) => {\n      if (!liquidity) {\n        return market;\n      }\n      if (liquidity[result.name]?.value > liquidity[market.name]?.value) {\n        return result;\n      }\n      return market;\n    }))\n  }, [markets]);\n\n  useEffect(() => {\n    if (suitableMarket?.name === 'GNS') {\n      setFromTokenAddress(isLong ? LONG : SHORT, getTokenBySymbol(chainId, 'DAI').address);\n    }\n  }, [suitableMarket]);\n\n  const onMarketSelect = (marketName) => {\n    setSuitableMarket(marketsList.find(market => market.name === marketName));\n  }\n\n  const fromBalance = fromTokenInfo ? fromTokenInfo.balance : bigNumberify(0);\n  const toBalance = toTokenInfo ? toTokenInfo.balance : bigNumberify(0);\n\n  const fromAmount = parseValue(fromValue, fromToken && fromToken.decimals);\n  const toAmount = parseValue(toValue, toToken && toToken.decimals);\n\n  const isPotentialWrap = (fromToken.isNative && toToken.isWrapped) || (fromToken.isWrapped && toToken.isNative);\n  const isWrapOrUnwrap = isSwap && isPotentialWrap;\n  const needApproval =\n    suitableMarket?.name === 'GMX' ?\n      (fromTokenAddress !== AddressZero &&\n      tokenAllowance &&\n      fromAmount &&\n      fromAmount.gt(tokenAllowance) &&\n      !isWrapOrUnwrap)\n    : (suitableMarket?.name === 'GNS' &&\n        (fromTokenAddress !== AddressZero &&\n          tokenAllowanceGNS &&\n          fromAmount &&\n          fromAmount.gt(tokenAllowanceGNS) &&\n          !isWrapOrUnwrap));\n\n  \n  const prevFromTokenAddress = usePrevious(fromTokenAddress);\n  const prevNeedApproval = usePrevious(needApproval);\n  const prevToTokenAddress = usePrevious(toTokenAddress);\n\n  const fromUsdMin = getUsd(fromAmount, fromTokenAddress, false, infoTokens);\n  const toUsdMax = getUsd(toAmount, toTokenAddress, true, infoTokens, orderOption, triggerPriceUsd);\n\n  const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n  const collateralTokenAddress = isLong ? indexTokenAddress : shortCollateralAddress;\n  const collateralToken = getToken(chainId, collateralTokenAddress);\n\n  const [triggerRatioValue, setTriggerRatioValue] = useState(\"\");\n\n  const triggerRatioInverted = useMemo(() => {\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo]);\n\n  const maxToTokenOut = useMemo(() => {\n    const value = toTokenInfo.availableAmount?.gt(toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount))\n      ? toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount)\n      : toTokenInfo.availableAmount;\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [toTokenInfo]);\n\n  const maxToTokenOutUSD = useMemo(() => {\n    return getUsd(maxToTokenOut, toTokenAddress, false, infoTokens);\n  }, [maxToTokenOut, toTokenAddress, infoTokens]);\n\n  const maxFromTokenInUSD = useMemo(() => {\n    const value = fromTokenInfo.maxUsdgAmount\n      ?.sub(fromTokenInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [fromTokenInfo]);\n\n  const maxFromTokenIn = useMemo(() => {\n    if (!fromTokenInfo.maxPrice) {\n      return bigNumberify(0);\n    }\n    return maxFromTokenInUSD?.mul(expandDecimals(1, fromTokenInfo.decimals)).div(fromTokenInfo.maxPrice).toString();\n  }, [maxFromTokenInUSD, fromTokenInfo]);\n\n  let maxSwapAmountUsd = bigNumberify(0);\n\n  if (maxToTokenOutUSD && maxFromTokenInUSD) {\n    maxSwapAmountUsd = maxToTokenOutUSD.lt(maxFromTokenInUSD) ? maxToTokenOutUSD : maxFromTokenInUSD;\n  }\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (ratio.eq(0)) {\n      return bigNumberify(0);\n    }\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  useEffect(() => {\n    if (\n      fromToken &&\n      fromTokenAddress === prevFromTokenAddress &&\n      !needApproval &&\n      prevNeedApproval &&\n      isWaitingForApproval\n    ) {\n      setIsWaitingForApproval(false);\n      helperToast.success(<div>{fromToken.symbol} approved!</div>);\n    }\n  }, [\n    fromTokenAddress,\n    prevFromTokenAddress,\n    needApproval,\n    prevNeedApproval,\n    setIsWaitingForApproval,\n    fromToken.symbol,\n    isWaitingForApproval,\n    fromToken,\n  ]);\n\n  useEffect(() => {\n    if (!toTokens.find((token) => token.address === toTokenAddress)) {\n      setToTokenAddress(swapOption, toTokens[0].address);\n    }\n  }, [swapOption, toTokens, toTokenAddress, setToTokenAddress]);\n\n  useEffect(() => {\n    if (swapOption !== SHORT) {\n      return;\n    }\n    if (toTokenAddress === prevToTokenAddress) {\n      return;\n    }\n    for (let i = 0; i < stableTokens.length; i++) {\n      const stableToken = stableTokens[i];\n      const key = getPositionKey(account, stableToken.address, toTokenAddress, false, nativeTokenAddress);\n      const position = positionsMap[key];\n      if (position && position.size && position.size.gt(0)) {\n        setShortCollateralAddress(position.collateralToken.address);\n        return;\n      }\n    }\n  }, [\n    account,\n    toTokenAddress,\n    prevToTokenAddress,\n    swapOption,\n    positionsMap,\n    stableTokens,\n    nativeTokenAddress,\n    shortCollateralAddress,\n    setShortCollateralAddress,\n  ]);\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n        if (toToken) {\n          const { amount: nextToAmount } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            toTokenAddress,\n            infoTokens,\n            undefined,\n            !isMarketOrder && triggerRatio,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n      if (fromToken) {\n        const { amount: nextFromAmount } = getNextFromAmount(\n          chainId,\n          toAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          !isMarketOrder && triggerRatio,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n        setFromValue(nextFromValue);\n      }\n    };\n\n    const updateLeverageAmounts = () => {\n      if (!hasLeverageOption) {\n        return;\n      }\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n\n        const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n        if (toTokenInfo && toTokenInfo.maxPrice && fromUsdMin && fromUsdMin.gt(0)) {\n          const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n          const toTokenPriceUsd =\n            !isMarketOrder && triggerPriceUsd && triggerPriceUsd.gt(0) ? triggerPriceUsd : toTokenInfo.maxPrice;\n\n          const { feeBasisPoints } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            collateralTokenAddress,\n            infoTokens,\n            undefined,\n            undefined,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          let fromUsdMinAfterFee = fromUsdMin;\n          if (feeBasisPoints) {\n            fromUsdMinAfterFee = fromUsdMin.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          }\n\n          const toNumerator = fromUsdMinAfterFee.mul(leverageMultiplier).mul(BASIS_POINTS_DIVISOR);\n          const toDenominator = bigNumberify(MARGIN_FEE_BASIS_POINTS)\n            .mul(leverageMultiplier)\n            .add(bigNumberify(BASIS_POINTS_DIVISOR).mul(BASIS_POINTS_DIVISOR));\n\n          const nextToUsd = toNumerator.div(toDenominator);\n\n          const nextToAmount = nextToUsd.mul(expandDecimals(1, toToken.decimals)).div(toTokenPriceUsd);\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n\n      const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n      if (fromTokenInfo && fromTokenInfo.minPrice && toUsdMax && toUsdMax.gt(0)) {\n        const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n\n        const baseFromAmountUsd = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(leverageMultiplier);\n\n        let fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n\n        const { feeBasisPoints } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          collateralTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n\n        if (feeBasisPoints) {\n          const swapFees = baseFromAmountUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          fees = fees.add(swapFees);\n        }\n\n        const nextFromUsd = baseFromAmountUsd.add(fees);\n\n        const nextFromAmount = nextFromUsd.mul(expandDecimals(1, fromToken.decimals)).div(fromTokenInfo.minPrice);\n\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n\n        setFromValue(nextFromValue);\n      }\n    };\n\n    if (isSwap) {\n      updateSwapAmounts();\n    }\n\n    if (isLong || isShort) {\n      updateLeverageAmounts();\n    }\n  }, [\n    anchorOnFromAmount,\n    fromAmount,\n    toAmount,\n    fromToken,\n    toToken,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    isSwap,\n    isLong,\n    isShort,\n    leverageOption,\n    fromUsdMin,\n    toUsdMax,\n    isMarketOrder,\n    triggerPriceUsd,\n    triggerRatio,\n    hasLeverageOption,\n    usdgSupply,\n    totalTokenWeights,\n    chainId,\n    collateralTokenAddress,\n    indexTokenAddress,\n  ]);\n\n  let entryMarkPrice;\n  let exitMarkPrice;\n  if (toTokenInfo) {\n    entryMarkPrice = swapOption === LONG ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    exitMarkPrice = swapOption === LONG ? toTokenInfo.minPrice : toTokenInfo.maxPrice;\n  }\n\n  let leverage = bigNumberify(0);\n  if (fromUsdMin && toUsdMax && fromUsdMin.gt(0)) {\n    const fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    if (fromUsdMin.sub(fees).gt(0)) {\n      leverage = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(fromUsdMin.sub(fees));\n    }\n  }\n\n  let nextAveragePrice = isMarketOrder ? entryMarkPrice : triggerPriceUsd;\n  if (suitableMarket?.name === 'GNS') {\n    if (toTokenInfo.maxPrice) {\n      nextAveragePrice = isLong ?\n        BigNumber.from(formatAmount(toTokenInfo.maxPrice, 4, 0, 0)).mul(10004)\n        : BigNumber.from(formatAmount(toTokenInfo.maxPrice, 4, 0, 0)).mul(9996);\n    }\n  }\n  \n  if (suitableMarket?.name === 'GMX') {\n    if (hasExistingPosition) {\n      let nextDelta, nextHasProfit;\n  \n      if (isMarketOrder) {\n        nextDelta = existingPosition.delta;\n        nextHasProfit = existingPosition.hasProfit;\n      } else {\n        const data = calculatePositionDelta(triggerPriceUsd || bigNumberify(0), existingPosition);\n        nextDelta = data.delta;\n        nextHasProfit = data.hasProfit;\n      }\n  \n      nextAveragePrice = getNextAveragePrice({\n        size: existingPosition.size,\n        sizeDelta: toUsdMax,\n        hasProfit: nextHasProfit,\n        delta: nextDelta,\n        nextPrice: isMarketOrder ? entryMarkPrice : triggerPriceUsd,\n        isLong,\n      });\n    }\n  }\n\n  if (suitableMarket?.name === 'GMX') {\n    if (hasExistingPosition) {\n      const collateralDelta = fromUsdMin ? fromUsdMin : bigNumberify(0);\n      const sizeDelta = toUsdMax ? toUsdMax : bigNumberify(0);\n      leverage = getLeverage({\n        size: existingPosition.size,\n        sizeDelta,\n        collateral: existingPosition.collateral,\n        collateralDelta,\n        increaseCollateral: true,\n        entryFundingRate: existingPosition.entryFundingRate,\n        cumulativeFundingRate: existingPosition.cumulativeFundingRate,\n        increaseSize: true,\n        hasProfit: existingPosition.hasProfit,\n        delta: existingPosition.delta,\n        includeDelta: savedIsPnlInLeverage,\n      });\n    } else if (hasLeverageOption) {\n      leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\n    }\n  } else if (suitableMarket?.name === 'GNS') {\n    leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\n  }\n  \n  let liquidationPrice;\n  if (suitableMarket?.name === 'GMX') {\n    liquidationPrice = getLiquidationPrice({\n      isLong,\n      size: hasExistingPosition ? existingPosition.size : bigNumberify(0),\n      collateral: hasExistingPosition ? existingPosition.collateral : bigNumberify(0),\n      averagePrice: nextAveragePrice,\n      entryFundingRate: hasExistingPosition ? existingPosition.entryFundingRate : bigNumberify(0),\n      cumulativeFundingRate: hasExistingPosition ? existingPosition.cumulativeFundingRate : bigNumberify(0),\n      sizeDelta: toUsdMax,\n      collateralDelta: fromUsdMin,\n      increaseCollateral: true,\n      increaseSize: true,\n    });\n  } else if (suitableMarket?.name === 'GNS') {\n    if (fromAmount && toTokenInfo.maxPrice && leverage) {\n      if (!fromAmount.eq(0) && !leverage.eq(0)) {\n        const markPrice = toTokenInfo.maxPrice;\n        const collateral = fromAmount.mul(leverage);\n        \n        const liqPriceDistance = (markPrice.mul(collateral.mul(9).div(10)).div(collateral).div(formatAmount(leverage, 4, 0, 0)));\n\n        liquidationPrice = (isLong ?\n            markPrice.sub(liqPriceDistance)\n            : markPrice.add(liqPriceDistance));\n      }\n    }\n  }\n\n  const existingLiquidationPrice = existingPosition ? getLiquidationPrice(existingPosition) : undefined;\n  let displayLiquidationPrice = liquidationPrice ? liquidationPrice : existingLiquidationPrice;\n  \n  \n\n  const getSwapError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [`Swaps disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (fromTokenAddress === toTokenAddress) {\n      return [t`Select different tokens`];\n    }\n\n    if (!isMarketOrder) {\n      if ((toToken.isStable || toToken.isUsdg) && (fromToken.isStable || fromToken.isUsdg)) {\n        return [t`Select different tokens`];\n      }\n\n      if (fromToken.isNative && toToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n\n      if (toToken.isNative && fromToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n    }\n\n    if (!fromAmount || fromAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (!fromTokenInfo || !fromTokenInfo.minPrice) {\n      return [t`Incorrect network`];\n    }\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n    if (!isMarketOrder) {\n      if (!triggerRatioValue || triggerRatio.eq(0)) {\n        return [t`Enter a price`];\n      }\n\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && currentRate.lt(triggerRatio)) {\n        return triggerRatioInverted ? [t`Price below Mark Price`] : [t`Price above Mark Price`];\n      }\n    }\n\n    if (\n      !isWrapOrUnwrap &&\n      toToken &&\n      toTokenAddress !== USDG_ADDRESS &&\n      toTokenInfo &&\n      toTokenInfo.availableAmount &&\n      toAmount.gt(toTokenInfo.availableAmount)\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n    if (\n      !isWrapOrUnwrap &&\n      toAmount &&\n      toTokenInfo.bufferAmount &&\n      toTokenInfo.poolAmount &&\n      toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(toAmount))\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n\n    if (\n      fromUsdMin &&\n      fromTokenInfo.maxUsdgAmount &&\n      fromTokenInfo.maxUsdgAmount.gt(0) &&\n      fromTokenInfo.usdgAmount &&\n      fromTokenInfo.maxPrice\n    ) {\n      const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n      const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n      if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n        return [`${fromTokenInfo.symbol} pool exceeded`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getLeverageError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [`Leverage disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return [t`Page outdated, please refresh`];\n    }\n\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    let toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n    if (toTokenInfo && toTokenInfo.isStable) {\n      return [`${swapOption === LONG ? \"Longing\" : \"Shorting\"} ${toTokenInfo.symbol} not supported`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    if (leverage && leverage.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!isMarketOrder && (!triggerPriceValue || triggerPriceUsd.eq(0))) {\n      return [t`Enter a price`];\n    }\n\n    if (suitableMarket?.name === 'GMX') {\n      if (!hasExistingPosition && fromUsdMin && fromUsdMin.lt(expandDecimals(10, USD_DECIMALS))) {\n        return [t`Min order: 10 USD`];\n      }\n    } else if (suitableMarket?.name === 'GNS') {\n      if (fromUsdMin && (fromUsdMin.mul(leverage ?? 1)).lt(expandDecimals(7500, USD_DECIMALS + 4))) {\n        return [t`Min order: 7,500 DAI`];\n      }\n    }\n\n\n    if (leverage) {\n      if (suitableMarket?.name === 'GMX') {\n        if (leverage.gt(MAX_ALLOWED_LEVERAGE)) {\n          return [`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n        } else if (leverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n          return [t`Min leverage: 1.1x`];\n        }\n        \n      } else if (suitableMarket?.name === 'GNS') {\n        if (leverage.gt(150 * BASIS_POINTS_DIVISOR)) {\n          return [t`Max leverage: 150x`];\n        } else if (leverage.lt(2 * BASIS_POINTS_DIVISOR)) {\n          return [t`Min leverage: 2x`];\n        }\n      }\n    }\n\n    if (!isMarketOrder && entryMarkPrice && triggerPriceUsd && !savedShouldDisableValidationForTesting) {\n      if (isLong && entryMarkPrice.lt(triggerPriceUsd)) {\n        return [t`Price above Mark Price`];\n      }\n      if (!isLong && entryMarkPrice.gt(triggerPriceUsd)) {\n        return [t`Price below Mark Price`];\n      }\n    }\n\n    if (isLong) {\n      let requiredAmount = toAmount;\n      if (fromTokenAddress !== toTokenAddress) {\n        const { amount: swapAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        requiredAmount = requiredAmount.add(swapAmount);\n\n        if (toToken && toTokenAddress !== USDG_ADDRESS) {\n          if (!toTokenInfo.availableAmount) {\n            return [t`Liquidity data not loaded`];\n          }\n          if (suitableMarket?.name === 'GMX' && toTokenInfo.availableAmount && requiredAmount.gt(toTokenInfo.availableAmount)) {\n            return [t`Insufficient liquidity`];\n          }\n        }\n\n        if (\n          suitableMarket?.name === 'GMX' &&\n          toTokenInfo.poolAmount &&\n          toTokenInfo.bufferAmount &&\n          toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(swapAmount))\n        ) {\n          return [t`Insufficient liquidity`, true, \"BUFFER\"];\n        }\n\n        \n        if (\n          fromUsdMin &&\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n          if (suitableMarket?.name === 'GNS') {\n            if (\n              liquidity &&\n              liquidity[suitableMarket?.name].value &&\n              formatAmount(nextUsdgAmount, 30, 0) > liquidity[suitableMarket?.name].value\n            ) {\n              return [`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n            }\n          } else if (suitableMarket?.name === 'GMX') {\n            if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n              return [`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n            }\n          }\n        }\n      }\n\n      if (suitableMarket?.name === 'GMX') {\n        if (toTokenInfo && toTokenInfo.maxPrice) {\n          const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n          if (\n            toTokenInfo.maxGlobalLongSize &&\n            toTokenInfo.maxGlobalLongSize.gt(0) &&\n            toTokenInfo.maxAvailableLong &&\n            sizeUsd.gt(toTokenInfo.maxAvailableLong)\n          ) {\n            return [`Max ${toTokenInfo.symbol} long exceeded`];\n          }\n        }\n      } else if (suitableMarket?.name === 'GNS') {\n        const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n        if (\n          liquidity &&\n          ((sizeUsd / 10**USD_DECIMALS) > (liquidity[suitableMarket?.name].value))\n        ) {\n          return [`Max ${toTokenInfo.symbol} long exceeded`];\n        }\n      }\n    }\n\n    if (isShort) {\n      let stableTokenAmount = bigNumberify(0);\n      if (fromTokenAddress !== shortCollateralAddress && fromAmount && fromAmount.gt(0)) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          shortCollateralAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        stableTokenAmount = nextToAmount;\n        if (suitableMarket?.name === 'GMX' && stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n          return [t`Insufficient liquidity, change \"Profits In\"`];\n        }\n\n        if (\n          suitableMarket?.name === 'GMX' &&\n          shortCollateralToken.bufferAmount &&\n          shortCollateralToken.poolAmount &&\n          shortCollateralToken.bufferAmount.gt(shortCollateralToken.poolAmount.sub(stableTokenAmount))\n        ) {\n          // suggest swapping to collateralToken\n          return [t`Insufficient liquidity, change \"Profits In\"`, true, \"BUFFER\"];\n        }\n\n        if (\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n          \n          if (suitableMarket?.name === 'GMX' && nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n          }\n        }\n      }\n      if (\n        !shortCollateralToken ||\n        !fromTokenInfo ||\n        !toTokenInfo ||\n        !toTokenInfo.maxPrice ||\n        !shortCollateralToken.availableAmount\n      ) {\n        return [t`Fetching token info...`];\n      }\n\n      const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n      const sizeTokens = sizeUsd\n        .mul(expandDecimals(1, shortCollateralToken.decimals))\n        .div(shortCollateralToken.minPrice);\n\n      if (!toTokenInfo.maxAvailableShort) {\n        return [t`Liquidity data not loaded`];\n      }\n\n      if (suitableMarket?.name === 'GMX') {\n        if (\n          toTokenInfo.maxGlobalShortSize &&\n          toTokenInfo.maxGlobalShortSize.gt(0) &&\n          toTokenInfo.maxAvailableShort &&\n          sizeUsd.gt(toTokenInfo.maxAvailableShort)\n        ) {\n          return [`Max ${toTokenInfo.symbol} short exceeded`];\n        }\n      } else if (suitableMarket?.name === 'GNS') {\n        if (\n          liquidity &&\n          ((sizeUsd / 10**USD_DECIMALS) > (liquidity[suitableMarket?.name].value))\n        ) {\n          return [`Max ${toTokenInfo.symbol} short exceeded`];\n        }\n      }\n      \n\n      stableTokenAmount = stableTokenAmount.add(sizeTokens);\n      if (suitableMarket?.name === 'GMX' && stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n        return [t`Insufficient liquidity, change \"Profits In\"`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getToLabel = () => {\n    if (isSwap) {\n      return t`Receive`;\n    }\n    if (isLong) {\n      return t`Long`;\n    }\n    return t`Short`;\n  };\n\n  const getError = () => {\n    if (isSwap) {\n      return getSwapError();\n    }\n    return getLeverageError();\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (isStopOrder) {\n      return true;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n    if (isApproving || isPluginApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n\n    return true;\n  };\n\n\n  const getPrimaryText = () => {\n    if (isStopOrder) {\n      return t`Open a position`;\n    }\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    if (!isSupportedChain(chainId)) {\n      return t`Incorrect Network`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return `Approving ${fromToken.symbol}...`;\n    }\n    /* if (needApproval) {\n      return `Approve ${fromToken.symbol}`;\n    } */\n\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return t`Enabling Orders...`;\n    }\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\n      return t`Enable Orders`;\n    }\n    \n    if (!isMarketOrder) return `Create ${orderOption.charAt(0) + orderOption.substring(1).toLowerCase()} Order`;\n\n    if (isSwap) {\n      if (toUsdMax && toUsdMax.lt(fromUsdMin.mul(95).div(100))) {\n        return t`High Slippage, Swap Anyway`;\n      }\n      return \"Swap\";\n    }\n\n    if (isLong) {\n      const indexTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n      if (indexTokenInfo && indexTokenInfo.minPrice) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          indexTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextToAmountUsd = nextToAmount\n          .mul(indexTokenInfo.minPrice)\n          .div(expandDecimals(1, indexTokenInfo.decimals));\n        if (fromTokenAddress === USDG_ADDRESS && nextToAmountUsd.lt(fromUsdMin.mul(98).div(100))) {\n          return t`High USDG Slippage, Long Anyway`;\n        }\n      }\n      return `Long ${toToken.symbol}`;\n    }\n\n    return `Short ${toToken.symbol}`;\n  };\n\n  const onSelectFromToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n    setIsWaitingForApproval(false);\n\n    if (isShort && token.isStable) {\n      setShortCollateralAddress(token.address);\n    }\n  };\n\n  const onSelectShortCollateralAddress = (token) => {\n    setShortCollateralAddress(token.address);\n  };\n\n  const onSelectToToken = (token) => {\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  const [hasInputFocus, setHasInputFocus] = useState(false);\n  const [hasInputError, setHasInputError] = useState(false);\n  const checkInputError = (inputVal) => {\n    if (!isPrimaryEnabled() && inputVal !== '') {\n      setHasInputError(true);\n    } else {\n      setHasInputError(false);\n    }\n  }\n\n  useEffect(() => {\n    checkInputError(fromValue);\n  }, [fromValue, toValue])\n  \n  const onFromValueChange = (e) => {\n    setAnchorOnFromAmount(true);\n    setFromValue(e.target.value);\n  };\n\n  const onToValueChange = (e) => {\n    setAnchorOnFromAmount(false);\n    setToValue(e.target.value);\n  };\n\n  const switchTokens = () => {\n    if (fromAmount && toAmount) {\n      if (anchorOnFromAmount) {\n        setToValue(formatAmountFree(fromAmount, fromToken.decimals, 8));\n      } else {\n        setFromValue(formatAmountFree(toAmount, toToken.decimals, 8));\n      }\n      setAnchorOnFromAmount(!anchorOnFromAmount);\n    }\n    setIsWaitingForApproval(false);\n\n    const updatedTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    updatedTokenSelection[swapOption] = {\n      from: toTokenAddress,\n      to: fromTokenAddress,\n    };\n    setTokenSelection(updatedTokenSelection);\n  };\n\n  const wrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"deposit\", {\n      value: fromAmount,\n      sentMsg: \"Swap submitted.\",\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: \"Swap failed.\",\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const unwrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"withdraw\", [fromAmount], {\n      sentMsg: t`Swap submitted!`,\n      failMsg: t`Swap failed.`,\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const swap = async () => {\n    if (fromToken.isNative && toToken.isWrapped) {\n      wrap();\n      return;\n    }\n\n    if (fromTokenAddress.isWrapped && toToken.isNative) {\n      unwrap();\n      return;\n    }\n\n    setIsSubmitting(true);\n    let path = [fromTokenAddress, toTokenAddress];\n    if (anchorOnFromAmount) {\n      const { path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    } else {\n      const { path: multiPath } = getNextFromAmount(\n        chainId,\n        toAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    }\n\n    let method;\n    let contract;\n    let value;\n    let params;\n    let minOut;\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(true);\n      helperToast.error(\n        `Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    if (!isMarketOrder) {\n      minOut = toAmount;\n      Api.createSwapOrder(chainId, library, path, fromAmount, minOut, triggerRatio, nativeTokenAddress, {\n        sentMsg: t`Swap Order submitted!`,\n        successMsg: t`Swap Order created!`,\n        failMsg: t`Swap Order creation failed.`,\n        pendingTxns,\n        setPendingTxns,\n      })\n        .then(() => {\n          setIsConfirming(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n          setIsPendingConfirmation(false);\n        });\n      return;\n    }\n\n    path = replaceNativeTokenAddress(path, nativeTokenAddress);\n    method = \"swap\";\n    value = bigNumberify(0);\n    if (toTokenAddress === AddressZero) {\n      method = \"swapTokensToETH\";\n    }\n\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - allowedSlippage).div(BASIS_POINTS_DIVISOR);\n    params = [path, fromAmount, minOut, account];\n    if (fromTokenAddress === AddressZero) {\n      method = \"swapETHToTokens\";\n      value = fromAmount;\n      params = [path, minOut, account];\n    }\n    contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: `Swap ${!isMarketOrder ? \" order \" : \"\"} submitted!`,\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const createIncreaseOrder = () => {\n    let path = [fromTokenAddress];\n\n    if (path[0] === USDG_ADDRESS) {\n      if (isLong) {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        path.push(stableToken.address);\n      } else {\n        path.push(shortCollateralAddress);\n      }\n    }\n\n    const minOut = 0;\n    const indexToken = getToken(chainId, indexTokenAddress);\n    const successMsg = t`\n      Created limit order for ${indexToken.symbol} ${isLong ? \"Long\" : \"Short\"}: ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD!\n    `;\n    return Api.createIncreaseOrder(\n      chainId,\n      library,\n      nativeTokenAddress,\n      path,\n      fromAmount,\n      indexTokenAddress,\n      minOut,\n      toUsdMax,\n      collateralTokenAddress,\n      isLong,\n      triggerPriceUsd,\n      {\n        pendingTxns,\n        setPendingTxns,\n        sentMsg: t`Limit order submitted!`,\n        successMsg,\n        failMsg: t`Limit order creation failed.`,\n      }\n    )\n      .then(() => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  let referralCode = ethers.constants.HashZero;\n  if (!attachedOnChain && userReferralCode) {\n    referralCode = userReferralCode;\n  }\n\n  const increasePosition = async () => {\n    setIsSubmitting(true);\n    const tokenAddress0 = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n    const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n    let path = [indexTokenAddress]; // assume long\n    if (toTokenAddress !== fromTokenAddress) {\n      path = [tokenAddress0, indexTokenAddress];\n    }\n\n    if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n      path = [nativeTokenAddress];\n    }\n\n    if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n      path = [nativeTokenAddress];\n    }\n\n    if (isShort) {\n      path = [shortCollateralAddress];\n      if (tokenAddress0 !== shortCollateralAddress) {\n        path = [tokenAddress0, shortCollateralAddress];\n      }\n    }\n\n    const refPrice = isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    const priceBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\n    const priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n    const boundedFromAmount = fromAmount ? fromAmount : bigNumberify(0);\n\n\n    if (fromAmount && fromAmount.gt(0) && fromTokenAddress === USDG_ADDRESS && isLong) {\n      const { amount: nextToAmount, path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        indexTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (nextToAmount.eq(0)) {\n        helperToast.error(t`Insufficient liquidity`);\n        return;\n      }\n      if (multiPath) {\n        path = replaceNativeTokenAddress(multiPath);\n      }\n    }\n\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      boundedFromAmount, // _amountIn\n      0, // _minOut\n      toUsdMax, // _sizeDelta\n      isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (fromTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = boundedFromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        toUsdMax, // _sizeDelta\n        isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(false);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    const contractAddress = getContract(chainId, \"PositionRouter\");\n    const contract = new ethers.Contract(contractAddress, PositionRouter.abi, library.getSigner());\n    \n    const indexToken = getTokenInfo(infoTokens, indexTokenAddress);\n    const tokenSymbol = indexToken.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexToken.symbol;\n    const successMsg = t`Requested increase of ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"} by ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD.`;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      setPendingTxns,\n      sentMsg: `${isLong ? \"Long\" : \"Short\"} submitted.`,\n      failMsg: `${isLong ? \"Long\" : \"Short\"} failed.`,\n      successMsg,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n\n        const key = getPositionKey(account, path[path.length - 1], indexTokenAddress, isLong);\n        let nextSize = toUsdMax;\n        if (hasExistingPosition) {\n          nextSize = existingPosition.size.add(toUsdMax);\n        }\n\n        pendingPositions[key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const onSwapOptionChange = (opt) => {\n    setSwapOption(opt);\n    if (orderOption === STOP) {\n      setOrderOption(MARKET);\n    }\n    setAnchorOnFromAmount(true);\n    setFromValue(\"\");\n    setToValue(\"\");\n    setTriggerPriceValue(\"\");\n    setTriggerRatioValue(\"\");\n\n    if (opt === SHORT && infoTokens) {\n      const fromToken = getToken(chainId, tokenSelection[opt].from);\n      if (fromToken && fromToken.isStable) {\n        setShortCollateralAddress(fromToken.address);\n      } else {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        setShortCollateralAddress(stableToken.address);\n      }\n    }\n  };\n\n  const onConfirmationClick = () => {\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\n      approveOrderBook();\n      return;\n    }\n\n    if (isSwap) {\n      swap();\n      return;\n    }\n\n    switch(suitableMarket.name) {\n      case 'GMX':\n        if (orderOption === LIMIT) {\n          createIncreaseOrder();\n          return;\n        }\n        increasePosition();\n        return;\n      case 'GNS':\n        if (orderOption === LIMIT) {\n          openTrade(triggerPriceUsd);\n          return;\n        }\n        openTrade();\n        return;\n      default:\n        return;\n    }\n\n  };\n\n\n  function approveFromToken() {\n    const address = suitableMarket?.name === 'GMX'\n      ? routerAddress\n      : GNS_Storage.address;\n\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: fromToken.address,\n      spender: address,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n      pendingTxns,\n      setPendingTxns,\n    });\n  }\n\n  const onClickPrimary = () => {\n    if (isStopOrder) {\n      setOrderOption(MARKET);\n      return;\n    }\n\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needPositionRouterApproval && suitableMarket?.name === 'GMX') {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\n      approveOrderBook();\n      return;\n    }\n\n    const [error, modal, errorCode] = getError();\n\n    if (modal) {\n      setModalError(errorCode);\n      return;\n    }\n\n    if (isSwap) {\n      if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n        wrap();\n        return;\n      }\n\n      if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n        unwrap();\n        return;\n      }\n    }\n\n    setIsConfirming(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const isStopOrder = orderOption === STOP;\n  const showFromAndToSection = !isStopOrder;\n  const showTriggerPriceSection = !isSwap && !isMarketOrder && !isStopOrder;\n  const showTriggerRatioSection = isSwap && !isMarketOrder && !isStopOrder;\n\n\n  let fees;\n  let feesUsd;\n  let feeBps;\n  let swapFees;\n  let positionFee;\n  if (isSwap) {\n    if (fromAmount) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (feeBasisPoints !== undefined) {\n        fees = fromAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        const feeTokenPrice =\n          fromTokenInfo.address === USDG_ADDRESS ? expandDecimals(1, USD_DECIMALS) : fromTokenInfo.maxPrice;\n        feesUsd = fees.mul(feeTokenPrice).div(expandDecimals(1, fromTokenInfo.decimals));\n      }\n      feeBps = feeBasisPoints;\n    }\n  } else if (toUsdMax && fromAmount) {\n    positionFee = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    if (suitableMarket?.name === 'GMX') {\n      feesUsd = positionFee;\n    } else if (suitableMarket?.name === 'GNS') {\n      feesUsd = expandDecimals(BigNumber.from(formatAmount(fromAmount.mul(leverage / 10**4), 4, 0, 0)).mul(8), 12);\n    }\n    \n\n    const { feeBasisPoints } = getNextToAmount(\n      chainId,\n      fromAmount,\n      fromTokenAddress,\n      collateralTokenAddress,\n      infoTokens,\n      undefined,\n      undefined,\n      usdgSupply,\n      totalTokenWeights,\n      isSwap\n    );\n    if (feeBasisPoints) {\n      swapFees = fromUsdMin.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n      feesUsd = feesUsd.add(swapFees);\n    }\n    feeBps = feeBasisPoints;\n  }\n\n  const [TPValue, setTPValue] = useState('');\n  const [SLValue, setSLValue] = useState('');\n  const [TPHasError, setTPHasError] = useState(false);\n  const [SLHasError, setSLHasError] = useState(false);\n  \n  const openTrade = async (price) => {\n    setIsSubmitting(true);\n    \n    const pairIndex = GNS_PAIRS[toToken.symbol];\n    const posSize = ethers.utils.parseEther(fromValue);\n    const openPrice = formatAmount(price ?? toTokenInfo.maxPrice, 20, 0, 0);\n    const roundLeverage = leverage / 10**4;\n    const typeOfOrder = isMarketOrder ? 0 : 1;\n    const slippage = userSlippage * 10**10;\n\n    const takeProfit = TPValue ? (formatForContract(TPValue, 10)).toFixed(0) : '0';\n    const stopLoss = SLValue ? (formatForContract(SLValue, 10)).toFixed(0) : '0';\n    \n    const fees = BigNumber.from(formatAmount(feesUsd, 12, 0, 0));\n    \n    const key = `${pairIndex}${roundLeverage}`;\n    \n    const contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\n    contract.openTrade(\n      [account, pairIndex, 0, 0, posSize, openPrice, isLong, roundLeverage, takeProfit, stopLoss],\n      typeOfOrder,\n      0,\n      slippage,\n      account\n    ).then(tsc => {\n      if (isMarketOrder) {\n        pendingPositionsGNS[key] = {\n          pairIndex,\n          isLong,\n          leverage,\n          positionSizeDai: posSize.sub(fees),\n        };\n        setPendingPositionsGNS(pendingPositionsGNS);\n      }\n      \n      setIsConfirming(false);\n      console.log(tsc);\n      \n      tsc.wait()\n        .then(() => {\n          notifySuccess(`${isMarketOrder ? 'Position' : 'Limit Order'} submitted!`, tsc.hash);\n        })\n    }, errAlert)\n    .finally(() => {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(false);\n      setTPValue('');\n      setSLValue('');\n    });\n  };\n\n  const leverageStorage = {\n    GMX: {\n      marks: {\n        2: \"2x\",\n        5: \"5x\",\n        10: \"10x\",\n        15: \"15x\",\n        20: \"20x\",\n        25: \"25x\",\n        30: \"30x\",\n        35: \"35x\",\n        40: \"40x\",\n        45: \"45x\",\n        50: \"50x\",\n      },\n      min: 2,\n      max: 50,\n    },\n    GNS: {\n      marks: {\n        2: \"2x\",\n        25: \"25x\",\n        50: \"50x\",\n        75: \"75x\",\n        100: \"100x\",\n        125: \"125x\",\n        150: \"150x\",\n      },\n      min: 2,\n      max: 150,\n    }\n  };\n  const curLeverage = leverageStorage[suitableMarket?.name];\n\n  if (!fromToken || !toToken) {\n    return null;\n  }\n\n  let hasZeroBorrowFee = false;\n  let borrowFeeText;\n  if (isLong && toTokenInfo && toTokenInfo.fundingRate) {\n    borrowFeeText = formatAmount(toTokenInfo.fundingRate, 4, 4) + \"% / 1h\";\n    if (toTokenInfo.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n  if (isShort && shortCollateralToken && shortCollateralToken.fundingRate) {\n    borrowFeeText = formatAmount(shortCollateralToken.fundingRate, 4, 4) + \"% / 1h\";\n    if (shortCollateralToken.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n\n  function setFromValueToMaximumAvailable() {\n    if (!fromToken || !fromBalance) {\n      return;\n    }\n\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    setFromValue(formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals));\n    setAnchorOnFromAmount(true);\n  }\n\n  function shouldShowMaxButton() {\n    if (!fromToken || !fromBalance) {\n      return false;\n    }\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    return fromValue !== formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals);\n  }\n\n\n  return (\n    <div className=\"Exchange-swap-box\">\n      {/* <div className=\"Exchange-swap-wallet-box App-box\">\n        {active && <div className=\"Exchange-swap-account\" >\n        </div>}\n      </div> */}\n      <div className=\"Exchange-swap-box-inner App-box\">\n        <div>\n          <div className=\"Exchange-swap-box__settings\">\n            <Tab\n              icons={SWAP_ICONS}\n              options={SWAP_OPTIONS}\n              option={swapOption}\n              onChange={onSwapOptionChange}\n              className={\"Exchange-swap-option-tabs\"}\n            />\n            <button className=\"btn Exchange-swap-box__settings-btn\"\n              onClick={() => {\n                openModal('Choose-Market');\n              }}>\n              <img src={icon_settings} alt=\"Settings icon\" />\n            </button>\n          </div>\n          \n          {flagOrdersEnabled && (\n            <div className=\"Tab-inline-container\">\n              <Tab\n                options={orderOptions}\n                optionLabels={orderOptionLabels}\n                className=\"Exchange-swap-order-type-tabs\"\n                type=\"inline\"\n                option={orderOption}\n                onChange={onOrderOptionChange}\n              />\n            </div>\n            \n          )}\n        </div>\n        {showFromAndToSection && (\n          <React.Fragment>\n            <div className={\"Exchange-swap-section\"\n               + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {fromUsdMin && (\n                    <div className=\"Exchange-swap-usd\">Pay: {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} {suitableMarket?.name === 'GMX' && 'USD'}{suitableMarket?.name === 'GNS' && 'DAI'}</div>\n                  )}\n                  {!fromUsdMin && \"Pay\"}\n                </div>\n                {fromBalance && (\n                  <div className=\"muted align-right clickable\" onClick={setFromValueToMaximumAvailable}>\n                    Balance: {formatAmount(fromBalance, fromToken.decimals, 4, true)}\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={fromValue}\n                    onChange={onFromValueChange}\n                    onFocus={(e) => {\n                      setHasInputFocus(true);\n                    }}\n                    onBlur={(e) => {\n                      setHasInputFocus(false);\n                    }}\n                  />\n                  {shouldShowMaxButton() && (\n                    <div className=\"Exchange-swap-max\" onClick={setFromValueToMaximumAvailable}>\n                      Max\n                    </div>\n                  )}\n                </div>\n                <div>\n                  {/* Tokens control */}\n                  {suitableMarket?.name === 'GMX' &&\n                    <TokenSelector\n                      label=\"Pay\"\n                      chainId={chainId}\n                      tokenAddress={fromTokenAddress}\n                      onSelectToken={onSelectFromToken}\n                      tokens={fromTokens}\n                      infoTokens={infoTokens}\n                      showMintingCap={false}\n                      showTokenImgInDropdown={true}\n                    />}\n                  {suitableMarket?.name === 'GNS' &&\n                    <div className=\"TokenSelector-dummy\">DAI</div>\n                  }\n                </div>\n              </div>\n            </div>\n            {/* <div className=\"Exchange-swap-ball-container\">\n              <div className=\"Exchange-swap-ball\" onClick={switchTokens}>\n                <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n              </div>\n            </div> */}\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {toUsdMax && suitableMarket?.name === 'GMX' && (\n                    <div className=\"Exchange-swap-usd\">\n                      {getToLabel()}: {formatAmount(toUsdMax, USD_DECIMALS, 2, true)} USD\n                    </div>\n                  )}\n                  {toUsdMax && fromAmount && suitableMarket?.name === 'GNS' && (\n                    <div className=\"Exchange-swap-usd\">\n                      {getToLabel()}: {formatAmount(fromAmount.mul(leverage / 10**4), USDG_DECIMALS, 2, true)} USD\n                    </div>\n                  )}\n                  {!toUsdMax && getToLabel()}\n                </div>\n                {toBalance && isSwap && (\n                  <div className=\"muted align-right\">\n                    <Trans>Balance</Trans>: {formatAmount(toBalance, toToken.decimals, 4, true)}\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={toValue}\n                    onChange={onToValueChange}\n                    onFocus={(e) => {\n                      e.target.parentElement.parentElement.parentElement.classList.add('hlight');\n                    }}\n                    onBlur={(e) => {\n                      e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\n                    }}\n                  />\n                </div>\n                <div>\n                  <TokenSelector\n                    label={getTokenLabel()}\n                    chainId={chainId}\n                    tokenAddress={toTokenAddress}\n                    onSelectToken={onSelectToToken}\n                    tokens={toTokens}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n        {showTriggerRatioSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              {fromTokenInfo && toTokenInfo && (\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerRatioValue(\n                      formatAmountFree(\n                        getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted),\n                        USD_DECIMALS,\n                        10\n                      )\n                    );\n                  }}\n                >\n                  {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 4)}\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input small\"\n                  value={triggerRatioValue}\n                  onChange={onTriggerRatioChange}\n                  onFocus={(e) => {\n                    e.target.parentElement.parentElement.parentElement.classList.add('hlight');\n                  }}\n                  onBlur={(e) => {\n                    e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\n                  }}\n                />\n              </div>\n              {(() => {\n                if (!toTokenInfo) return;\n                if (!fromTokenInfo) return;\n                const [tokenA, tokenB] = triggerRatioInverted\n                  ? [toTokenInfo, fromTokenInfo]\n                  : [fromTokenInfo, toTokenInfo];\n                return (\n                  <div className=\"PositionEditor-token-symbol\">\n                    {tokenA.symbol}&nbsp;per&nbsp;{tokenB.symbol}\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n        {showTriggerPriceSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => {\n                  setTriggerPriceValue(formatAmountFree(entryMarkPrice, USD_DECIMALS, 2));\n                }}\n              >\n                Mark: {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={triggerPriceValue}\n                  onChange={onTriggerPriceChange}\n                  onFocus={(e) => {\n                    e.target.parentElement.parentElement.parentElement.classList.add('hlight');\n                  }}\n                  onBlur={(e) => {\n                    e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\n                  }}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n        )}\n        {isSwap && (\n          <div className=\"Exchange-swap-box-info\">\n            <ExchangeInfoRow label=\"Fees\">\n              <div>\n                {!fees && \"-\"}\n                {fees && (\n                  <div>\n                    {formatAmount(feeBps, 2, 2, false)}%&nbsp; ({formatAmount(fees, fromToken.decimals, 4, true)}{\" \"}\n                    {fromToken.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n                  </div>\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {(isLong || isShort) && !isStopOrder && (\n          <div className=\"Exchange-leverage-box\">\n            <div className=\"Exchange-leverage-slider-settings\">\n              <div>Leverage</div>\n              {(isLong || isShort) && hasLeverageOption && (\n                <div className=\"Exchange-leverage-value\">\n                  {parseFloat(leverageOption).toFixed(2)}x\n                </div>\n              )}\n            </div>\n            {isLeverageSliderEnabled && (\n              <div\n                className={cx(\"Exchange-leverage-slider\", \"App-slider\", {\n                  positive: isLong,\n                  negative: isShort,\n                })}\n              >\n                <Slider\n                  min={curLeverage?.min}\n                  max={curLeverage?.max}\n                  step={1}\n                  marks={curLeverage?.marks}\n                  handle={leverageSliderHandle}\n                  onChange={(value) => setLeverageOption(value)}\n                  value={leverageOption}\n                  defaultValue={leverageOption}\n                />\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Tooltip\n                  className=\"has-hint-tooltip nowrap\"\n                  handle=\"Liquidity Source\"\n                  position=\"left-bottom\"\n                  enabled={true}\n                  renderContent={() => {\n                    return (\n                      <div className=\"Tooltip__text\">\n                        DeDeLend will automatically <br />choose an appropriate <br />liquidity source\n                      </div>\n                    );\n                  }}\n                />\n              </div>\n              <div className=\"align-right\">\n                <Selector\n                  items={marketsList.map(market => market.name)}\n                  chosenItem={suitableMarket?.name}\n                  onSelect={onMarketSelect}\n                  hideChosenItem={true}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                Available Liquidity\n              </div>\n              <div className=\"align-right icon-container\">\n                ${suitableMarket && liquidity && (\n                  liquidity[suitableMarket?.name]?.formattedValue\n                )}\n              </div>\n            </div>\n            {isShort && (\n              <div className=\"Exchange-info-row Exchange-info-row_relative\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n\n                <div className=\"align-right\">\n                  {\n                    suitableMarket?.name === 'GMX' &&\n                      <TokenSelector\n                        label=\"Collateral In\"\n                        chainId={chainId}\n                        tokenAddress={shortCollateralAddress}\n                        onSelectToken={onSelectShortCollateralAddress}\n                        tokens={stableTokens}\n                        showTokenImgInDropdown={true}\n                        disabled={false}\n                      />\n                  }\n                  {\n                    suitableMarket?.name === 'GNS' &&\n                      'DAI'\n                  }\n                </div>\n              </div>\n            )}\n            {isLong && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {\n                    suitableMarket?.name === 'GMX' &&\n                      'USD'\n                  }\n                  {\n                    suitableMarket?.name === 'GNS' &&\n                      'DAI'\n                  }\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                  {\n                    suitableMarket?.name === 'GMX' &&\n                    hasExistingPosition && toAmount && toAmount.gt(0) && (\n                      <div className=\"inline-block muted\">\n                        ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                        <BsArrowRight className=\"transition-arrow\" />\n                      </div>\n                    )\n                  }\n                {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n                {!nextAveragePrice && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {\n                  suitableMarket?.name === 'GMX' &&\n                  hasExistingPosition && toAmount && toAmount.gt(0) && (\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                  )\n                }\n                {toAmount &&\n                  displayLiquidationPrice &&\n                  `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n                {!toAmount && displayLiquidationPrice && `-`}\n                {!displayLiquidationPrice && `-`}\n              </div>\n            </div>\n            <ExchangeInfoRow label=\"Fees\">\n              <div>\n                {!feesUsd && \"-\"}\n                {feesUsd && (\n                  <Tooltip\n                    handle={`${suitableMarket?.name === 'GMX' ? '$' : ''}${formatAmount(feesUsd, USD_DECIMALS, 2, true)}${suitableMarket?.name === 'GNS' ? ' DAI' : ''}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          {swapFees && (\n                            <div>\n                              {collateralToken.symbol} is required for collateral. <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={`Swap ${fromToken.symbol} to ${collateralToken.symbol} Fee`}\n                                value={formatAmount(swapFees, USD_DECIMALS, 2, true)}\n                              />\n                              <br />\n                            </div>\n                          )}\n                          <div>\n                            <StatsTooltipRow\n                              label={`Position Fee (0.1% of position size)`}\n                              value={formatAmount(positionFee, USD_DECIMALS, 2, true)}\n                            />\n                          </div>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {isStopOrder && (\n          <div className=\"Exchange-swap-section Exchange-trigger-order-info\">\n            Take-profit and stop-loss orders can be set after opening a position. <br />\n            <br />\n            There will be a \"Close\" button on each position row, clicking this will display the option to set trigger\n            orders. <br />\n            <br />\n            For screenshots and more information, please see the{\" \"}\n            <a\n              href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              docs\n            </a>\n            .\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button className={cx(\"Exchange-swap-button btn\", isPrimaryEnabled() && \" btn_hlight\")} onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </div>\n      {/* {isSwap && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            <Trans>Swap</Trans>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">{fromToken.symbol} Price</div>\n            <div className=\"align-right\">\n              ${fromTokenInfo && formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">{toToken.symbol} Price</div>\n            <div className=\"align-right\">\n              ${toTokenInfo && formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Available Liquidity</Trans>\n            </div>\n\n            <div className=\"align-right al-swap\">\n              <Tooltip\n                handle={`$${formatAmount(maxSwapAmountUsd, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <StatsTooltipRow\n                        label={`Max ${fromTokenInfo.symbol} in`}\n                        value={[\n                          `${formatAmount(maxFromTokenIn, fromTokenInfo.decimals, 0, true)} ${fromTokenInfo.symbol}`,\n                          `($${formatAmount(maxFromTokenInUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                      <StatsTooltipRow\n                        label={`Max ${toTokenInfo.symbol} out`}\n                        value={[\n                          `${formatAmount(maxToTokenOut, toTokenInfo.decimals, 0, true)} ${toTokenInfo.symbol}`,\n                          `($${formatAmount(maxToTokenOutUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          {!isMarketOrder && (\n            <ExchangeInfoRow label=\"Price\">\n              {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromToken, toToken)}\n            </ExchangeInfoRow>\n          )}\n        </div>\n      )}\n      {(isLong || isShort) && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            {isLong ? \"Long\" : \"Short\"}&nbsp;{toToken.symbol}\n          </div>\n          {renderAvailableLongLiquidity()}\n          {isShort && toTokenInfo.hasMaxAvailableShort && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Available Liquidity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`$${formatAmount(toTokenInfo.maxAvailableShort, USD_DECIMALS, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={`Max ${toTokenInfo.symbol} short capacity`}\n                          value={formatAmount(toTokenInfo.maxGlobalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                        <StatsTooltipRow\n                          label={`Current ${toTokenInfo.symbol} shorts`}\n                          value={formatAmount(toTokenInfo.globalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                      </>\n                    );\n                  }}\n                ></Tooltip>\n              </div>\n            </div>\n          )}\n        </div>\n      )} */}\n      {isConfirming && (\n        <ConfirmationBox\n          library={library}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          orders={orders}\n          isSwap={isSwap}\n          isLong={isLong}\n          isMarketOrder={isMarketOrder}\n          orderOption={orderOption}\n          isShort={isShort}\n          fromToken={fromToken}\n          fromTokenInfo={fromTokenInfo}\n          toToken={toToken}\n          toTokenInfo={toTokenInfo}\n          toAmount={toAmount}\n          fromAmount={fromAmount}\n          feeBps={feeBps}\n          onConfirmationClick={onConfirmationClick}\n          setIsConfirming={setIsConfirming}\n          hasExistingPosition={hasExistingPosition}\n          shortCollateralAddress={USDC.address}\n          shortCollateralToken={shortCollateralToken}\n          leverage={leverage}\n          existingPosition={existingPosition}\n          existingLiquidationPrice={existingLiquidationPrice}\n          displayLiquidationPrice={displayLiquidationPrice}\n          nextAveragePrice={nextAveragePrice}\n          triggerPriceUsd={triggerPriceUsd}\n          triggerRatio={triggerRatio}\n          fees={fees}\n          feesUsd={feesUsd}\n          isSubmitting={isSubmitting}\n          isPendingConfirmation={isPendingConfirmation}\n          fromUsdMin={fromUsdMin}\n          toUsdMax={toUsdMax}\n          collateralTokenAddress={collateralTokenAddress}\n          infoTokens={infoTokens}\n          chainId={chainId}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          savedSlippageAmount={savedSlippageAmount}\n          userSlippage={userSlippage}\n          setUserSlippage={setUserSlippage}\n          allowedSlippage={allowedSlippage}\n          market={suitableMarket?.name}\n          TPValue={TPValue}\n          setTPValue={setTPValue}\n          SLValue={SLValue}\n          setSLValue={setSLValue}\n          SLHasError={SLHasError}\n          setSLHasError={setSLHasError}\n          TPHasError={TPHasError}\n          setTPHasError={setTPHasError}\n          liquidity={liquidity}\n        />\n      )}\n      {renderModal()}\n    </div>\n  );\n}","import React, { useEffect, useRef } from 'react';\r\nimport cx from \"classnames\";\r\nimport \"./TradingView.scss\";\r\n\r\nlet tvScriptLoadingPromise;\r\n\r\nexport default function TradingViewWidget({ className, style, chartToken }) {\r\n  const onLoadScriptRef = useRef();\r\n\r\n  useEffect(\r\n    () => {\r\n      onLoadScriptRef.current = createWidget;\r\n\r\n      if (!tvScriptLoadingPromise) {\r\n        tvScriptLoadingPromise = new Promise((resolve) => {\r\n          const script = document.createElement('script');\r\n          script.id = 'tradingview-widget-loading-script';\r\n          script.src = 'https://s3.tradingview.com/tv.js';\r\n          script.type = 'text/javascript';\r\n          script.onload = resolve;\r\n\r\n          document.head.appendChild(script);\r\n        });\r\n      }\r\n\r\n      tvScriptLoadingPromise.then(() => onLoadScriptRef.current && onLoadScriptRef.current());\r\n\r\n      return () => onLoadScriptRef.current = null;\r\n\r\n      function createWidget() {\r\n        if (document.getElementById('tradingview_15468') && 'TradingView' in window) {\r\n          new window.TradingView.widget({\r\n            autosize: true,\r\n            symbol: `BINANCE:${chartToken.symbol}USDT`,\r\n            interval: \"240\",\r\n            timezone: \"Etc/UTC\",\r\n            theme: \"dark\",\r\n            style: \"1\",\r\n            locale: \"en\",\r\n            toolbar_bg: \"#f1f3f6\",\r\n            enable_publishing: false,\r\n            hide_side_toolbar: false,\r\n            container_id: \"tradingview_15468\",\r\n            allow_symbol_change: true,\r\n          });\r\n        }\r\n      }\r\n    },\r\n    [chartToken?.symbol]\r\n  );\r\n\r\n  return (\r\n    <div className={cx('tradingview-widget-container', className)} style={style}>\r\n      <div id='tradingview_15468' />\r\n      <div className='TradingView__copyright text-inline'>\r\n        <a href=\"https://www.tradingview.com/symbols/ETHUSDT/?exchange=BINANCE\" rel=\"noopener\" target=\"_blank\"><span>ETHUSDT chart</span></a> by TradingView\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React, { useState } from 'react';\r\nimport Tab from '../Tab/Tab';\r\nimport TradingView from './TradingView';\r\nimport cx from \"classnames\";\r\nimport './ChartSelector.scss';\r\nimport { useLocalStorage } from 'react-use';\r\n\r\nconst ChartSelector = (props) => {\r\n\tconst {\r\n\t\tCHART_PERIODS,\r\n\t\tperiod,\r\n\t\tsetPeriod,\r\n\t\tcandleStatsHtml,\r\n\t\tchartRef,\r\n\t\tchartToken,\r\n\t} = props;\r\n\r\n\tconst CHARTS = [\"simple\", \"trading\"];\r\n\tconst CHARTS_LABELS = {\r\n\t\tsimple: \"Simple chart\",\r\n\t\ttrading: \"Trading View\",\r\n\t};\r\n\tconst [chart, setChart] = useLocalStorage(\"Exchange-chart\", \"simple\");\r\n\r\n\tconst onChartOptionChange = (chart) => {\r\n\t\tsetChart(chart);\r\n\t}\r\n\r\n\tconst isTrading = chart === \"trading\";\r\n\t\r\n\treturn (\r\n\t\t<div className={cx(\"ExchangeChart-bottom App-box App-box-border\", isTrading && \"ExchangeChart_trading-active\")}>\r\n\t\t\t<Tab\r\n\t\t\t\toptions={CHARTS}\r\n\t\t\t\toptionLabels={CHARTS_LABELS}\r\n\t\t\t\toption={chart}\r\n\t\t\t\tonChange={onChartOptionChange}\r\n\t\t\t\tclassName={\"Exchange-chart-tabs\"}\r\n\t\t\t/>\r\n\t\t\t<div className='ExchangeChart__simple'>\r\n\t\t\t\t<div className=\"ExchangeChart-bottom-header\">\r\n\t\t\t\t\t<div className=\"ExchangeChart-bottom-controls\">\r\n\t\t\t\t\t\t<Tab options={Object.keys(CHART_PERIODS)} option={period} setOption={setPeriod} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{candleStatsHtml}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"ExchangeChart-bottom-content\" ref={chartRef}></div>\r\n\t\t\t</div>\r\n\t\t\t<TradingView\r\n\t\t\t\tclassName={\"ExchangeChart__trading\"}\r\n\t\t\t\tchartToken={chartToken}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChartSelector;","import React, { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport { createChart } from \"krasulya-lightweight-charts\";\n\nimport {\n  USD_DECIMALS,\n  SWAP,\n  INCREASE,\n  CHART_PERIODS,\n  getTokenInfo,\n  formatAmount,\n  formatDateTime,\n  usePrevious,\n  getLiquidationPrice,\n  useLocalStorageSerializeKey,\n  numberWithCommas,\n} from \"../../lib/legacy\";\nimport { useChartPrices } from \"../../domain/legacy\";\nimport Tab from \"../Tab/Tab\";\n\nimport { getTokens, getToken } from \"../../config/Tokens\";\nimport ChartTokenSelector from \"./ChartTokenSelector\";\nimport Tooltip from './../Tooltip/Tooltip';\nimport ChartSelector from './ChartSelector';\n\n\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nexport function getChartToken(swapOption, fromToken, toToken, chainId) {\n  if (!fromToken || !toToken) {\n    return;\n  }\n\n  if (swapOption !== SWAP) {\n    return toToken;\n  }\n\n  if (fromToken.isUsdg && toToken.isUsdg) {\n    return getTokens(chainId).find((t) => t.isStable);\n  }\n  if (fromToken.isUsdg) {\n    return toToken;\n  }\n  if (toToken.isUsdg) {\n    return fromToken;\n  }\n\n  if (fromToken.isStable && toToken.isStable) {\n    return toToken;\n  }\n  if (fromToken.isStable) {\n    return toToken;\n  }\n  if (toToken.isStable) {\n    return fromToken;\n  }\n\n  return toToken;\n}\n\nconst DEFAULT_PERIOD = \"4h\";\n\nconst RED_COLOR = \"#C75E4B\";\nconst GREEN_COLOR = \"#46956A\";\n\nconst getSeriesOptions = () => ({\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\n  lineColor: \"#5472cc\",\n  topColor: \"rgba(49, 69, 131, 0.4)\",\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\n  lineWidth: 2,\n  priceLineColor: \"#384263\",\n  downColor: RED_COLOR,\n  wickDownColor: RED_COLOR,\n  upColor: GREEN_COLOR,\n  wickUpColor: GREEN_COLOR,\n  borderVisible: false,\n});\n\nconst getChartOptions = (width, height) => ({\n  width,\n  height,\n  layout: {\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\n    textColor: \"#747FA6\",\n    fontFamily: \"Gantari\",\n  },\n  localization: {\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\n    timeFormatter: (businessDayOrTimestamp) => {\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\n    },\n  },\n  grid: {\n    vertLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n    horzLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\n  timeScale: {\n    rightOffset: 5,\n    borderVisible: false,\n    barSpacing: 5,\n    timeVisible: true,\n    fixLeftEdge: true,\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\n  priceScale: {\n    borderVisible: false,\n  },\n  crosshair: {\n    horzLine: {\n      color: \"#aaa\",\n    },\n    vertLine: {\n      color: \"#aaa\",\n    },\n    mode: 0,\n  },\n});\n\nexport default function ExchangeTVChart(props) {\n  const {\n    swapOption,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    chainId,\n    positions,\n    savedShouldShowPositionLines,\n    orders,\n    setToTokenAddress,\n  } = props;\n  const [currentChart, setCurrentChart] = useState();\n  const [currentSeries, setCurrentSeries] = useState();\n\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\n  if (!(period in CHART_PERIODS)) {\n    period = DEFAULT_PERIOD;\n  }\n\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  const [chartToken, setChartToken] = useState({\n    maxPrice: null,\n    minPrice: null,\n  });\n  useEffect(() => {\n    const tmp = getChartToken(swapOption, fromToken, toToken, chainId);\n    setChartToken(tmp);\n  }, [swapOption, fromToken, toToken, chainId]);\n\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\n  const previousMarketName = usePrevious(marketName);\n\n  const currentOrders = useMemo(() => {\n    if (swapOption === SWAP || !chartToken) {\n      return [];\n    }\n\n    return orders.filter((order) => {\n      if (order.type === SWAP) {\n        // we can't show non-stable to non-stable swap orders with existing charts\n        // so to avoid users confusion we'll show only long/short orders\n        return false;\n      }\n\n      const indexToken = getToken(chainId, order.indexToken);\n      return order.indexToken === chartToken.address || (chartToken.isNative && indexToken.isWrapped);\n    });\n  }, [orders, chartToken, swapOption, chainId]);\n\n  const ref = useRef(null);\n  const chartRef = useRef(null);\n\n  const currentAveragePrice =\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\n  const [priceData, updatePriceData] = useChartPrices(\n    chainId,\n    chartToken.symbol,\n    chartToken.isStable,\n    period,\n    currentAveragePrice\n  );\n\n  const [chartInited, setChartInited] = useState(false);\n  useEffect(() => {\n    if (marketName !== previousMarketName) {\n      setChartInited(false);\n    }\n  }, [marketName, previousMarketName]);\n\n  const scaleChart = useCallback(() => {\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\n    const to = Date.now() / 1000 + timezoneOffset;\n    currentChart.timeScale().setVisibleRange({ from, to });\n  }, [currentChart, period]);\n\n  const onCrosshairMove = useCallback(\n    (evt) => {\n      if (!evt.time) {\n        setHoveredCandlestick(null);\n        return;\n      }\n\n      for (const point of evt.seriesPrices.values()) {\n        setHoveredCandlestick((hoveredCandlestick) => {\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\n            // rerender optimisations\n            return hoveredCandlestick;\n          }\n          return {\n            time: evt.time,\n            ...point,\n          };\n        });\n        break;\n      }\n    },\n    [setHoveredCandlestick]\n  );\n\n  useEffect(() => {\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\n      return;\n    }\n\n    const chart = createChart(\n      chartRef.current,\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\n    );\n\n    chart.subscribeCrosshairMove(onCrosshairMove);\n\n    const series = chart.addCandlestickSeries(getSeriesOptions());\n\n    setCurrentChart(chart);\n    setCurrentSeries(series);\n  }, [ref, priceData, currentChart, onCrosshairMove]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePriceData(undefined, true);\n    }, 10 * 1000);\n    return () => clearInterval(interval);\n  }, [updatePriceData]);\n\n  useEffect(() => {\n    if (!currentChart) {\n      return;\n    }\n    const resizeChart = () => {\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\n    };\n    window.addEventListener(\"resize\", resizeChart);\n    return () => window.removeEventListener(\"resize\", resizeChart);\n  }, [currentChart]);\n\n  useEffect(() => {\n    if (currentSeries && priceData && priceData.length) {\n      currentSeries.setData(priceData);\n\n      if (!chartInited) {\n        scaleChart();\n        setChartInited(true);\n      }\n    }\n  }, [priceData, currentSeries, chartInited, scaleChart]);\n\n  useEffect(() => {\n    const lines = [];\n    if (currentSeries && savedShouldShowPositionLines) {\n      if (currentOrders && currentOrders.length > 0) {\n        currentOrders.forEach((order) => {\n          const indexToken = getToken(chainId, order.indexToken);\n          let tokenSymbol;\n          if (indexToken && indexToken.symbol) {\n            tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n          }\n          const title = `${order.type === INCREASE ? \"Inc.\" : \"Dec.\"} ${tokenSymbol} ${\n            order.isLong ? \"Long\" : \"Short\"\n          }`;\n          const color = \"#3a3e5e\";\n          /* lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)),\n              color,\n              title: title.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          ); */\n        });\n      }\n      if (positions && positions.length > 0) {\n        const color = \"#3a3e5e\";\n\n        positions.forEach((position) => {\n          /* lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\n              color,\n              title: `Open ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          ); */\n\n          const liquidationPrice = getLiquidationPrice(position);\n          /* lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(liquidationPrice, USD_DECIMALS, 2)),\n              color,\n              title: `Liq. ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          ); */\n        });\n      }\n    }\n    return () => {\n      lines.forEach((line) => currentSeries.removePriceLine(line));\n    };\n  }, [currentOrders, positions, currentSeries, chainId, savedShouldShowPositionLines]);\n\n  const candleStatsHtml = useMemo(() => {\n    if (!priceData) {\n      return null;\n    }\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\n    if (!candlestick) {\n      return null;\n    }\n\n    const className = cx({\n      \"ExchangeChart-bottom-stats\": true,\n      positive: candlestick.open <= candlestick.close,\n      negative: candlestick.open > candlestick.close,\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\n    });\n\n    const toFixedNumbers = 2;\n\n    return (\n      <div className={className}>\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\n      </div>\n    );\n  }, [hoveredCandlestick, priceData]);\n\n  let high;\n  let low;\n  let deltaPrice;\n  let delta;\n  let deltaPercentage;\n  let deltaPercentageStr;\n\n  const now = parseInt(Date.now() / 1000);\n  const timeThreshold = now - 24 * 60 * 60;\n\n  if (priceData) {\n    for (let i = priceData.length - 1; i > 0; i--) {\n      const price = priceData[i];\n      if (price.time < timeThreshold) {\n        break;\n      }\n      if (!low) {\n        low = price.low;\n      }\n      if (!high) {\n        high = price.high;\n      }\n\n      if (price.high > high) {\n        high = price.high;\n      }\n      if (price.low < low) {\n        low = price.low;\n      }\n\n      deltaPrice = price.open;\n    }\n  }\n\n  if (deltaPrice && currentAveragePrice) {\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n    delta = average - deltaPrice;\n    deltaPercentage = (delta * 100) / average;\n    if (deltaPercentage > 0) {\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\n    } else {\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\n    }\n    if (deltaPercentage === 0) {\n      deltaPercentageStr = \"0.00\";\n    }\n  }\n\n  if (!chartToken) {\n    return null;\n  }\n\n  const onSelectToken = (token) => {\n    const tmp = getTokenInfo(infoTokens, token.address);\n    setChartToken(tmp);\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  return (\n    <div className=\"ExchangeChart tv\" ref={ref}>\n      <div className=\"ExchangeChart-top App-box App-box-border\">\n        <div className=\"ExchangeChart-top-inner\">\n          <div>\n            <div className=\"ExchangeChart-title\">\n              <ChartTokenSelector\n                chainId={chainId}\n                selectedToken={chartToken}\n                swapOption={swapOption}\n                infoTokens={infoTokens}\n                onSelectToken={onSelectToken}\n                className=\"chart-token-selector pos-relative\"\n              />\n            </div>\n          </div>\n          <div className=\"ExchangeChart-stats-container\">\n            <div>\n              <div className=\"ExchangeChart-info-label\">\n                <Tooltip\n                  className=\"has-hint-tooltip nowrap cur-price-tooltip\"\n                  handle=\"Current Price\"\n                  position=\"left-bottom\"\n                  enabled={true}\n                  renderContent={() => {\n                    return (\n                      <div className=\"Tooltip__text\">\n                        Asset price is taken from GMX\n                      </div>\n                    );\n                  }}\n                />\n              </div>\n              \n              {/* <div className=\"ExchangeChart-info-label\">\n                Current Price\n              </div> */}\n              <div className=\"ExchangeChart-main-price\">\n                ${chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div>\n              <div className=\"ExchangeChart-info-label\">24h Change</div>\n              <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\n                {!deltaPercentageStr && \"-\"}\n                {deltaPercentageStr && deltaPercentageStr}\n              </div>\n            </div>\n            <div className=\"ExchangeChart-additional-info\">\n              <div className=\"ExchangeChart-info-label\">24h High</div>\n              <div>\n                {!high && \"-\"}\n                {high && numberWithCommas(high.toFixed(2))}\n              </div>\n            </div>\n            <div className=\"ExchangeChart-additional-info\">\n              <div className=\"ExchangeChart-info-label\">24h Low</div>\n              <div>\n                {!low && \"-\"}\n                {low && numberWithCommas(low.toFixed(2))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <ChartSelector\n        CHART_PERIODS={CHART_PERIODS}\n        period={period}\n        setPeriod={setPeriod}\n        candleStatsHtml={candleStatsHtml}\n        chartRef={chartRef}\n        chartToken={chartToken}\n      />\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  formatAmount,\n  bigNumberify,\n  ARBITRUM,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  USD_DECIMALS,\n  DUST_USD,\n  BASIS_POINTS_DIVISOR,\n  USDG_ADDRESS,\n  SLIPPAGE_BPS_KEY,\n  TRIGGER_PREFIX_BELOW,\n  TRIGGER_PREFIX_ABOVE,\n  MIN_PROFIT_TIME,\n  usePrevious,\n  formatAmountFree,\n  parseValue,\n  expandDecimals,\n  getTokenInfo,\n  getLiquidationPrice,\n  getLeverage,\n  getMarginFee,\n  PRECISION,\n  MARKET,\n  STOP,\n  DECREASE,\n  useLocalStorageSerializeKey,\n  calculatePositionDelta,\n  getDeltaStr,\n  getProfitPrice,\n  formatDateTime,\n  getTimeRemaining,\n  getNextToAmount,\n  getUsd,\n  USDG_DECIMALS,\n  CLOSE_POSITION_RECEIVE_TOKEN_KEY,\n  useLocalStorageByChainId,\n  adjustForDecimals,\n  IS_NETWORK_DISABLED,\n  getChainName,\n  MAX_ALLOWED_LEVERAGE,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport { createDecreaseOrder, useHasOutdatedUi } from \"../../domain/legacy\";\nimport { getContract } from \"../../config/Addresses\";\nimport PositionRouter from \"../../abis/PositionRouter.json\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport TokenSelector from \"./TokenSelector\";\nimport { getTokens } from \"../../config/Tokens\";\nimport \"./PositionSeller.css\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract } from \"../../lib/contracts/callContract\";\n\nimport marketImg from '../../img/ddl/icon_market.svg'\nimport marketActiveImg from '../../img/ddl/icon_market_active.svg'\nimport triggerImg from '../../img/ddl/icon_trigger.svg'\nimport triggerActiveImg from '../../img/ddl/icon_trigger_active.svg'\nimport SlippageInput from './../SlippageInput/SlippageInput';\n\nconst CLOSE_ICONS = {\n  Market: marketImg,\n  Market_active: marketActiveImg,\n  Stop: triggerImg,\n  Stop_active: triggerActiveImg,\n}\n\nconst { AddressZero } = ethers.constants;\nconst ORDER_SIZE_DUST_USD = expandDecimals(1, USD_DECIMALS - 1); // $0.10\n\nconst orderOptionLabels = {\n  [MARKET]: \"Market\",\n  [STOP]: \"Trigger\",\n};\n\nfunction getTokenAmount(usdAmount, tokenAddress, max, infoTokens) {\n  if (!usdAmount) {\n    return;\n  }\n  if (tokenAddress === USDG_ADDRESS) {\n    return usdAmount.mul(expandDecimals(1, 18)).div(PRECISION);\n  }\n  const info = getTokenInfo(infoTokens, tokenAddress);\n  if (!info) {\n    return;\n  }\n  if (max && !info.maxPrice) {\n    return;\n  }\n  if (!max && !info.minPrice) {\n    return;\n  }\n\n  return usdAmount.mul(expandDecimals(1, info.decimals)).div(max ? info.minPrice : info.maxPrice);\n}\n\nfunction shouldSwap(collateralToken, receiveToken) {\n  // If position collateral is WETH in contract, then position.collateralToken is { symbol: ETH, isNative: true,  }\n  // @see https://github.com/gmx-io/gmx-interface/blob/master/src/pages/Exchange/Exchange.js#L162\n  // meaning if collateralToken.isNative === true in reality position has WETH as a collateral\n  // and if collateralToken.isNative === true and receiveToken.isNative === true then positions WETH will be unwrapped and user will receive native ETH\n  const isCollateralWrapped = collateralToken.isNative;\n\n  const isSameToken =\n    collateralToken.address === receiveToken.address || (isCollateralWrapped && receiveToken.isWrapped);\n\n  const isUnwrap = isCollateralWrapped && receiveToken.isNative;\n\n  return !isSameToken && !isUnwrap;\n}\n\nfunction getSwapLimits(infoTokens, fromTokenAddress, toTokenAddress) {\n  const fromInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  let maxInUsd;\n  let maxIn;\n  let maxOut;\n  let maxOutUsd;\n\n  if (!fromInfo?.maxUsdgAmount) {\n    maxInUsd = bigNumberify(0);\n    maxIn = bigNumberify(0);\n  } else {\n    maxInUsd = fromInfo.maxUsdgAmount\n      .sub(fromInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    maxIn = maxInUsd.mul(expandDecimals(1, fromInfo.decimals)).div(fromInfo.maxPrice).toString();\n  }\n\n  if (!toInfo?.poolAmount || !toInfo?.bufferAmount) {\n    maxOut = bigNumberify(0);\n    maxOutUsd = bigNumberify(0);\n  } else {\n    maxOut = toInfo.availableAmount.gt(toInfo.poolAmount.sub(toInfo.bufferAmount))\n      ? toInfo.poolAmount.sub(toInfo.bufferAmount)\n      : toInfo.availableAmount;\n\n    maxOutUsd = getUsd(maxOut, toInfo.address, false, infoTokens);\n  }\n\n  return {\n    maxIn,\n    maxInUsd,\n    maxOut,\n    maxOutUsd,\n  };\n}\n\nexport default function PositionSeller(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    account,\n    library,\n    infoTokens,\n    setPendingTxns,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    isWaitingForPluginApproval,\n    isPluginApproving,\n    orderBookApproved,\n    setOrdersToaOpen,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    minExecutionFee,\n    minExecutionFeeErrorMessage,\n    usdgSupply,\n    totalTokenWeights,\n    initTab,\n  } = props;\n\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey([chainId, \"Exchange-keep-leverage\"], true);\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [fromValue, setFromValue] = useState(\"\");\n\n  const [userSlippage, setUserSlippage] = useState('')\n  \n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const toTokens = getTokens(chainId);\n\n  const [savedRecieveTokenAddress, setSavedRecieveTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${CLOSE_POSITION_RECEIVE_TOKEN_KEY}-${position.indexToken.symbol}-${position?.isLong ? \"long\" : \"short\"}`\n  );\n\n  const [swapToToken, setSwapToToken] = useState(() =>\n    savedRecieveTokenAddress ? toTokens.find((token) => token.address === savedRecieveTokenAddress) : undefined\n  );\n\n  // Slippage Edit\n  // let allowedSlippage = savedSlippageAmount;\n  let allowedSlippage = DEFAULT_SLIPPAGE_AMOUNT;\n  // if (isHigherSlippageAllowed) {\n  //   allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  // }\n  if (userSlippage !== '') {\n    allowedSlippage = userSlippage * 100;\n  }\n\n  const orderOptions = [MARKET, STOP];\n  let [orderOption, setOrderOption] = useState(initTab ?? MARKET);\n\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const needPositionRouterApproval = !positionRouterApproved && orderOption === MARKET;\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = orderOption === MARKET ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const [nextDelta, nextHasProfit = bigNumberify(0)] = useMemo(() => {\n    if (!position) {\n      return [bigNumberify(0), false];\n    }\n\n    if (orderOption !== STOP) {\n      return [position.delta, position.hasProfit, position.deltaPercentage];\n    }\n\n    if (!triggerPriceUsd) {\n      return [bigNumberify(0), false];\n    }\n\n    const { delta, hasProfit, deltaPercentage } = calculatePositionDelta(triggerPriceUsd, position);\n    return [delta, hasProfit, deltaPercentage];\n  }, [position, orderOption, triggerPriceUsd]);\n\n  const existingOrders = useMemo(() => {\n    if (orderOption === STOP && (!triggerPriceUsd || triggerPriceUsd.eq(0))) {\n      return [];\n    }\n    if (!orders || !position) {\n      return [];\n    }\n\n    const ret = [];\n    for (const order of orders) {\n      // only Stop orders can't be executed without corresponding opened position\n      if (order.type !== DECREASE) continue;\n\n      // if user creates Stop-Loss we need only Stop-Loss orders and vice versa\n      if (orderOption === STOP) {\n        const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n        if (triggerAboveThreshold !== order.triggerAboveThreshold) continue;\n      }\n\n      const sameToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      if (order.isLong === position.isLong && sameToken) {\n        ret.push(order);\n      }\n    }\n    return ret;\n  }, [position, orders, triggerPriceUsd, orderOption, nativeTokenAddress]);\n\n  const existingOrder = existingOrders[0];\n\n  const needOrderBookApproval = orderOption === STOP && !orderBookApproved;\n\n  const isSwapAllowed = orderOption === MARKET;\n\n  const { data: hasOutdatedUi } = useHasOutdatedUi();\n\n  let collateralToken;\n  let receiveToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let isClosing;\n  let sizeDelta;\n\n  let nextCollateral;\n  let collateralDelta = bigNumberify(0);\n  let receiveAmount = bigNumberify(0);\n  let convertedReceiveAmount = bigNumberify(0);\n  let adjustedDelta = bigNumberify(0);\n\n  let isNotEnoughReceiveTokenLiquidity;\n  let isCollateralPoolCapacityExceeded;\n\n  let title;\n  let fundingFee;\n  let positionFee;\n  let swapFeeToken;\n  let swapFee;\n  let totalFees = bigNumberify(0);\n\n  let executionFee = orderOption === STOP ? getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\") : minExecutionFee;\n\n  let executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens) || bigNumberify(0);\n\n  if (position) {\n    fundingFee = position.fundingFee;\n    fromAmount = parseValue(fromValue, USD_DECIMALS);\n    sizeDelta = fromAmount;\n\n    title = `Close ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\n    collateralToken = position.collateralToken;\n    liquidationPrice = getLiquidationPrice(position);\n\n    if (fromAmount) {\n      isClosing = position.size.sub(fromAmount).lt(DUST_USD);\n      positionFee = getMarginFee(fromAmount);\n    }\n\n    if (isClosing) {\n      sizeDelta = position.size;\n      receiveAmount = position.collateral;\n    } else if (orderOption === STOP && sizeDelta && existingOrders.length > 0) {\n      let residualSize = position.size;\n      for (const order of existingOrders) {\n        residualSize = residualSize.sub(order.sizeDelta);\n      }\n      if (residualSize.sub(sizeDelta).abs().lt(ORDER_SIZE_DUST_USD)) {\n        sizeDelta = residualSize;\n      }\n    }\n\n    if (sizeDelta) {\n      adjustedDelta = nextDelta.mul(sizeDelta).div(position.size);\n    }\n\n    if (nextHasProfit) {\n      receiveAmount = receiveAmount.add(adjustedDelta);\n    } else {\n      if (receiveAmount.gt(adjustedDelta)) {\n        receiveAmount = receiveAmount.sub(adjustedDelta);\n      } else {\n        receiveAmount = bigNumberify(0);\n      }\n    }\n\n    if (keepLeverage && sizeDelta && !isClosing) {\n      collateralDelta = sizeDelta.mul(position.collateral).div(position.size);\n      // if the position will be realising a loss then reduce collateralDelta by the realised loss\n      if (!nextHasProfit) {\n        const deductions = adjustedDelta.add(positionFee).add(fundingFee);\n        if (collateralDelta.gt(deductions)) {\n          collateralDelta = collateralDelta = collateralDelta.sub(deductions);\n        } else {\n          collateralDelta = bigNumberify(0);\n        }\n      }\n    }\n\n    maxAmount = position.size;\n    maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n    maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n\n    if (fromAmount && collateralToken.maxPrice) {\n      convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n      convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n    }\n\n    totalFees = totalFees.add(positionFee || bigNumberify(0)).add(fundingFee || bigNumberify(0));\n\n    receiveAmount = receiveAmount.add(collateralDelta);\n\n    if (sizeDelta) {\n      if (receiveAmount.gt(totalFees)) {\n        receiveAmount = receiveAmount.sub(totalFees);\n      } else {\n        receiveAmount = bigNumberify(0);\n      }\n    }\n\n    receiveToken = isSwapAllowed && swapToToken ? swapToToken : collateralToken;\n\n    // Calculate swap fees\n    if (isSwapAllowed && swapToToken) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        convertedAmount,\n        collateralToken.address,\n        receiveToken.address,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        true\n      );\n\n      if (feeBasisPoints) {\n        swapFee = receiveAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        swapFeeToken = getTokenAmount(swapFee, collateralToken.address, false, infoTokens);\n        totalFees = totalFees.add(swapFee || bigNumberify(0));\n        receiveAmount = receiveAmount.sub(swapFee);\n      }\n    }\n\n    convertedReceiveAmount = getTokenAmount(receiveAmount, receiveToken.address, false, infoTokens);\n\n    // Check swap limits (max in / max out)\n    if (isSwapAllowed && shouldSwap(collateralToken, receiveToken)) {\n      const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n      const receiveTokenInfo = getTokenInfo(infoTokens, receiveToken.address);\n\n      isNotEnoughReceiveTokenLiquidity =\n        receiveTokenInfo.availableAmount.lt(convertedReceiveAmount) ||\n        receiveTokenInfo.bufferAmount.gt(receiveTokenInfo.poolAmount.sub(convertedReceiveAmount));\n\n      if (\n        collateralInfo.maxUsdgAmount &&\n        collateralInfo.maxUsdgAmount.gt(0) &&\n        collateralInfo.usdgAmount &&\n        collateralInfo.maxPrice\n      ) {\n        const usdgFromAmount = adjustForDecimals(receiveAmount, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = collateralInfo.usdgAmount.add(usdgFromAmount);\n\n        if (nextUsdgAmount.gt(collateralInfo.maxUsdgAmount)) {\n          isCollateralPoolCapacityExceeded = true;\n        }\n      }\n    }\n\n    if (isClosing) {\n      nextCollateral = bigNumberify(0);\n    } else {\n      if (position.collateral) {\n        nextCollateral = position.collateral;\n        if (collateralDelta && collateralDelta.gt(0)) {\n          nextCollateral = position.collateral.sub(collateralDelta);\n        } else if (position.delta && position.delta.gt(0) && sizeDelta) {\n          if (!position.hasProfit) {\n            nextCollateral = nextCollateral.sub(adjustedDelta);\n          }\n        }\n      }\n    }\n\n    if (fromAmount) {\n      if (!isClosing && !keepLeverage) {\n        nextLeverage = getLeverage({\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          hasProfit: nextHasProfit,\n          delta: nextDelta,\n          includeDelta: savedIsPnlInLeverage,\n        });\n        nextLiquidationPrice = getLiquidationPrice({\n          isLong: position.isLong,\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          averagePrice: position.averagePrice,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          delta: nextDelta,\n          hasProfit: nextHasProfit,\n          includeDelta: true,\n        });\n      }\n    }\n  }\n\n  const [deltaStr, deltaPercentageStr] = useMemo(() => {\n    if (!position || !position.markPrice) {\n      return [\"-\", \"-\"];\n    }\n    if (orderOption !== STOP) {\n      const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n        position.markPrice,\n        position,\n        fromAmount\n      );\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: pendingDelta,\n        deltaPercentage: pendingDeltaPercentage,\n        hasProfit,\n      });\n      return [deltaStr, deltaPercentageStr];\n    }\n    if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n      return [\"-\", \"-\"];\n    }\n\n    const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n      triggerPriceUsd,\n      position,\n      fromAmount\n    );\n\n    const { deltaStr, deltaPercentageStr } = getDeltaStr({\n      delta: pendingDelta,\n      deltaPercentage: pendingDeltaPercentage,\n      hasProfit,\n    });\n    return [deltaStr, deltaPercentageStr];\n  }, [position, triggerPriceUsd, orderOption, fromAmount]);\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (orderOption === STOP) return [t`Trigger order disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Position close disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return t`Page outdated, please refresh`;\n    }\n    if (!fromAmount) {\n      return t`Enter an amount`;\n    }\n    if (nextLeverage && nextLeverage.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (orderOption === STOP) {\n      if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n        return t`Enter Price`;\n      }\n      if (position.isLong && triggerPriceUsd.lte(liquidationPrice)) {\n        return t`Price below Liq. Price`;\n      }\n      if (!position.isLong && triggerPriceUsd.gte(liquidationPrice)) {\n        return t`Price above Liq. Price`;\n      }\n\n      if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n        return t`Invalid price, see warning`;\n      }\n    }\n\n    if (isNotEnoughReceiveTokenLiquidity) {\n      return \"Insufficient receive token liquidity\";\n    }\n\n    if (isCollateralPoolCapacityExceeded) {\n      return `${collateralToken.symbol} pool exceeded, can only Receive ${collateralToken.symbol}`;\n    }\n\n    if (!isClosing && position && position.size && fromAmount) {\n      if (position.size.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\n        return t`Leftover position below 10 USD`;\n      }\n      if (nextCollateral && nextCollateral.lt(expandDecimals(5, USD_DECIMALS))) {\n        return t`Leftover collateral below 5 USD`;\n      }\n    }\n\n    if (position && position.size && position.size.lt(fromAmount)) {\n      return t`Max close amount exceeded`;\n    }\n\n    if (nextLeverage && nextLeverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return t`Min leverage: 1.1x`;\n    }\n\n    if (nextLeverage && nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n      return t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`;\n    }\n\n    if (hasPendingProfit && orderOption !== STOP && !isProfitWarningAccepted) {\n      return t`Forfeit profit not checked`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if (isPluginApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const hasPendingProfit = MIN_PROFIT_TIME > 0 && position.delta.eq(0) && position.pendingDelta.gt(0);\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n\n    if (orderOption === STOP) {\n      if (isSubmitting) return t`Creating Order...`;\n\n      if (needOrderBookApproval && isWaitingForPluginApproval) {\n        return t`Enabling Orders...`;\n      }\n      if (isPluginApproving) {\n        return t`Enabling Orders...`;\n      }\n      if (needOrderBookApproval) {\n        return t`Enable Orders`;\n      }\n\n      return t`Create Order`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (hasPendingProfit) {\n      return t`Close without profit`;\n    }\n    return isSubmitting ? t`Closing...` : t`Close`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n    setIsProfitWarningAccepted(false);\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const onClickPrimary = async () => {\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    const collateralTokenAddress = position.collateralToken.isNative\n      ? nativeTokenAddress\n      : position.collateralToken.address;\n    const indexTokenAddress = position.indexToken.isNative ? nativeTokenAddress : position.indexToken.address;\n\n    if (orderOption === STOP) {\n      const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n\n      createDecreaseOrder(\n        chainId,\n        library,\n        indexTokenAddress,\n        sizeDelta,\n        collateralTokenAddress,\n        collateralDelta,\n        position.isLong,\n        triggerPriceUsd,\n        triggerAboveThreshold,\n        {\n          sentMsg: t`Order submitted!`,\n          successMsg: t`Order created!`,\n          failMsg: t`Order creation failed.`,\n          setPendingTxns,\n        }\n      )\n        .then(() => {\n          setFromValue(\"\");\n          setIsVisible(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n        });\n      return;\n    }\n\n    const priceBasisPoints = position.isLong\n      ? BASIS_POINTS_DIVISOR - allowedSlippage\n      : BASIS_POINTS_DIVISOR + allowedSlippage;\n    const refPrice = position.isLong ? position.indexToken.minPrice : position.indexToken.maxPrice;\n    let priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n    const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n    const minProfitTimeExpired = parseInt(Date.now() / 1000) > minProfitExpiration;\n\n    if (nextHasProfit && !minProfitTimeExpired && !isProfitWarningAccepted) {\n      if ((position.isLong && priceLimit.lt(profitPrice)) || (!position.isLong && priceLimit.gt(profitPrice))) {\n        priceLimit = profitPrice;\n      }\n    }\n\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n\n    const path = [tokenAddress0];\n\n    const isUnwrap = receiveToken.address === AddressZero;\n    const isSwap = receiveToken.address !== tokenAddress0;\n\n    if (isSwap) {\n      if (isUnwrap && tokenAddress0 !== nativeTokenAddress) {\n        path.push(nativeTokenAddress);\n      } else if (!isUnwrap) {\n        path.push(receiveToken.address);\n      }\n    }\n\n    const withdrawETH = isUnwrap;\n\n    const params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      collateralDelta, // _collateralDelta\n      sizeDelta, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n\n    const successMsg = t`Requested decrease of ${position.indexToken.symbol} ${\n      position.isLong ? \"Long\" : \"Short\"\n    } by ${formatAmount(sizeDelta, USD_DECIMALS, 2)} USD.`;\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"createDecreasePosition\", params, {\n      value: minExecutionFee,\n      sentMsg: t`Close submitted!`,\n      successMsg,\n      failMsg: t`Close failed.`,\n      setPendingTxns,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        let nextSize = position.size.sub(sizeDelta);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (!existingOrder) {\n      return;\n    }\n    const indexToken = getTokenInfo(infoTokens, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    const prefix = existingOrder.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n    return (\n      <div className=\"Confirmation-box-warning\">\n        You have an active order to decrease {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken} {indexToken.symbol}{\" \"}\n        ($\n        {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at {prefix}{\" \"}\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n      </div>\n    );\n  }, [existingOrder, infoTokens]);\n\n  function renderMinProfitWarning() {\n    if (MIN_PROFIT_TIME === 0) {\n      return null;\n    }\n\n    if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n\n      if (orderOption === MARKET) {\n        return (\n          <div className=\"Confirmation-box-warning\">\n            Reducing the position at the current price will forfeit a&nbsp;\n            <a\n              href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              pending profit\n            </a>{\" \"}\n            of {deltaStr}. <br />\n            <br />\n            Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n            applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n          </div>\n        );\n      }\n      return (\n        <div className=\"Confirmation-box-warning\">\n          This order will forfeit a&nbsp;\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\n            profit\n          </a>{\" \"}\n          of {deltaStr}. <br />\n          Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n          applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n        </div>\n      );\n    }\n  }\n\n  const profitPrice = getProfitPrice(orderOption === MARKET ? position.markPrice : triggerPriceUsd, position);\n\n  let triggerPricePrefix;\n  if (triggerPriceUsd) {\n    triggerPricePrefix = triggerPriceUsd.gt(position.markPrice) ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n  }\n\n  const shouldShowExistingOrderWarning = false;\n\n  const [hasInputFocus, setHasInputFocus] = useState(false);\n  const [hasInputError, setHasInputError] = useState(false);\n  const checkInputError = (inputVal) => {\n    if (!isPrimaryEnabled() && inputVal !== '') {\n      setHasInputError(true);\n    } else {\n      setHasInputError(false);\n    }\n  }\n\n  useEffect(() => {\n    checkInputError(fromValue);\n  }, [fromValue])\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal\n          className=\"PositionSeller-modal\"\n          isVisible={isVisible}\n          setIsVisible={setIsVisible}\n          label={title}\n          allowContentTouchMove\n          isNifty={true}\n        >\n          {flagOrdersEnabled && (\n            <Tab\n              options={orderOptions}\n              option={orderOption}\n              optionLabels={orderOptionLabels}\n              onChange={onOrderOptionChange}\n              icons={CLOSE_ICONS}\n            />\n          )}\n          <div className={\"Exchange-swap-section\"\n            + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                {convertedAmountFormatted && (\n                  <div className=\"Exchange-swap-usd\">\n                    Close: {convertedAmountFormatted} {position.collateralToken.symbol}\n                  </div>\n                )}\n                {!convertedAmountFormatted && \"Close\"}\n              </div>\n              {maxAmount && (\n                <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                  Max: {maxAmountFormatted}\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={fromValue}\n                  onChange={(e) => setFromValue(e.target.value)}\n                  onFocus={(e) => {\n                    setHasInputFocus(true);\n                  }}\n                  onBlur={(e) => {\n                    setHasInputFocus(false);\n                  }}\n                />\n                {fromValue !== maxAmountFormattedFree && (\n                  <div\n                    className=\"Exchange-swap-max\"\n                    onClick={() => {\n                      setFromValue(maxAmountFormattedFree);\n                    }}\n                  >\n                    MAX\n                  </div>\n                )}\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n          {orderOption === MARKET && (\n            <SlippageInput \n              value={userSlippage}\n              setValue={setUserSlippage} \n            />\n          )}\n          {orderOption === STOP && (\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  <Trans>Price</Trans>\n                </div>\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerPriceValue(formatAmountFree(position.markPrice, USD_DECIMALS, 2));\n                  }}\n                >\n                  Mark: {formatAmount(position.markPrice, USD_DECIMALS, 2, true)}\n                </div>\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={triggerPriceValue}\n                    onChange={onTriggerPriceChange}\n                    onFocus={(e) => {\n                      e.target.parentElement.parentElement.parentElement.classList.add('hlight');\n                    }}\n                    onBlur={(e) => {\n                      e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\n                    }}\n                  />\n                </div>\n                <div className=\"PositionEditor-token-symbol\">USD</div>\n              </div>\n            </div>\n          )}\n          {renderMinProfitWarning()}\n          {shouldShowExistingOrderWarning && renderExistingOrderWarning()}\n          <div className=\"PositionEditor-info-box\">\n            {minExecutionFeeErrorMessage && (\n              <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n            )}\n            {hasPendingProfit && orderOption !== STOP && (\n              <div className=\"PositionEditor-accept-profit-warning\">\n                <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                  <span className=\"muted\">Forfeit profit</span>\n                </Checkbox>\n              </div>\n            )}\n            {/* <div className=\"PositionEditor-keep-leverage-settings\">\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n                <span className=\"muted font-sm\">Keep leverage at {formatAmount(position.leverage, 4, 2)}x</span>\n              </Checkbox>\n            </div> */}\n            {/* {orderOption === MARKET && (\n              <div className=\"PositionEditor-allow-higher-slippage\">\n                <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                  <span className=\"muted font-sm\">Allow up to 1% slippage</span>\n                </Checkbox>\n              </div>\n            )} */}\n            {orderOption === MARKET && (\n              <div>\n                <ExchangeInfoRow label=\"Allowed Slippage\" className=\"Slippage-row\">\n                  <Tooltip\n                    handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          You can change this in the settings menu on the top right of the page.\n                          <br />\n                          <br />\n                          Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices\n                          are volatile.\n                        </>\n                      );\n                    }}\n                  />\n                </ExchangeInfoRow>\n              </div>\n            )}\n            {orderOption === STOP && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Trigger Price</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {!triggerPriceUsd && \"-\"}\n                  {triggerPriceUsd && `${triggerPricePrefix} ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}`}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Mark Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {isClosing && orderOption !== STOP && \"-\"}\n                {(!isClosing || orderOption === STOP) && (\n                  <div>\n                    {(!nextLiquidationPrice || nextLiquidationPrice.eq(liquidationPrice)) && (\n                      <div>{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\n                    )}\n                    {nextLiquidationPrice && !nextLiquidationPrice.eq(liquidationPrice) && (\n                      <div>\n                        <div className=\"inline-block muted\">\n                          ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                          <BsArrowRight className=\"transition-arrow\" />\n                        </div>\n                        ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Size</Trans>\n              </div>\n              <div className=\"align-right\">\n                {position && position.size && fromAmount && (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.size, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(position.size.sub(fromAmount), USD_DECIMALS, 2, true)}\n                  </div>\n                )}\n                {position && position.size && !fromAmount && (\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Collateral ({collateralToken.symbol})</Trans>\n              </div>\n              <div className=\"align-right\">\n                {nextCollateral && !nextCollateral.eq(position.collateral) ? (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                  </div>\n                ) : (\n                  `$${formatAmount(position.collateral, USD_DECIMALS, 4, true)}`\n                )}\n              </div>\n            </div>\n            {!keepLeverage && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Leverage</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {isClosing && \"-\"}\n                  {!isClosing && (\n                    <div>\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2)}x\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>PnL</Trans>\n              </div>\n              <div className=\"align-right\">\n                {deltaStr} ({deltaPercentageStr})\n              </div>\n            </div>\n\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Fees</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  position=\"right-top\"\n                  className=\"PositionSeller-fees-tooltip\"\n                  handle={\n                    <div>\n                      {totalFees ? `$${formatAmount(totalFees.add(executionFeeUsd), USD_DECIMALS, 2, true)}` : \"-\"}\n                    </div>\n                  }\n                  renderContent={() => (\n                    <div>\n                      {fundingFee && (\n                        <StatsTooltipRow label=\"Borrow fee\" value={formatAmount(fundingFee, USD_DECIMALS, 2, true)} />\n                      )}\n\n                      {positionFee && (\n                        <StatsTooltipRow label=\"Closing fee\" value={formatAmount(positionFee, USD_DECIMALS, 2, true)} />\n                      )}\n\n                      {swapFee && (\n                        <StatsTooltipRow\n                          label=\"Swap fee\"\n                          showDollar={false}\n                          value={`${formatAmount(swapFeeToken, collateralToken.decimals, 5)}${collateralToken.symbol}\n                          ($${formatAmount(swapFee, USD_DECIMALS, 2, true)})`}\n                        />\n                      )}\n\n                      <StatsTooltipRow\n                        label=\"Execution fee\"\n                        showDollar={false}\n                        value={`${formatAmount(executionFee, 18, 5, true)}${nativeTokenSymbol}($${formatAmount(\n                          executionFeeUsd,\n                          USD_DECIMALS,\n                          2\n                        )})`}\n                      />\n\n                      <br />\n\n                      <div className=\"PositionSeller-fee-item\">\n                        <a href=\"https://gmxio.gitbook.io/gmx/trading#fees\" target=\"_blank\" rel=\"noopener noreferrer\">\n                          More Info\n                        </a>{\" \"}\n                        about fees.\n                      </div>\n                    </div>\n                  )}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row PositionSeller-receive-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Receive</Trans>\n              </div>\n\n              {!isSwapAllowed && receiveToken && (\n                <div className=\"align-right PositionSelector-selected-receive-token\">\n                  {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;{receiveToken.symbol} ($\n                  {formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\n                </div>\n              )}\n\n              {isSwapAllowed && receiveToken && (\n                <div className=\"align-right\">\n                  <TokenSelector\n                    // Scroll lock lead to side effects\n                    // if it applied on modal inside another modal\n                    disableBodyScrollLock={true}\n                    className={cx(\"PositionSeller-token-selector\", {\n                      warning: isNotEnoughReceiveTokenLiquidity || isCollateralPoolCapacityExceeded,\n                    })}\n                    label={\"Receive\"}\n                    showBalances={false}\n                    chainId={chainId}\n                    tokenAddress={receiveToken.address}\n                    onSelectToken={(token) => {\n                      setSwapToToken(token);\n                      setSavedRecieveTokenAddress(token.address);\n                    }}\n                    tokens={toTokens}\n                    getTokenState={(tokenOptionInfo) => {\n                      if (!shouldSwap(collateralToken, tokenOptionInfo)) {\n                        return;\n                      }\n\n                      const convertedTokenAmount = getTokenAmount(\n                        receiveAmount,\n                        tokenOptionInfo.address,\n                        false,\n                        infoTokens\n                      );\n\n                      const isNotEnoughLiquidity =\n                        tokenOptionInfo.availableAmount.lt(convertedTokenAmount) ||\n                        tokenOptionInfo.bufferAmount.gt(tokenOptionInfo.poolAmount.sub(convertedTokenAmount));\n\n                      if (isNotEnoughLiquidity) {\n                        const { maxIn, maxOut, maxInUsd, maxOutUsd } = getSwapLimits(\n                          infoTokens,\n                          collateralToken.address,\n                          tokenOptionInfo.address\n                        );\n\n                        const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n\n                        return {\n                          disabled: true,\n                          message: (\n                            <div>\n                              Insufficient Available Liquidity to swap to {tokenOptionInfo.symbol}:\n                              <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={`Max ${collateralInfo.symbol} in`}\n                                value={[\n                                  `${formatAmount(maxIn, collateralInfo.decimals, 0, true)} ${collateralInfo.symbol}`,\n                                  `($${formatAmount(maxInUsd, USD_DECIMALS, 0, true)})`,\n                                ]}\n                              />\n                              <br />\n                              <StatsTooltipRow\n                                label={`Max ${tokenOptionInfo.symbol} out`}\n                                value={[\n                                  `${formatAmount(maxOut, tokenOptionInfo.decimals, 0, true)} ${\n                                    tokenOptionInfo.symbol\n                                  }`,\n                                  `($${formatAmount(maxOutUsd, USD_DECIMALS, 0, true)})`,\n                                ]}\n                              />\n                            </div>\n                          ),\n                        };\n                      }\n                    }}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                    selectedTokenLabel={\n                      <span className=\"PositionSelector-selected-receive-token\">\n                        {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;\n                        {receiveToken.symbol} (${formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\n                      </span>\n                    }\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">\n            <button className={\"App-cta Exchange-swap-button\" + (isPrimaryEnabled() ? \" hlight\" : \"\")} onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { ethers } from \"ethers\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  DEPOSIT_FEE,\n  DUST_BNB,\n  helperToast,\n  formatAmount,\n  bigNumberify,\n  usePrevious,\n  formatAmountFree,\n  parseValue,\n  expandDecimals,\n  shouldRaiseGasError,\n  getTokenInfo,\n  getLiquidationPrice,\n  approveTokens,\n  IS_NETWORK_DISABLED,\n  getChainName,\n  MAX_ALLOWED_LEVERAGE,\n} from \"../../lib/legacy\";\nimport { getContract } from \"../../config/Addresses\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\n\nimport PositionRouter from \"../../abis/PositionRouter.json\";\nimport Token from \"../../abis/Token.json\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport { getConstant } from \"../../config/chains\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { fetcher } from \"../../lib/contracts/fetcher\";\nimport { callContract } from \"../../lib/contracts/callContract\";\n\nimport depositImg from '../../img/ddl/icon_dollar.svg'\nimport depositActiveImg from '../../img/ddl/icon_dollar_active.svg'\nimport withdrawImg from '../../img/ddl/icon_withdraw.svg'\nimport withdrawActiveImg from '../../img/ddl/icon_withdraw_active.svg'\n\nconst DEPOSIT = t`Deposit`;\nconst WITHDRAW = t`Withdraw`;\nconst EDIT_OPTIONS = [DEPOSIT, WITHDRAW];\nconst EDIT_ICONS = {\n  [DEPOSIT]: depositImg,\n  [WITHDRAW]: withdrawImg,\n  [DEPOSIT + '_active']: depositActiveImg,\n  [WITHDRAW + '_active']: withdrawActiveImg,\n\n}\nconst { AddressZero } = ethers.constants;\n\nexport default function PositionEditor(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    infoTokens,\n    active,\n    account,\n    library,\n    collateralTokenAddress,\n    pendingTxns,\n    setPendingTxns,\n    getUsd,\n    getLeverage,\n    savedIsPnlInLeverage,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    chainId,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [option, setOption] = useState(DEPOSIT);\n  const [fromValue, setFromValue] = useState(\"\");\n  const [isApproving, setIsApproving] = useState(false);\n  const [isSwapping, setIsSwapping] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, collateralTokenAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  // const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n  //   fetcher: fetcher(library, PositionRouter),\n  // });\n\n  const isDeposit = option === DEPOSIT;\n  const isWithdrawal = option === WITHDRAW;\n\n  const needPositionRouterApproval = !positionRouterApproved;\n\n  let collateralToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n  let needApproval;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let nextLeverageExcludingPnl;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let nextCollateral;\n\n  let title;\n  let collateralDelta;\n  if (position) {\n    title = `Edit ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\n    collateralToken = position.collateralToken;\n    liquidationPrice = getLiquidationPrice(position);\n\n    if (isDeposit) {\n      fromAmount = parseValue(fromValue, collateralToken.decimals);\n      maxAmount = collateralToken ? collateralToken.balance : bigNumberify(0);\n      maxAmountFormatted = formatAmount(maxAmount, collateralToken.decimals, 4, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, collateralToken.decimals, 8);\n      if (fromAmount) {\n        convertedAmount = getUsd(fromAmount, position.collateralToken.address, false, infoTokens);\n        convertedAmountFormatted = formatAmount(convertedAmount, USD_DECIMALS, 2);\n      }\n    } else {\n      fromAmount = parseValue(fromValue, USD_DECIMALS);\n      maxAmount = position.collateral;\n      maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n      if (fromAmount) {\n        convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n        convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n      }\n    }\n    needApproval = isDeposit && tokenAllowance && fromAmount && fromAmount.gt(tokenAllowance);\n\n    if (fromAmount) {\n      collateralDelta = isDeposit ? convertedAmount : fromAmount;\n      if (position.isLong) {\n        collateralDelta = collateralDelta.mul(BASIS_POINTS_DIVISOR - DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\n      }\n      nextLeverage = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: savedIsPnlInLeverage,\n      });\n      nextLeverageExcludingPnl = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: false,\n      });\n\n      nextLiquidationPrice = getLiquidationPrice({\n        isLong: position.isLong,\n        size: position.size,\n        collateral: position.collateral,\n        averagePrice: position.averagePrice,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n      });\n\n      nextCollateral = isDeposit ? position.collateral.add(collateralDelta) : position.collateral.sub(collateralDelta);\n    }\n  }\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isDeposit) return [t`Deposit disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Withdraw disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (!fromAmount) {\n      return t`Enter an amount`;\n    }\n    if (nextLeverage && nextLeverage.eq(0)) {\n      return t`Enter an amount`;\n    }\n\n    if (!isDeposit && fromAmount) {\n      if (fromAmount.gte(position.collateral)) {\n        return t`Min order: 10 USD`;\n      }\n      if (position.collateral.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\n        return t`Min order: 10 USD`;\n      }\n    }\n\n    if (!isDeposit && fromAmount && nextLiquidationPrice) {\n      if (position.isLong && position.markPrice.lt(nextLiquidationPrice)) {\n        return t`Invalid liq. price`;\n      }\n      if (!position.isLong && position.markPrice.gt(nextLiquidationPrice)) {\n        return t`Invalid liq. price`;\n      }\n    }\n\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return t`Min leverage: 1.1x`;\n    }\n\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.gt(MAX_ALLOWED_LEVERAGE)) {\n      return t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isSwapping) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isSwapping) {\n      if (isDeposit) {\n        return t`Depositing...`;\n      }\n      return t`Withdrawing...`;\n    }\n\n    if (isApproving) {\n      return t`Approving ${position.collateralToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${position.collateralToken.symbol}`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (isDeposit) {\n      return t`Deposit`;\n    }\n\n    return t`Withdraw`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const depositCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const path = [tokenAddress0];\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n\n    const priceBasisPoints = position.isLong ? 11000 : 9000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const referralCode = ethers.constants.HashZero;\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      fromAmount, // _amountIn\n      0, // _minOut\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (collateralTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = fromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        0, // _sizeDelta\n        position.isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, collateralTokenAddress), fromAmount)) {\n      setIsSwapping(false);\n      helperToast.error(`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ETH for gas`);\n      return;\n    }\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Deposit submitted.`,\n      successMsg: t`Requested deposit of ${formatAmount(fromAmount, position.collateralToken.decimals, 4)} ${\n        position.collateralToken.symbol\n      } into ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}.`,\n      failMsg: t`Deposit failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const withdrawCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n    const priceBasisPoints = position.isLong ? 9000 : 11000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const withdrawETH = collateralTokenAddress === AddressZero || collateralTokenAddress === nativeTokenAddress;\n    const params = [\n      [tokenAddress0], // _path\n      indexTokenAddress, // _indexToken\n      fromAmount, // _collateralDelta\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n\n    const method = \"createDecreasePosition\";\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value: minExecutionFee,\n      sentMsg: t`Withdrawal submitted.`,\n      successMsg: t`Requested withdrawal of ${formatAmount(fromAmount, USD_DECIMALS, 2)} USD from ${\n        position.indexToken.symbol\n      } ${position.isLong ? \"Long\" : \"Short\"}.`,\n      failMsg: t`Withdrawal failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: collateralTokenAddress,\n        spender: routerAddress,\n        chainId: chainId,\n        infoTokens,\n        getTokenInfo,\n        pendingTxns,\n        setPendingTxns,\n      });\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: isDeposit ? t`Enable deposit sent.` : t`Enable withdraw sent.`,\n        failMsg: isDeposit ? t`Enable deposit failed.` : t`Enable withdraw failed.`,\n      });\n      return;\n    }\n\n    if (isDeposit) {\n      depositCollateral();\n      return;\n    }\n\n    withdrawCollateral();\n  };\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n\n\n  const [hasInputFocus, setHasInputFocus] = useState(false);\n  const [hasInputError, setHasInputError] = useState(false);\n  const checkInputError = (inputVal) => {\n    if (!isPrimaryEnabled() && inputVal !== '') {\n      setHasInputError(true);\n    } else {\n      setHasInputError(false);\n    }\n  }\n\n  useEffect(() => {\n    checkInputError(fromValue);\n  }, [fromValue])\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title} isNifty={true}>\n          <div>\n            <Tab options={EDIT_OPTIONS} option={option} setOption={setOption} onChange={resetForm}\n              icons={EDIT_ICONS} />\n            {(isDeposit || isWithdrawal) && (\n              <div>\n                <div className={\"Exchange-swap-section\"\n                  + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\n                  <div className=\"Exchange-swap-section-top\">\n                    <div className=\"muted\">\n                      {convertedAmountFormatted && (\n                        <div className=\"Exchange-swap-usd\">\n                          {isDeposit ? t`Deposit` : t`Withdraw`}: {convertedAmountFormatted}{\" \"}\n                          {isDeposit ? \"USD\" : position.collateralToken.symbol}\n                        </div>\n                      )}\n                      {!convertedAmountFormatted && `${isDeposit ? t`Deposit` : t`Withdraw`}`}\n                    </div>\n                    {maxAmount && (\n                      <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                        Max: {maxAmountFormatted}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"Exchange-swap-section-bottom\">\n                    <div className=\"Exchange-swap-input-container\">\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        placeholder=\"0.0\"\n                        className=\"Exchange-swap-input\"\n                        value={fromValue}\n                        onChange={(e) => setFromValue(e.target.value)}\n                        onFocus={(e) => {\n                          setHasInputFocus(true);\n                        }}\n                        onBlur={(e) => {\n                          setHasInputFocus(false);\n                        }}\n                      />\n                      {fromValue !== maxAmountFormattedFree && (\n                        <div\n                          className=\"Exchange-swap-max\"\n                          onClick={() => {\n                            setFromValue(maxAmountFormattedFree);\n                          }}\n                        >\n                          MAX\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"PositionEditor-token-symbol\">\n                      {isDeposit ? position.collateralToken.symbol : \"USD\"}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"PositionEditor-info-box\">\n                  {minExecutionFeeErrorMessage && (\n                    <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n                  )}\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Size</Trans>\n                    </div>\n                    <div className=\"align-right\">{formatAmount(position.size, USD_DECIMALS, 2, true)} USD</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Collateral</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextCollateral && <div>${formatAmount(position.collateral, USD_DECIMALS, 2, true)}</div>}\n                      {nextCollateral && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Leverage</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2, true)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2, true)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2, true)}x\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Mark Price</Trans>\n                    </div>\n                    <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Liq. Price</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLiquidationPrice && (\n                        <div>\n                          {!fromAmount && `$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\n                          {fromAmount && \"-\"}\n                        </div>\n                      )}\n                      {nextLiquidationPrice && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Execution Fee</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      <Tooltip\n                        handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\n                        position=\"right-top\"\n                        renderContent={() => {\n                          return (\n                            <>\n                              <StatsTooltipRow\n                                label=\"Network fee\"\n                                showDollar={false}\n                                value={`${formatAmountFree(\n                                  minExecutionFee,\n                                  18,\n                                  5\n                                )} ${nativeTokenSymbol} ($${formatAmount(minExecutionFeeUSD, USD_DECIMALS, 2)})`}\n                              />\n                              <br />\n                              This is the network cost required to execute the {isDeposit\n                                ? \"deposit\"\n                                : \"withdrawal\"}.{\" \"}\n                              <a\n                                href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                              >\n                                More Info\n                              </a>\n                            </>\n                          );\n                        }}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"Exchange-swap-button-container\">\n                  <button\n                    className={\"App-cta Exchange-swap-button\" + (isPrimaryEnabled() ? \" hlight\" : \"\")}\n                    onClick={onClickPrimary}\n                    disabled={!isPrimaryEnabled()}\n                  >\n                    {getPrimaryText()}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport { toJpeg } from \"html-to-image\";\nimport cx from \"classnames\";\nimport { BiCopy } from \"react-icons/bi\";\nimport { RiFileDownloadLine } from \"react-icons/ri\";\nimport { FiTwitter } from \"react-icons/fi\";\nimport { useCopyToClipboard } from \"react-use\";\nimport Modal from \"../Modal/Modal\";\nimport gmxLogo from \"../../img/gmx-logo-with-name.svg\";\nimport \"./PositionShare.css\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport {\n  formatAmount,\n  getHomeUrl,\n  getRootShareApiUrl,\n  getTwitterIntentURL,\n  helperToast,\n  USD_DECIMALS,\n} from \"../../lib/legacy\";\nimport { useAffiliateCodes } from \"../../domain/referrals\";\nimport SpinningLoader from \"../Common/SpinningLoader\";\nimport useLoadImage from \"../../lib/useLoadImage\";\nimport shareBgImg from \"../../img/position-share-bg.png\";\n\nconst ROOT_SHARE_URL = getRootShareApiUrl();\nconst UPLOAD_URL = ROOT_SHARE_URL + \"/api/upload\";\nconst UPLOAD_SHARE = ROOT_SHARE_URL + \"/api/s\";\nconst config = { quality: 0.95, canvasWidth: 1036, canvasHeight: 584 };\n\nfunction getShareURL(imageInfo, ref) {\n  if (!imageInfo) return;\n  let url = `${UPLOAD_SHARE}?id=${imageInfo.id}`;\n  if (ref.success) {\n    url = url + `&ref=${ref.code}`;\n  }\n  return url;\n}\n\nfunction PositionShare({ setIsPositionShareModalOpen, isPositionShareModalOpen, positionToShare, account, chainId }) {\n  const userAffiliateCode = useAffiliateCodes(chainId, account);\n  const [uploadedImageInfo, setUploadedImageInfo] = useState();\n  const [uploadedImageError, setUploadedImageError] = useState();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const sharePositionBgImg = useLoadImage(shareBgImg);\n  const positionRef = useRef();\n  const tweetLink = getTwitterIntentURL(\n    `Latest $${positionToShare?.indexToken?.symbol} trade on @GMX_IO`,\n    getShareURL(uploadedImageInfo, userAffiliateCode)\n  );\n\n  useEffect(() => {\n    (async function () {\n      const element = positionRef.current;\n      if (element && userAffiliateCode.success && sharePositionBgImg && positionToShare) {\n        const image = await toJpeg(element, config);\n        try {\n          const imageInfo = await fetch(UPLOAD_URL, { method: \"POST\", body: image }).then((res) => res.json());\n          setUploadedImageInfo(imageInfo);\n        } catch {\n          setUploadedImageInfo(null);\n          setUploadedImageError(\"Image generation error, please refresh and try again.\");\n        }\n      }\n    })();\n  }, [userAffiliateCode, sharePositionBgImg, positionToShare]);\n\n  async function handleDownload() {\n    const { indexToken, isLong } = positionToShare;\n    const element = positionRef.current;\n    if (!element) return;\n    const dataUrl = await toJpeg(element, config);\n    const link = document.createElement(\"a\");\n    link.download = `${indexToken.symbol}-${isLong ? \"long\" : \"short\"}.jpeg`;\n    link.href = dataUrl;\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  function handleCopy() {\n    if (!uploadedImageInfo) return;\n    const url = getShareURL(uploadedImageInfo, userAffiliateCode);\n    copyToClipboard(url);\n    helperToast.success(\"Link copied to clipboard.\");\n  }\n  return (\n    <Modal\n      className=\"position-share-modal\"\n      isVisible={isPositionShareModalOpen}\n      setIsVisible={setIsPositionShareModalOpen}\n      label=\"Share Position\"\n    >\n      <PositionShareCard\n        userAffiliateCode={userAffiliateCode}\n        positionRef={positionRef}\n        position={positionToShare}\n        chainId={chainId}\n        account={account}\n        uploadedImageInfo={uploadedImageInfo}\n        uploadedImageError={uploadedImageError}\n        sharePositionBgImg={sharePositionBgImg}\n      />\n      {uploadedImageError && <span className=\"error\">{uploadedImageError}</span>}\n\n      <div className=\"actions\">\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleCopy}>\n          <BiCopy className=\"icon\" />\n          <Trans>Copy</Trans>\n        </button>\n        <button className=\"mr-base App-button-option\" onClick={handleDownload}>\n          <RiFileDownloadLine className=\"icon\" />\n          <Trans>Download</Trans>\n        </button>\n        <div className={cx(\"tweet-link-container\", { disabled: !uploadedImageInfo })}>\n          <a\n            target=\"_blank\"\n            className={cx(\"tweet-link App-button-option\", { disabled: !uploadedImageInfo })}\n            rel=\"noreferrer\"\n            href={tweetLink}\n          >\n            <FiTwitter className=\"icon\" />\n            <Trans>Tweet</Trans>\n          </a>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction PositionShareCard({\n  positionRef,\n  position,\n  userAffiliateCode,\n  uploadedImageInfo,\n  uploadedImageError,\n  sharePositionBgImg,\n}) {\n  const { code, success } = userAffiliateCode;\n  const { deltaAfterFeesPercentageStr, isLong, leverage, indexToken, averagePrice, markPrice } = position;\n  const homeURL = getHomeUrl();\n  return (\n    <div className=\"relative\">\n      <div ref={positionRef} className=\"position-share\" style={{ backgroundImage: `url(${sharePositionBgImg})` }}>\n        <img className=\"logo\" src={gmxLogo} alt=\"GMX Logo\" />\n        <ul className=\"info\">\n          <li className=\"side\">{isLong ? \"LONG\" : \"SHORT\"}</li>\n          <li>{formatAmount(leverage, 4, 2, true)}x&nbsp;</li>\n          <li>{indexToken.symbol} USD</li>\n        </ul>\n        <h3 className=\"pnl\">{deltaAfterFeesPercentageStr}</h3>\n        <div className=\"prices\">\n          <div>\n            <p>Entry Price</p>\n            <p className=\"price\">${formatAmount(averagePrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n          <div>\n            <p>Index Price</p>\n            <p className=\"price\">${formatAmount(markPrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n        </div>\n        <div className=\"referral-code\">\n          <div>\n            <QRCodeSVG size={32} value={success ? `${homeURL}/#/?ref=${code}` : `${homeURL}`} />\n          </div>\n          <div className=\"referral-code-info\">\n            {success ? (\n              <>\n                <p className=\"label\">Referral Code:</p>\n                <p className=\"code\">{code}</p>\n              </>\n            ) : (\n              <p className=\"code\">https://gmx.io</p>\n            )}\n          </div>\n        </div>\n      </div>\n      {!uploadedImageInfo && !uploadedImageError && (\n        <div className=\"image-overlay-wrapper\">\n          <div className=\"image-overlay\">\n            <SpinningLoader />\n            <p className=\"loading-text\">Generating shareable image...</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PositionShare;\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport { Link } from \"react-router-dom\";\nimport Tooltip from \"../../components/Tooltip/Tooltip\";\nimport cx from 'classnames';\n\nimport {\n  USD_DECIMALS,\n  MAX_LEVERAGE,\n  BASIS_POINTS_DIVISOR,\n  LIQUIDATION_FEE,\n  TRADES_PAGE_SIZE,\n  formatAmount,\n  getExplorerUrl,\n  formatDateTime,\n  deserialize,\n  getExchangeRateDisplay,\n  bigNumberify,\n} from \"../../lib/legacy\";\nimport { useTrades, useLiquidationsData } from \"../../domain/legacy\";\nimport { getContract } from \"../../config/Addresses\";\n\nimport \"./TradeHistory.scss\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getPositionDisplay(increase, indexToken, isLong, sizeDelta) {\n  const symbol = indexToken ? (indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol) : \"\";\n  return `\n    ${increase ? \"Increase\" : \"Decrease\"} ${symbol} ${isLong ? \"Long\" : \"Short\"}\n    ${increase ? \"+\" : \"-\"}${formatAmount(sizeDelta, USD_DECIMALS, 2, true)} USD`;\n}\n\nfunction getOrderActionTitle(action) {\n  let actionDisplay;\n\n  if (action.startsWith(\"Create\")) {\n    actionDisplay = \"Create\";\n  } else if (action.startsWith(\"Cancel\")) {\n    actionDisplay = \"Cancel\";\n  } else {\n    actionDisplay = \"Update\";\n  }\n\n  return `${actionDisplay} Order`;\n}\n\nfunction renderLiquidationTooltip(liquidationData, label) {\n  const minCollateral = liquidationData.size.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE);\n  const text =\n    liquidationData.type === \"full\"\n      ? \"This position was liquidated as the max leverage of 100x was exceeded\"\n      : \"Max leverage of 100x was exceeded, the remaining collateral after deducting losses and fees have been sent back to your account\";\n  return (\n    <Tooltip\n      position=\"left-top\"\n      handle={label}\n      renderContent={() => (\n        <>\n          {text}\n          <br />\n          <br />\n          Initial collateral: ${formatAmount(liquidationData.collateral, USD_DECIMALS, 2, true)}\n          <br />\n          Min required collateral: ${formatAmount(minCollateral, USD_DECIMALS, 2, true)}\n          <br />\n          Borrow fee: ${formatAmount(liquidationData.borrowFee, USD_DECIMALS, 2, true)}\n          <br />\n          PnL: -${formatAmount(liquidationData.loss, USD_DECIMALS, 2, true)}\n          {liquidationData.type === \"full\" && <div>Liquidation fee: ${formatAmount(LIQUIDATION_FEE, 30, 2, true)}</div>}\n        </>\n      )}\n    />\n  );\n}\n\nfunction getLiquidationData(liquidationsDataMap, key, timestamp) {\n  return liquidationsDataMap && liquidationsDataMap[`${key}:${timestamp}`];\n}\n\nexport default function TradeHistory(props) {\n  const { account, infoTokens, getTokenInfo, chainId, nativeTokenAddress, shouldShowPaginationButtons } = props;\n  const [pageIds, setPageIds] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const getAfterId = () => {\n    return pageIds[pageIndex];\n  };\n\n  const { trades, updateTrades } = useTrades(chainId, account, props.forSingleAccount, getAfterId());\n\n  const liquidationsData = useLiquidationsData(chainId, account);\n  const liquidationsDataMap = useMemo(() => {\n    if (!liquidationsData) {\n      return null;\n    }\n    return liquidationsData.reduce((memo, item) => {\n      const liquidationKey = `${item.key}:${item.timestamp}`;\n      memo[liquidationKey] = item;\n      return memo;\n    }, {});\n  }, [liquidationsData]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateTrades(undefined, true);\n    }, 10 * 1000);\n    return () => clearInterval(interval);\n  }, [updateTrades]);\n\n  const loadNextPage = () => {\n    if (!trades || trades.length === 0) {\n      return;\n    }\n\n    const lastTrade = trades[trades.length - 1];\n    pageIds[pageIndex + 1] = lastTrade.id;\n    setPageIds(pageIds);\n    setPageIndex(pageIndex + 1);\n  };\n\n  const loadPrevPage = () => {\n    setPageIndex(pageIndex - 1);\n  };\n\n  const getMsg = useCallback(\n    (trade) => {\n      const tradeData = trade.data;\n      const params = JSON.parse(tradeData.params);\n      const defaultMsg = \"\";\n\n      if (tradeData.action === \"BuyUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return `Swap ${formatAmount(params.tokenAmount, token.decimals, 4, true)} ${token.symbol} for ${formatAmount(\n          params.usdgAmount,\n          18,\n          4,\n          true\n        )} USDG`;\n      }\n\n      if (tradeData.action === \"SellUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return `Swap ${formatAmount(params.usdgAmount, 18, 4, true)} USDG for ${formatAmount(\n          params.tokenAmount,\n          token.decimals,\n          4,\n          true\n        )} ${token.symbol}`;\n      }\n\n      if (tradeData.action === \"Swap\") {\n        const tokenIn = getTokenInfo(infoTokens, params.tokenIn, true, nativeTokenAddress);\n        const tokenOut = getTokenInfo(infoTokens, params.tokenOut, true, nativeTokenAddress);\n        if (!tokenIn || !tokenOut) {\n          return defaultMsg;\n        }\n        return `Swap ${formatAmount(params.amountIn, tokenIn.decimals, 4, true)} ${tokenIn.symbol} for ${formatAmount(\n          params.amountOut,\n          tokenOut.decimals,\n          4,\n          true\n        )} ${tokenOut.symbol}`;\n      }\n\n      if (tradeData.action === \"CreateIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return `Request deposit into ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\n        }\n\n        return `Request increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \"<\" : \">\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CreateDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return `Request withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\n        }\n\n        return `Request decrease ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, -${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \">\" : \"<\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CancelIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return (\n            <>\n              Could not execute deposit into {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"}\n            </>\n          );\n        }\n\n        return (\n          <>\n            Could not increase {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n            {params.isLong ? \"<\" : \">\"}&nbsp;\n            <Tooltip\n              position=\"left-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"CancelDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return `Could not execute withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\n        }\n\n        return (\n          <>\n            Could not decrease {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n            {params.isLong ? \">\" : \"<\"}&nbsp;\n            <Tooltip\n              position=\"left-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"IncreasePosition-Long\" || tradeData.action === \"IncreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return `Deposit ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD into ${\n            indexToken.symbol\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\n        }\n        return `Increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD`;\n      }\n\n      if (tradeData.action === \"DecreasePosition-Long\" || tradeData.action === \"DecreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return `Withdraw ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD from ${\n            indexToken.symbol\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\n        }\n        const isLiquidation = params.flags?.isLiquidation;\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n\n        if (isLiquidation && liquidationData) {\n          return (\n            <>\n              {renderLiquidationTooltip(liquidationData, \"Partial Liquidation\")} {indexToken.symbol}{\" \"}\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,{\" \"}\n              {indexToken.symbol}&nbsp; Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n            </>\n          );\n        }\n        const actionDisplay = isLiquidation ? \"Partially Liquidated\" : \"Decreased\";\n        return `\n        ${actionDisplay} ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\n        -${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if (tradeData.action === \"LiquidatePosition-Long\" || tradeData.action === \"LiquidatePosition-Short\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n        if (liquidationData) {\n          return (\n            <>\n              {renderLiquidationTooltip(liquidationData, \"Liquidated\")} {indexToken.symbol}{\" \"}\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.size, USD_DECIMALS, 2, true)} USD,&nbsp;\n              {indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n            </>\n          );\n        }\n        return `\n        Liquidated ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\n        -${formatAmount(params.size, USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if ([\"ExecuteIncreaseOrder\", \"ExecuteDecreaseOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const longShortDisplay = order.isLong ? \"Long\" : \"Short\";\n        const executionPriceDisplay = formatAmount(order.executionPrice, USD_DECIMALS, 2, true);\n        const sizeDeltaDisplay = `${order.type === \"Increase\" ? \"+\" : \"-\"}${formatAmount(\n          order.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n\n        return `\n        Execute Order: ${order.type} ${indexToken.symbol} ${longShortDisplay}\n        ${sizeDeltaDisplay} USD, Price: ${executionPriceDisplay} USD\n      `;\n      }\n\n      if (\n        [\n          \"CreateIncreaseOrder\",\n          \"CancelIncreaseOrder\",\n          \"UpdateIncreaseOrder\",\n          \"CreateDecreaseOrder\",\n          \"CancelDecreaseOrder\",\n          \"UpdateDecreaseOrder\",\n        ].includes(tradeData.action)\n      ) {\n        const order = deserialize(params.order);\n        const indexToken = getTokenInfo(infoTokens, order.indexToken);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const increase = tradeData.action.includes(\"Increase\");\n        const priceDisplay = `${order.triggerAboveThreshold ? \">\" : \"<\"} ${formatAmount(\n          order.triggerPrice,\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n        return `\n        ${getOrderActionTitle(tradeData.action)}:\n        ${getPositionDisplay(increase, indexToken, order.isLong, order.sizeDelta)},\n        Price: ${priceDisplay}\n      `;\n      }\n\n      if (tradeData.action === \"ExecuteSwapOrder\") {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const fromAmountDisplay = formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true);\n        const toAmountDisplay = formatAmount(order.amountOut, toToken.decimals, toToken.isStable ? 2 : 4, true);\n        return `\n        Execute Order: Swap ${fromAmountDisplay} ${fromToken.symbol} for ${toAmountDisplay} ${toToken.symbol}\n      `;\n      }\n\n      if ([\"CreateSwapOrder\", \"UpdateSwapOrder\", \"CancelSwapOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const amountInDisplay = fromToken\n          ? formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true)\n          : \"\";\n        const minOutDisplay = toToken\n          ? formatAmount(order.minOut, toToken.decimals, toToken.isStable ? 2 : 4, true)\n          : \"\";\n\n        return `\n        ${getOrderActionTitle(tradeData.action)}:\n        Swap ${amountInDisplay} ${fromToken?.symbol || \"\"} for ${minOutDisplay} ${toToken?.symbol || \"\"},\n        Price: ${getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}`;\n      }\n    },\n    [getTokenInfo, infoTokens, nativeTokenAddress, chainId, liquidationsDataMap]\n  );\n\n  const tradesWithMessages = useMemo(() => {\n    if (!trades) {\n      return [];\n    }\n\n    return trades\n      .map((trade) => ({\n        msg: getMsg(trade),\n        ...trade,\n      }))\n      .filter((trade) => trade.msg);\n  }, [trades, getMsg]);\n\n  return (\n    <div className=\"TradeHistory\" style={tradesWithMessages.length === 0 ? { border: \"none\" } : {}}>\n      {tradesWithMessages.length === 0 && <div className=\"App-card Exchange-list-empty-note\">No trades yet</div>}\n      {tradesWithMessages.length > 0 &&\n        tradesWithMessages.map((trade, index) => {\n          const tradeData = trade.data;\n          const txUrl = getExplorerUrl(chainId) + \"tx/\" + tradeData.txhash;\n\n          let msg = getMsg(trade);\n\n          if (!msg) {\n            return null;\n          }\n\n          return (\n            <div className=\"TradeHistory-row App-box App-box_no-border\" key={index}>\n              <div>\n                <div className=\"muted TradeHistory-time\">\n                  {formatDateTime(tradeData.timestamp)}\n                  {(!account || account.length === 0) && (\n                    <span>\n                      {\" \"}\n                      (<Link to={`/actions/${tradeData.account}`}>{tradeData.account}</Link>)\n                    </span>\n                  )}\n                </div>\n                <a className=\"plain\" href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {msg}\n                </a>\n              </div>\n            </div>\n          );\n        })}\n      {shouldShowPaginationButtons && trades && trades.length >= TRADES_PAGE_SIZE && (\n        <div>\n          {pageIndex > 0 && (\n            <button className=\"App-button-option App-card-option\" onClick={loadPrevPage}>\n              Prev\n            </button>\n          )}\n          {trades && trades.length >= TRADES_PAGE_SIZE && (\n            <button className=\"App-button-option App-card-option\" onClick={loadNextPage}>\n              Next\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState, useMemo, useCallback, forwardRef, useImperativeHandle } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport useWebSocket from 'react-use-websocket';\n\nimport {\n  FUNDING_RATE_PRECISION,\n  BASIS_POINTS_DIVISOR,\n  MARGIN_FEE_BASIS_POINTS,\n  SWAP,\n  LONG,\n  SHORT,\n  USD_DECIMALS,\n  getExplorerUrl,\n  helperToast,\n  formatAmount,\n  bigNumberify,\n  getTokenInfo,\n  getPositionKey,\n  getPositionContractKey,\n  getLeverage,\n  useLocalStorageSerializeKey,\n  useLocalStorageByChainId,\n  getDeltaStr,\n  useChainId,\n  useAccountOrders,\n  getPageTitle,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport { approvePlugin, useInfoTokens, useMinExecutionFee, cancelMultipleOrders } from \"../../domain/legacy\";\n\nimport { getContract } from \"../../config/Addresses\";\nimport { getTokens, getToken, getWhitelistedTokens, getTokenBySymbol } from \"../../config/Tokens\";\n\nimport Reader from \"../../abis/ReaderV2.json\";\nimport VaultV2 from \"../../abis/VaultV2.json\";\nimport Router from \"../../abis/Router.json\";\nimport Token from \"../../abis/Token.json\";\n\nimport SwapBox from \"../../components/Exchange/SwapBox\";\nimport ExchangeTVChart, { getChartToken } from \"../../components/Exchange/ExchangeTVChart\";\nimport PositionsList from \"../../components/Exchange/PositionsList\";\nimport OrdersList from \"../../components/Exchange/OrdersList\";\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\nimport ExchangeWalletTokens from \"../../components/Exchange/ExchangeWalletTokens\";\nimport ExchangeBanner from \"../../components/Exchange/ExchangeBanner\";\nimport Tab from \"../../components/Tab/Tab\";\n\nimport \"./Exchange.scss\";\nimport \"../../components/Exchange/Exchange-lists.scss\";\nimport { fetcher } from \"../../lib/contracts/fetcher\";\nimport GNS_Storage from \"../../abis/GNS/GNS_Storage.json\";\nimport { GNS_PAIRS } from './../../lib/GNS_legacy';\nimport { ADDRESS_ZERO } from '@uniswap/v3-sdk';\nimport { signer } from './../../../../components/utils/providers';\n\n\nconst { AddressZero } = ethers.constants;\n\nconst PENDING_POSITION_VALID_DURATION = 600 * 1000;\nconst UPDATED_POSITION_VALID_DURATION = 60 * 1000;\n\nconst notifications = {};\n\nfunction pushSuccessNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.success(\n    <div>\n      {message}{\" \"}\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        View\n      </a>\n    </div>\n  );\n}\n\nfunction pushErrorNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.error(\n    <div>\n      {message}{\" \"}\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        View\n      </a>\n    </div>\n  );\n}\n\nfunction getFundingFee(data) {\n  let { entryFundingRate, cumulativeFundingRate, size } = data;\n  if (entryFundingRate && cumulativeFundingRate) {\n    return size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n  }\n  return;\n}\n\nconst getTokenAddress = (token, nativeTokenAddress) => {\n  if (token.address === AddressZero) {\n    return nativeTokenAddress;\n  }\n  return token.address;\n};\n\nfunction applyPendingChanges(position, pendingPositions) {\n  if (!pendingPositions) {\n    return;\n  }\n  const { key } = position;\n\n  if (\n    pendingPositions[key] &&\n    pendingPositions[key].updatedAt &&\n    pendingPositions[key].pendingChanges &&\n    pendingPositions[key].updatedAt + PENDING_POSITION_VALID_DURATION > Date.now()\n  ) {\n    const { pendingChanges } = pendingPositions[key];\n    if (pendingChanges.size && position.size.eq(pendingChanges.size)) {\n      return;\n    }\n\n    if (pendingChanges.expectingCollateralChange && !position.collateral.eq(pendingChanges.collateralSnapshot)) {\n      return;\n    }\n\n    position.hasPendingChanges = true;\n    position.pendingChanges = pendingChanges;\n  }\n}\n\nexport function getPositions(\n  chainId,\n  positionQuery,\n  positionData,\n  infoTokens,\n  includeDelta,\n  showPnlAfterFees,\n  account,\n  pendingPositions,\n  updatedPositions,\n) {\n  const propsLength = getConstant(chainId, \"positionReaderPropsLength\");\n  const positions = [];\n  const positionsMap = {};\n  if (!positionData) {\n    return { positions, positionsMap };\n  }\n  const { collateralTokens, indexTokens, isLong } = positionQuery;\n  for (let i = 0; i < collateralTokens.length; i++) {\n    const collateralToken = getTokenInfo(infoTokens, collateralTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const indexToken = getTokenInfo(infoTokens, indexTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const key = getPositionKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    let contractKey;\n    if (account) {\n      contractKey = getPositionContractKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    }\n\n\n    const position = {\n      key,\n      contractKey,\n      collateralToken,\n      indexToken,\n      isLong: isLong[i],\n      size: positionData[i * propsLength],\n      collateral: positionData[i * propsLength + 1],\n      averagePrice: positionData[i * propsLength + 2],\n      entryFundingRate: positionData[i * propsLength + 3],\n      cumulativeFundingRate: collateralToken.cumulativeFundingRate,\n      hasRealisedProfit: positionData[i * propsLength + 4].eq(1),\n      realisedPnl: positionData[i * propsLength + 5],\n      lastIncreasedTime: positionData[i * propsLength + 6].toNumber(),\n      hasProfit: positionData[i * propsLength + 7].eq(1),\n      delta: positionData[i * propsLength + 8],\n      markPrice: isLong[i] ? indexToken.minPrice : indexToken.maxPrice,\n      market: 'GMX',\n    };\n\n\n    if (\n      updatedPositions &&\n      updatedPositions[key] &&\n      updatedPositions[key].updatedAt &&\n      updatedPositions[key].updatedAt + UPDATED_POSITION_VALID_DURATION > Date.now()\n    ) {\n      const updatedPosition = updatedPositions[key];\n      position.size = updatedPosition.size;\n      position.collateral = updatedPosition.collateral;\n      position.averagePrice = updatedPosition.averagePrice;\n      position.entryFundingRate = updatedPosition.entryFundingRate;\n    }\n\n    let fundingFee = getFundingFee(position);\n    position.fundingFee = fundingFee ? fundingFee : bigNumberify(0);\n    position.collateralAfterFee = position.collateral.sub(position.fundingFee);\n\n    position.closingFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    position.positionFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).mul(2).div(BASIS_POINTS_DIVISOR);\n    position.totalFees = position.positionFee.add(position.fundingFee);\n\n    position.pendingDelta = position.delta;\n\n    if (position.collateral.gt(0)) {\n      position.hasLowCollateral =\n        position.collateralAfterFee.lt(0) || position.size.div(position.collateralAfterFee.abs()).gt(50);\n\n      if (position.averagePrice && position.markPrice) {\n        const priceDelta = position.averagePrice.gt(position.markPrice)\n          ? position.averagePrice.sub(position.markPrice)\n          : position.markPrice.sub(position.averagePrice);\n        position.pendingDelta = position.size.mul(priceDelta).div(position.averagePrice);\n\n        position.delta = position.pendingDelta;\n\n        if (position.isLong) {\n          position.hasProfit = position.markPrice.gte(position.averagePrice);\n        } else {\n          position.hasProfit = position.markPrice.lte(position.averagePrice);\n        }\n      }\n\n      position.deltaPercentage = position.pendingDelta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\n\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: position.pendingDelta,\n        deltaPercentage: position.deltaPercentage,\n        hasProfit: position.hasProfit,\n      });\n\n      position.deltaStr = deltaStr;\n      position.deltaPercentageStr = deltaPercentageStr;\n      position.deltaBeforeFeesStr = deltaStr;\n\n      let hasProfitAfterFees;\n      let pendingDeltaAfterFees;\n\n      if (position.hasProfit) {\n        if (position.pendingDelta.gt(position.totalFees)) {\n          hasProfitAfterFees = true;\n          pendingDeltaAfterFees = position.pendingDelta.sub(position.totalFees);\n        } else {\n          hasProfitAfterFees = false;\n          pendingDeltaAfterFees = position.totalFees.sub(position.pendingDelta);\n        }\n      } else {\n        hasProfitAfterFees = false;\n        pendingDeltaAfterFees = position.pendingDelta.add(position.totalFees);\n      }\n\n      position.hasProfitAfterFees = hasProfitAfterFees;\n      position.pendingDeltaAfterFees = pendingDeltaAfterFees;\n      position.deltaPercentageAfterFees = position.pendingDeltaAfterFees\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(position.collateral);\n\n      const { deltaStr: deltaAfterFeesStr, deltaPercentageStr: deltaAfterFeesPercentageStr } = getDeltaStr({\n        delta: position.pendingDeltaAfterFees,\n        deltaPercentage: position.deltaPercentageAfterFees,\n        hasProfit: hasProfitAfterFees,\n      });\n\n      position.deltaAfterFeesStr = deltaAfterFeesStr;\n      position.deltaAfterFeesPercentageStr = deltaAfterFeesPercentageStr;\n\n      if (showPnlAfterFees) {\n        position.deltaStr = position.deltaAfterFeesStr;\n        position.deltaPercentageStr = position.deltaAfterFeesPercentageStr;\n      }\n\n      let netValue = position.hasProfit\n        ? position.collateral.add(position.pendingDelta)\n        : position.collateral.sub(position.pendingDelta);\n\n      netValue = netValue.sub(position.fundingFee);\n\n      if (showPnlAfterFees) {\n        netValue = netValue.sub(position.closingFee);\n      }\n\n      position.netValue = netValue;\n    }\n\n    position.leverage = getLeverage({\n      size: position.size,\n      collateral: position.collateral,\n      entryFundingRate: position.entryFundingRate,\n      cumulativeFundingRate: position.cumulativeFundingRate,\n      hasProfit: position.hasProfit,\n      delta: position.delta,\n      includeDelta,\n    });\n\n    positionsMap[key] = position;\n\n    applyPendingChanges(position, pendingPositions);\n\n    if (position.size.gt(0) || position.hasPendingChanges) {\n      positions.push(position);\n    }\n  }\n\n  return { positions, positionsMap };\n}\n\nexport function getPositionQuery(tokens, nativeTokenAddress) {\n  const collateralTokens = [];\n  const indexTokens = [];\n  const isLong = [];\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.isStable) {\n      continue;\n    }\n    if (token.isWrapped) {\n      continue;\n    }\n    collateralTokens.push(getTokenAddress(token, nativeTokenAddress));\n    indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n    isLong.push(true);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const stableToken = tokens[i];\n    if (!stableToken.isStable) {\n      continue;\n    }\n\n    for (let j = 0; j < tokens.length; j++) {\n      const token = tokens[j];\n      if (token.isStable) {\n        continue;\n      }\n      if (token.isWrapped) {\n        continue;\n      }\n      collateralTokens.push(stableToken.address);\n      indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n      isLong.push(false);\n    }\n  }\n\n  return { collateralTokens, indexTokens, isLong };\n}\n\nexport const Exchange = forwardRef((props, ref) => {\n  const {\n    savedIsPnlInLeverage,\n    setSavedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    savedSlippageAmount,\n    pendingTxns,\n    setPendingTxns,\n    savedShouldShowPositionLines,\n    setSavedShouldShowPositionLines,\n    connectWallet,\n    savedShouldDisableValidationForTesting,\n  } = props;\n  const [showBanner, setShowBanner] = useLocalStorageSerializeKey(\"showBanner\", true);\n  const [bannerHidden, setBannerHidden] = useLocalStorageSerializeKey(\"bannerHidden\", null);\n\n  const [pendingPositions, setPendingPositions] = useState({});\n  const [updatedPositions, setUpdatedPositions] = useState({});\n\n  const hideBanner = () => {\n    const hiddenLimit = new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000);\n    setBannerHidden(hiddenLimit);\n    setShowBanner(false);\n  };\n\n  useEffect(() => {\n    if (new Date() > new Date(\"2021-11-30\")) {\n      setShowBanner(false);\n    } else {\n      if (bannerHidden && new Date(bannerHidden) > new Date()) {\n        setShowBanner(false);\n      } else {\n        setBannerHidden(null);\n        setShowBanner(true);\n      }\n    }\n  }, [showBanner, bannerHidden, setBannerHidden, setShowBanner]);\n\n  const { account, library } = useWeb3React();\n  const active = Boolean(props.walletAddress);\n  const { chainId } = useChainId();\n  const currentAccount = account;\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const readerAddress = getContract(chainId, \"Reader\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  const defaultTokenSelection = useMemo(\n    () => ({\n      [SWAP]: {\n        from: AddressZero,\n        to: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n      },\n      [LONG]: {\n        from: AddressZero,\n        to: AddressZero,\n      },\n      [SHORT]: {\n        from: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n        to: AddressZero,\n      },\n    }),\n    [chainId, defaultCollateralSymbol]\n  );\n\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\n    chainId,\n    \"Exchange-token-selection-v2\",\n    defaultTokenSelection\n  );\n\n  \n  \n  const [swapOption, setSwapOption] = useLocalStorageByChainId(chainId, \"Swap-option-v2\", LONG);\n\n  const fromTokenAddress = tokenSelection[swapOption].from;\n  const toTokenAddress = tokenSelection[swapOption].to;\n\n  const tokens = getTokens(chainId);\n  const stableTokens = tokens.filter((token) => token.isStable);\n\n  const setFromTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].from = address;\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setToTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      \n      // ETH/USDC disabling\n      // address = AddressZero;\n      \n      newTokenSelection[selectedSwapOption].to = address;\n      if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n        newTokenSelection[LONG].to = address;\n        newTokenSelection[SHORT].to = address;\n      }\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setMarket = (selectedSwapOption, toTokenAddress) => {\n    // ETH/USDC disabling\n    // toTokenAddress = AddressZero;\n    \n    setSwapOption(selectedSwapOption);\n    const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    newTokenSelection[selectedSwapOption].to = toTokenAddress;\n    if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n      newTokenSelection[LONG].to = toTokenAddress;\n      newTokenSelection[SHORT].to = toTokenAddress;\n    }\n    setTokenSelection(newTokenSelection);\n  };\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isPendingConfirmation, setIsPendingConfirmation] = useState(false);\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\n  });\n\n  const { data: positionData, error: positionDataError } = useSWR(\n    active && [active, chainId, readerAddress, \"getPositions\", vaultAddress, account],\n    {\n      fetcher: fetcher(library, Reader, [\n        positionQuery.collateralTokens,\n        positionQuery.indexTokens,\n        positionQuery.isLong,\n      ]),\n    }\n  );\n\n  \n  const [pendingPositionsGNS, setPendingPositionsGNS] = useState([]);\n  const [positionsGNSLoading, setPositionsGNSLoading] = useState(true);\n  const { data: positionsGNS, error: positionsGNSError } = useSWR(\n    active && [active, chainId, GNS_Storage.address, pendingPositionsGNS, \"getPositionsGNS\", account],\n    async () => {\n      const positions = [];\n      let position;\n\n      const contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, library.getSigner());\n      const keys = [];\n      \n      for (let i = 0; i < Object.keys(GNS_PAIRS).length; i++) {\n        const pair = Object.keys(GNS_PAIRS)[i];\n        let pairIndex = GNS_PAIRS[pair];\n        \n        for (let j = 0; j < 3; j++) {\n          const index = j;\n          position = await contract.openTrades(account, pairIndex, index);\n          if (position.trader === ADDRESS_ZERO) {\n            continue;\n          }\n\n          positions.push(position);\n          \n          const key = `${pairIndex}${position.leverage}`;\n          keys.push(key);\n        }\n      }\n\n      setPositionsGNSLoading(false);\n\n      keys.forEach(key => {\n        if (pendingPositionsGNS[key]) {\n          delete pendingPositionsGNS[key];\n          setPendingPositionsGNS(pendingPositionsGNS);\n        }\n      })\n      return positions;\n    }\n  );\n  \n  const positionsDataIsLoading = active && ((!positionData && !positionDataError) || (!positionsGNS && !positionsGNSError));\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`Exchange:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: fetcher(library, VaultV2),\n    }\n  );\n\n  const { data: usdgSupply } = useSWR([`Exchange:usdgSupply:${active}`, chainId, usdgAddress, \"totalSupply\"], {\n    fetcher: fetcher(library, Token),\n  });\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const routerAddress = getContract(chainId, \"Router\");\n  const { data: orderBookApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, orderBookAddress],\n    {\n      fetcher: fetcher(library, Router),\n    }\n  );\n\n  const { data: positionRouterApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, positionRouterAddress],\n    {\n      fetcher: fetcher(library, Router),\n    }\n  );\n\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { minExecutionFee, minExecutionFeeUSD, minExecutionFeeErrorMessage } = useMinExecutionFee(\n    library,\n    active,\n    chainId,\n    infoTokens\n  );\n  \n\n  useEffect(() => {\n    const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n    const toToken = getTokenInfo(infoTokens, toTokenAddress);\n    let selectedToken = getChartToken(swapOption, fromToken, toToken, chainId);\n    let currentTokenPriceStr = formatAmount(selectedToken.maxPrice, USD_DECIMALS, 2, true);\n    let title = getPageTitle(currentTokenPriceStr + ` | ${selectedToken.symbol}${selectedToken.isStable ? \"\" : \"USD\"}`);\n    document.title = title;\n  }, [tokenSelection, swapOption, infoTokens, chainId, fromTokenAddress, toTokenAddress]);\n\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    savedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    account,\n    pendingPositions,\n    updatedPositions,\n    account,\n  )\n\n  useImperativeHandle(ref, () => ({\n    onUpdatePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size,\n            collateral,\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n    onClosePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl, e) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size: bigNumberify(0),\n            collateral: bigNumberify(0),\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n\n    onIncreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = `Deposited ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD into ${tokenSymbol} ${\n          isLong ? \"Long\" : \"Short.\"\n        }`;\n      } else {\n        message = `Increased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, +${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onDecreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = `Withdrew ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD from ${tokenSymbol} ${\n          isLong ? \"Long\" : \"Short\"\n        }.`;\n      } else {\n        message = `Decreased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, -${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onCancelIncreasePosition(\n      account,\n      path,\n      indexToken,\n      amountIn,\n      minOut,\n      sizeDelta,\n      isLong,\n      acceptablePrice,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      const message = `Could not increase ${tokenSymbol} ${\n        isLong ? \"Long\" : \"Short\"\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n\n    onCancelDecreasePosition(\n      account,\n      path,\n      indexToken,\n      collateralDelta,\n      sizeDelta,\n      isLong,\n      receiver,\n      acceptablePrice,\n      minOut,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      const message = `Could not decrease ${tokenSymbol} ${\n        isLong ? \"Long\" : \"Short\"\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n  }));\n\n  const flagOrdersEnabled = true;\n  const [orders] = useAccountOrders(flagOrdersEnabled, account);\n  \n  const { data: ordersGNSData, error: ordersGNSDataError } = useSWR(\n    active && [active, chainId, GNS_Storage.address, \"getOrders\", \"getOrdersGNS\", account],\n    async () => {\n      const orders = [];\n      let order;\n\n      const contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, library.getSigner());\n\n      for (let i = 0; i < Object.keys(GNS_PAIRS).length; i++) {\n        const pair = Object.keys(GNS_PAIRS)[i];\n        let pairIndex = GNS_PAIRS[pair];\n        \n        for (let j = 0; j < 3; j++) {\n          const index = j;\n\n          try {\n            order = await contract.getOpenLimitOrder(account, pairIndex, index);\n            orders.push(order);\n          } catch(e) {\n          }\n        }\n      }\n      \n      return orders;\n    }\n  );\n  \n  const [ordersGNS, setOrdersGNS] = useState([]);\n  useEffect(() => {\n    if (!ordersGNSData) {\n      return;\n    }\n    \n    setOrdersGNS(ordersGNSData);\n  }, [ordersGNSData]);\n\n  const [isWaitingForPluginApproval, setIsWaitingForPluginApproval] = useState(false);\n  const [isWaitingForPositionRouterApproval, setIsWaitingForPositionRouterApproval] = useState(false);\n  const [isPluginApproving, setIsPluginApproving] = useState(false);\n  const [isPositionRouterApproving, setIsPositionRouterApproving] = useState(false);\n  const [isCancelMultipleOrderProcessing, setIsCancelMultipleOrderProcessing] = useState(false);\n  const [cancelOrderIdList, setCancelOrderIdList] = useState([]);\n\n  const onMultipleCancelClick = useCallback(\n    async function () {\n      setIsCancelMultipleOrderProcessing(true);\n      try {\n        const tx = await cancelMultipleOrders(chainId, library, cancelOrderIdList, {\n          successMsg: t`Orders cancelled.`,\n          failMsg: t`Cancel failed.`,\n          sentMsg: t`Cancel submitted.`,\n          pendingTxns,\n          setPendingTxns,\n        });\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          setCancelOrderIdList([]);\n        }\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setIsCancelMultipleOrderProcessing(false);\n      }\n    },\n    [\n      chainId,\n      library,\n      pendingTxns,\n      setPendingTxns,\n      setCancelOrderIdList,\n      cancelOrderIdList,\n      setIsCancelMultipleOrderProcessing,\n    ]\n  );\n\n  const approveOrderBook = () => {\n    setIsPluginApproving(true);\n    return approvePlugin(chainId, orderBookAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg: t`Enable orders sent.`,\n      failMsg: t`Enable orders failed.`,\n    })\n      .then(() => {\n        setIsWaitingForPluginApproval(true);\n      })\n      .finally(() => {\n        setIsPluginApproving(false);\n      });\n  };\n\n  const approvePositionRouter = ({ sentMsg, failMsg }) => {\n    setIsPositionRouterApproving(true);\n    return approvePlugin(chainId, positionRouterAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg,\n      failMsg,\n    })\n      .then(() => {\n        setIsWaitingForPositionRouterApproval(true);\n      })\n      .finally(() => {\n        setIsPositionRouterApproving(false);\n      });\n  };\n\n  const posLength = positions?.length + positionsGNS?.length;\n  const ordersLength = orders?.length + ordersGNS?.length;\n\n  const LIST_SECTIONS = [\"Positions\", flagOrdersEnabled ? \"Orders\" : undefined, \"Trades\"].filter(Boolean);\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\n  const LIST_SECTIONS_LABELS = {\n    Orders: ordersLength ? `Orders (${ordersLength})` : undefined,\n    Positions: posLength ? `Positions (${posLength})` : undefined,\n  };\n  if (!LIST_SECTIONS.includes(listSection)) {\n    listSection = LIST_SECTIONS[0];\n  }\n\n  if (!getToken(chainId, toTokenAddress)) {\n    return null;\n  }\n\n  const renderCancelOrderButton = () => {\n    const orderText = cancelOrderIdList.length > 1 ? t`orders` : t`order`;\n    if (cancelOrderIdList.length === 0) return;\n    return (\n      <button\n        className=\"muted font-base cancel-order-btn\"\n        disabled={isCancelMultipleOrderProcessing}\n        type=\"button\"\n        onClick={onMultipleCancelClick}\n      >\n        <Trans>\n          Cancel {cancelOrderIdList.length} {orderText}\n        </Trans>\n      </button>\n    );\n  };\n\n  const getListSection = () => {\n    return (\n      <div>\n        <div className=\"Exchange-list-tab-container\">\n          <Tab\n            options={LIST_SECTIONS}\n            optionLabels={LIST_SECTIONS_LABELS}\n            option={listSection}\n            onChange={(section) => setListSection(section)}\n            type=\"inline\"\n            className=\"Exchange-list-tabs\"\n          />\n        </div>\n        {listSection === \"Positions\" && (\n          <PositionsList\n            positionsDataIsLoading={positionsDataIsLoading}\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setListSection={setListSection}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            positionsLoading={positionsGNSLoading}\n            positionsGNS={positionsGNS}\n            pendingPositionsGNS={pendingPositionsGNS}\n            setPendingPositionsGNS={setPendingPositionsGNS}\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            account={account}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            flagOrdersEnabled={flagOrdersEnabled}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            setMarket={setMarket}\n            orders={orders}\n            showPnlAfterFees={true}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n            usdgSupply={usdgSupply}\n            totalTokenWeights={totalTokenWeights}\n          />\n        )}\n        {listSection === \"Orders\" && (\n          <OrdersList\n            account={account}\n            active={active}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            ordersGNS={ordersGNS}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            cancelOrderIdList={cancelOrderIdList}\n            setCancelOrderIdList={setCancelOrderIdList}\n          />\n        )}\n        {listSection === \"Trades\" && (\n          <TradeHistory\n            account={account}\n            forSingleAccount={true}\n            infoTokens={infoTokens}\n            getTokenInfo={getTokenInfo}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            shouldShowPaginationButtons={true}\n          />\n        )}\n      </div>\n    );\n  };\n\n  const onSelectWalletToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n  };\n\n  const renderChart = () => {\n    return (\n      <ExchangeTVChart\n        fromTokenAddress={fromTokenAddress}\n        toTokenAddress={toTokenAddress}\n        infoTokens={infoTokens}\n        swapOption={swapOption}\n        chainId={chainId}\n        positions={positions}\n        // savedShouldShowPositionLines={savedShouldShowPositionLines}\n        savedShouldShowPositionLines={true}\n        orders={orders}\n        setToTokenAddress={setToTokenAddress}\n      />\n    );\n  };\n\n  return (\n    <div className=\"Exchange page-layout\">\n      {showBanner && <ExchangeBanner hideBanner={hideBanner} />}\n      <div className=\"Exchange-content\">\n        <div className=\"Exchange-left\">\n          {renderChart()}\n        </div>\n        <div className=\"Exchange-right\">\n          <SwapBox\n            positions={positions}\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            orders={orders}\n            flagOrdersEnabled={flagOrdersEnabled}\n            chainId={chainId}\n            infoTokens={infoTokens}\n            active={active}\n            connectWallet={connectWallet}\n            library={library}\n            account={account}\n            positionsMap={positionsMap}\n            fromTokenAddress={fromTokenAddress}\n            setFromTokenAddress={setFromTokenAddress}\n            toTokenAddress={toTokenAddress}\n            setToTokenAddress={setToTokenAddress}\n            swapOption={swapOption}\n            setSwapOption={setSwapOption}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            tokenSelection={tokenSelection}\n            setTokenSelection={setTokenSelection}\n            isConfirming={isConfirming}\n            setIsConfirming={setIsConfirming}\n            isPendingConfirmation={isPendingConfirmation}\n            setIsPendingConfirmation={setIsPendingConfirmation}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n            nativeTokenAddress={nativeTokenAddress}\n            savedSlippageAmount={savedSlippageAmount}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n            positionsGNS={positionsGNS}\n            pendingPositionsGNS={pendingPositionsGNS}\n            setPendingPositionsGNS={setPendingPositionsGNS}\n          />\n        </div>\n        <div className=\"Exchange-lists large\">{getListSection()}</div>\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\n      </div>\n    </div>\n  );\n});","import { useLocalStorage } from \"react-use\";\nimport toast from \"react-hot-toast\";\nimport { homeEventsData, appEventsData } from \"../../config/events\";\nimport { useEffect } from \"react\";\nimport EventToast from \"./EventToast\";\nimport { isFuture, parse } from \"date-fns\";\nimport { isHomeSite } from \"../../lib/legacy\";\n\nfunction useEventToast() {\n  const isHome = isHomeSite();\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\n\n  useEffect(() => {\n    const eventsData = isHome ? homeEventsData : appEventsData;\n\n    eventsData\n      .filter((event) => event.isActive)\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\n      .forEach((event) => {\n        toast.custom(\n          (t) => (\n            <EventToast\n              event={event}\n              id={event.id}\n              t={t}\n              onClick={() => {\n                toast.dismiss(event.id);\n                visited.push(event.id);\n                setVisited(visited);\n              }}\n            />\n          ),\n          {\n            id: event.id,\n            style: {},\n          }\n        );\n      });\n  }, [visited, setVisited, isHome]);\n}\n\nexport default useEventToast;\n","import { Toaster } from \"react-hot-toast\";\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\n\nfunction EventToastContainer() {\n  let { y: scrollY } = useWindowScroll();\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\n  const breakpoint = useBreakpoint();\n  return (\n    <Toaster\n      position=\"top-right\"\n      reverseOrder={true}\n      gutter={30}\n      containerClassName=\"event-toast-container\"\n      containerStyle={{\n        zIndex: 2,\n        transition: \"all 200ms\",\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\n      }}\n      toastOptions={{\n        duration: Infinity,\n      }}\n    />\n  );\n}\nexport default EventToastContainer;\n","import { Helmet } from \"react-helmet\";\nimport { DEFAULT_PAGE_TITLE } from \"../../../../components/utils/constants\";\n\nfunction SEO(props) {\n  const { children, ...customMeta } = props;\n  const meta = {\n    title: DEFAULT_PAGE_TITLE,\n    description: `Discover DeDeLend, a cutting-edge DeFi project offering a seamless trading experience for options and perpetuals, empowering users to proficiently manage their assets on a single, intuitive platform. Harness the power of decentralized finance with our user-friendly interface designed for optimal asset control, and experience unparalleled convenience in efficient options and perpetuals trading with DeDeLend.`,\n    image: \"https://terminal.dedelend.co/favicon.ico\",\n    type: \"aggregator\",\n    ...customMeta,\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{meta.title}</title>\n        <meta name=\"robots\" content=\"follow, index\" />\n        <meta content={meta.description} name=\"description\" />\n        <meta property=\"og:type\" content={meta.type} />\n        <meta property=\"og:site_name\" content=\"DeDeLend Terminal\" />\n        <meta property=\"og:description\" content={meta.description} />\n        <meta property=\"og:title\" content={meta.title} />\n        <meta property=\"og:image\" content={meta.image} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@DeDeLend\" />\n        <meta name=\"twitter:title\" content={meta.title} />\n        <meta name=\"twitter:description\" content={meta.description} />\n        <meta name=\"twitter:image\" content={meta.image} />\n      </Helmet>\n      {children}\n    </>\n  );\n}\n\nexport default SEO;\n","import { i18n } from \"@lingui/core\";\nimport { en, es, zh, ko, ru, ja, fr } from \"make-plural/plurals\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"./legacy\";\n\nexport const locales = {\n  en: \"English\",\n  es: \"Spanish\",\n  // zh: \"Chinese\",\n  ko: \"Korean\",\n  // ru: \"Russian\",\n  ja: \"Japanese\",\n  // fr: \"French\",\n};\n\nexport const defaultLocale = \"en\";\n\ni18n.loadLocaleData({\n  en: { plurals: en },\n  es: { plurals: es },\n  zh: { plurals: zh },\n  ko: { plurals: ko },\n  ru: { plurals: ru },\n  ja: { plurals: ja },\n  fr: { plurals: fr },\n});\n\nexport async function dynamicActivate(locale) {\n  // const { messages } = await import(`@lingui/loader!../config/locales/${locale}/messages.po`);\n  localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\n  // i18n.load(locale, messages);\n  i18n.activate(locale);\n}\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { SWRConfig } from \"swr\";\nimport { ethers } from \"ethers\";\nimport { Web3ReactProvider, useWeb3React } from \"@web3-react/core\";\nimport { Web3Provider } from \"@ethersproject/providers\";\n\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport {\n  ARBITRUM,\n  AVALANCHE,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  SLIPPAGE_BPS_KEY,\n  IS_PNL_IN_LEVERAGE_KEY,\n  SHOW_PNL_AFTER_FEES_KEY,\n  BASIS_POINTS_DIVISOR,\n  SHOULD_SHOW_POSITION_LINES_KEY,\n  getAppBaseUrl,\n  isHomeSite,\n  clearWalletConnectData,\n  helperToast,\n  getAlchemyWsUrl,\n  useChainId,\n  getInjectedHandler,\n  useEagerConnect,\n  useLocalStorageSerializeKey,\n  useInactiveListener,\n  getExplorerUrl,\n  activateInjectedProvider,\n  clearWalletLinkData,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  REFERRAL_CODE_KEY,\n  REFERRAL_CODE_QUERY_PARAM,\n  isDevelopment,\n  DISABLE_ORDER_VALIDATION_KEY,\n} from \"../lib/legacy\";\n\nimport { Exchange } from \"../pages/Exchange/Exchange\";\n\nimport { cssTransition, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Modal from \"../components/Modal/Modal\";\nimport Checkbox from \"../components/Checkbox/Checkbox\";\n\nimport \"../styles/Shared.scss\";\nimport \"../styles/Font.css\";\nimport \"./App.scss\";\nimport \"../styles/Input.scss\";\nimport useEventToast from \"../components/EventToast/useEventToast\";\nimport EventToastContainer from \"../components/EventToast/EventToastContainer\";\nimport SEO from \"../components/Common/SEO\";\nimport useRouteQuery from \"../lib/useRouteQuery\";\nimport { encodeReferralCode, decodeReferralCode } from \"../domain/referrals\";\n\nimport { getContract } from \"../config/Addresses\";\nimport VaultV2 from \"../abis/VaultV2.json\";\nimport VaultV2b from \"../abis/VaultV2b.json\";\nimport PositionRouter from \"../abis/PositionRouter.json\";\nimport { useLocalStorage } from \"react-use\";\nimport { RedirectPopupModal } from \"../components/ModalViews/RedirectModal\";\nimport { REDIRECT_POPUP_TIMESTAMP_KEY } from \"../config/ui\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { defaultLocale, dynamicActivate } from \"../lib/i18n\";\n\nimport _AccountManager from \"../../../deployments/arbitrum_ddl/accountManager.json\";\n\nconst arbWsProvider = new ethers.providers.WebSocketProvider(getAlchemyWsUrl());\n\nconst avaxWsProvider = new ethers.providers.JsonRpcProvider(\"https://api.avax.network/ext/bc/C/rpc\");\n\nfunction getWsProvider(active, chainId) {\n  if (!active) {\n    return;\n  }\n  if (chainId === ARBITRUM) {\n    return arbWsProvider;\n  }\n\n  if (chainId === AVALANCHE) {\n    return avaxWsProvider;\n  }\n}\n\nfunction FullApp(props) {\n  const { setRegisterVisible, connectWallet } = props; \n  const exchangeRef = useRef();\n  const { chainId } = useChainId();\n  const location = useLocation();\n  const history = useNavigate();\n\n  const query = useRouteQuery();\n\n  useEffect(() => {\n    let referralCode = query.get(REFERRAL_CODE_QUERY_PARAM);\n    if (!referralCode || referralCode.length === 0) {\n      const params = new URLSearchParams(window.location.search);\n      referralCode = params.get(REFERRAL_CODE_QUERY_PARAM);\n    }\n\n    if (referralCode && referralCode.length <= 20) {\n      const encodedReferralCode = encodeReferralCode(referralCode);\n      if (encodeReferralCode !== ethers.constants.HashZero) {\n        localStorage.setItem(REFERRAL_CODE_KEY, encodedReferralCode);\n        const queryParams = new URLSearchParams(location.search);\n        if (queryParams.has(REFERRAL_CODE_QUERY_PARAM)) {\n          queryParams.delete(REFERRAL_CODE_QUERY_PARAM);\n          history.replace({\n            search: queryParams.toString(),\n          });\n        }\n      }\n    }\n  }, [query, history, location]);\n\n  const [redirectModalVisible, setRedirectModalVisible] = useState(false);\n  const [shouldHideRedirectModal, setShouldHideRedirectModal] = useState(false);\n  const [redirectPopupTimestamp, setRedirectPopupTimestamp, removeRedirectPopupTimestamp] =\n    useLocalStorage(REDIRECT_POPUP_TIMESTAMP_KEY);\n  const [selectedToPage, setSelectedToPage] = useState(\"\");\n\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\n  const [savedSlippageAmount, setSavedSlippageAmount] = useLocalStorageSerializeKey(\n    [chainId, SLIPPAGE_BPS_KEY],\n    DEFAULT_SLIPPAGE_AMOUNT\n  );\n  \n  const [slippageAmount, setSlippageAmount] = useState(0);\n  const [isPnlInLeverage, setIsPnlInLeverage] = useState(false);\n  const [shouldDisableValidationForTesting, setShouldDisableValidationForTesting] = useState(false);\n  const [showPnlAfterFees, setShowPnlAfterFees] = useState(false);\n\n  const [savedIsPnlInLeverage, setSavedIsPnlInLeverage] = useLocalStorageSerializeKey(\n    [chainId, IS_PNL_IN_LEVERAGE_KEY],\n    false\n  );\n\n  const [savedShowPnlAfterFees, setSavedShowPnlAfterFees] = useLocalStorageSerializeKey(\n    [chainId, SHOW_PNL_AFTER_FEES_KEY],\n    false\n  );\n  const [savedShouldDisableValidationForTesting, setSavedShouldDisableValidationForTesting] =\n    useLocalStorageSerializeKey([chainId, DISABLE_ORDER_VALIDATION_KEY], false);\n\n  const [savedShouldShowPositionLines, setSavedShouldShowPositionLines] = useLocalStorageSerializeKey(\n    [chainId, SHOULD_SHOW_POSITION_LINES_KEY],\n    false\n  );\n\n  const saveAndCloseSettings = () => {\n    const slippage = parseFloat(slippageAmount);\n    if (isNaN(slippage)) {\n      helperToast.error(t`Invalid slippage value`);\n      return;\n    }\n    if (slippage > 5) {\n      helperToast.error(t`Slippage should be less than 5%`);\n      return;\n    }\n\n    const basisPoints = (slippage * BASIS_POINTS_DIVISOR) / 100;\n    if (parseInt(basisPoints) !== parseFloat(basisPoints)) {\n      helperToast.error(t`Max slippage precision is 0.01%`);\n      return;\n    }\n\n    setSavedIsPnlInLeverage(isPnlInLeverage);\n    setSavedShowPnlAfterFees(showPnlAfterFees);\n    setSavedShouldDisableValidationForTesting(shouldDisableValidationForTesting);\n    setSavedSlippageAmount(basisPoints);\n    setIsSettingsVisible(false);\n  };\n\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const baseUrl = getAppBaseUrl();\n  let appRedirectUrl = baseUrl + selectedToPage;\n  if (localStorageCode && localStorageCode.length > 0 && localStorageCode !== ethers.constants.HashZero) {\n    const decodedRefCode = decodeReferralCode(localStorageCode);\n    if (decodedRefCode) {\n      appRedirectUrl = `${appRedirectUrl}?ref=${decodedRefCode}`;\n    }\n  }\n\n  const [pendingTxns, setPendingTxns] = useState([]);\n\n  const { active, library } = useWeb3React();\n\n  useEffect(() => {\n    const checkPendingTxns = async () => {\n      const updatedPendingTxns = [];\n      for (let i = 0; i < pendingTxns.length; i++) {\n        const pendingTxn = pendingTxns[i];\n        const receipt = await library.getTransactionReceipt(pendingTxn.hash);\n        if (receipt) {\n          if (receipt.status === 0) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.error(\n              <div>\n                <Trans>Txn failed.</Trans>{\" \"}\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Trans>View</Trans>\n                </a>\n                <br />\n              </div>\n            );\n          }\n          if (receipt.status === 1 && pendingTxn.message) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.success(\n              <div>\n                {pendingTxn.message}{\" \"}\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Trans>View</Trans>\n                </a>\n                <br />\n              </div>\n            );\n          }\n          continue;\n        }\n        updatedPendingTxns.push(pendingTxn);\n      }\n\n      if (updatedPendingTxns.length !== pendingTxns.length) {\n        setPendingTxns(updatedPendingTxns);\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkPendingTxns();\n    }, 2 * 1000);\n    return () => clearInterval(interval);\n  }, [library, pendingTxns, chainId]);\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  useEffect(() => {\n    const wsVaultAbi = chainId === ARBITRUM ? VaultV2.abi : VaultV2b.abi;\n    const wsProvider = getWsProvider(active, chainId);\n    if (!wsProvider) {\n      return;\n    }\n\n    const wsVault = new ethers.Contract(vaultAddress, wsVaultAbi, wsProvider);\n    const wsPositionRouter = new ethers.Contract(positionRouterAddress, PositionRouter.abi, wsProvider);\n\n    const callExchangeRef = (method, ...args) => {\n      if (!exchangeRef || !exchangeRef.current) {\n        return;\n      }\n\n      exchangeRef.current[method](...args);\n    };\n\n    // handle the subscriptions here instead of within the Exchange component to avoid unsubscribing and re-subscribing\n    // each time the Exchange components re-renders, which happens on every data update\n    const onUpdatePosition = (...args) => callExchangeRef(\"onUpdatePosition\", ...args);\n    const onClosePosition = (...args) => callExchangeRef(\"onClosePosition\", ...args);\n    const onIncreasePosition = (...args) => callExchangeRef(\"onIncreasePosition\", ...args);\n    const onDecreasePosition = (...args) => callExchangeRef(\"onDecreasePosition\", ...args);\n    const onCancelIncreasePosition = (...args) => callExchangeRef(\"onCancelIncreasePosition\", ...args);\n    const onCancelDecreasePosition = (...args) => callExchangeRef(\"onCancelDecreasePosition\", ...args);\n\n    wsVault.on(\"UpdatePosition\", onUpdatePosition);\n    wsVault.on(\"ClosePosition\", onClosePosition);\n    wsVault.on(\"IncreasePosition\", onIncreasePosition);\n    wsVault.on(\"DecreasePosition\", onDecreasePosition);\n    wsPositionRouter.on(\"CancelIncreasePosition\", onCancelIncreasePosition);\n    wsPositionRouter.on(\"CancelDecreasePosition\", onCancelDecreasePosition);\n\n    return function cleanup() {\n      wsVault.off(\"UpdatePosition\", onUpdatePosition);\n      wsVault.off(\"ClosePosition\", onClosePosition);\n      wsVault.off(\"IncreasePosition\", onIncreasePosition);\n      wsVault.off(\"DecreasePosition\", onDecreasePosition);\n      wsPositionRouter.off(\"CancelIncreasePosition\", onCancelIncreasePosition);\n      wsPositionRouter.off(\"CancelDecreasePosition\", onCancelDecreasePosition);\n    };\n  }, [active, chainId, vaultAddress, positionRouterAddress]);\n\n  return (\n    <>\n      <div className=\"App GMX-Interface\">\n        <div className=\"App-content\">\n          <Exchange\n            ref={exchangeRef}\n            savedShowPnlAfterFees={savedShowPnlAfterFees}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n            savedSlippageAmount={savedSlippageAmount}\n            setPendingTxns={setPendingTxns}\n            pendingTxns={pendingTxns}\n            savedShouldShowPositionLines={savedShouldShowPositionLines}\n            setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\n            connectWallet={connectWallet}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            dgAddress={props.dgAddress}\n            walletAddress={props.walletAddress}\n            setRegisterVisible={setRegisterVisible}\n          />\n        </div>\n      </div>\n      <RedirectPopupModal\n        redirectModalVisible={redirectModalVisible}\n        setRedirectModalVisible={setRedirectModalVisible}\n        appRedirectUrl={appRedirectUrl}\n        setRedirectPopupTimestamp={setRedirectPopupTimestamp}\n        setShouldHideRedirectModal={setShouldHideRedirectModal}\n        shouldHideRedirectModal={shouldHideRedirectModal}\n        removeRedirectPopupTimestamp={removeRedirectPopupTimestamp}\n      />\n      <Modal\n        className=\"App-settings\"\n        isVisible={isSettingsVisible}\n        setIsVisible={setIsSettingsVisible}\n        label=\"Settings\"\n      >\n        <div className=\"App-settings-row\">\n          <div>\n            <Trans>Allowed Slippage</Trans>\n          </div>\n          <div className=\"App-slippage-tolerance-input-container\">\n            <input\n              type=\"number\"\n              className=\"App-slippage-tolerance-input\"\n              min=\"0\"\n              value={slippageAmount}\n              onChange={(e) => setSlippageAmount(e.target.value)}\n            />\n            <div className=\"App-slippage-tolerance-input-percent\">%</div>\n          </div>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={showPnlAfterFees} setIsChecked={setShowPnlAfterFees}>\n            <Trans>Display PnL after fees</Trans>\n          </Checkbox>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={isPnlInLeverage} setIsChecked={setIsPnlInLeverage}>\n            <Trans>Include PnL in leverage display</Trans>\n          </Checkbox>\n        </div>\n        {isDevelopment() && (\n          <div className=\"Exchange-settings-row\">\n            <Checkbox isChecked={shouldDisableValidationForTesting} setIsChecked={setShouldDisableValidationForTesting}>\n              <Trans>Disable order validations</Trans>\n            </Checkbox>\n          </div>\n        )}\n\n        <button className=\"App-cta Exchange-swap-button\" onClick={saveAndCloseSettings}>\n          <Trans>Save</Trans>\n        </button>\n      </Modal>\n    </>\n  );\n}\n\nfunction Perpetuals(props) {\n  useEffect(() => {\n    const defaultLanguage = defaultLocale;\n    dynamicActivate(defaultLanguage);\n  }, []);\n\n  return (\n    <FullApp {...props} />\n  );\n}\n\nexport default Perpetuals;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./../../../gmx-test/components/Tab/Tab.css\";\r\nimport \"./TabOptions.scss\";\r\n\r\nexport default function Tab(props) {\r\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons, disabled, disabledTooltip } = props;\r\n  \r\n  const onClick = (opt) => {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    \r\n    if (setOption) {\r\n      setOption(opt);\r\n    }\r\n    if (onChange) {\r\n      onChange(opt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"Tab\", type, className, disabled && 'disabled', type === 'inline' && icons && 'Tab-inline-icon')}>\r\n      {options.map((opt) => {\r\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\r\n        let disabledNode;\r\n        \r\n        if (props.disabledList) {\r\n          props.disabledList.forEach(el => {\r\n            if (el.label === label && el.disabled) {\r\n              disabledNode = (\r\n                <div className={cx(\"Tab-option\", \"tab-tooltip-container\")} onClick={() => {return}} key={opt}>\r\n                  {disabledTooltip}\r\n                  {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\r\n                  {label}\r\n                </div>\r\n              );\r\n            }\r\n          })\r\n        }\r\n\r\n        if (disabledNode) {\r\n          return disabledNode;\r\n        }\r\n        \r\n        return (\r\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\r\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\r\n            {label}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import { Menu } from \"@headlessui/react\";\r\nimport cx from \"classnames\";\r\nimport \"./ChartTokenSelector.scss\";\r\nimport \"../AddressDropdown/AddressDropdown.css\";\r\nimport { getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\n\r\nexport default function ChartTokenSelector(props) {\r\n  const { chainId, selectedToken, onSelectToken } = props;\r\n\r\n  let options = getTokens(chainId);\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n\r\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped && (token.symbol === 'ETH' || token.symbol === 'BTC'));\r\n\r\n  options = indexTokens;\r\n\r\n  const onSelect = async (token) => {\r\n    onSelectToken(token);\r\n  };\r\n\r\n  const value = selectedToken;\r\n  let icon;\r\n  if (value.symbol) {\r\n    icon = require(\"../../img/ddl/ic_\" + value.symbol?.toLowerCase() + \"_40.svg\")?.default;\r\n  }\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\">\r\n        <button className={cx(\"App-cta small transparent chart-token-selector\")}>\r\n          <div className=\"chart-token-selector--name\">\r\n            <img src={icon} className=\"chart-token-selector--icon\" alt={value.symbol + ' icon'} />\r\n            <span className=\"chart-token-selector--current\">{value.symbol}/USD</span>\r\n          </div>\r\n          <svg className=\"chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\">\r\n            <path d=\"M4 8L10 13L16 8\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          </svg>\r\n        </button>\r\n      </Menu.Button>\r\n      <div className=\"chart-token-menu\">\r\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items divided\">\r\n          {options.map((option, index) => {\r\n            let tokenPopupImage;\r\n            try {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_\" + option.symbol.toLowerCase() + \"_40.svg\");\r\n            } catch (error) {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_eth_40.svg\");\r\n            }\r\n            \r\n            return (<Menu.Item key={index}>\r\n              <div\r\n                className={\"menu-item\" + (option.symbol === value.symbol ? ' chosen' : '')}\r\n                onClick={() => {\r\n                  onSelect(option);\r\n                }}\r\n              >\r\n                <img src={tokenPopupImage?.default} alt={option.symbol + ' icon'} className=\"token-icon\" />\r\n                <span style={{ marginLeft: 7, marginRight: 35 }} className=\"token-label\">\r\n                  {option.symbol} / USD\r\n                </span>\r\n              </div>\r\n            </Menu.Item>)\r\n          })}\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\r\n\r\nexport const IS_TOUCH = \"ontouchstart\" in window;\r\n","import cx from \"classnames\";\r\nimport { useCallback, useState, useRef } from \"react\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function Tooltip(props) {\r\n  const { enabled } = props;\r\n  const [visible, setVisible] = useState(false);\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        if (enabled) {\r\n          setVisible(true)\r\n        }\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n\r\n    if (enabled) {\r\n      setVisible(true)\r\n    }\r\n  }, [setVisible, intervalCloseRef, trigger]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n  }, [setVisible, intervalCloseRef]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} style={props.style} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick} id={props.id}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\r\n    </span>\r\n  );\r\n}\r\n","import { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { createChart } from \"krasulya-lightweight-charts\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  CHART_PERIODS,\r\n  getTokenInfo,\r\n  formatAmount,\r\n  formatDateTime,\r\n  usePrevious,\r\n  useLocalStorageSerializeKey,\r\n  numberWithCommas,\r\n} from \"../../lib/legacyOptions\";\r\nimport { useChartPrices } from \"../../../gmx-test/domain/legacy\";\r\nimport Tab from \"../Tab/TabOptions\";\r\nimport ChartTokenSelector from \"./ChartTokenSelectorOptions\";\r\nimport Tooltip from '../Tooltip/Tooltip';\r\nimport ChartSelector from './../../../gmx-test/components/Exchange/ChartSelector';\r\n\r\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\r\n\r\nconst DEFAULT_PERIOD = \"4h\";\r\n\r\nconst RED_COLOR = \"#C75E4B\";\r\nconst GREEN_COLOR = \"#46956A\";\r\n\r\nconst getSeriesOptions = () => ({\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\r\n  lineColor: \"#5472cc\",\r\n  topColor: \"rgba(49, 69, 131, 0.4)\",\r\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\r\n  lineWidth: 2,\r\n  priceLineColor: \"#384263\",\r\n  downColor: RED_COLOR,\r\n  wickDownColor: RED_COLOR,\r\n  upColor: GREEN_COLOR,\r\n  wickUpColor: GREEN_COLOR,\r\n  borderVisible: false,\r\n});\r\n\r\nconst getChartOptions = (width, height) => ({\r\n  width,\r\n  height,\r\n  layout: {\r\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\r\n    textColor: \"#747FA6\",\r\n    fontFamily: \"Gantari\",\r\n  },\r\n  localization: {\r\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\r\n    timeFormatter: (businessDayOrTimestamp) => {\r\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\r\n    },\r\n  },\r\n  grid: {\r\n    vertLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n    horzLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\r\n  timeScale: {\r\n    rightOffset: 5,\r\n    borderVisible: false,\r\n    barSpacing: 5,\r\n    timeVisible: true,\r\n    fixLeftEdge: true,\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\r\n  priceScale: {\r\n    borderVisible: false,\r\n  },\r\n  crosshair: {\r\n    horzLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    vertLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    mode: 0,\r\n  },\r\n});\r\n\r\nexport default function ExchangeTVChart(props) {\r\n  const {\r\n    infoTokens,\r\n    chainId,\r\n    tokenSelection,\r\n    setTokenSelection,\r\n  } = props;\r\n\r\n  const [currentChart, setCurrentChart] = useState();\r\n  const [currentSeries, setCurrentSeries] = useState();\r\n\r\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\r\n  if (!(period in CHART_PERIODS)) {\r\n    period = DEFAULT_PERIOD;\r\n  }\r\n\r\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\r\n\r\n  const [chartToken, setChartToken] = useState({\r\n    maxPrice: null,\r\n    minPrice: null,\r\n  });\r\n  useEffect(() => {\r\n    const tmp = getTokenInfo(infoTokens, tokenSelection);\r\n    setChartToken(tmp);\r\n  }, [tokenSelection, infoTokens]);\r\n\r\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\r\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\r\n  const previousMarketName = usePrevious(marketName);\r\n\r\n  const ref = useRef(null);\r\n  const chartRef = useRef(null);\r\n\r\n  const currentAveragePrice =\r\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\r\n  const [priceData, updatePriceData] = useChartPrices(\r\n    chainId,\r\n    chartToken.symbol,\r\n    chartToken.isStable,\r\n    period,\r\n    currentAveragePrice\r\n  );\r\n\r\n  const [chartInited, setChartInited] = useState(false);\r\n  useEffect(() => {\r\n    if (marketName !== previousMarketName) {\r\n      setChartInited(false);\r\n    }\r\n  }, [marketName, previousMarketName]);\r\n\r\n  const scaleChart = useCallback(() => {\r\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\r\n    const to = Date.now() / 1000 + timezoneOffset;\r\n    currentChart.timeScale().setVisibleRange({ from, to });\r\n  }, [currentChart, period]);\r\n\r\n  const onCrosshairMove = useCallback(\r\n    (evt) => {\r\n      if (!evt.time) {\r\n        setHoveredCandlestick(null);\r\n        return;\r\n      }\r\n\r\n      for (const point of evt.seriesPrices.values()) {\r\n        setHoveredCandlestick((hoveredCandlestick) => {\r\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\r\n            // rerender optimisations\r\n            return hoveredCandlestick;\r\n          }\r\n          return {\r\n            time: evt.time,\r\n            ...point,\r\n          };\r\n        });\r\n        break;\r\n      }\r\n    },\r\n    [setHoveredCandlestick]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\r\n      return;\r\n    }\r\n\r\n    const chart = createChart(\r\n      chartRef.current,\r\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\r\n    );\r\n\r\n    chart.subscribeCrosshairMove(onCrosshairMove);\r\n\r\n    const series = chart.addCandlestickSeries(getSeriesOptions());\r\n\r\n    setCurrentChart(chart);\r\n    setCurrentSeries(series);\r\n  }, [ref, priceData, currentChart, onCrosshairMove]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      updatePriceData(undefined, true);\r\n    }, 10 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [updatePriceData]);\r\n\r\n  useEffect(() => {\r\n    if (!currentChart) {\r\n      return;\r\n    }\r\n    const resizeChart = () => {\r\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\r\n    };\r\n    window.addEventListener(\"resize\", resizeChart);\r\n    return () => window.removeEventListener(\"resize\", resizeChart);\r\n  }, [currentChart]);\r\n\r\n  useEffect(() => {\r\n    if (currentSeries && priceData && priceData.length) {\r\n      currentSeries.setData(priceData);\r\n\r\n      if (!chartInited) {\r\n        scaleChart();\r\n        setChartInited(true);\r\n      }\r\n    }\r\n  }, [priceData, currentSeries, chartInited, scaleChart]);\r\n\r\n  const candleStatsHtml = useMemo(() => {\r\n    if (!priceData) {\r\n      return null;\r\n    }\r\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\r\n    if (!candlestick) {\r\n      return null;\r\n    }\r\n\r\n    const className = cx({\r\n      \"ExchangeChart-bottom-stats\": true,\r\n      positive: candlestick.open <= candlestick.close,\r\n      negative: candlestick.open > candlestick.close,\r\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\r\n    });\r\n\r\n    const toFixedNumbers = 2;\r\n\r\n    return (\r\n      <div className={className}>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\r\n      </div>\r\n    );\r\n  }, [hoveredCandlestick, priceData]);\r\n\r\n  let high;\r\n  let low;\r\n  let deltaPrice;\r\n  let delta;\r\n  let deltaPercentage;\r\n  let deltaPercentageStr;\r\n\r\n  const now = parseInt(Date.now() / 1000);\r\n  const timeThreshold = now - 24 * 60 * 60;\r\n\r\n  if (priceData) {\r\n    for (let i = priceData.length - 1; i > 0; i--) {\r\n      const price = priceData[i];\r\n      if (price.time < timeThreshold) {\r\n        break;\r\n      }\r\n      if (!low) {\r\n        low = price.low;\r\n      }\r\n      if (!high) {\r\n        high = price.high;\r\n      }\r\n\r\n      if (price.high > high) {\r\n        high = price.high;\r\n      }\r\n      if (price.low < low) {\r\n        low = price.low;\r\n      }\r\n\r\n      deltaPrice = price.open;\r\n    }\r\n  }\r\n\r\n  if (deltaPrice && currentAveragePrice) {\r\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\r\n    delta = average - deltaPrice;\r\n    deltaPercentage = (delta * 100) / average;\r\n    if (deltaPercentage > 0) {\r\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\r\n    } else {\r\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\r\n    }\r\n    if (deltaPercentage === 0) {\r\n      deltaPercentageStr = \"0.00\";\r\n    }\r\n  }\r\n\r\n  if (!chartToken) {\r\n    return null;\r\n  }\r\n\r\n  const onSelectToken = (token) => {\r\n    const tmp = getTokenInfo(infoTokens, token.address);\r\n    setChartToken(tmp);\r\n    setTokenSelection(token.address);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ExchangeChart tv\" ref={ref}>\r\n      <div className=\"ExchangeChart-top App-box App-box-border\">\r\n        <div className=\"ExchangeChart-top-inner\">\r\n          <div>\r\n            <div className=\"ExchangeChart-title\">\r\n              <ChartTokenSelector\r\n                chainId={chainId}\r\n                selectedToken={chartToken}\r\n                infoTokens={infoTokens}\r\n                onSelectToken={onSelectToken}\r\n                className=\"chart-token-selector pos-relative\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"ExchangeChart-stats-container\">\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">\r\n                <Tooltip\r\n                  className=\"has-hint-tooltip nowrap cur-price-tooltip\"\r\n                  handle=\"Current Price\"\r\n                  position=\"left-bottom\"\r\n                  enabled={true}\r\n                  renderContent={() => {\r\n                    return (\r\n                      <div className=\"Tooltip__text\">\r\n                        Asset price is taken from GMX\r\n                      </div>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n              \r\n              {/* <div className=\"ExchangeChart-info-label\">\r\n                Current Price\r\n              </div> */}\r\n              <div className=\"ExchangeChart-main-price\">\r\n                ${chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">24h Change</div>\r\n              <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\r\n                {!deltaPercentageStr && \"-\"}\r\n                {deltaPercentageStr && deltaPercentageStr}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h High</div>\r\n              <div>\r\n                {!high && \"-\"}\r\n                {high && numberWithCommas(high.toFixed(2))}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h Low</div>\r\n              <div>\r\n                {!low && \"-\"}\r\n                {low && numberWithCommas(low.toFixed(2))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ChartSelector\r\n        CHART_PERIODS={CHART_PERIODS}\r\n        period={period}\r\n        setPeriod={setPeriod}\r\n        candleStatsHtml={candleStatsHtml}\r\n        chartRef={chartRef}\r\n        chartToken={chartToken}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './Currency.scss';\r\nimport cx from \"classnames\";\r\n\r\nconst Currency = ({ className, children, isSmall = true, currencyName = \"usdc\", isHlight }) => {\r\n\tconst val = children;\r\n\tconst icon = require(`../img/icon-${currencyName}.svg`).default\r\n\t\r\n\treturn (\r\n\t\t<div className={cx(\"Currency\", isHlight && 'hlight', className)}>\r\n\t\t\t<img src={icon} alt={`${currencyName} icon`} width={isSmall ? 15 : \"auto\"}/>\r\n\t\t\t<span>{val}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Currency;","import React, { useState, useEffect } from 'react';\r\nimport { SL, TP, formatAmount } from '../../lib/legacyOptions';\r\nimport { ImSpinner2 } from 'react-icons/im';\r\nimport { USD_DECIMALS } from '../../lib/legacyOptions';\r\nimport '../../../gmx-test/components/Exchange/PositionsItem.scss';\r\nimport cx from \"classnames\";\r\nimport { DATE_FORMAT_TEMPLATE, OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport { formatAmountFree } from '../../lib/legacyOptions';\r\nimport { fromBigNumber } from '../../../../components/utils/utils';\r\nimport { format } from 'date-fns';\r\nimport icon_edit from '../../../../img/icon-edit.svg';\r\nimport Tooltip from './../../../gmx-test/components/Tooltip/Tooltip';\r\nimport Currency from '../../../../components/Currency';\r\n\r\nconst PositionsItem = (props) => {\r\n\tconst {\r\n\t\tposition,\r\n\t\tonPositionClick,\r\n\t\tclosePosition,\r\n\t\tmarkPrices,\r\n\t\tisLarge,\r\n\t\tpendingPositions,\r\n\t\topenSLTP,\r\n\t} = props;\r\n\r\n\tconst [isTpSubmitting, setIsTpSubmitting] = useState(false);\r\n\tconst [isSlSubmitting, setIsSlSubmitting] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tsetIsTpSubmitting(false);\r\n\t\tsetIsSlSubmitting(false);\r\n\t}, [position]);\r\n\r\n\tconst markPrice = markPrices[position.token];\r\n\tconst hasTP = (position.tp && !position.tp.eq(0)) || isTpSubmitting;\r\n\tconst hasSL = (position.sl && !position.sl.eq(0)) || isSlSubmitting;\r\n\tconst getTpTooltipText = () => {\r\n\t\tif (hasTP || hasSL) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\tToset upa{hasTP ? SL : TP}, you <br />need tofirst remove the <br />active {hasTP ? TP : SL} order\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\tconst getIsTooltipEnabled = (isTP) => {\r\n\t\tif (isTP ? hasSL : hasTP) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tlet delta = 0, deltaStr = '...', hasPositionProfit = false;\r\n\r\n\tif (position.pnl) {\r\n\t\tconst { unrealizedPnl, unrealizedPnlPercentage } = position.pnl;\r\n\t\tdelta = unrealizedPnl;\r\n\t\t\r\n\t\tdeltaStr = `\r\n\t\t\t${unrealizedPnl.lt(0) ? '-' : ''}$${Math.abs(fromBigNumber(unrealizedPnl, OPTIONS_DECIMALS)).toFixed(2)}\r\n\t\t\t(${formatAmount(unrealizedPnlPercentage, OPTIONS_DECIMALS - 2, 2, true)}%)\r\n\t\t`;\r\n\t\thasPositionProfit = unrealizedPnl.gt(0);\r\n\t}\r\n\r\n\tconst isPending = position.isPending || pendingPositions.find(strat => position.strategy === strat);\r\n\tconst closeBtnDisabled = position.size.eq(0) || position.isClosingDisabled || isPending || hasTP || hasSL;\r\n\tconst marketImg = require(`../../../../img/icon-${position.market}_sm.svg`).default;\r\n\r\n\tconst isSLTPDisabled = isPending;\r\n\r\n\tconst closeButton = (\r\n\t\t<Tooltip\r\n\t\t\tclassName=\"Tooltip_disabled\"\r\n\t\t\thandle={\r\n\t\t\t\t<>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn_inline\"\r\n\t\t\t\t\t\tstyle={{marginLeft: \"auto\"}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tclosePosition(position);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdisabled={closeBtnDisabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tClose\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\tposition=\"right-bottom\"\r\n\t\t\tenabled={hasSL || hasTP}\r\n\t\t\trenderContent={() => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\tTo close the position <br />you need to remove <br />active Stop Orders\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t\r\n\t)\r\n\tconst TPButton = (\r\n\t\t<>\r\n\t\t\t{isTpSubmitting\r\n\t\t\t\t? <ImSpinner2 className=\"spin position-loading-icon\" />\r\n\t\t\t\t: <>\r\n\t\t\t\t\t\t{hasTP && `$${formatAmount(position.tp, OPTIONS_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\tclassName=\"Tooltip_take-profit Tooltip_disabled\"\r\n\t\t\t\t\t\t\thandle={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn_inline\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\topenSLTP(position, true, setIsTpSubmitting);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSLTPDisabled || hasSL}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{hasTP\r\n\t\t\t\t\t\t\t\t\t\t\t? <img className='edit-btn' src={icon_edit} alt=\"Edit Take Profit button\" />\r\n\t\t\t\t\t\t\t\t\t\t\t: 'Set TP'}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\tenabled={getIsTooltipEnabled(true)}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\t{getTpTooltipText()}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>}\r\n\t\t</>\r\n\t)\r\n\tconst SLButton = (\r\n\t\t<>\r\n\t\t\t{isSlSubmitting\r\n\t\t\t\t? <ImSpinner2 className=\"spin position-loading-icon\" />\r\n\t\t\t\t: <>\r\n\t\t\t\t\t\t{hasSL && `$${formatAmount(position.sl, OPTIONS_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\tclassName=\"Tooltip_take-profit Tooltip_disabled\"\r\n\t\t\t\t\t\t\thandle={\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn_inline\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\topenSLTP(position, false, setIsSlSubmitting);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tdisabled={isSLTPDisabled || hasTP || position.isClosingDisabled}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{hasSL\r\n\t\t\t\t\t\t\t\t\t\t? <img src={icon_edit} className='edit-btn' alt=\"Edit Stop Loss button\" />\r\n\t\t\t\t\t\t\t\t\t\t: 'Set SL'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\tenabled={getIsTooltipEnabled(false)}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\t{getTpTooltipText()}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>}\r\n\t\t</>\r\n\t)\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isLarge ?\r\n\t\t\t\t<tr className={cx(isPending && 'positions-item_pending')}>\r\n\t\t\t\t\t<td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n\t\t\t\t\t\t{/* <div className=\"Exchange-list-title\">\r\n\t\t\t\t\t\t\t{position.token}\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t<div className=\"Exchange-list-info-label\">\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t<span className={cx({ positive: position.isCall, negative: !position.isCall })}>\r\n\t\t\t\t\t\t\t\t{position.sentiment}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t{isPending && <ImSpinner2 className=\"spin position-loading-icon\" />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<Currency currencyName={position.token}>\r\n\t\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)}\r\n\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{position.profitZoneStr}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Currency>\r\n\t\t\t\t\t\t\t\t{formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div style={{ width: 150, display: 'block' }}>\r\n\t\t\t\t\t\t\t{delta ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tmuted: delta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{deltaStr}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : deltaStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{format(position.expiry, DATE_FORMAT_TEMPLATE)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{TPButton}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{SLButton}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"td-btn pos-relative\" style={{ width: 110, textAlign: 'center' }}>\r\n\t\t\t\t\t\t{closeButton}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t:\r\n\t\t\t<div className={cx(\"App-card\", isPending && 'positions-item_pending')}>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPosition\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <div className=\"Exchange-list-token\">\r\n\t\t\t\t\t\t\t\t{position.token}\r\n\t\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t\t{isPending && <ImSpinner2 className=\"spin position-loading-icon\" style={{marginRight: 10}} />}\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-side\", {\r\n\t\t\t\t\t\t\t\t\tpositive: position.isCall,\r\n\t\t\t\t\t\t\t\t\tnegative: !position.isCall,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.sentiment}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Currency currencyName={position.token}>\r\n\t\t\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tProfit Zone\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{position.profitZoneStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tLiq. Price\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPremium Paid\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Currency>\r\n\t\t\t\t\t\t\t{formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPNL (ROE %)\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{delta ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tmuted: delta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{deltaStr}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : deltaStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{format(position.expiry, 'MM/dd/yy, hh:mm a')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tTake Profit\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{TPButton}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tStop Loss\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{SLButton}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-options\">\r\n\t\t\t\t\t<div className=\"App-button-option pos-relative\">\r\n\t\t\t\t\t\t{closeButton}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default PositionsItem;","import { useState, useEffect } from 'react';\r\nimport Modal from './../../../../components/UI/modal/Modal';\r\nimport { sepToNumber } from '../../../../components/utils/sepThousands';\r\nimport { BigNumber } from 'ethers';\r\nimport NumberInput_v3 from './../../../../components/UI/input/NumberInput_v3';\r\nimport { expandDecimals, formatAmount } from './../../../gmx-test/lib/legacy';\r\nimport { DATE_FORMAT_TEMPLATE, OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport { executePromise, fromBigNumber, msToTimeLeft } from './../../../../components/utils/utils';\r\nimport { format } from 'date-fns';\r\nimport cx from 'classnames';\r\nimport './PositionModal.scss';\r\nimport { formatAmountFree } from './../../lib/legacyOptions';\r\nimport Tooltip from './../../../gmx-test/components/Tooltip/Tooltip';\r\n\r\nconst ClosePositionModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tposition,\r\n\t\tsetPosition,\r\n\t\tpendingPositions,\r\n\t\tsetPendingPositions,\r\n\t\tpositions,\r\n\t} = props;\r\n\r\n\tconst isHegic = position?.market === \"Hegic\";\r\n\tconst isLyra = position?.market === \"Lyra\";\r\n\tconst [sizeValue, setSizeValue] = useState('');\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [, setTrade] = useState();\r\n\r\n\tconst size = expandDecimals(BigNumber.from((sepToNumber(sizeValue) * 10**6).toFixed(0)), 12);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (position && isLyra) {\r\n\t\t\tif (!position.trade) {\r\n\t\t\t\tposition.getTrade()\r\n\t\t\t\t\t.then(trade => {\r\n\t\t\t\t\t\tposition.trade = trade;\r\n\t\t\t\t\t\tsetTrade(trade);\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [visible, position]);\r\n\t\r\n\t\r\n\tlet pnl,\r\n\tpnlFormatted,\r\n\tpnlSign,\r\n\tpnlStr,\r\n\tpnlPercentage,\r\n\tpnlPercentageStr;\r\n\tif (position && getError() !== \"Amount exceeds option's size\") {\r\n\t\tif (isLyra && position.trade) {\r\n\t\t\tpnl = position.trade.pnl();\r\n\t\t\tif (sizeValue) {\r\n\t\t\t\tpnl = size.div(position.size.div(10**6)).mul(pnl).div(10**6);\r\n\t\t\t}\r\n\t\t\tpnlFormatted = formatAmount(pnl.abs(), OPTIONS_DECIMALS, 2, true)\r\n\t\t\tpnlSign = pnl.gt(0) ? \"+\" : (pnl.lt(0) ? \"-\" : \"\");\r\n\t\t\tpnlStr = `${pnlSign}$${pnlFormatted}`;\r\n\t\t\tpnlPercentage = Math.abs(fromBigNumber(pnl) / fromBigNumber(position.premium) * 100);\r\n\t\t\tpnlPercentageStr = `(${pnlSign}${pnlPercentage.toFixed(2)}%)`;\r\n\t\t}\r\n\r\n\t\tif (isHegic) {\r\n\t\t\tconst { unrealizedPnl, unrealizedPnlPercentage } = position.pnl;\r\n\t\t\tpnl = unrealizedPnl;\r\n\t\t\tpnlPercentage = unrealizedPnlPercentage;\r\n\t\r\n\t\t\tpnlStr = `\r\n\t\t\t\t${pnl.lt(0) ? '-' : ''}$${Math.abs(fromBigNumber(pnl, OPTIONS_DECIMALS)).toFixed(2)}\r\n\t\t\t`;\r\n\t\t\tpnlPercentageStr = `(${formatAmount(pnlPercentage, OPTIONS_DECIMALS - 2, 2, true)}%)`;\r\n\t\t}\r\n\t}\r\n\r\n\tconst onCloseClick = () => {\r\n\t\texecutePromise(position.close, [size], \"Position closed!\", setIsSubmitting,\r\n\t\t() => {\r\n\t\t\tsetVisible(false);\r\n\t\t\tsetPendingPositions([...pendingPositions, position.strategy]);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getError() {\r\n\t\tif (!position) {\r\n\t\t\treturn \"ERR! No position\";\r\n\t\t}\r\n\r\n\t\tif (isLyra) {\r\n\t\t\tif (!position.trade) {\r\n\t\t\t\treturn \"Please, wait\"\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (!sizeValue && !isHegic) {\r\n\t\t\treturn \"Enter amount\";\r\n\t\t}\r\n\r\n\t\tif (sepToNumber(sizeValue) > fromBigNumber(position.size)) {\r\n\t\t\treturn \"Amount exceeds option's size\";\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\treturn \"Closing...\";\r\n\t\t}\r\n\t}\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\treturn \"Close\";\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst resetModal = () => {\r\n\t\t// animation delay\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetSizeValue('');\r\n\t\t\tsetPosition(null);\r\n\t\t}, 300)\r\n\t}\r\n\t\r\n\tconst marketImg = position\r\n\t\t? require(`../../../../img/icon-${position.market}.svg`).default\r\n\t\t: \"\";\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={\"CloseOptionModal PositionModal\"}\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={resetModal}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">Close Option</h1>\r\n\t\t\t{position &&\r\n\t\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tMarket\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right PositionModal__market-logo\">\r\n\t\t\t\t\t\t\t<img src={marketImg} alt={`${position.market} logo`} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tType\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{position.type}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx({ positive: position.isCall, negative: !position.isCall })}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.sentiment}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tProfit Zone\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{position.profitZoneStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpires In\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{msToTimeLeft(position.expiry - Date.now())}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{format(position.expiry, DATE_FORMAT_TEMPLATE)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)} {position.token}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\tclassName=\"Tooltip_input\"\r\n\t\t\t\t\t\thandle={\r\n\t\t\t\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\t\t\t\ttitle='Amount'\r\n\t\t\t\t\t\t\t\tdisabled={isHegic}\r\n\t\t\t\t\t\t\t\tvalue={isHegic ? fromBigNumber(position.size) : sizeValue}\r\n\t\t\t\t\t\t\t\tsetValue={setSizeValue}\r\n\t\t\t\t\t\t\t\tmaxValue={fromBigNumber(position.size)}\r\n\t\t\t\t\t\t\t\ticon={require(`../../../../img/icon-${position.token}.svg`).default}\r\n\t\t\t\t\t\t\t\ticonAlt={`${position.token} icon`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\tenabled={isHegic}\r\n\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\tHegic doesn't support partial closing\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tProfit/Loss\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{pnlStr ?? \"...\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpnlPercentage &&\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName={cx(pnl && { positive: pnl.gt(0), negative: pnl.lt(0) })}\r\n\t\t\t\t\t\t\t\t\tstyle={{marginLeft: 4}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{pnlPercentageStr}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tPremium Paid\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>}\r\n\t\t\t\r\n\t\t\t<button \r\n\t\t\t\tclassName=\"modal__btn btn btn_hlight\"\r\n\t\t\t\tonClick={onCloseClick}\r\n\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t>\r\n\t\t\t\t{getBtnText()}\r\n\t\t\t</button>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ClosePositionModal;","import React, { useState, useEffect } from 'react';\r\nimport { formatForContract } from '../../utils/math';\r\nimport Modal from './Modal';\r\nimport { formatAmount, formatAmountFree, USD_DECIMALS } from './../../../views/gmx-test/lib/legacy';\r\nimport NumberInput_v3 from './../input/NumberInput_v3';\r\nimport { CALL, PUT, SL, TP } from './../../../views/options/lib/legacyOptions';\r\nimport { OPTIONS_DECIMALS } from '../../utils/constants';\r\nimport cx from \"classnames\";\r\nimport { executePromise, fromBigNumber } from '../../utils/utils';\r\nimport Currency from './../../Currency';\r\nimport {\r\n\tgetTPMethod,\r\n\tgetTPContract,\r\n} from '../../utils/contracts';\r\nimport Tooltip from '../../../views/gmx-test/components/Tooltip/Tooltip';\r\nimport icon_bin from '../../../img/icon-bin.svg';\r\nimport \"./SLTP.scss\";\r\nimport { ImSpinner2 } from 'react-icons/im';\r\n\r\nconst SLTPModalOptions = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tisTP,\r\n\t\tposition,\r\n\t\tsetPosition,\r\n\t\tSLTPCommission,\r\n\t\tmarkPrices,\r\n\t\tlibrary,\r\n\t} = props;\r\n\r\n\tconst [priceValue, setPriceValue] = useState('');\r\n\tconst [amountValue, setAmountValue] = useState('');\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [isRemoving, setIsRemoving] = useState();\r\n\tconst [isApproved, setIsApproved] = useState(null);\r\n\tconst isActionSet = Boolean(isTP ? (!position?.tp || position.tp.eq(0)) : (!position?.sl || position.sl.eq(0)));\r\n\tconst actionStr = isActionSet ? \"Set\" : \"Update\";\r\n\tconst titleStr = isTP ? TP : SL;\r\n\tconst btnText = `${actionStr} ${titleStr}`;\r\n\tconst title = `${isActionSet ? \"Set\" : \"Edit\"} ${titleStr}`;\r\n\tconst isHegic = position?.market === \"Hegic\";\r\n\r\n\tconst markPrice = markPrices[position?.token];\r\n\r\n\tuseEffect(() => {\r\n\t\tif (position && visible) {\r\n\t\t\tsetAmountValue(fromBigNumber(position.size, OPTIONS_DECIMALS));\r\n\t\t\tposition.checkIsTpApproved()\r\n\t\t\t\t.then(setIsApproved);\r\n\t\t}\r\n\t}, [position]);\r\n\r\n\tconst executeCb = () => {\r\n\t\tposition.setIsSLTPSpinning(true);\r\n\t\tsetVisible(false);\r\n\t}\r\n\tconst onApply = async () => {\r\n\t\tif (!isApproved) {\r\n\t\t\texecutePromise(position.approveTp, [], \"ERC721 approved!\", setIsSubmitting, () => {\r\n\t\t\t\tsetIsApproved(true);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst method = getTPMethod(isActionSet ? \"set\" : \"update\", position.market);\r\n\t\tconst contract = getTPContract(position.market, position.token, library.getSigner());\r\n\t\tconst id = position.id;\r\n\t\tconst price = formatForContract(priceValue, 8);\r\n\t\tconst isCall = position.isCall;\r\n\t\tconst takeType = isTP\r\n\t\t\t? isCall ? 0 : 1\r\n\t\t\t: isCall ? 1 : 0;\r\n\t\tconst args = [id, price, takeType];\r\n\t\tconst successMsg = `${titleStr} ${isActionSet ? \"set\" : \"updated\"}!`;\r\n\t\tif (isActionSet) {\r\n\t\t\targs.push({ value: await contract.commissionSize() });\r\n\t\t}\r\n\t\texecutePromise(contract[method], args, successMsg, setIsSubmitting, executeCb);\r\n\t}\r\n\tconst onRemove = () => {\r\n\t\t// Lyra SL/TP bug fix\r\n\t\tconst contract = getTPContract(position.hasOldTP ? `Lyra_old` : position.market, position.token, library.getSigner());\r\n\t\tconst method = getTPMethod(\"delete\", position.market);\r\n\t\texecutePromise(contract[method], [position.id], `${titleStr} removed!`, setIsRemoving, executeCb);\r\n\t}\r\n\r\n\tconst getError = () => {\r\n\t\tif (!position) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\t\tif (isApproved === null) {\r\n\t\t\treturn `Please, wait`;\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\tif (isApproved) {\r\n\t\t\t\treturn `Submitting...`;\r\n\t\t\t}\r\n\t\t\treturn `Approving...`;\r\n\t\t}\r\n\t\tif (isRemoving) {\r\n\t\t\treturn `Removing...`;\r\n\t\t}\r\n\r\n\t\tif (!amountValue && !isHegic) {\r\n\t\t\treturn `Enter amount`;\r\n\t\t}\r\n\t\tconst userAmount = formatForContract(amountValue, 18);\r\n\t\tconst curAmount = fromBigNumber(position.size, 0);\r\n\t\tif (userAmount > curAmount) {\r\n\t\t\treturn `Amount exceeds option's size`\r\n\t\t}\r\n\t\tif (!priceValue || priceValue == 0) {\r\n\t\t\treturn `Enter price`;\r\n\t\t}\r\n\t\t\r\n\t\tconst isCall = position.isCall;\r\n\t\tconst curPrice = Number(formatAmount(markPrice, 20, 0, 0));\r\n\t\tconst userPrice = formatForContract(priceValue, 10);\r\n\t\t\r\n\t\tif (userPrice === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isTP) {\r\n      if ((isCall && userPrice > curPrice) || (!isCall && userPrice < curPrice)) {\r\n        return `${isCall ? CALL : PUT} SL can't be ${isCall ? 'greater' : 'less'} than mark price`;\r\n      }\r\n    }\r\n    if (isTP) {\r\n      if ((isCall && userPrice < curPrice) || (!isCall && userPrice > curPrice)) {\r\n        return `${isCall ? CALL : PUT} TP can't be ${isCall ? 'less' : 'greater'} than mark price`;\r\n      }\r\n    }\r\n\t}\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\r\n\t\tif (!isApproved) {\r\n\t\t\treturn `Approve`;\r\n\t\t}\r\n\r\n\t\treturn btnText;\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\t\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst resetModal = () => {\r\n\t\tsetPriceValue('');\r\n\t\tsetAmountValue('');\r\n\t\tsetPosition(null);\r\n\t\tsetIsApproved(null);\r\n\t};\r\n\r\n\tconst marketImg = position\r\n\t\t? require(`../../../img/icon-${position.market}.svg`).default\r\n\t\t: \"\";\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName=\"PositionModal modal_SLTP modal_SLTP-Options\"\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={resetModal}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">{title}</h1>\r\n\t\t\t{position && (\r\n\t\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tMarket\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right PositionModal__market-logo\">\r\n\t\t\t\t\t\t\t<img src={marketImg} alt={`${position.market} logo`} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx({ positive: position.isCall, negative: !position.isCall })}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.isCall ? CALL : PUT}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tProfit Zone\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{position.profitZoneStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\tclassName=\"Tooltip_input\"\r\n\t\t\t\t\t\thandle={\r\n\t\t\t\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\t\t\t\ttitle='Amount'\r\n\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t\tvalue={amountValue}\r\n\t\t\t\t\t\t\t\tsetValue={setAmountValue}\r\n\t\t\t\t\t\t\t\tdisplayValue={formatAmountFree(position.size, OPTIONS_DECIMALS, 3, true)}\r\n\t\t\t\t\t\t\t\tdisplayValueTitle={'Amount'}\r\n\t\t\t\t\t\t\t\tmaxValue={fromBigNumber(position.size, OPTIONS_DECIMALS)}\r\n\t\t\t\t\t\t\t\tadditionalSymbol={position.token}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\tPartial closing is not supported\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\t\ttitle='Price'\r\n\t\t\t\t\t\tvalue={priceValue}\r\n\t\t\t\t\t\tsetValue={setPriceValue}\r\n\t\t\t\t\t\tdisplayValue={formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\tdisplayValueTitle={'Current Price'}\r\n\t\t\t\t\t\tadditionalSymbol={\"$\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{isActionSet && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\t\t\t{titleStr} Fee\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t\t\t<Currency currencyName='ETH' isSmall={true}>\r\n\t\t\t\t\t\t\t\t\t\t{formatAmount(SLTPCommission, OPTIONS_DECIMALS, 3, true) + \" ($\" + formatAmount(markPrices.ETH.div(SLTPCommission), OPTIONS_DECIMALS, 2, true) + \")\"}\r\n\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"text-inline Tip Tip_bordered\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tisHegic\r\n\t\t\t\t\t\t\t\t\t? \"The option will automatically beexercised ifthe take-profit price isreached. Ifthe price doesnt cross the take-profit threshold within 30 minutes before the expiration date, the option will beexercised automatically\"\r\n\t\t\t\t\t\t\t\t\t: \"Your option will besold automatically tothe Lyra AMM when the price reaches your take-profit/stop-loss price. Please beaware that when wesell your option tothe Lyra AMM, wecant control the slippage\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"SLTP__btn modal__btn btn btn_hlight\"\r\n\t\t\t\t\t\tstyle={!isActionSet ? { marginTop: 0 } : {}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetIsSubmitting(true);\r\n\t\t\t\t\t\t\tonApply();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{getBtnText()}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{!isActionSet && (\r\n\t\t\t\t\t\t<div className='SLTP__remove-btn align-right'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn_inline'\r\n\t\t\t\t\t\t\t\tonClick={onRemove}\r\n\t\t\t\t\t\t\t\tdisabled={isRemoving}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<img className='btn__icon' src={icon_bin} alt=\"Bin icon\" />\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tisRemoving\r\n\t\t\t\t\t\t\t\t\t? <ImSpinner2 className=\"spin position-loading-icon\" />\r\n\t\t\t\t\t\t\t\t\t: `Remove ${isTP ? \"TP\" : \"SL\"}`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default SLTPModalOptions;","import { useState, memo } from \"react\";\r\n\r\nimport {\r\n  helperToast,\r\n  CALL,\r\n  PUT,\r\n} from \"../../lib/legacyOptions\";\r\nimport PositionsItem from './PositionsItemOptions';\r\nimport ClosePositionModal from './ClosePositionModal';\r\nimport SLTPModalOptions from './../../../../components/UI/modal/SLTPModalOptions';\r\nimport { getMarkPrice } from \"../../../../components/utils/utils\";\r\n\r\nconst PositionsList = memo((props) => {\r\n  let {\r\n    positions,\r\n  } = props;\r\n  const {\r\n    infoTokens,\r\n    setMarket,\r\n    positionsLoading,\r\n    positionsError,\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    library,\r\n    SLTPCommission,\r\n  } = props;\r\n\r\n  /* const buyingPositions = pendingPositions.filter(pos => typeof pos === 'object');\r\n  if (positions) {\r\n    positions = [...buyingPositions, ...positions];\r\n  } */\r\n  \r\n  const hasPositions = Boolean(positions && positions.length);\r\n\r\n  const [closeModalVisible, setCloseModalVisible] = useState(false);\r\n  const [SLTPVisible, setSLTPVisible] = useState(false);\r\n  const [isTP, setIsTP] = useState(false);\r\n  const [position, setPosition] = useState(null);\r\n\r\n  const markPrices = {\r\n    ETH: getMarkPrice(infoTokens, \"ETH\"),\r\n    BTC: getMarkPrice(infoTokens, \"BTC\"),\r\n  }\r\n  const openSLTP = (position, isTP, setIsSLTPSpinning) => {\r\n    setPosition({\r\n      ...position,\r\n      setIsSLTPSpinning,\r\n    });\r\n    setIsTP(isTP);\r\n    setSLTPVisible(true);\r\n  }\r\n  const closePosition = (position) => {\r\n    setPosition(position);\r\n    setCloseModalVisible(true);\r\n  }\r\n  \r\n  const onPositionClick = (position) => {\r\n    helperToast.success(`${position.isCall ? \"Call\" : \"Put\"} ${position.token} market selected`);\r\n    setMarket(position.isCall ? CALL : PUT, position.token);\r\n  };\r\n\r\n  const getStatusLabel = () => {\r\n    if (!hasPositions || positionsLoading) {\r\n      if (positionsLoading) {\r\n        return `Loading...`;\r\n      }\r\n      if (positionsError) {\r\n        return `Loading failed, retrying...`;\r\n      }\r\n      return `No open positions`;\r\n    }\r\n  }\r\n  \r\n  const renderPositionItem = (position, isLarge) => {\r\n    return (\r\n      <PositionsItem\r\n        key={position.strategy}\r\n        position={position}\r\n        onPositionClick={onPositionClick}\r\n        markPrices={markPrices}\r\n        closePosition={closePosition}\r\n        isLarge={isLarge}\r\n        pendingPositions={pendingPositions}\r\n        openSLTP={openSLTP}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"PositionsList table-wrapper\">\r\n      <div className=\"Exchange-list small\">\r\n        <div>\r\n          {(!hasPositions || positionsLoading) && (\r\n            <div className=\"App-card Exchange-list-empty-note\">\r\n              {getStatusLabel()}\r\n            </div>\r\n          )}\r\n          {hasPositions && positions.map((position) => {\r\n            return renderPositionItem(position, false);\r\n          })}\r\n        </div>\r\n      </div>\r\n      <table className=\"Exchange-list large App-box\">\r\n        <tbody>\r\n          {hasPositions && (\r\n            <tr className=\"Exchange-list-header\">\r\n              <th>\r\n                Position\r\n              </th>\r\n              <th>\r\n                Amount\r\n              </th>\r\n              <th>\r\n                Profit Zone\r\n              </th>\r\n              <th>\r\n                Liq. Price\r\n              </th>\r\n              <th>\r\n                Premium Paid\r\n              </th>\r\n              <th>\r\n                PNL (ROE %)\r\n              </th>\r\n              <th>\r\n                Expiration Date\r\n              </th>\r\n              <th>\r\n                Take Profit\r\n              </th>\r\n              <th>\r\n                Stop Loss\r\n              </th>\r\n              <th></th>\r\n            </tr>\r\n          )}\r\n          {(!hasPositions || positionsLoading) && (\r\n            <tr>\r\n              <td colSpan=\"15\" className=\"Exchange-list-empty-note\">\r\n                {getStatusLabel()}\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {hasPositions && positions.map((position) => {\r\n            return renderPositionItem(position, true);\r\n          })}\r\n        </tbody>\r\n      </table>\r\n\r\n      <ClosePositionModal\r\n        visible={closeModalVisible}\r\n        setVisible={setCloseModalVisible}\r\n        position={position}\r\n        setPosition={setPosition}\r\n        pendingPositions={pendingPositions}\r\n        setPendingPositions={setPendingPositions}\r\n        positions={positions}\r\n      />\r\n      <SLTPModalOptions\r\n        visible={SLTPVisible}\r\n        setVisible={setSLTPVisible}\r\n        position={position}\r\n        setPosition={setPosition}\r\n        isTP={isTP}\r\n        SLTPCommission={SLTPCommission}\r\n        markPrices={markPrices}\r\n        library={library}\r\n      />\r\n    </div>\r\n  );\r\n})\r\n\r\nexport default PositionsList;","// prettier-ignore\r\nimport {ethers} from \"ethers\";\r\nimport { Web3Provider } from \"@ethersproject/providers\";\r\nimport { getFallbackProvider, getProvider } from \"../legacyOptions\";\r\n\r\nexport const fetcher =\r\n  (library: Web3Provider, contractInfo: any, additionalArgs: any[]) =>\r\n  (...args: any) => {\r\n    // eslint-disable-next-line\r\n    const [id, chainId, arg0, arg1, ...params] = args;\r\n    const provider = getProvider(library, chainId);\r\n\r\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\r\n\r\n    const contractCall = getContractCall({\r\n      provider,\r\n      contractInfo,\r\n      arg0,\r\n      arg1,\r\n      method,\r\n      params,\r\n      additionalArgs,\r\n    });\r\n\r\n    let shouldCallFallback = true;\r\n\r\n    const handleFallback = async (resolve, reject, error) => {\r\n      if (!shouldCallFallback) {\r\n        return;\r\n      }\r\n      // prevent fallback from being called twice\r\n      shouldCallFallback = false;\r\n\r\n      const fallbackProvider = getFallbackProvider(chainId);\r\n      if (!fallbackProvider) {\r\n        reject(error);\r\n        return;\r\n      }\r\n\r\n      console.info(\"using fallbackProvider for\", method);\r\n      const fallbackContractCall = getContractCall({\r\n        provider: fallbackProvider,\r\n        contractInfo,\r\n        arg0,\r\n        arg1,\r\n        method,\r\n        params,\r\n        additionalArgs,\r\n      });\r\n\r\n      fallbackContractCall\r\n        .then((result) => resolve(result))\r\n        .catch((e) => {\r\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\r\n          reject(e);\r\n        });\r\n    };\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      contractCall\r\n        .then((result) => {\r\n          shouldCallFallback = false;\r\n          resolve(result);\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\r\n          handleFallback(resolve, reject, e);\r\n        });\r\n\r\n      setTimeout(() => {\r\n        handleFallback(resolve, reject, \"contractCall timeout\");\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\r\n  if (ethers.utils.isAddress(arg0)) {\r\n    const address = arg0;\r\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\r\n\r\n    if (additionalArgs) {\r\n      return contract[method](...params.concat(additionalArgs));\r\n    }\r\n    return contract[method](...params);\r\n  }\r\n\r\n  if (!provider) {\r\n    return;\r\n  }\r\n\r\n  return provider[method](arg1, ...params);\r\n}\r\n","import { useCallback, useRef } from \"react\";\r\n\r\nexport default function useDebounce(cb, delay) {\r\n\tconst timer = useRef();\r\n\r\n\tconst debouncedCb = useCallback((...args) => {\r\n\t\tif (timer.current) {\r\n\t\t\tclearTimeout(timer.current);\r\n\t\t}\r\n\t\ttimer.current = setTimeout(() => {\r\n\t\t\tcb(...args);\r\n\t\t}, delay);\r\n\t}, [cb, delay]);\r\n\r\n\treturn debouncedCb;\r\n}","import { useState, useEffect } from 'react';\r\nimport './OptionsList.scss';\r\nimport Loader from './../../../../components/UI/loader/Loader';\r\nimport OptionsItem from './OptionsItem';\r\nimport Tooltip from './../Tooltip/Tooltip';\r\nimport Chai_ABI from '../../../../deployments/options/Chai_ABI.json';\r\nimport { CHAI_CONTRACT_ETH, CHAI_CONTRACT_BTC } from '../../../../components/utils/contracts';\r\nimport useSWR from 'swr';\r\nimport { ethers } from 'ethers';\r\nimport icon_btnUp from '../../../../img/icon-btn-up.svg';\r\nimport Filter from './../../../../components/UI/Filter/Filter';\r\nimport { marketsOptions, OPTION_LIST_FRONTIER } from './../../../../components/utils/constants';\r\nimport { useLocalStorageSerializeKey, ARBITRUM } from './../../lib/legacyOptions';\r\nimport BuyPositionModal from './BuyPositionModal';\r\nimport useSort from '../../../../hooks/useSort';\r\n\r\nconst OptionsList = (props) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\twalletAddress,\r\n\t\tlibrary,\r\n\t\toptions,\r\n\t\toptionPrices,\r\n\t\tisLoading,\r\n\t\tscrollRef,\r\n\t\tswapOption,\r\n\t\tinfoTokens,\r\n\t\tpendingPositions,\r\n\t\tsetPendingPositions,\r\n\t} = props;\r\n\r\n\tconst chaiAddress = options[0]?.token === 'ETH'\r\n    ? CHAI_CONTRACT_ETH : CHAI_CONTRACT_BTC;\r\n\r\n\tconst { data: markPrice } = useSWR(\r\n\t\tactive && [active, options[0]?.token, \"getMarkPrice\"],\r\n\t\t{\r\n\t\t\tfetcher: async () => {\r\n\t\t\t\tconst contract = new ethers.Contract(chaiAddress, Chai_ABI, library.getSigner());\r\n\t\t\t\treturn await contract.latestAnswer();\r\n\t\t\t},\r\n\t\t\trefreshInterval: 5000\r\n\t\t}\r\n\t)\r\n\r\n\tconst isCall = swapOption === 'Call';\r\n\r\n\tconst [markets, setMarkets] = useLocalStorageSerializeKey([ARBITRUM, \"Options-Markets\"], marketsOptions.slice());\r\n\tconst [sortOptions, sortedOptions, setSortedOptions, sortType] = useSort(options, markets, \"market\");\r\n\r\n\tuseEffect(() => {\r\n\t\tconst [param, dir] = sortType.split('__');\r\n\t\tsortOptions(param, dir, true);\r\n\t}, [markets]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (options.length) {\r\n\t\t\tsortOptions('strike', isCall ? -1 : 1, true);\r\n\t\t} else {\r\n\t\t\tsetSortedOptions([]);\r\n\t\t}\r\n\t}, [options.length]);\r\n\r\n\tconst [position, setPosition] = useState(null);\r\n\tconst [buyModalVisible, setBuyModalVisible] = useState(false);\r\n\tconst buyPosition = (position) => {\r\n    setPosition(position);\r\n    setBuyModalVisible(true);\r\n  }\r\n\r\n\tconst renderHead = () => {\r\n\t\treturn (\r\n\t\t\t<tr className=\"Exchange-list-header\">\r\n\t\t\t\t<th>\r\n\t\t\t\t\tMarket\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\thandle=\"Type\"\r\n\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\tAmerican-style options may <br />exercise atany time before <br />the option expires.<br />European-style options may <br />exercise only atexpiration.\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('strike');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tStrike\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\tExpires in\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\tDate\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('cost');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTotal Cost\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('price');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice per Option\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tif (!options) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"OptionsList block\" ref={scrollRef}>\r\n\t\t\t<div className=\"OptionsList__header\">\r\n\t\t\t\t<h1 className='OptionsList__title'>Available Options</h1>\r\n\t\t\t\t<Filter\r\n\t\t\t\t\titems={marketsOptions}\r\n\t\t\t\t\tselectedItems={markets}\r\n\t\t\t\t\tsetSelectedItems={setMarkets}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"table-wrapper table-wrapper_scrollable\">\r\n\t\t\t\t<table className=\"Exchange-list large App-box\">\r\n\t\t\t\t\t{renderHead()}\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{(!sortedOptions.length || !markPrice) ?\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td colSpan={8}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t\t\t<Loader /> :\r\n\t\t\t\t\t\t\t\t\t\t\t(options.length \r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Please select markets from the list above\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Please choose the desired amount and period to view the available options\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t(isLoading\r\n\t\t\t\t\t\t\t\t? <tr>\r\n\t\t\t\t\t\t\t\t\t\t<td colSpan={8}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t: sortedOptions.map(opt => {\r\n\t\t\t\t\t\t\t\t\t\tconst optPriceObj = optionPrices[opt.strategy];\r\n\t\t\t\t\t\t\t\t\t\topt.price = optPriceObj?.price;\r\n\t\t\t\t\t\t\t\t\t\topt.cost = optPriceObj?.cost;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t\t\t<OptionsItem\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={opt.strategy}\r\n\t\t\t\t\t\t\t\t\t\t\t\toption={opt}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarkPrice={markPrice}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbuyPosition={buyPosition}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<button className=\"btn_up\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\twindow.scrollTo({\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tbehavior: 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<img src={icon_btnUp} alt=\"scroll up button\" />\r\n\t\t\t</button>\r\n\r\n\t\t\t<BuyPositionModal\r\n\t\t\t\tvisible={buyModalVisible}\r\n        setVisible={setBuyModalVisible}\r\n        position={position}\r\n        setPosition={setPosition}\r\n\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\tlibrary={library}\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\tpendingPositions={pendingPositions}\r\n\t\t\t\tsetPendingPositions={setPendingPositions}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OptionsList;","import React from 'react';\r\nimport { ARBITRUM, USD_DECIMALS, formatAmount } from '../views/gmx-test/lib/legacy';\r\nimport Currency from './Currency';\r\nimport { getTokenBySymbol } from '../views/gmx-test/config/Tokens';\r\nimport icon_market from '../img/icon-market.svg';\r\nimport './MarkPricePanel.scss';\r\n\r\nconst MarkPricePanel = (props) => {\r\n\tconst {\r\n\t\tinfoTokens,\r\n\t\tcurrencies = [\"ETH\", \"BTC\"]\r\n\t} = props;\r\n\t\r\n\treturn (\r\n\t\t<div className=\"MarkPricePanel\">\r\n\t\t\t<div className=\"MarkPricePanel__icon\">\r\n\t\t\t\t<img src={icon_market} alt=\"Market icon\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"MarkPricePanel__items\">\r\n\t\t\t\t{currencies.map(curr => {\r\n\t\t\t\t\tconst addr = getTokenBySymbol(ARBITRUM, curr).address;\r\n\t\t\t\t\tconst markPrice = infoTokens && infoTokens[addr]?.maxPrice;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"MarkPricePanel__item\" key={curr}>\r\n\t\t\t\t\t\t\t<Currency isHlight={true} currencyName={curr}>\r\n\t\t\t\t\t\t\t\t${formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MarkPricePanel;","import React, { useEffect, useState, forwardRef, useRef } from \"react\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport useSWR from \"swr\";\r\nimport { ethers, BigNumber } from \"ethers\";\r\nimport Lyra from '@lyrafinance/lyra-js';\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  formatAmount,\r\n  getTokenInfo,\r\n  useLocalStorageByChainId,\r\n  useChainId,\r\n  getPageTitle,\r\n  CALL,\r\n  expandDecimals,\r\n  PUT,\r\n} from \"../../lib/legacyOptions\";\r\nimport { useInfoTokens } from \"../../../gmx-test/domain/legacy\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { getTokens, getToken, getTokenBySymbol } from \"../../config/Tokens\";\r\n\r\nimport Reader from \"../../abis/ReaderV2.json\";\r\n\r\nimport SwapBox from \"../../components/Exchange/SwapBoxOptions\";\r\nimport ExchangeTVChart from \"../../components/Exchange/ExchangeTVChartOptions\";\r\nimport PositionsList from \"../../components/Exchange/PositionsListOptions\";\r\nimport Tab from \"../../components/Tab/TabOptions\";\r\n\r\nimport \"../../../gmx-test/pages/Exchange/Exchange.scss\";\r\nimport \"./ExchangeOptions.scss\";\r\nimport \"./ExchangeLists.scss\";\r\nimport { fetcher } from \"../../lib/contracts/fetcher\";\r\nimport { ARBITRUM } from './../../lib/legacyOptions';\r\nimport OptionsList from './../../components/Exchange/OptionsList';\r\nimport { CHAI_CONTRACT_BTC, CHAI_CONTRACT_ETH,\r\n  DDL_TP_Hegic_ABI, \r\n  DDL_TP_Hegic_addr,\r\n  DDL_TP_Lyra_ETH_addr,\r\n  DDL_TP_Lyra_BTC_addr,\r\n  DDL_TP_Lyra_ABI,\r\n  HEGIC_SENTIMENT_LABELS, HEGOPS, HEGOPS_ABI, HegicStrategy_ABI, OperationalTreasury, OperationalTreasury_ABI, getTPContract, getTPApproveContract, VICTIM_USER_ADDRESS, Chai_ABI } from './../../../../components/utils/contracts';\r\nimport { errAlert } from \"../../../../components/utils/notifications\";\r\nimport { DDL_WALLET, OPTIONS_DECIMALS, tokenDecimals } from \"../../../../components/utils/constants\";\r\nimport { DDL_WALLET_ENCODED, OPTION_TYPES } from './../../../../components/utils/constants';\r\nimport { HEGIC_STRATEGIES } from \"./../../../../components/utils/contracts\";\r\nimport { getOptionProfitZone } from \"../../../../components/utils/utils\";\r\nimport { alchemyProvider } from './../../../../components/utils/providers';\r\nimport MarkPricePanel from './../../../../components/MarkPricePanel';\r\n\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport const Exchange = (props) => {\r\n  const {\r\n    connectWallet,\r\n    walletAddress,\r\n  } = props;\r\n\r\n  const { account, active, library } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n  const defaultTokenSelection = AddressZero;\r\n\r\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\r\n    chainId,\r\n    \"Exchange-token-selection-options\",\r\n    defaultTokenSelection\r\n  );\r\n  \r\n  // Info Tokens + Balances\r\n  const tokens = getTokens(chainId);\r\n  const tokenAddresses = tokens.map((token) => token.address);\r\n  const readerAddress = getContract(chainId, \"Reader\");\r\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\r\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\r\n    refreshInterval: 10 * 1000\r\n  });\r\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances);\r\n  \r\n  const selectedToken = getTokenInfo(infoTokens, tokenSelection);\r\n\r\n  const chaiAddress = selectedToken.symbol === 'ETH'\r\n    ? CHAI_CONTRACT_ETH : CHAI_CONTRACT_BTC;\r\n  const { data: chaiMarkPrice } = useSWR(\r\n    active && [active, tokenSelection, \"getMarkPrice_Options\", account],\r\n    {\r\n      fetcher: async () => {\r\n        const contract = new ethers.Contract(chaiAddress, Chai_ABI, library.getSigner());\r\n        return await contract.latestAnswer();\r\n      },\r\n      refreshInterval: 5000,\r\n    }\r\n  )\r\n\r\n  useEffect(() => {\r\n    const toToken = getTokenInfo(infoTokens, tokenSelection);\r\n    // let currentTokenPriceStr = formatAmount(toToken.maxPrice, USD_DECIMALS, 2, true);\r\n    // let title = getPageTitle(currentTokenPriceStr + ` | ${toToken.symbol}${toToken.isStable ? \"\" : \"USD\"}`);\r\n    document.title = \"My Positions | DeDeLend\";\r\n  }, [tokenSelection, infoTokens, chainId]);\r\n\r\n  const renderChart = () => {\r\n    return (\r\n      <ExchangeTVChart\r\n        tokenSelection={tokenSelection}\r\n        setTokenSelection={setTokenSelection}\r\n        infoTokens={infoTokens}\r\n        chainId={chainId}\r\n        savedShouldShowPositionLines={false}\r\n      />\r\n    );\r\n  };\r\n  \r\n  const [leverageOption, setLeverageOption] = useLocalStorageByChainId(ARBITRUM, \"Period_Options\", 7);\r\n  const [amountValue, setAmountValue] = useState('');\r\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(ARBITRUM, \"Swap-option_Options\", CALL);\r\n  const [assetOption, setAssetOption] = useLocalStorageByChainId(ARBITRUM, \"Asset-option\", \"ETH\");\r\n\r\n  const setMarket = (swap, token) => {\r\n    setSwapOption(swap);\r\n    setTokenSelection(getTokenBySymbol(ARBITRUM, token).address);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setAssetOption(selectedToken.symbol);\r\n  }, [selectedToken.symbol]);\r\n\r\n  const [options, setOptions] = useState([]);\r\n  const [optionsLength, setOptionsLength] = useState(0);\r\n  const [optionsExpectedLength, setOptionsExpectedLength] = useState(0);\r\n  const [isOptionsLoading, setIsOptionsLoading] = useState(false);\r\n  const [optionPrices, setOptionPrices] = useState({});\r\n\r\n  const scrollRef = useRef(null);\r\n  const scrollToList = () => {\r\n    if (scrollRef?.current) {\r\n      scrollRef.current.scrollIntoView({\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  }\r\n\r\n  // Fetching positions\r\n  const [positions, setPositions] = useState([]);\r\n  const [pendingPositions, setPendingPositions] = useState([]);\r\n  useEffect(() => {\r\n    setPositions([]);\r\n  }, [account]);\r\n  const fetchHegicPositions = async () => {\r\n    let strategiesAddresses = [];\r\n    const provider = alchemyProvider;\r\n    const signer = library.getSigner();\r\n    // chaiMarkPrice 1e18 / 1e8 -- ETH / BTC\r\n    const chaiContractETH = new ethers.Contract(CHAI_CONTRACT_ETH, Chai_ABI, signer);\r\n    const chaiContractBTC = new ethers.Contract(CHAI_CONTRACT_BTC, Chai_ABI, signer);\r\n    const chaiMarkPrices = {\r\n      ETH: await chaiContractETH.latestAnswer(),\r\n      BTC: await chaiContractBTC.latestAnswer()\r\n    };\r\n\r\n    Object.values(HEGIC_STRATEGIES).forEach(obj => {\r\n      strategiesAddresses = [...strategiesAddresses, ...Object.values(obj)];\r\n    })\r\n\r\n    const contract = new ethers.Contract(HEGOPS, HEGOPS_ABI, provider);\r\n    const transferFilter = {\r\n      address: contract.address,\r\n      topics: [\r\n        ethers.utils.id(\"Transfer(address,address,uint256)\"),\r\n        null,\r\n        ethers.utils.hexZeroPad(walletAddress, 32),\r\n      ]\r\n    };\r\n    const events = await contract.queryFilter(transferFilter);\r\n    if (!events.length) {\r\n      return;\r\n    }\r\n    const tokenIds = events.map(e => {\r\n      return e.args.tokenId;\r\n    })\r\n    \r\n    const buyFilterTopics = [\r\n      ethers.utils.id(\"Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])\"),\r\n      tokenIds.map(id => {\r\n        return ethers.utils.hexZeroPad(id, 32);\r\n      }),\r\n    ]\r\n\r\n    const eventsPack = [];\r\n    let eventsPackLimit = 13;\r\n    const lastPackLength = strategiesAddresses.length % eventsPackLimit;\r\n    for (let i = 0; i < strategiesAddresses.length; i++) {\r\n      const address = strategiesAddresses[i];\r\n      const contract = new ethers.Contract(address, HegicStrategy_ABI, provider);\r\n\r\n      const buyFilter = {\r\n        address,\r\n        topics: buyFilterTopics,\r\n      }\r\n      const events = contract.queryFilter(buyFilter)\r\n        .then(eArr => {\r\n          eArr.forEach(e => {\r\n            formatPosition(e);\r\n          });\r\n        })\r\n      eventsPack.push(events);\r\n\r\n      if (i + 1 > (strategiesAddresses.length - lastPackLength)) {\r\n        eventsPackLimit = lastPackLength;\r\n      }\r\n      if (eventsPack.length >= eventsPackLimit) {\r\n        await Promise.all(eventsPack)\r\n          .then(() => {\r\n            // setPositions([...positions]);\r\n          });\r\n        eventsPack.splice(0, eventsPack.length);\r\n      }\r\n    }\r\n    async function formatPosition(e) {\r\n      const data = e.decode(e.data, e.topics);\r\n      const OpTreasury = new ethers.Contract(OperationalTreasury, OperationalTreasury_ABI, provider);\r\n      const additionalData = (await OpTreasury.lockedLiquidity(data.id));\r\n      const isActive = additionalData.state;\r\n      if (!isActive) {\r\n        return;\r\n      }\r\n\r\n      const periodDays = data.period.toString() / 60**2 / 24;\r\n      let strategies;\r\n      if (periodDays < 14) {\r\n        strategies = HEGIC_STRATEGIES.short;\r\n      } else if (periodDays < 30) {\r\n        strategies = HEGIC_STRATEGIES.medShort;\r\n      } else if (periodDays < 60) {\r\n        strategies = HEGIC_STRATEGIES.medLong;\r\n      } else if (periodDays <= 90) {\r\n        strategies = HEGIC_STRATEGIES.long;\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      const strategy = Object.keys(strategies).find(key => strategies[key] === e.address);\r\n      const [, sentiment, strikeScale, token] = strategy.split('_');\r\n      const isCall = sentiment.split('-')[0] === 'CALL';\r\n      const isSpread = sentiment.split('-').length > 1;\r\n      // size 1e18 / 1e8 -- ETH / BTC\r\n      const size = expandDecimals(data.data.amount, OPTIONS_DECIMALS - tokenDecimals[token]);\r\n      // chaiMarkPrice 1e18 / 1e8 -- ETH / BTC\r\n      const chaiMarkPrice = expandDecimals(chaiMarkPrices[token], OPTIONS_DECIMALS - tokenDecimals[token]);\r\n      // strike 1e8\r\n      const buyingPrice = expandDecimals(data.data.strike, OPTIONS_DECIMALS - 8);\r\n      const comparisonMethod = isCall ? \"gt\" : \"lt\";\r\n      const isITM = buyingPrice[comparisonMethod](chaiMarkPrice);\r\n      let strikePrice = isITM ? buyingPrice : buyingPrice.div(100).mul(strikeScale);\r\n      if (isSpread) {\r\n        strikePrice = buyingPrice;\r\n      }\r\n      // premium 1e6\r\n      const premium = expandDecimals(data.positivepnl, OPTIONS_DECIMALS - 6);\r\n      const stratContract = new ethers.Contract(additionalData.strategy, HegicStrategy_ABI, provider);\r\n      // profit 1e6\r\n      const profit = expandDecimals(await stratContract.payOffAmount(data.id), OPTIONS_DECIMALS - 6);\r\n      const pnl = {\r\n        unrealizedPnl: profit.sub(premium),\r\n        unrealizedPnlPercentage: expandDecimals(expandDecimals(profit.sub(premium), 4).div(premium), OPTIONS_DECIMALS - 4)\r\n      };\r\n      // Profit Zone\r\n      const { profitZone, profitZoneStr } = getOptionProfitZone(isCall, strikePrice, premium, size);\r\n      // SL/TP\r\n      const DDL_TakeProfit = getTPContract(\"Hegic\", token, signer);\r\n      const tpInfo = await DDL_TakeProfit.tokenIdToTokenInfo(data.id);\r\n      let tp, sl;\r\n      if (!tpInfo.takeProfitPrice.eq(0)) {\r\n        // price 1e8\r\n        const price = expandDecimals(tpInfo.takeProfitPrice, OPTIONS_DECIMALS - 8);\r\n        if (tpInfo.takeType === 0) {\r\n          if (isCall) {\r\n            tp = price;\r\n          } else {\r\n            sl = price;\r\n          }\r\n        } else {\r\n          if (isCall) {\r\n            sl = price;\r\n          } else {\r\n            tp = price;\r\n          }\r\n        }\r\n      }\r\n\r\n      const expiry = additionalData.expiration * 1000;\r\n      const approveContract = getTPApproveContract(\"Hegic\", token, signer);\r\n\r\n      // Two children with the same key fix\r\n      const uniqStrategy = strategy + \"_\" + premium.toString();\r\n      const fetchedPosition = {\r\n        strategy: uniqStrategy,\r\n        market: \"Hegic\",\r\n        type: OPTION_TYPES.Hegic,\r\n        id: data.id,\r\n        isCall,\r\n        sentiment: HEGIC_SENTIMENT_LABELS[sentiment],\r\n        token,\r\n        size,\r\n        strikePrice,\r\n        premium,\r\n        expiry,\r\n        pnl,\r\n        profitZone,\r\n        profitZoneStr,\r\n        isClosingDisabled: profit.eq(0),\r\n        tp,\r\n        sl,\r\n        close: () => {\r\n          return OpTreasury.connect(signer).payOff(data.id, walletAddress);\r\n        },\r\n        checkIsTpApproved: () => {\r\n          return approveContract.isApprovedOrOwner(DDL_TakeProfit.address, data.id);\r\n        },\r\n        approveTp: () => {\r\n          return approveContract.approve(DDL_TakeProfit.address, data.id);\r\n        }\r\n      }\r\n      const index = positions.findIndex(el => el.strategy === uniqStrategy);\r\n      if (index === -1) {\r\n        positions.push(fetchedPosition);\r\n        // Remove buying positions\r\n        setPendingPositions(pendingPositions.filter(pos => typeof pos !== 'object'));\r\n      } else {\r\n        positions[index] = fetchedPosition;\r\n      }\r\n    }\r\n  }\r\n  const fetchLyraPositions = async () => {\r\n    const lyra = new Lyra(ARBITRUM);\r\n    const posArr = await lyra.positions(account);\r\n    const SLIPPAGE = 0.015;\r\n\r\n    posArr.forEach(async pos => {\r\n      const { id, strikeId, strikePrice, isCall, isBuy, pricePerOption, size, expiryTimestamp  } = pos;\r\n      if (size.eq(0) || expiryTimestamp * 1000 < Date.now()) {\r\n        return;\r\n      }\r\n\r\n      let token = pos.marketName.split('-')[0];\r\n      if (token.startsWith('W')) {\r\n        token = token.substring(1, token.length);\r\n      }\r\n\r\n      // SL/TP\r\n      let tp, sl;\r\n      const DDL_TakeProfit = getTPContract(\"Lyra\", token, library.getSigner());\r\n      const tpInfo = await DDL_TakeProfit.tokenIdToTokenInfo(id);\r\n      if (!tpInfo.stopOrderPrice.eq(0)) {\r\n        // price 1e8\r\n        const price = expandDecimals(tpInfo.stopOrderPrice, OPTIONS_DECIMALS - 8);\r\n        if (tpInfo.stopOrderType === 0) {\r\n          if (isCall) {\r\n            tp = price;\r\n          } else {\r\n            sl = price;\r\n          }\r\n        } else {\r\n          if (isCall) {\r\n            sl = price;\r\n          } else {\r\n            tp = price;\r\n          }\r\n        }\r\n      }\r\n\r\n      const expiry = expiryTimestamp * 1000;\r\n      \r\n      const trades = pos.trades();\r\n      const premium = trades.reduce((premium, trade) => {\r\n        const method = trade.isBuy ? \"add\" : \"sub\";\r\n        return premium[method](trade.premium);\r\n      }, BigNumber.from(0));\r\n      // Hide selled options\r\n      if (premium.lt(0)) {\r\n        return;\r\n      }\r\n      \r\n      const strategy = `Lyra_${isCall ? \"CALL\" : \"PUT\"}_${strikeId.toString()}_${token}_${premium.toString()}`;\r\n      const pnl = pos.pnl();\r\n      const { profitZone, profitZoneStr } = getOptionProfitZone(isCall, strikePrice, premium, size);\r\n\r\n      // IncorrectOwner error fix\r\n      pos.owner = account;\r\n\r\n      const approveContract = getTPApproveContract(\"Lyra\", token, library.getSigner());\r\n      const fetchedPosition = {\r\n        strategy,\r\n        market: \"Lyra\",\r\n        type: OPTION_TYPES.Lyra,\r\n        isCall,\r\n        id,\r\n        sentiment: isCall ? CALL : PUT,\r\n        isBuy,\r\n        token,\r\n        size,\r\n        strikePrice,\r\n        pricePerOption,\r\n        premium,\r\n        expiry,\r\n        pnl,\r\n        profitZone,\r\n        profitZoneStr,\r\n        tp,\r\n        sl,\r\n        getTrade: async () => {\r\n          return await pos.trade(isBuy, size, SLIPPAGE);\r\n        },\r\n        close: async (size) => {\r\n          const signer = library.getSigner();\r\n          const trade = await pos.close(size, SLIPPAGE);\r\n          // add referrer\r\n          trade.tx.data = trade.tx.data.substring(0, trade.tx.data.length - DDL_WALLET_ENCODED.length);\r\n          trade.tx.data+= DDL_WALLET_ENCODED;\r\n          // visually\r\n          trade.params[0].referrer = DDL_WALLET;\r\n\r\n          if (trade.isDisabled) {\r\n            errAlert(new Error(trade.disabledReason));\r\n          }\r\n          \r\n          return signer.sendTransaction(trade.tx);\r\n        },\r\n        checkIsTpApproved: () => {\r\n          return approveContract.ownerOf(id)\r\n            .then(res => {\r\n              return res.toLowerCase() === DDL_TakeProfit.address.toLowerCase();\r\n            });\r\n        },\r\n        approveTp: () => {\r\n          return approveContract.approve(DDL_TakeProfit.address, id);\r\n        }\r\n      };\r\n      const index = positions.findIndex(el => el.strategy === strategy);\r\n      if (index === -1) {\r\n        positions.push(fetchedPosition);\r\n        // Remove buying positions\r\n        setPendingPositions(pendingPositions.filter(pos => typeof pos !== 'object'));\r\n      } else {\r\n        positions[index] = fetchedPosition;\r\n      }\r\n      \r\n      return positions;\r\n    });\r\n  }\r\n  const { data: positionsData, error: positionsDataError } = useSWR(\r\n    active && [active, account, library, chainId, \"getPositions_Options\", pendingPositions],\r\n    {\r\n      fetcher: async () => {\r\n        // Remove closing positions\r\n        if (pendingPositions.length) {\r\n          pendingPositions.forEach((strat, i) => {\r\n            if (typeof strat !== 'string') {\r\n              return;\r\n            }\r\n            const pendingIndex = positions.findIndex(pos => pos.strategy === strat);\r\n            if (pendingIndex > -1) {\r\n              positions.splice(pendingIndex, 1);\r\n              setPositions([...positions]);\r\n  \r\n              if (i + 1 === pendingPositions.length) {\r\n                setPendingPositions(pendingPositions.filter(pos => typeof pos !== 'string'));\r\n              }\r\n            }\r\n          })\r\n        }\r\n        // End remove closing positions\r\n        await Promise.all([\r\n          fetchHegicPositions(),\r\n          fetchLyraPositions(),\r\n        ]);\r\n        return true;\r\n      },\r\n    }\r\n  );\r\n  if (positionsDataError) {\r\n    console.log(\"Fetching Positions error!\", positionsDataError);\r\n  }\r\n  // End Fetching positions\r\n\r\n  // Fetching Commission data, no changes expected\r\n  const { data: SLTPCommission, error: SLTPCommissionError } = useSWR(\r\n    active && library && [active, library, \"getSLTPCommission_Options\", account],\r\n    {\r\n      fetcher: async () => {\r\n        const DDL_TakeProfit = getTPContract(\"Hegic\", \"\", library.getSigner());\r\n        const commission = await DDL_TakeProfit.commissionSize();\r\n        return commission;\r\n      },\r\n      refreshInterval: 300 * 1000,\r\n    }\r\n  )\r\n  if (SLTPCommissionError) {\r\n    console.log(\"DDL_TakeProfit commission error!\", SLTPCommissionError);\r\n  }\r\n  // End Commission data\r\n\r\n  // Sections Labels\r\n  const LIST_SECTIONS = [\"Positions\"];\r\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\r\n  const LIST_SECTIONS_LABELS = {\r\n    Positions: \"Active\",\r\n  };\r\n  if (!LIST_SECTIONS.includes(listSection)) {\r\n    listSection = LIST_SECTIONS[0];\r\n  }\r\n  const positionsDataIsLoading = active && !positionsData && !positionsDataError;\r\n  // End Sections Labels\r\n  \r\n  const getListSection = () => {\r\n    return (\r\n      <>\r\n        <div className=\"Exchange-list-tab-container\">\r\n          <Tab\r\n            options={LIST_SECTIONS}\r\n            optionLabels={LIST_SECTIONS_LABELS}\r\n            option={listSection}\r\n            onChange={(section) => setListSection(section)}\r\n            type=\"inline\"\r\n            className=\"Exchange-list-tabs\"\r\n          />\r\n          <div className=\"Exchange-list-tip\">\r\n            *The table displays estimated PnL values. Toview the actual PnL, click onthe Close button\r\n          </div>\r\n        </div>\r\n        {listSection === \"Positions\" && (\r\n          <PositionsList\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            account={account}\r\n            library={library}\r\n            setMarket={setMarket}\r\n            positions={positions}\r\n            positionsLoading={positionsDataIsLoading}\r\n            positionsError={positionsDataError}\r\n            pendingPositions={pendingPositions}\r\n            setPendingPositions={setPendingPositions}\r\n            SLTPCommission={SLTPCommission}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  if (!getToken(chainId, tokenSelection)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"Exchange page-layout\">\r\n      <div className=\"Exchange-content\">\r\n        {/* <div className=\"Exchange-left\">\r\n          {renderChart()}\r\n        </div>\r\n        <div className=\"Exchange-right\">\r\n          <SwapBox\r\n            chainId={chainId}\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            connectWallet={connectWallet}\r\n            walletAddress={walletAddress}\r\n            library={library}\r\n            account={account}\r\n            selectedToken={selectedToken}\r\n            tokenSelection={tokenSelection}\r\n            setTokenSelection={setTokenSelection}\r\n            leverageOption={leverageOption}\r\n            setLeverageOption={setLeverageOption}\r\n            amountValue={amountValue}\r\n            setAmountValue={setAmountValue}\r\n            swapOption={swapOption}\r\n            setSwapOption={setSwapOption}\r\n            assetOption={assetOption}\r\n            setAssetOption={setAssetOption}\r\n            options={options}\r\n            setOptions={setOptions}\r\n            setOptionsLength={setOptionsLength}\r\n            setOptionsExpectedLength={setOptionsExpectedLength}\r\n            isOptionsLoading={isOptionsLoading}\r\n            setIsOptionsLoading={setIsOptionsLoading}\r\n            optionPrices={optionPrices}\r\n            setOptionPrices={setOptionPrices}\r\n            scrollToList={scrollToList}\r\n            chaiMarkPrice={chaiMarkPrice}\r\n          />\r\n        </div> */}\r\n        <div className=\"Exchange-lists-container\">\r\n          <div className=\"Exchange-lists-header\">\r\n            <h1 className=\"Exchange-lists__title\">\r\n              My positions\r\n            </h1>\r\n            <MarkPricePanel\r\n              infoTokens={infoTokens}\r\n            />\r\n          </div>\r\n          <div className=\"Exchange-lists large\">{getListSection()}</div>\r\n          <div className=\"Exchange-lists small\">{getListSection()}</div>\r\n        </div>\r\n        {/* <OptionsList\r\n          active={active}\r\n          library={library}\r\n          options={options}\r\n          setOptions={setOptions}\r\n          optionsExpectedLength={optionsExpectedLength}\r\n          optionPrices={optionPrices}\r\n          isLoading={isOptionsLoading}\r\n          scrollRef={scrollRef}\r\n          swapOption={swapOption}\r\n          walletAddress={walletAddress}\r\n          infoTokens={infoTokens}\r\n          positions={positions}\r\n          pendingPositions={pendingPositions}\r\n          setPendingPositions={setPendingPositions}\r\n        /> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\nimport { Exchange } from \"../pages/Exchange/ExchangeOptions\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"../styles/Font.css\";\r\nimport \"./App.scss\";\r\nimport \"../styles/Input.scss\";\r\nimport _AccountManager from \"../../../deployments/arbitrum_ddl/accountManager.json\";\r\n\r\nfunction FullApp({ walletAddress, connectWallet }) {\r\n  const exchangeRef = useRef();\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App GMX-Interface Options-Interface\">\r\n        <div className=\"App-content\">\r\n          <Exchange\r\n            ref={exchangeRef}\r\n            connectWallet={connectWallet}\r\n            walletAddress={walletAddress}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Options(props) {\r\n  return (\r\n    <FullApp {...props} />\r\n  );\r\n}\r\n\r\nexport default Options;\r\n","import React from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport Tabs from '../../components/Tabs';\r\nimport { useLocation } from 'react-router-dom';\r\nimport './Terminal.scss';\r\n\r\nconst Terminal = (props) => {\r\n\tconst {\r\n\t\t\r\n\t} = props;\r\n\r\n\tconst loc = useLocation();\r\n\tconst links = [\r\n\t\t/* {\r\n\t\t\tname: \"Perpetuals\",\r\n\t\t\tto: '/terminal/perpetuals'\r\n\t\t}, */\r\n\t\t{\r\n\t\t\tname: \"Position Builder\",\r\n\t\t\tto: \"/terminal/builder\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"My Positions\",\r\n\t\t\tto: '/terminal/positions',\r\n\t\t},\r\n\t\t/* {\r\n\t\t\tname: \"User Profile\",\r\n\t\t\tto: \"/terminal/profile\"\r\n\t\t}, */\r\n\t\t/* {\r\n\t\t\tname: \"Market Overview\",\r\n\t\t\tto: \"/terminal/market-overview\"\r\n\t\t} */\r\n\t]\r\n\tconst activeLink = links.find(link => {\r\n\t\treturn loc.pathname.endsWith(link.to);\r\n\t})\r\n\tif (activeLink) {\r\n\t\tactiveLink.isActive = true;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Terminal GMX-Interface\">\r\n\t\t\t<Tabs\r\n\t\t\t\tlinks={links}\r\n\t\t\t\tpathname={loc.pathname}\r\n\t\t\t/>\r\n\t\t\t<Outlet />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Terminal;","import React, { useState, useRef } from 'react';\r\nimport cx from 'classnames';\r\nimport './InputSimple.scss';\r\n\r\nconst InputSimple = (props) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tsetValue,\r\n\t\tonChange,\r\n\t\thasError,\r\n\t\tdisabled,\r\n\t\tunit,\r\n\t} = props;\r\n\r\n\tconst [hasFocus, setHasFocus] = useState(false);\r\n\tconst cls = cx(props.className, \"InputSimple\", hasFocus && 'hlight', hasError && 'error', disabled && 'disabled');\r\n\tconst inputRef = useRef(null);\r\n\t\r\n\treturn (\r\n\t\t<div className={cls} onClick={() => {\r\n\t\t\tinputRef.current.focus();\r\n\t\t}}>\r\n\t\t\t<input\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tif (onChange) {\r\n\t\t\t\t\t\tonChange(e);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\tsetHasFocus(true);\r\n\t\t\t\t}}\r\n\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\tsetHasFocus(false);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<div className=\"InputSimple__unit\">\r\n\t\t\t\t{unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default InputSimple;","export const builderStrategies = {\r\n\tCall: {\r\n\t\tstats: {\r\n\t\t\tOutlook: 1,\r\n\t\t\tProfit: true,\r\n\t\t\tRisk: false,\r\n\t\t},\r\n\t\tstructure: [1], // Array of options' keys: positive = buy, negative = sell\r\n\t\t// Example: -1 = Sell Call, 1 = Buy Call.\r\n\t\tkey: 1,\r\n\t\tcolor: \"#46956A\"\r\n\t},\r\n\tPut: {\r\n\t\tstats: {\r\n\t\t\tOutlook: 0,\r\n\t\t\tProfit: true,\r\n\t\t\tRisk: false,\r\n\t\t},\r\n\t\tstructure: [2],\r\n\t\tkey: 2,\r\n\t\tcolor: \"#C75E4B\"\r\n\t},\r\n\tStrangle: {\r\n\t\tstats: {\r\n\t\t\tOutlook: 0,\r\n\t\t\tProfit: true,\r\n\t\t\tRisk: false,\r\n\t\t},\r\n\t\tisDateUnified: true,\r\n\t\tstructure: [1, 2],\r\n\t\tkey: 3,\r\n\t\tcolor: \"#D99445\"\r\n\t},\r\n\tStraddle: {\r\n\t\tstats: {\r\n\t\t\tOutlook: 0,\r\n\t\t\tProfit: true,\r\n\t\t\tRisk: false,\r\n\t\t},\r\n\t\tisDateUnified: true,\r\n\t\tisStrikeUnified: true,\r\n\t\tstructure: [1, 2],\r\n\t\tkey: 4,\r\n\t\tcolor: \"#D99445\"\r\n\t},\r\n}\r\n\r\nexport const strategyStatsLabels = {\r\n\tOutlook: {\r\n\t\t\"1\": \"Bullish\",\r\n\t\t\"0\": \"Neutral\",\r\n\t\t\"-1\": \"Bearish\"\r\n\t},\r\n\tProfit: {\r\n\t\t\"true\": \"Unlimited\",\r\n\t\t\"false\": \"Limited\"\r\n\t},\r\n\tRisk: {\r\n\t\t\"true\": \"Unlimited\",\r\n\t\t\"false\": \"Limited\"\r\n\t}\r\n}\r\n\r\nexport const builderProtocols = {\r\n\t\"Lyra_ETH\" : 0,\r\n\t\"Lyra_BTC\": 1,\r\n\t\"Hegic_ETH\": 2,\r\n\t\"Hegic_BTC\": 2,\r\n}\r\n\r\nexport const getOptionComponentLabel = (key) => {\r\n\tconst strategy = Object.keys(builderStrategies).find(stratName => {\r\n\t\treturn builderStrategies[stratName].key === Math.abs(key);\r\n\t})\r\n\treturn `${key > 0 ? \"Buy\" : \"Sell\"} ${strategy}`\r\n}\r\n\r\nexport const getDefaultStrikes = () => {\r\n\treturn {\r\n\t\tdefaultStrikes: { Hegic: [], Lyra: [] },\r\n\t\tdefaultStrikesData: { Hegic: {}, Lyra: {} },\r\n\t}\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Modal from '../../../../components/UI/modal/Modal';\r\nimport Currency from '../../../../components/Currency';\r\nimport Tooltip from '../../../gmx-test/components/Tooltip/Tooltip';\r\nimport './BuyBuildModal.scss';\r\nimport { builderProtocols, builderStrategies } from '../builderConstants';\r\nimport { getOptionComponentLabel } from '../builderConstants';\r\nimport { DATE_FORMAT_TEMPLATE, OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport { awaitLoading, executePromise, fromBigNumber } from '../../../../components/utils/utils';\r\nimport icon_calendar from '../../../../img/icon-calendar.svg';\r\nimport { format } from 'date-fns';\r\nimport cx from \"classnames\";\r\nimport { USDC, approveUSDC, builderOpen, builderOpenContract, getIsUsdcApproved } from './../../../../components/utils/contracts';\r\nimport { expandDecimals, formatAmount } from '../../../gmx-test/lib/legacy';\r\nimport { BigNumber } from 'ethers';\r\nimport { Accordion, AccordionItem } from '@szhsin/react-accordion';\r\n\r\nconst BuyBuildModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tfields,\r\n\t\tstrategy,\r\n\t\tinfoTokens,\r\n\t\tamount,\r\n\t\tasset,\r\n\t\tmaxCost,\r\n\t\twalletAddress\r\n\t} = props;\r\n\r\n\tconst [isUsdcApproved, setIsUsdcApproved] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tif (walletAddress && maxCost) {\r\n\t\t\tgetIsUsdcApproved(walletAddress, builderOpen, maxCost.div(10**(OPTIONS_DECIMALS-6)))\r\n\t\t\t\t.then(setIsUsdcApproved);\r\n\t\t}\r\n\t}, [walletAddress, maxCost]);\r\n\r\n\tconst usdcBalance = infoTokens[USDC.address].balance && expandDecimals(infoTokens[USDC.address].balance, OPTIONS_DECIMALS - 6);\r\n\tconst [premiums, setPremiums] = useState([]);\r\n\tconst [isMinorLoading, setIsMinorLoading] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (visible) {\r\n\t\t\tsetIsMinorLoading(true);\r\n\t\t\tfields.forEach(field => {\r\n\t\t\t\tconst market = field.market[0];\r\n\t\t\t\tconst strike = field.strike[0];\r\n\t\t\t\tpremiums.push(field.strikesData[0][market][strike].calcPremium(amount))\r\n\t\t\t})\r\n\t\t\tPromise.all(premiums)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetPremiums([...res])\r\n\t\t\t\t\tsetIsMinorLoading(false);\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [visible]);\r\n\r\n\tconst getError = () => {\r\n\t\tif (usdcBalance && maxCost && usdcBalance.lt(maxCost)) {\r\n\t\t\treturn `Max. Cost exceeds balance`\r\n\t\t}\r\n\t}\r\n\tconst getBtnText = () => {\r\n\t\tconst err = getError();\r\n\t\tif (err) {\r\n\t\t\treturn err;\r\n\t\t}\r\n\r\n\t\tif (isLoading) {\r\n\t\t\tif (!isUsdcApproved) {\r\n\t\t\t\treturn `Approving...`;\r\n\t\t\t} else {\r\n\t\t\t\treturn `Submitting...`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!isUsdcApproved) {\r\n\t\t\treturn `Approve USDC`\r\n\t\t}\r\n\r\n\t\treturn `Buy Strategy`;\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\treturn !getError() && !isLoading;\r\n\t}\r\n\tconst onPrimaryClick = async () => {\r\n\t\tif (!isUsdcApproved) {\r\n\t\t\tapproveUSDC(builderOpen, setIsLoading, () => { setIsUsdcApproved(true) })\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true);\r\n\t\tconst paramsArr = [];\r\n\t\tconst protocols = [];\r\n\t\tlet promises = [];\r\n\t\tfields.forEach(field => {\r\n\t\t\tconst market = field.market[0];\r\n\t\t\tconst strike = field.strike[0];\r\n\t\t\tconst data = field.strikesData[0][market][strike];\r\n\r\n\t\t\tpromises.push(data.getParams(amount).then(params => {\r\n\t\t\t\tparamsArr.push(params);\r\n\t\t\t\tprotocols.push(builderProtocols[`${field.market[0]}_${asset}`]);\r\n\t\t\t}))\r\n\t\t})\r\n\t\tawait Promise.all(promises);\r\n\t\tconst productKey = builderStrategies[strategy].key;\r\n\t\texecutePromise(builderOpenContract.consolidationOfTransactions, [protocols, paramsArr, productKey], `${amount} ${strategy.toLowerCase()}${amount > 1 ? \"s\" : \"\"} opened!`, setIsLoading, () => {\r\n\t\t\tsetVisible(false);\r\n\t\t});\r\n\t}\r\n\r\n\tconst resetModal = () => {\r\n\t\tsetPremiums([]);\r\n\t}\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={\"BuyBuildModal\"}\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={resetModal}\r\n\t\t>\r\n\t\t\t<div className=\"BuyBuildModal__body\">\r\n\t\t\t\t<div className=\"modal__steps steps\">\r\n\t\t\t\t\t<div className={cx(\"step\", !isUsdcApproved && \"current\")}>Approve USDC</div>\r\n\t\t\t\t\t<div className={cx(\"step\", isUsdcApproved && \"current\")}>Buy</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuyBuildModal__header\">\r\n\t\t\t\t\t<h1 className=\"BuyBuildModal__title modal__title\">Buy Strategy</h1>\r\n\t\t\t\t\t<div className=\"BuyBuildModal__strategy\" style={{color: builderStrategies[strategy].color}}>\r\n\t\t\t\t\t\t{strategy}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<table className='BuyBuildModal__table' cellPadding={0} border={1}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\tStrike\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\tMax. Cost\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>{/* date */}</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t{fields.map((field, i) => {\r\n\t\t\t\t\t\t\tif (!visible) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst strike = field.strike[0];\r\n\t\t\t\t\t\t\tconst struct = builderStrategies[strategy].structure[i];\r\n\t\t\t\t\t\t\tconst structLabel = getOptionComponentLabel(struct);\r\n\t\t\t\t\t\t\tconst market = field.market[0];\r\n\t\t\t\t\t\t\tlet marketIcon;\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tmarketIcon = require(`../../../../img/icon-${market}_sm.svg`).default;\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"BuyBuildModal__table-strike\">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={marketIcon} alt={`${market} icon`} />\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={cx(\"BuyBuildModal__table-strike-label\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpositive: struct > 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\tnegative: struct < 0,\r\n\t\t\t\t\t\t\t\t\t\t\t})}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{structLabel}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t${formatAmount(strike, 0, 0, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<Currency currencyName={asset}>\r\n\t\t\t\t\t\t\t\t\t\t\t{amount}\r\n\t\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{awaitLoading((\r\n\t\t\t\t\t\t\t\t\t\t\t<Currency>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{premiums.length && !isMinorLoading && formatAmount(premiums[i], OPTIONS_DECIMALS, 2, true)}\t\r\n\t\t\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t\t\t), isMinorLoading)}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td style={{textAlign: \"right\"}}>\r\n\t\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"Tooltip_date-icon\"\r\n\t\t\t\t\t\t\t\t\t\thandle={\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={icon_calendar} alt={\"Calendar icon\"} />\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{color: \"#fff\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{format(field.dateMs[0], DATE_FORMAT_TEMPLATE)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t<div className=\"BuyBuildModal__mobile\">\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\" style={{color: builderStrategies[strategy].color}}>\r\n\t\t\t\t\t\t\t{strategy}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{amount}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"divider\" />\r\n\t\t\t\t\t<Accordion\r\n\t\t\t\t\t\ttransition\r\n\t\t\t\t\t\ttransitionTimeout={250}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AccordionItem\r\n\t\t\t\t\t\t\theader={({state}) => `${state.isEnter ? \"Hide\" : \"Show\"} full strategy`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{fields.map((field, i) => {\r\n\t\t\t\t\t\t\t\tif (!visible) {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst strike = field.strike[0];\r\n\t\t\t\t\t\t\t\tconst struct = builderStrategies[strategy].structure[i];\r\n\t\t\t\t\t\t\t\tconst structLabel = getOptionComponentLabel(struct);\r\n\t\t\t\t\t\t\t\tconst market = field.market[0];\r\n\t\t\t\t\t\t\t\tlet marketIcon;\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tmarketIcon = require(`../../../../img/icon-${market}_sm.svg`).default;\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"BuyBuildModal__field-info\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tStrike\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"align-right BuyBuildModal__table-strike\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={marketIcon} alt={`${market} icon`} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={cx(\"BuyBuildModal__table-strike-label\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpositive: struct > 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnegative: struct < 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{structLabel}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t${formatAmount(strike, 0, 0, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Currency currencyName={asset}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{amount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tMax. Cost\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{awaitLoading((\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Currency>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{premiums.length && !isMinorLoading && formatAmount(premiums[i], OPTIONS_DECIMALS, 2, true)}\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t\t\t\t\t), isMinorLoading)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{format(field.dateMs[0], DATE_FORMAT_TEMPLATE)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"divider\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</AccordionItem>\r\n\t\t\t\t\t</Accordion>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div className=\"BuyBuildModal__footer\">\r\n\t\t\t\t<div className=\"BuyBuildModal__money\">\r\n\t\t\t\t\t<div className=\"BuyBuildModal__money-item\">\r\n\t\t\t\t\t\t<div className=\"BuyBuildModal__money-item-title\">\r\n\t\t\t\t\t\t\tBalance\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"BuyBuildModal__money-item-val\">\r\n\t\t\t\t\t\t\t<Currency isHlight={true}>\r\n\t\t\t\t\t\t\t\t{formatAmount(usdcBalance, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuyBuildModal__money-item\">\r\n\t\t\t\t\t\t<div className=\"BuyBuildModal__money-item-title\">\r\n\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\t\t\thandle=\"Max. Cost\"\r\n\t\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\t\tThis isthe highest amount <br/>youll pay for buying options. <br/>Ifthe option price rises <br/>beyond this, your transaction <br/>will bereverted.\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"BuyBuildModal__money-item-val\">\r\n\t\t\t\t\t\t\t<Currency isHlight={true}>\r\n\t\t\t\t\t\t\t\t{formatAmount(maxCost, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclassName=\"modal__btn btn btn_hlight\"\r\n\t\t\t\t\tonClick={onPrimaryClick}\r\n\t\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getBtnText()}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default BuyBuildModal;","import React, { useState, useEffect } from 'react';\r\nimport { DDL_WALLET, OPTIONS_DECIMALS, assetsIcons, assetsOptions, tokenDecimals } from './../../../../components/utils/constants';\r\nimport Tab from '../../../gmx-test/components/Tab/Tab';\r\nimport InputSimple from './../../../../components/UI/input/InputSimple';\r\nimport { convertInputNum, separateThousands } from '../../../../components/utils/sepThousands';\r\nimport './BuilderForm.scss';\r\nimport { ARBITRUM, expandDecimals, formatAmount, formatAmountFree, useLocalStorageByChainId } from '../../../gmx-test/lib/legacy';\r\nimport { getOptionComponentLabel, builderStrategies, strategyStatsLabels, getDefaultStrikes } from './../builderConstants';\r\nimport cx from \"classnames\";\r\nimport Selector from './../../../../components/UI/Selector/Selector';\r\nimport { HEGIC_STRATEGIES, HegicStrategy_ABI, PRICE_CALCULATORS, PriceCalculator_ABI, builderOpen, builderOpenContract, getIsUsdcApproved } from '../../../../components/utils/contracts';\r\nimport { fromBigNumber, numToBn } from '../../../../components/utils/utils';\r\nimport { alchemyProvider } from '../../../../components/utils/providers';\r\nimport { BigNumber, ethers } from 'ethers';\r\nimport Lyra from '@lyrafinance/lyra-js';\r\nimport { format } from 'date-fns';\r\nimport Spinner from '../../../../components/UI/loader/Spinner';\r\nimport Currency from './../../../../components/Currency';\r\nimport Tooltip from '../../../gmx-test/components/Tooltip/Tooltip';\r\nimport { useBuilderFields } from '../../../../hooks/useBuilderField';\r\nimport useDebounce from '../../../../hooks/useDebounce';\r\nimport BuyBuildModal from './BuyBuildModal';\r\n\r\nconst BuilderForm = (props) => {\r\n\tconst {\r\n\t\tasset,\r\n\t\tsetAsset,\r\n\t\twalletAddress,\r\n\t\tconnectWallet,\r\n\t\tchaiMarkPrice,\r\n\t\tinfoTokens,\r\n\t} = props;\r\n\t\r\n\tconst [modalVisible, setModalVisible] = useState(false);\r\n\tconst [amount, setAmount] = useState('1');\r\n\tconst [strategy, setStrategy] = useLocalStorageByChainId(ARBITRUM, \"Builder-strategy-option\", \"Call\");\r\n\tconst [lyraMarket, setLyraMarket] = useState(null);\r\n\tconst [isCostLoading, setIsCostLoading] = useState(false);\r\n\tconst [cost, setCost] = useState(null);\r\n\tconst [datesMs, setDatesMs] = useState([]);\r\n\r\n\tconst fetchStrikes = (field, isCall) => {\r\n\t\tconst strikesPromises = [];\r\n\t\tconst { defaultStrikes: strikes, defaultStrikesData: strikesData } = getDefaultStrikes();\r\n\t\tconst data = {\r\n\t\t\tstrikes,\r\n\t\t\tstrikesData,\r\n\t\t}\r\n\t\tfetchHegicStrikes(field, isCall, strikesPromises, data);\r\n\t\tfetchLyraStrikes(field, isCall, strikesPromises, data);\r\n\t\treturn { strikesPromises, data };\r\n\t}\r\n\tconst builderFields = useBuilderFields(strategy, fetchStrikes);\r\n\tconst clearOptions = () => {\r\n\t\tbuilderFields.forEach(field => {\r\n\t\t\tfield.dateMs[1](null);\r\n\t\t\tfield.strike[1](null);\r\n\t\t\tfield.clearData();\r\n\t\t})\r\n\t}\r\n\r\n\tconst isBtnEnabled = () => {\r\n\t\tif (!amount) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < builderFields.length; i++) {\r\n\t\t\tconst field = builderFields[i];\r\n\t\t\tif (!field.strike[0]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn !getError();\r\n\t}\r\n\tconst btnDefaultText = \"Buy Strategy\";\r\n\tconst getError = () => {\r\n\t\tif (!walletAddress) {\r\n\t\t\tconnectWallet();\r\n\t\t}\r\n\t\tif (!amount) {\r\n\t\t\treturn `Enter Amount`;\r\n\t\t}\r\n\t\tif (!builderFields.every(field => field.strike[0])) {\r\n\t\t\treturn `Fill out the Strike fields`;\r\n\t\t}\r\n\t\t\r\n\t\tif (!cost) {\r\n\t\t\treturn `Please, wait...`;\r\n\t\t}\r\n\t\tif (Number(cost) === 0) {\r\n\t\t\treturn `No Liquidity`\r\n\t\t}\r\n\t}\r\n\r\n\t// Set Lyra Market\r\n\tuseEffect(() => {\r\n\t\tif (asset) {\r\n\t\t\tsetLyraMarket(null);\r\n\t\t\tconst lyra = new Lyra(ARBITRUM);\r\n\t\t\tlyra.markets().then(markets => {\r\n\t\t\t\tconst market = markets.find(mkt => {\r\n\t\t\t\t\treturn mkt.baseToken.symbol === `W${asset}`;\r\n\t\t\t\t});\r\n\t\t\t\tsetLyraMarket(market);\r\n\t\t\t})\r\n\t\t}\r\n\t}, [asset]);\r\n\t// Fetch dates\r\n\tconst fetchDates = () => {\r\n\t\tconst dates = lyraMarket.liveBoards().map(bd => bd.expiryTimestamp * 10**3);\r\n\t\treturn dates;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (lyraMarket) {\r\n\t\t\tsetDatesMs(fetchDates());\r\n\t\t}\r\n\t}, [lyraMarket]);\r\n\t// Clear fields data\r\n\tuseEffect(() => {\r\n\t\tclearOptions();\r\n\t}, [asset, strategy]);\r\n\r\n\t// Fetch Strikes Fns\r\n\tconst defaultAmount = expandDecimals(1, tokenDecimals[asset]);\r\n\tconst fetchHegicStrikes = async (field, isCall, strikesPromises, data) => {\r\n\t\tconst { strikes, strikesData } = data;\r\n\t\tconst dateMs = field.dateMs[0];\r\n\t\t// const strikes = field.strikes[0];\r\n\t\t// const strikesData = field.strikesData[0];\r\n\r\n    const periodDays = Math.floor((dateMs - Date.now()) / 1000 / 60 / 60 / 24);\r\n    if (periodDays < 7 || periodDays > 90) {\r\n      return;\r\n    }\r\n    let strategies;\r\n    if (periodDays < 14) {\r\n      strategies = HEGIC_STRATEGIES.short;\r\n    } else if (periodDays < 30) {\r\n      strategies = HEGIC_STRATEGIES.medShort;\r\n    } else if (periodDays < 60) {\r\n      strategies = HEGIC_STRATEGIES.medLong;\r\n    } else if (periodDays <= 90) {\r\n      strategies = HEGIC_STRATEGIES.long;\r\n    }\r\n    \r\n    for (let i = 0; i < Object.keys(strategies).length; i++) {\r\n      const strategy = Object.keys(strategies)[i];\r\n      const [, strategySentiment, strikeScale, strategyTokenSymbol] = strategy.split('_');\r\n      const isSpread = strategySentiment.split('-').length > 1;\r\n      if (isSpread) {\r\n        continue;\r\n      }\r\n\r\n      const strategyIsCall = strategySentiment === 'CALL';\r\n      if ((isCall && !strategyIsCall) || (!isCall && strategyIsCall)) {\r\n        continue;\r\n      }\r\n      if (strategyTokenSymbol !== asset) {\r\n        continue;\r\n      }\r\n      \r\n      const strike = (formatAmountFree(chaiMarkPrice, 8, 2) / 100 * strikeScale).toFixed(0);\r\n\t\t\tconst priceName = `PriceCalculator_${strategySentiment}_${strikeScale}_${strategyTokenSymbol}`;\r\n      const priceAddress = PRICE_CALCULATORS[priceName];\r\n      const priceContract = new ethers.Contract(priceAddress, PriceCalculator_ABI, alchemyProvider);\r\n\t\t\tconst periodS = Math.floor((dateMs - Date.now()) / 1000);\r\n\r\n\t\t\tconst strategyAddress = strategies[strategy];\r\n\t\t\tconst strategyContract = new ethers.Contract(strategyAddress, HegicStrategy_ABI, alchemyProvider);\r\n\t\t\tlet hasLiq;\r\n\t\t\ttry {\r\n\t\t\t\thasLiq = !(await strategyContract.getAvailableContracts(periodS, [])).eq(0)\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\tif (!hasLiq) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n      strikesPromises.push(\r\n\t\t\t\tpriceContract.calculatePremium(periodS, defaultAmount, 0)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst price = fromBigNumber(res, 6).toFixed(2);\r\n\t\t\t\t\t\tstrikes.Hegic.push([strike, price]);\r\n\t\t\t\t\t}, console.log)\r\n\t\t\t)\r\n\r\n\t\t\tstrikesData.Hegic[strike] = {\r\n\t\t\t\tgetParams: (amount) => {\r\n\t\t\t\t\tconst amountBn = numToBn(amount, tokenDecimals[asset]);\r\n\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tresolve(builderOpenContract.encodeFromHegic(\r\n\t\t\t\t\t\t\tstrategyAddress, // strategy\r\n\t\t\t\t\t\t\tbuilderOpen, // holder\r\n\t\t\t\t\t\t\tamountBn, // amount\r\n\t\t\t\t\t\t\tperiodS, // period\r\n\t\t\t\t\t\t\t[] // additional\r\n\t\t\t\t\t\t));\r\n\t\t\t\t\t}) \r\n\t\t\t\t},\r\n\t\t\t\tcalcPremium: (amount) => {\r\n\t\t\t\t\tconst amountBn = numToBn(amount, tokenDecimals[asset]);\r\n\t\t\t\t\treturn priceContract.calculatePremium(periodS, amountBn, 0)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tconst premium = expandDecimals(res, OPTIONS_DECIMALS - 6);\r\n\t\t\t\t\t\t\treturn premium;\r\n\t\t\t\t\t\t}, console.log)\r\n\t\t\t\t},\r\n\t\t\t};\r\n    }\r\n  }\r\n  const fetchLyraStrikes = (field, isCall, strikesPromises, data) => {\r\n\t\tconst { strikes, strikesData } = data;\r\n\t\tif (!lyraMarket) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst dateMs = field.dateMs[0];\r\n\t\t// const strikes = field.strikes[0];\r\n\t\t// const strikesData = field.strikesData[0];\r\n\t\t\r\n    const lyra = new Lyra(ARBITRUM);\r\n    const boardId = lyraMarket.liveBoards().find((bd) => {\r\n\t\t\treturn bd.expiryTimestamp * 10**3 === dateMs;\r\n    }).id;\r\n    const board = lyraMarket.liveBoardsMap[boardId];\r\n    \r\n    board.strikes.forEach(strike => {\r\n\t\t\tconst { strikeId, strikePrice } = strike;\r\n\t\t\tconst strikeRounded = fromBigNumber(strikePrice, OPTIONS_DECIMALS);\r\n      strikesPromises.push(\r\n\t\t\t\tlyra.quoteOption(lyraMarket.address, strikeId, isCall, defaultAmount)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst price = fromBigNumber(res.ask.premium, tokenDecimals[asset]).toFixed(2);\r\n\t\t\t\t\t\tif (res.ask.premium.eq(0) || res.ask.isDisabled) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst getTrade = (amount) => {\r\n\t\t\t\t\t\t\tconst ONE_BN = ethers.constants.WeiPerEther;\r\n\t\t\t\t\t\t\tconst SLIPPAGE = 0.0015;\r\n\t\t\t\t\t\t\tconst amountBn = numToBn(amount, OPTIONS_DECIMALS);\r\n\t\t\t\t\t\t\tconst size = ONE_BN.mul(amountBn).div(BigNumber.from(10).pow(OPTIONS_DECIMALS));\r\n\t\t\t\t\t\t\treturn lyraMarket.trade(\r\n\t\t\t\t\t\t\t\twalletAddress,\r\n\t\t\t\t\t\t\t\tstrikeId.toNumber(),\r\n\t\t\t\t\t\t\t\tisCall,\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\tsize,\r\n\t\t\t\t\t\t\t\tSLIPPAGE,\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstrikes.Lyra.push([strikeRounded, price]);\r\n\t\t\t\t\t\tstrikesData.Lyra[strikeRounded] = {\r\n\t\t\t\t\t\t\tstrikeId: strikeId.toNumber(),\r\n\t\t\t\t\t\t\tgetParams: (amount) => {\r\n\t\t\t\t\t\t\t\treturn getTrade(amount).then(trade => {\r\n\t\t\t\t\t\t\t\t\tconst params = trade.params[0];\r\n\t\t\t\t\t\t\t\t\treturn builderOpenContract.encodeFromLyra([\r\n\t\t\t\t\t\t\t\t\t\t\tparams.strikeId,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.positionId,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.iterations,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.optionType,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.amount,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.setCollateralTo,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.minTotalCost,\r\n\t\t\t\t\t\t\t\t\t\t\tparams.maxTotalCost,\r\n\t\t\t\t\t\t\t\t\t\t\tDDL_WALLET, // referrer\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcalcPremium: (amount) => {\r\n\t\t\t\t\t\t\t\treturn getTrade(amount).then(trade => {\r\n\t\t\t\t\t\t\t\t\tif (trade.isDisabled) {\r\n\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn trade.params[0].maxTotalCost;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n    })\r\n\r\n\t\treturn { strikes, strikesData };\r\n  }\r\n\r\n\t// Calculate Max.Cost\r\n\tconst calcMaxCost = () => {\r\n\t\tif (!amount || !builderFields.find(field => field.strike[0])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsCostLoading(true);\r\n\t\tsetCost(null);\r\n\t\tlet cost = BigNumber.from(0);\r\n\t\tconst premiumPromises = [];\r\n\t\tbuilderFields.forEach(field => {\r\n\t\t\tconst [strike, ] = field.strike;\r\n\t\t\tconst [strikesData, ] = field.strikesData\r\n\t\t\tObject.keys(strikesData).forEach(market => {\r\n\t\t\t\tconst data = strikesData[market];\r\n\t\t\t\tif (!data[strike]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpremiumPromises.push(\r\n\t\t\t\t\tdata[strike].calcPremium(Number(amount))\r\n\t\t\t\t\t\t.then(premium => {\r\n\t\t\t\t\t\t\tif (!premium) {\r\n\t\t\t\t\t\t\t\tthrow new Error(\"No Liquidity\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcost = cost.add(premium);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t})\r\n\t\tPromise.all(premiumPromises)\r\n\t\t\t.then(() => {\r\n\t\t\t\tsetCost(cost);\r\n\t\t\t}, e => {\r\n\t\t\t\tif (e.message === \"No Liquidity\") {\r\n\t\t\t\t\tsetCost(BigNumber.from(0))\r\n\t\t\t\t}\r\n\t\t\t}).finally(() => {\r\n\t\t\t\tsetIsCostLoading(false);\r\n\t\t\t})\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tcalcMaxCost();\r\n\t}, [...builderFields.map(field => field.strike[0])]);\r\n\tconst calcMaxCostDelayed = useDebounce(calcMaxCost, 800);\r\n\tuseEffect(() => {\r\n\t\tcalcMaxCostDelayed();\r\n\t}, [amount]);\r\n\r\n\t// Render Chart Preview block\r\n\tconst renderChartPreview = (strategy) => {\r\n\t\tif (!strategy) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"BuilderForm__preview\">\r\n\t\t\t\t<div className=\"BuilderForm__preview-img\">\r\n\t\t\t\t\t<img src={require(`../../../../img/BuilderCharts/${strategy}.svg`).default} alt={`${strategy} chart`} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__preview-stats\">\r\n\t\t\t\t\t{Object.keys(builderStrategies[strategy].stats).map(stat => {\r\n\t\t\t\t\t\tconst statValue = builderStrategies[strategy].stats[stat];\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"BuilderForm__preview-stat\" key={stat}>\r\n\t\t\t\t\t\t\t\t<div className=\"BuilderForm__preview-stat-name\">\r\n\t\t\t\t\t\t\t\t\t{stat}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={\r\n\t\t\t\t\t\t\t\t\tcx(\"BuilderForm__preview-stat-val\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: statValue === 1,\r\n\t\t\t\t\t\t\t\t\t\tnegative: statValue === -1,\r\n\t\t\t\t\t\t\t\t\t\tneutral: statValue === 0,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t{strategyStatsLabels[stat][statValue.toString()]}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"BuilderForm App-box\">\r\n\t\t\t<div className=\"BuilderForm__inputs\">\r\n\t\t\t\t<div className=\"BuilderForm__field\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\tAsset\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\ticons={assetsIcons}\r\n\t\t\t\t\t\t\toptions={assetsOptions}\r\n\t\t\t\t\t\t\toption={asset}\r\n\t\t\t\t\t\t\tsetOption={setAsset}\r\n\t\t\t\t\t\t\tonChange={clearOptions}\r\n\t\t\t\t\t\t\ticonsFirst={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\tEnter Amount\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t<InputSimple \r\n\t\t\t\t\t\t\tvalue={amount}\r\n\t\t\t\t\t\t\tsetValue={setAmount}\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetAmount(convertInputNum(e.target.value, ''));\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tunit={`${strategy}s`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t<Selector\r\n\t\t\t\t\t\t\tclassName=\"Selector_wide\"\r\n\t\t\t\t\t\t\titems={Object.keys(builderStrategies)}\r\n\t\t\t\t\t\t\tchosenItem={strategy}\r\n\t\t\t\t\t\t\ttitleIcon={\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={require('../../../../img/icon-aggregator.svg').default}\r\n\t\t\t\t\t\t\t\t\talt={\"Selector icon\"}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonSelect={(item) => {\r\n\t\t\t\t\t\t\t\tsetStrategy(item);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\trenderOnHover={(item) => {\r\n\t\t\t\t\t\t\t\treturn renderChartPreview(item);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field BuilderForm__field_multiple\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t{datesMs && (\r\n\t\t\t\t\t\t\tbuilderStrategies[strategy].structure.map((struct, i) => {\r\n\t\t\t\t\t\t\t\tconst [dateMs, setDateMs] = builderFields[i].dateMs;\r\n\t\t\t\t\t\t\t\tconst clearData = builderFields[i].clearData;\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Selector\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"Selector_wide\"\r\n\t\t\t\t\t\t\t\t\t\titems={datesMs}\r\n\t\t\t\t\t\t\t\t\t\tchosenItem={dateMs}\r\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"Choose Expiration Date\"\r\n\t\t\t\t\t\t\t\t\t\tformatFn={(date, isChosen) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn format(date, isChosen ? 'd MMM hh:mm a' : 'd MMM');\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ttitleIcon={\r\n\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={require('../../../../img/icon-date.svg').default}\r\n\t\t\t\t\t\t\t\t\t\t\t\talt={\"Selector icon\"}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonSelect={(item) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetDateMs(item);\r\n\t\t\t\t\t\t\t\t\t\t\tclearData();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field BuilderForm__field_multiple\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\t\thandle=\"Strike\"\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\t<h6>Hegic Options (American options)</h6>\r\n\t\t\t\t\t\t\t\t\t\t<div style={{margin: \"3px 0\"}}>They require manual exercise before <br/>the expiration date. <br/>There are no secondary markets; out-<br/>of-the-money options can't be sold.</div>\r\n\t\t\t\t\t\t\t\t\t\t<h6>Lyra (European options)</h6>\r\n\t\t\t\t\t\t\t\t\t\t<div style={{margin: \"3px 0\"}}>They are only exercised automatically <br/>at the expiration date. <br/>Secondary markets are available; out-<br/>of-the-money options can be sold.</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t{builderStrategies[strategy].structure.map((struct, i) => {\r\n\t\t\t\t\t\t\tconst field = builderFields[i];\r\n\t\t\t\t\t\t\tconst [dateMs,] = field.dateMs;\r\n\t\t\t\t\t\t\tconst [strike, setStrike] = field.strike;\r\n\t\t\t\t\t\t\tconst [market, setMarket] = field.market;\r\n\t\t\t\t\t\t\tconst [strikes,] = field.strikes;\r\n\t\t\t\t\t\t\tconst [isLoading, ] = field.loader;\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tisLoading\r\n\t\t\t\t\t\t\t\t\t? <div className=\"Spinner\" key={i}><Spinner /></div>\r\n\t\t\t\t\t\t\t\t\t: <Selector\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"Selector_wide\"\r\n\t\t\t\t\t\t\t\t\t\t\titems={strikes}\r\n\t\t\t\t\t\t\t\t\t\t\tchosenItem={strike}\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultText=\"Choose Strike\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!dateMs}\r\n\t\t\t\t\t\t\t\t\t\t\tonSelect={(item, market) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMarket(market);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetStrike(item);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (builderStrategies[strategy].isStrikeUnified) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbuilderFields.forEach(depField => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (field === depField) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst [, setDepStrike] = depField.strike;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst [, setDepMarket] = depField.market;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst [depStrikes, ] = depField.strikes;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst chosenStrike = depStrikes[market]?.find(strike => strike[0] === item)?.[0];\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chosenStrike) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDepMarket(market);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDepStrike(chosenStrike);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDepStrike(null);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttitleIcon={\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className={cx({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpositive: struct > 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnegative: struct < 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{getOptionComponentLabel(struct)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tformatFn={(item) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn `$${separateThousands(item)}`;\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tsortFn={(items) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn items.sort((prev, cur) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (prev[0] > cur[0]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (prev[0] < cur[0]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tisComplex={true}\r\n\t\t\t\t\t\t\t\t\t\t\tcomplexCols={[\"Price, USDC\"]}\r\n\t\t\t\t\t\t\t\t\t\t\trenderChosenItem={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst price = strikes[market]?.find(strikeArr => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn strikeArr[0] === strike\r\n\t\t\t\t\t\t\t\t\t\t\t\t})?.[1];\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet marketImg;\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarketImg = require(`../../../../img/icon-${market}.svg`).default;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"Selector__chosen-item-complex-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"market\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{marketImg && <img src={marketImg} alt={`${market} icon`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{transform: market === \"Hegic\" ? \"translate(-2px, -1px)\" : \"\"}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"strike\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t${separateThousands(strike)};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"price\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Currency isHlight={true}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{separateThousands(price)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field\">\r\n\t\t\t\t\t{renderChartPreview(strategy)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"BuilderForm__field BuilderForm__field_multiple\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\t\thandle=\"Collateral\"\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\tThis refers tothe amount <br/>youre setting aside <br/>ascollateral for selling options\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t{builderStrategies[strategy].structure.map((struct, i) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className='BuilderForm__field-content-line'>\r\n\t\t\t\t\t\t\t\t\t<span className={cx(\"muted\")}>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"BuilderForm__buyer\">\r\n\t\t\t\t<div className=\"BuilderForm__field BuilderForm__buyer-field\">\r\n\t\t\t\t\t<div className=\"BuilderForm__field-title\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\t\thandle=\"Max. Cost\"\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\t\tThis isthe highest amount <br/>youll pay for buying options. <br/>Ifthe option price rises <br/>beyond this, your transaction <br/>will bereverted.\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"BuilderForm__field-content\">\r\n\t\t\t\t\t\t{isCostLoading\r\n\t\t\t\t\t\t\t? <Spinner />\r\n\t\t\t\t\t\t\t:\t<Currency isSmall={true} isHlight={!!cost}>\r\n\t\t\t\t\t\t\t\t\t{cost ? formatAmount(cost, OPTIONS_DECIMALS, 2, true) : \"\"}\r\n\t\t\t\t\t\t\t\t</Currency>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"BuilderForm__button btn btn_hlight\"\r\n\t\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetModalVisible(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getError() ?? btnDefaultText}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<BuyBuildModal\r\n\t\t\t\tvisible={modalVisible}\r\n\t\t\t\tsetVisible={setModalVisible}\r\n\t\t\t\tfields={builderFields}\r\n\t\t\t\tstrategy={strategy}\r\n\t\t\t\tamount={amount}\r\n\t\t\t\tasset={asset}\r\n\t\t\t\tmaxCost={cost}\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BuilderForm;","import { useState, useEffect } from \"react\";\r\nimport { builderStrategies, getDefaultStrikes } from \"../views/Terminal/Builder/builderConstants\";\r\n\r\nexport const useBuilderFields = (strategy, effectFn) => {\r\n\tconst structure = builderStrategies[strategy].structure;\r\n\tconst { defaultStrikes, defaultStrikesData } = getDefaultStrikes();\r\n\r\n\tconst isDateUnified = builderStrategies[strategy].isDateUnified;\r\n\tconst unifiedDate = useState(null);\r\n\tconst separateDates = [\r\n\t\tuseState(null),\r\n\t\tuseState(null),\r\n\t\tuseState(null),\r\n\t\tuseState(null),\r\n\t];\r\n\t\r\n\tconst fieldsDraft = [\r\n\t\t{\r\n\t\t\tdateMs: isDateUnified ? unifiedDate : separateDates[0],\r\n\t\t\tstrike: useState(null),\r\n\t\t\tmarket: useState(null),\r\n\t\t\tstrikes: useState({...defaultStrikes}),\r\n\t\t\tstrikesData: useState({...defaultStrikesData}),\r\n\t\t\tloader: useState(false),\r\n\t\t\tid: 0,\r\n\t\t},\r\n\t\t{\r\n\t\t\tdateMs: isDateUnified ? unifiedDate : separateDates[1],\r\n\t\t\tstrike: useState(null),\r\n\t\t\tmarket: useState(null),\r\n\t\t\tstrikes: useState({...defaultStrikes}),\r\n\t\t\tstrikesData: useState({...defaultStrikesData}),\r\n\t\t\tloader: useState(false),\r\n\t\t\tid: 1,\r\n\t\t},\r\n\t\t{\r\n\t\t\tdateMs: isDateUnified ? unifiedDate : separateDates[2],\r\n\t\t\tstrike: useState(null),\r\n\t\t\tmarket: useState(null),\r\n\t\t\tstrikes: useState({...defaultStrikes}),\r\n\t\t\tstrikesData: useState({...defaultStrikesData}),\r\n\t\t\tloader: useState(false),\r\n\t\t\tid: 2,\r\n\t\t},\r\n\t\t{\r\n\t\t\tdateMs: isDateUnified ? unifiedDate : separateDates[3],\r\n\t\t\tstrike: useState(null),\r\n\t\t\tmarket: useState(null),\r\n\t\t\tstrikes: useState({...defaultStrikes}),\r\n\t\t\tstrikesData: useState({...defaultStrikesData}),\r\n\t\t\tloader: useState(false),\r\n\t\t\tid: 3,\r\n\t\t},\r\n\t];\r\n\tconst fields = fieldsDraft.slice(0, structure.length);\r\n\t\r\n\tfields.forEach((field, i) => {\r\n\t\tfield.clearData = () => {\r\n\t\t\tconst [, setStrikes] = field.strikes;\r\n\t\t\tconst [, setStrikesData] = field.strikesData;\r\n\t\t\tsetStrikes({...defaultStrikes});\r\n\t\t\tsetStrikesData({...defaultStrikesData});\r\n\t\t}\r\n\t\tfield.isCall = Math.abs(structure[i]) === 1;\r\n\t});\r\n\t\r\n\tconst effFactory = (field) => {\r\n\t\treturn [\r\n\t\t\t() => {\r\n\t\t\t\tif (!field) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfield.strike[1](null);\r\n\t\t\t\tif (effectFn && field.dateMs[0]) {\r\n\t\t\t\t\tfield.loader[1](true);\r\n\t\t\t\t\tfield.clearData();\r\n\t\t\t\t\tconst { strikesPromises, data } = effectFn(field, field.isCall);\r\n\t\t\t\t\tPromise.all(strikesPromises).then(() => {\r\n\t\t\t\t\t\tfield.strikes[1]({...data.strikes});\r\n\t\t\t\t\t\tfield.strikesData[1]({...data.strikesData});\r\n\t\t\t\t\t\tfield.loader[1](false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, [field?.dateMs[0]]\r\n\t\t]\r\n\t}\r\n\tuseEffect(...effFactory(fields[0]));\r\n\tuseEffect(...effFactory(fields[1]));\r\n\tuseEffect(...effFactory(fields[2]));\r\n\tuseEffect(...effFactory(fields[3]));\r\n\r\n\treturn fields;\r\n}","import React from 'react';\r\nimport ExchangeTVChart from '../../../options/components/Exchange/ExchangeTVChartOptions';\r\nimport { ARBITRUM } from '../../../gmx-test/lib/legacy';\r\nimport './BuilderChart.scss';\r\n\r\nconst BuilderChart = (props) => {\r\n\tconst {\r\n\t\tinfoTokens,\r\n\t\ttokenSelection,\r\n\t\tsetTokenSelection,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"BuilderChart\">\r\n\t\t\t<ExchangeTVChart\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\tchainId={ARBITRUM}\r\n\t\t\t\ttokenSelection={tokenSelection}\r\n\t\t\t\tsetTokenSelection={setTokenSelection}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BuilderChart;","import React, { useEffect, useState } from 'react';\r\nimport BuilderForm from './BuilderForm/BuilderForm';\r\nimport { ARBITRUM, useLocalStorageByChainId } from '../../gmx-test/lib/legacy';\r\nimport useSWR from 'swr';\r\nimport { CHAI_CONTRACT_BTC, CHAI_CONTRACT_ETH, Chai_ABI } from '../../../components/utils/contracts';\r\nimport { ethers } from 'ethers';\r\nimport { signer } from '../../../components/utils/providers';\r\nimport { getToken, getTokenBySymbol, getTokens } from '../../gmx-test/config/Tokens';\r\nimport { getContract } from '../../gmx-test/config/Addresses';\r\nimport { useInfoTokens } from '../../gmx-test/domain/legacy';\r\nimport BuilderChart from './BuilderChart/BuilderChart';\r\n\r\nconst Builder = (props) => {\r\n\tconst {\r\n\t\twalletAddress,\r\n\t\tconnectWallet,\r\n\t\tinfoTokens,\r\n\t} = props;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Position Builder | DeDeLend\";\r\n\t}, []);\r\n\r\n\tconst [asset, setAsset] = useLocalStorageByChainId(ARBITRUM, \"Asset-option\", \"ETH\");\r\n\tconst [tokenSelection, setTokenSelection] = useState(getTokenBySymbol(ARBITRUM, asset).address);\r\n\tuseEffect(() => {\r\n\t\tsetTokenSelection(getTokenBySymbol(ARBITRUM, asset).address);\r\n\t}, [asset]);\r\n\tuseEffect(() => {\r\n\t\tsetAsset(getToken(ARBITRUM, tokenSelection).symbol)\r\n\t}, [tokenSelection]);\r\n\r\n\tconst chaiAddress = asset === 'ETH'\r\n    ? CHAI_CONTRACT_ETH : CHAI_CONTRACT_BTC;\r\n  const { data: chaiMarkPrice } = useSWR(\r\n    [asset, \"getMarkPrice_Options\", walletAddress],\r\n    {\r\n      fetcher: async () => {\r\n        const contract = new ethers.Contract(chaiAddress, Chai_ABI, signer);\r\n        return await contract.latestAnswer();\r\n      },\r\n      refreshInterval: 5000,\r\n    }\r\n  )\r\n\t\r\n\treturn (\r\n\t\t<div className=\"Builder\">\r\n\t\t\t<BuilderForm\r\n\t\t\t\tasset={asset}\r\n\t\t\t\tsetAsset={setAsset}\r\n\t\t\t\tdates={[]}\r\n\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\tchaiMarkPrice={chaiMarkPrice}\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\tconnectWallet={connectWallet}\r\n\t\t\t/>\r\n\t\t\t<BuilderChart\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\ttokenSelection={tokenSelection}\r\n\t\t\t\tsetTokenSelection={setTokenSelection}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Builder;","import React, { useEffect } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from \"react-router-dom\";\r\nimport Perpetuals from '../views/gmx-test/App/App';\r\nimport { connectWallet } from './utils/wallet';\r\nimport { HOMEPAGE_HREF } from './utils/constants';\r\nimport Options from './../views/options/App/App';\r\nimport { useLocalStorageByChainId } from './../views/gmx-test/lib/legacy';\r\nimport { ARBITRUM } from './../views/options/lib/legacyOptions';\r\nimport Terminal from '../views/Terminal/Terminal';\r\nimport UserProfile from './../views/Terminal/UserProfile/UserProfile';\r\nimport MarketOverview from '../views/Terminal/MarketOverview/MarketOverview';\r\nimport Builder from '../views/Terminal/Builder/Builder';\r\n\r\n\r\nconst AppRouter = ({ walletAddress, connectWallet, infoTokens }) => {\r\n\tconst [path, setPath] = useLocalStorageByChainId(ARBITRUM, \"terminal_path\", HOMEPAGE_HREF);\r\n\r\n\tconst nav = useNavigate();\r\n\tconst loc = useLocation();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loc.pathname === '/terminal') {\r\n\t\t\tnav(HOMEPAGE_HREF);\r\n\t\t} else {\r\n\t\t\tswitch (loc.pathname) {\r\n\t\t\t\tcase \"/terminal/builder\":\r\n\t\t\t\t\tsetPath(\"/terminal/builder\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [loc.pathname]);\r\n\t\r\n\treturn (\r\n\t\t<Routes>\r\n\t\t\t<Route\r\n\t\t\t\tpath=\"/terminal\"\r\n\t\t\t\telement={\r\n\t\t\t\t\t<Terminal />\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{/* <Route\r\n\t\t\t\t\tpath=\"perpetuals\"\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Perpetuals\r\n\t\t\t\t\t\t\tconnectWallet={connectWallet}\r\n\t\t\t\t\t\t\twalletAddress={walletAddress} />\r\n\t\t\t\t\t}\r\n\t\t\t\t/> */}\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"positions\"\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Options\r\n\t\t\t\t\t\t\tconnectWallet={connectWallet}\r\n\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"builder\"\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Builder\r\n\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\t\t\t\tconnectWallet={connectWallet}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* <Route\r\n\t\t\t\t\tpath=\"profile\"\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<UserProfile\r\n\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/> */}\r\n\t\t\t\t{/* <Route\r\n\t\t\t\t\tpath=\"market-overview\"\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<MarketOverview\r\n\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/> */}\r\n\t\t\t</Route>\r\n\t\t\t<Route\r\n\t\t\t\tpath=\"*\"\r\n\t\t\t\telement={<Navigate to={HOMEPAGE_HREF} replace />}\r\n\t\t\t/>\r\n\t\t</Routes>\r\n\t);\r\n};\r\n\r\nexport default AppRouter;","import { createContext } from \"react\";\r\n\r\nexport const GlobalStatsContext = createContext(null)\r\nexport const UserStatsContext = createContext(null)","import React from 'react';\r\n\r\nconst Warning = (props) => {\r\n\treturn (\r\n\t\t<div className=\"warning\">\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Warning;","// Style\r\nimport './style/App.scss'\r\n\r\n// Main\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport AppRouter from './components/AppRouter';\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { UserStatsContext } from './context/context';\r\nimport { GlobalStatsContext } from './context/context';\r\nimport Warning from './components/UI/warning/Warning';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport { cssTransition } from 'react-toastify';\r\nimport EventToastContainer from './views/gmx-test/components/EventToast/EventToastContainer';\r\nimport { i18n } from '@lingui/core';\r\nimport { I18nProvider } from '@lingui/react';\r\nimport { defaultLocale, dynamicActivate } from './views/gmx-test/lib/i18n';\r\nimport { ARBITRUM, CURRENT_PROVIDER_LOCALSTORAGE_KEY, LANGUAGE_LOCALSTORAGE_KEY, SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, activateInjectedProvider, getInjectedHandler } from './views/gmx-test/lib/legacy';\r\nimport SEO from './views/gmx-test/components/Common/SEO';\r\nimport { getTokens } from './views/gmx-test/config/Tokens';\r\nimport useSWR from 'swr';\r\nimport Reader from \"./views/gmx-test/abis/ReaderV2.json\";\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { getContract } from './views/gmx-test/config/Addresses';\r\nimport { fetcher } from './views/gmx-test/lib/contracts/fetcher';\r\nimport { useInfoTokens } from './views/gmx-test/domain/legacy';\r\nimport { Web3ReactProvider } from '@web3-react/core';\r\nimport { Web3Provider } from '@ethersproject/providers';\r\nimport { connectWallet } from './components/utils/wallet';\r\n\r\n\r\nif (\"ethereum\" in window) {\r\n  window.ethereum.autoRefreshOnNetworkChange = false;\r\n}\r\n\r\nfunction getLibrary(provider) {\r\n  const library = new Web3Provider(provider);\r\n  return library;\r\n}\r\n\r\nfunction FullApp() {\r\n\tconst [walletAddress, setWalletAddress] = useState('');\r\n\tconst [registerVisible, setRegisterVisible] = useState(false);\r\n\r\n\tconst Jelly = cssTransition({\r\n\t\tenter: \"jellyIn\",\r\n\t\texit: \"jellyOut\",\r\n\t});\r\n\t\r\n\t// Activating Web3\r\n\tconst { activate } = useWeb3React();\r\n\tconst connectInjectedWallet = getInjectedHandler(activate);\r\n  const attemptActivateWallet = (providerName) => {\r\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\r\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\r\n    activateInjectedProvider(providerName);\r\n    connectInjectedWallet();\r\n  };\r\n\tconst connectWalletJoint = () => {\r\n\t\tconnectWallet(setWalletAddress);\r\n    attemptActivateWallet(\"MetaMask\");\r\n  };\r\n\tuseEffect(() => {\r\n\t\tattemptActivateWallet(\"MetaMask\");\r\n\t}, [walletAddress]);\r\n\r\n\t// Getting infoTokens and balances\r\n\tconst { active, library } = useWeb3React();\r\n\tconst tokens = getTokens(ARBITRUM);\r\n  const tokenAddresses = tokens.map((token) => token.address);\r\n  const readerAddress = getContract(ARBITRUM, \"Reader\");\r\n  const { data: tokenBalances } = useSWR(walletAddress && [walletAddress, ARBITRUM, readerAddress, \"getTokenBalances\"], {\r\n    fetcher: fetcher(library, Reader, [walletAddress, tokenAddresses]),\r\n    refreshInterval: 10 * 1000\r\n  });\r\n  const { infoTokens } = useInfoTokens(library, ARBITRUM, active, tokenBalances);\r\n\t\r\n\treturn (\r\n\t\t<HashRouter>\r\n\t\t\t<I18nProvider i18n={i18n}>\r\n\t\t\t\t<ToastContainer\r\n\t\t\t\t\tlimit={1}\r\n\t\t\t\t\ttransition={Jelly}\r\n\t\t\t\t\tposition=\"bottom-right\"\r\n\t\t\t\t\thideProgressBar={true}\r\n\t\t\t\t\tnewestOnTop={false}\r\n\t\t\t\t\tcloseOnClick={false}\r\n\t\t\t\t\tdraggable={false}\r\n\t\t\t\t\tpauseOnHover={false}\r\n\t\t\t\t/>\r\n\t\t\t\t<EventToastContainer />\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Header walletAddress={walletAddress}\r\n\t\t\t\t\t\tsetWalletAddress={setWalletAddress}\r\n\t\t\t\t\t\tregisterVisible={registerVisible}\r\n\t\t\t\t\t\tsetRegisterVisible={setRegisterVisible}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<main className='_container'>\r\n\t\t\t\t\t\t<AppRouter\r\n\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t\tsetWalletAddress={setWalletAddress}\r\n\t\t\t\t\t\t\tsetRegisterVisible={setRegisterVisible}\r\n\t\t\t\t\t\t\tconnectWallet={connectWalletJoint}\r\n\t\t\t\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</main>\r\n\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</div>\r\n\t\t\t</I18nProvider>\r\n\t\t</HashRouter>\r\n\t)\r\n}\r\n\r\nfunction App() {\r\n\tconst [userStats, setUserStats] = useState({\r\n\t\tbalance: undefined,\r\n\t\tcurBalance: undefined,\r\n\t\tavail: undefined\r\n\t})\r\n\tconst [globalStats, setGlobalStats] = useState(\r\n\t\t{\r\n\t\t\ttotalSupplied: \"\",\r\n\t\t\ttotalBorrowed: \"\",\r\n\t\t\tutilRate: \"\",\r\n\t\t\tavailToBorrow: \"\",\r\n\t\t\tborrowAPY: \"\",\r\n\t\t}\r\n\t)\r\n\t\r\n\tuseEffect(() => {\r\n    const defaultLanguage = localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale;\r\n    dynamicActivate(defaultLanguage);\r\n  }, []);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Web3ReactProvider getLibrary={getLibrary}>\r\n\t\t\t\t<SEO>\r\n\t\t\t\t\t<GlobalStatsContext.Provider value={{\r\n\t\t\t\t\t\tglobalStats,\r\n\t\t\t\t\t\tsetGlobalStats\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<UserStatsContext.Provider value={{\r\n\t\t\t\t\t\t\tuserStats,\r\n\t\t\t\t\t\t\tsetUserStats\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<FullApp />\r\n\t\t\t\t\t\t</UserStatsContext.Provider>\r\n\t\t\t\t\t</GlobalStatsContext.Provider>\r\n\t\t\t\t\t<Warning>\r\n\t\t\t\t\t\tDeDeLend is in alpha. Use at your own risk\r\n\t\t\t\t\t</Warning>\r\n\t\t\t\t</SEO>\r\n\t\t\t</Web3ReactProvider>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>\r\n);\r\n"],"sourceRoot":""}